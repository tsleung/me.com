/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/mermaid@11.4.0/dist/chunks/mermaid.esm.min/architectureDiagram-QTIGHTN5.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t=Object.create,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=(e,t)=>r(e,"name",{value:t,configurable:!0}),l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),u=(e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})},c=(e,t,a,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))!o.call(e,l)&&l!==a&&r(e,l,{get:()=>t[l],enumerable:!(s=n(t,l))||s.enumerable});return e},h=(e,t,r)=>(c(e,t,"default"),r&&c(r,t,"default")),d=(e,n,i)=>(i=null!=e?t(a(e)):{},c(!n&&e&&e.__esModule?i:r(i,"default",{value:e,enumerable:!0}),e));function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){return x(e)||b(e,t)||C(e,t)||w()}function x(e){if(Array.isArray(e))return e}function b(e,t){var r=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{!o&&null!=r.return&&r.return()}finally{if(s)throw i}}return a}}function C(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=C(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=s((function(){}),"F");return{s:i,n:s((function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}),"n"),e:s((function(e){throw e}),"e"),f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:s((function(){r=r.call(e)}),"s"),n:s((function(){var e=r.next();return o=e.done,e}),"n"),e:s((function(e){l=!0,a=e}),"e"),f:s((function(){try{!o&&null!=r.return&&r.return()}finally{if(l)throw a}}),"f")}}s(f,"_typeof"),s(p,"_classCallCheck"),s(g,"_defineProperties"),s(m,"_createClass"),s(y,"_defineProperty$1"),s(v,"_slicedToArray"),s(x,"_arrayWithHoles"),s(b,"_iterableToArrayLimit"),s(C,"_unsupportedIterableToArray"),s(T,"_arrayLikeToArray"),s(w,"_nonIterableRest"),s(k,"_createForOfIteratorHelper");var _=typeof window>"u"?null:window,E=_?_.navigator:null;_&&_.document;var S=f(""),A=f({}),N=f((function(){})),R=typeof HTMLElement>"u"?"undefined":f(HTMLElement),L=s((function(e){return e&&e.instanceString&&M(e.instanceString)?e.instanceString():null}),"instanceStr"),I=s((function(e){return null!=e&&f(e)==S}),"string"),M=s((function(e){return null!=e&&f(e)===N}),"fn"),O=s((function(e){return!z(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)}),"array"),D=s((function(e){return null!=e&&f(e)===A&&!O(e)&&e.constructor===Object}),"plainObject"),P=s((function(e){return null!=e&&f(e)===A}),"object"),F=s((function(e){return null!=e&&f(e)===f(1)&&!isNaN(e)}),"number"),B=s((function(e){return F(e)&&Math.floor(e)===e}),"integer"),$=s((function(e){if("undefined"!==R)return null!=e&&e instanceof HTMLElement}),"htmlElement"),z=s((function(e){return U(e)||G(e)}),"elementOrCollection"),U=s((function(e){return"collection"===L(e)&&e._private.single}),"element"),G=s((function(e){return"collection"===L(e)&&!e._private.single}),"collection"),j=s((function(e){return"core"===L(e)}),"core"),V=s((function(e){return"stylesheet"===L(e)}),"stylesheet"),W=s((function(e){return"event"===L(e)}),"event"),q=s((function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))}),"emptyString"),H=s((function(e){return!(typeof HTMLElement>"u")&&e instanceof HTMLElement}),"domElement"),Y=s((function(e){return D(e)&&F(e.x1)&&F(e.x2)&&F(e.y1)&&F(e.y2)}),"boundingBox"),X=s((function(e){return P(e)&&M(e.then)}),"promise"),K=s((function(){return E&&E.userAgent.match(/msie|trident|edge/i)}),"ms"),Z=s((function(e,t){t||(t=s((function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")}),"keyFn"));var r=s((function r(){var n,i=arguments,a=t.apply(this,i),o=r.cache;return(n=o[a])||(n=o[a]=e.apply(this,i)),n}),"memoizedFn");return r.cache={},r}),"memoize"),Q=Z((function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))})),J=Z((function(e){return e.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))})),ee=Z((function(e,t){return e+t[0].toUpperCase()+t.substring(1)}),(function(e,t){return e+"$"+t})),te=s((function(e){return q(e)?e:e.charAt(0).toUpperCase()+e.substring(1)}),"capitalize"),re="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",ne="rgb[a]?\\(("+re+"[%]?)\\s*,\\s*("+re+"[%]?)\\s*,\\s*("+re+"[%]?)(?:\\s*,\\s*("+re+"))?\\)",ie="rgb[a]?\\((?:"+re+"[%]?)\\s*,\\s*(?:"+re+"[%]?)\\s*,\\s*(?:"+re+"[%]?)(?:\\s*,\\s*(?:"+re+"))?\\)",ae="hsl[a]?\\(("+re+")\\s*,\\s*("+re+"[%])\\s*,\\s*("+re+"[%])(?:\\s*,\\s*("+re+"))?\\)",oe="hsl[a]?\\((?:"+re+")\\s*,\\s*(?:"+re+"[%])\\s*,\\s*(?:"+re+"[%])(?:\\s*,\\s*(?:"+re+"))?\\)",se=s((function(e,t){return e<t?-1:e>t?1:0}),"ascending"),le=s((function(e,t){return-1*se(e,t)}),"descending"),ue=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var n=t[r];if(null!=n)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];e[o]=n[o]}}return e},ce=s((function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,n,i=16;return 4===e.length?(t=parseInt(e[1]+e[1],i),r=parseInt(e[2]+e[2],i),n=parseInt(e[3]+e[3],i)):(t=parseInt(e[1]+e[2],i),r=parseInt(e[3]+e[4],i),n=parseInt(e[5]+e[6],i)),[t,r,n]}}),"hex2tuple"),he=s((function(e){var t,r,n,i,a,o,l,u;function c(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}s(c,"hue2rgb");var h=new RegExp("^"+ae+"$").exec(e);if(h){if((r=parseInt(h[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(n=parseFloat(h[2]))<0||n>100||(n/=100,(i=parseFloat(h[3]))<0||i>100)||(i/=100,void 0!==(a=h[4])&&((a=parseFloat(a))<0||a>1)))return;if(0===n)o=l=u=Math.round(255*i);else{var d=i<.5?i*(1+n):i+n-i*n,f=2*i-d;o=Math.round(255*c(f,d,r+1/3)),l=Math.round(255*c(f,d,r)),u=Math.round(255*c(f,d,r-1/3))}t=[o,l,u,a]}return t}),"hsl2tuple"),de=s((function(e){var t,r=new RegExp("^"+ne+"$").exec(e);if(r){t=[];for(var n=[],i=1;i<=3;i++){var a=r[i];if("%"===a[a.length-1]&&(n[i]=!0),a=parseFloat(a),n[i]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var o=n[1]||n[2]||n[3],s=n[1]&&n[2]&&n[3];if(o&&!s)return;var l=r[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t}),"rgb2tuple"),fe=s((function(e){return ge[e.toLowerCase()]}),"colorname2tuple"),pe=s((function(e){return(O(e)?e:null)||fe(e)||ce(e)||de(e)||he(e)}),"color2tuple"),ge={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},me=s((function(e){for(var t=e.map,r=e.keys,n=r.length,i=0;i<n;i++){var a=r[i];if(D(a))throw Error("Tried to set map with object key");i<r.length-1?(null==t[a]&&(t[a]={}),t=t[a]):t[a]=e.value}}),"setMap"),ye=s((function(e){for(var t=e.map,r=e.keys,n=r.length,i=0;i<n;i++){var a=r[i];if(D(a))throw Error("Tried to get map with object key");if(null==(t=t[a]))return t}return t}),"getMap");function ve(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}s(ve,"isObject");var xe=ve,be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof e<"u"?e:typeof self<"u"?self:{};function Ce(e,t){return e(t={exports:{}},t.exports),t.exports}s(Ce,"createCommonjsModule");var Te="object"==typeof be&&be&&be.Object===Object&&be,we="object"==typeof self&&self&&self.Object===Object&&self,ke=Te||we||Function("return this")(),_e=s((function(){return ke.Date.now()}),"now"),Ee=/\s/;function Se(e){for(var t=e.length;t--&&Ee.test(e.charAt(t)););return t}s(Se,"trimmedEndIndex");var Ae=Se,Ne=/^\s+/;function Re(e){return e&&e.slice(0,Ae(e)+1).replace(Ne,"")}s(Re,"baseTrim");var Le=Re,Ie=ke.Symbol,Me=Object.prototype,Oe=Me.hasOwnProperty,De=Me.toString,Pe=Ie?Ie.toStringTag:void 0;function Fe(e){var t=Oe.call(e,Pe),r=e[Pe];try{e[Pe]=void 0;var n=!0}catch{}var i=De.call(e);return n&&(t?e[Pe]=r:delete e[Pe]),i}s(Fe,"getRawTag");var Be=Fe,$e=Object.prototype.toString;function ze(e){return $e.call(e)}s(ze,"objectToString");var Ue=ze,Ge=Ie?Ie.toStringTag:void 0;function je(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ge&&Ge in Object(e)?Be(e):Ue(e)}s(je,"baseGetTag");var Ve=je;function We(e){return null!=e&&"object"==typeof e}s(We,"isObjectLike");var qe=We;function He(e){return"symbol"==typeof e||qe(e)&&"[object Symbol]"==Ve(e)}s(He,"isSymbol");var Ye=He,Xe=/^[-+]0x[0-9a-f]+$/i,Ke=/^0b[01]+$/i,Ze=/^0o[0-7]+$/i,Qe=parseInt;function Je(e){if("number"==typeof e)return e;if(Ye(e))return NaN;if(xe(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=xe(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Le(e);var r=Ke.test(e);return r||Ze.test(e)?Qe(e.slice(2),r?2:8):Xe.test(e)?NaN:+e}s(Je,"toNumber");var et=Je,tt=Math.max,rt=Math.min;function nt(e,t,r){var n,i,a,o,l,u,c=0,h=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var r=n,a=i;return n=i=void 0,c=t,o=e.apply(a,r)}function g(e){return c=e,l=setTimeout(v,t),h?p(e):o}function m(e){var r=t-(e-u);return d?rt(r,a-(e-c)):r}function y(e){var r=e-u;return void 0===u||r>=t||r<0||d&&e-c>=a}function v(){var e=_e();if(y(e))return x(e);l=setTimeout(v,m(e))}function x(e){return l=void 0,f&&n?p(e):(n=i=void 0,o)}function b(){void 0!==l&&clearTimeout(l),c=0,n=u=i=l=void 0}function C(){return void 0===l?o:x(_e())}function T(){var e=_e(),r=y(e);if(n=arguments,i=this,u=e,r){if(void 0===l)return g(u);if(d)return clearTimeout(l),l=setTimeout(v,t),p(u)}return void 0===l&&(l=setTimeout(v,t)),o}return t=et(t)||0,xe(r)&&(h=!!r.leading,a=(d="maxWait"in r)?tt(et(r.maxWait)||0,t):a,f="trailing"in r?!!r.trailing:f),s(p,"invokeFunc"),s(g,"leadingEdge"),s(m,"remainingWait"),s(y,"shouldInvoke"),s(v,"timerExpired"),s(x,"trailingEdge"),s(b,"cancel"),s(C,"flush"),s(T,"debounced"),T.cancel=b,T.flush=C,T}s(nt,"debounce");var it=nt,at=_?_.performance:null,ot=at&&at.now?function(){return at.now()}:function(){return Date.now()},st=function(){if(_){if(_.requestAnimationFrame)return function(e){_.requestAnimationFrame(e)};if(_.mozRequestAnimationFrame)return function(e){_.mozRequestAnimationFrame(e)};if(_.webkitRequestAnimationFrame)return function(e){_.webkitRequestAnimationFrame(e)};if(_.msRequestAnimationFrame)return function(e){_.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout((function(){e(ot())}),1e3/60)}}(),lt=s((function(e){return st(e)}),"requestAnimationFrame"),ut=ot,ct=9261,ht=5381,dt=s((function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;!(t=e.next()).done;)r=65599*r+t.value|0;return r}),"hashIterableInts"),ft=s((function(e){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct)+e|0}),"hashInt"),pt=s((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht;return(t<<5)+t+e|0}),"hashIntAlt"),gt=s((function(e,t){return 2097152*e+t}),"combineHashes"),mt=s((function(e){return 2097152*e[0]+e[1]}),"combineHashesArray"),yt=s((function(e,t){return[ft(e[0],t[0]),pt(e[1],t[1])]}),"hashArrays"),vt=s((function(e,t){var r={value:0,done:!1},n=0,i=e.length,a={next:s((function(){return n<i?r.value=e[n++]:r.done=!0,r}),"next")};return dt(a,t)}),"hashIntsArray"),xt=s((function(e,t){var r={value:0,done:!1},n=0,i=e.length,a={next:s((function(){return n<i?r.value=e.charCodeAt(n++):r.done=!0,r}),"next")};return dt(a,t)}),"hashString"),bt=s((function(){return Ct(arguments)}),"hashStrings"),Ct=s((function(e){for(var t,r=0;r<e.length;r++){var n=e[r];t=0===r?xt(n):xt(n,t)}return t}),"hashStringsArray"),Tt=!0,wt=null!=console.warn,kt=null!=console.trace,_t=Number.MAX_SAFE_INTEGER||9007199254740991,Et=s((function(){return!0}),"trueify"),St=s((function(){return!1}),"falsify"),At=s((function(){return 0}),"zeroify"),Nt=s((function(){}),"noop"),Rt=s((function(e){throw new Error(e)}),"error"),Lt=s((function(e){if(void 0===e)return Tt;Tt=!!e}),"warnings"),It=s((function(e){Lt()&&(wt?console.warn(e):(console.log(e),kt&&console.trace()))}),"warn"),Mt=s((function(e){return ue({},e)}),"clone"),Ot=s((function(e){return null==e?e:O(e)?e.slice():D(e)?Mt(e):e}),"copy"),Dt=s((function(e){return e.slice()}),"copyArray"),Pt=s((function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t}),"uuid"),Ft={},Bt=s((function(){return Ft}),"staticEmptyObject"),$t=s((function(e){var t=Object.keys(e);return function(r){for(var n={},i=0;i<t.length;i++){var a=t[i],o=r?.[a];n[a]=void 0===o?e[a]:o}return n}}),"defaults"),zt=s((function(e,t,r){for(var n=e.length-1;n>=0&&(e[n]!==t||(e.splice(n,1),!r));n--);}),"removeFromArray"),Ut=s((function(e){e.splice(0,e.length)}),"clearArray"),Gt=s((function(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.push(n)}}),"push"),jt=s((function(e,t,r){return r&&(t=ee(r,t)),e[t]}),"getPrefixedProperty"),Vt=s((function(e,t,r,n){r&&(t=ee(r,t)),e[t]=n}),"setPrefixedProperty"),Wt=function(){function e(){p(this,e),this._obj={}}return s(e,"ObjectMap"),m(e,[{key:"set",value:s((function(e,t){return this._obj[e]=t,this}),"set")},{key:"delete",value:s((function(e){return this._obj[e]=void 0,this}),"_delete")},{key:"clear",value:s((function(){this._obj={}}),"clear")},{key:"has",value:s((function(e){return void 0!==this._obj[e]}),"has")},{key:"get",value:s((function(e){return this._obj[e]}),"get")}]),e}(),qt=typeof Map<"u"?Map:Wt,Ht=function(){function e(t){if(p(this,e),this._obj=Object.create(null),this.size=0,null!=t){var r;r=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var n=0;n<r.length;n++)this.add(r[n])}}return s(e,"ObjectSet"),m(e,[{key:"instanceString",value:s((function(){return"set"}),"instanceString")},{key:"add",value:s((function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}),"add")},{key:"delete",value:s((function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}),"_delete")},{key:"clear",value:s((function(){this._obj=Object.create(null)}),"clear")},{key:"has",value:s((function(e){return 1===this._obj[e]}),"has")},{key:"toArray",value:s((function(){var e=this;return Object.keys(this._obj).filter((function(t){return e.has(t)}))}),"toArray")},{key:"forEach",value:s((function(e,t){return this.toArray().forEach(e,t)}),"forEach")}]),e}(),Yt="undefined"!==(typeof Set>"u"?"undefined":f(Set))?Set:Ht,Xt=s((function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e&&void 0!==t&&j(e)){var n=t.group;if(null==n&&(n=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===n||"edges"===n){this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:n,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===n:!!t.pannable,active:!1,classes:new Yt,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),t.renderedPosition){var a=t.renderedPosition,o=e.pan(),s=e.zoom();i.position={x:(a.x-o.x)/s,y:(a.y-o.y)/s}}var l=[];O(t.classes)?l=t.classes:I(t.classes)&&(l=t.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var h=l[u];!h||""===h||i.classes.add(h)}this.createEmitter();var d=t.style||t.css;d&&(It("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d)),(void 0===r||r)&&this.restore()}else Rt("An element must be of type `nodes` or `edges`; you specified `"+n+"`")}else Rt("An element must have a core reference and parameters set")}),"Element"),Kt=s((function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},s((function(t,r,n){var i;D(t)&&!z(t)&&(t=(i=t).roots||i.root,r=i.visit,n=i.directed),n=2!==arguments.length||M(r)?n:r,r=M(r)?r:function(){};for(var a,o=this._private.cy,l=t=I(t)?this.filter(t):t,u=[],c=[],h={},d={},f={},p=0,g=this.byGroup(),m=g.nodes,y=g.edges,v=0;v<l.length;v++){var x=l[v],b=x.id();x.isNode()&&(u.unshift(x),e.bfs&&(f[b]=!0,c.push(x)),d[b]=0)}for(var C=s((function(){var t=e.bfs?u.shift():u.pop(),i=t.id();if(e.dfs){if(f[i])return"continue";f[i]=!0,c.push(t)}var o,s=d[i],l=h[i],g=null!=l?l.source():null,v=null!=l?l.target():null,x=null==l?void 0:t.same(g)?v[0]:g[0];if(!0===(o=r(t,l,x,p++,s)))return a=t,"break";if(!1===o)return"break";for(var b=t.connectedEdges().filter((function(e){return(!n||e.source().same(t))&&y.has(e)})),C=0;C<b.length;C++){var T=b[C],w=T.connectedNodes().filter((function(e){return!e.same(t)&&m.has(e)})),k=w.id();0!==w.length&&!f[k]&&(w=w[0],u.push(w),e.bfs&&(f[k]=!0,c.push(w)),h[k]=T,d[k]=d[i]+1)}}),"_loop");0!==u.length;){var T=C();if("continue"!==T&&"break"===T)break}for(var w=o.collection(),k=0;k<c.length;k++){var _=c[k],E=h[_.id()];null!=E&&w.push(E),w.push(_)}return{path:o.collection(w),found:o.collection(a)}}),"searchFn")}),"defineSearch"),Zt={breadthFirstSearch:Kt({bfs:!0}),depthFirstSearch:Kt({dfs:!0})};Zt.bfs=Zt.breadthFirstSearch,Zt.dfs=Zt.depthFirstSearch;var Qt=Ce((function(e,t){(function(){var t,r,n,i,a,o,l,u,c,h,d,f,p,g,m;n=Math.floor,h=Math.min,r=s((function(e,t){return e<t?-1:e>t?1:0}),"defaultCmp"),c=s((function(e,t,i,a,o){var s;if(null==i&&(i=0),null==o&&(o=r),i<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);i<a;)o(t,e[s=n((i+a)/2)])<0?a=s:i=s+1;return[].splice.apply(e,[i,i-i].concat(t)),t}),"insort"),o=s((function(e,t,n){return null==n&&(n=r),e.push(t),g(e,0,e.length-1,n)}),"heappush"),a=s((function(e,t){var n,i;return null==t&&(t=r),n=e.pop(),e.length?(i=e[0],e[0]=n,m(e,0,t)):i=n,i}),"heappop"),u=s((function(e,t,n){var i;return null==n&&(n=r),i=e[0],e[0]=t,m(e,0,n),i}),"heapreplace"),l=s((function(e,t,n){var i;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(t=(i=[e[0],t])[0],e[0]=i[1],m(e,0,n)),t}),"heappushpop"),i=s((function(e,t){var i,a,o,s,l,u;for(null==t&&(t=r),s=function(){u=[];for(var t=0,r=n(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)u.push(t);return u}.apply(this).reverse(),l=[],a=0,o=s.length;a<o;a++)i=s[a],l.push(m(e,i,t));return l}),"heapify"),p=s((function(e,t,n){var i;if(null==n&&(n=r),-1!==(i=e.indexOf(t)))return g(e,0,i,n),m(e,i,n)}),"updateItem"),d=s((function(e,t,n){var a,o,s,u,c;if(null==n&&(n=r),!(o=e.slice(0,t)).length)return o;for(i(o,n),s=0,u=(c=e.slice(t)).length;s<u;s++)a=c[s],l(o,a,n);return o.sort(n).reverse()}),"nlargest"),f=s((function(e,t,n){var o,s,l,u,d,f,p,g,m;if(null==n&&(n=r),10*t<=e.length){if(!(l=e.slice(0,t).sort(n)).length)return l;for(s=l[l.length-1],u=0,f=(p=e.slice(t)).length;u<f;u++)n(o=p[u],s)<0&&(c(l,o,0,null,n),l.pop(),s=l[l.length-1]);return l}for(i(e,n),m=[],d=0,g=h(t,e.length);0<=g?d<g:d>g;0<=g?++d:--d)m.push(a(e,n));return m}),"nsmallest"),g=s((function(e,t,n,i){var a,o,s;for(null==i&&(i=r),a=e[n];n>t&&i(a,o=e[s=n-1>>1])<0;)e[n]=o,n=s;return e[n]=a}),"_siftdown"),m=s((function(e,t,n){var i,a,o,s,l;for(null==n&&(n=r),a=e.length,l=t,o=e[t],i=2*t+1;i<a;)(s=i+1)<a&&!(n(e[i],e[s])<0)&&(i=s),e[t]=e[i],i=2*(t=i)+1;return e[t]=o,g(e,l,t,n)}),"_siftup"),t=function(){function e(e){this.cmp=e??r,this.nodes=[]}return e.push=o,e.pop=a,e.replace=u,e.pushpop=l,e.heapify=i,e.updateItem=p,e.nlargest=d,e.nsmallest=f,s(e,"Heap"),e.prototype.push=function(e){return o(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return l(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),e.exports=t}).call(be)})),Jt=Qt,er=$t({root:null,weight:s((function(e){return 1}),"weight"),directed:!1}),tr={dijkstra:s((function(e){if(!D(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var r=er(e),n=r.root,i=r.weight,a=r.directed,o=this,l=i,u=I(n)?this.filter(n)[0]:n[0],c={},h={},d={},f=this.byGroup(),p=f.nodes,g=f.edges;g.unmergeBy((function(e){return e.isLoop()}));for(var m=s((function(e){return c[e.id()]}),"getDist"),y=s((function(e,t){c[e.id()]=t,v.updateItem(e)}),"setDist"),v=new Jt((function(e,t){return m(e)-m(t)})),x=0;x<p.length;x++){var b=p[x];c[b.id()]=b.same(u)?0:1/0,v.push(b)}for(var C=s((function(e,t){for(var r,n=(a?e.edgesTo(t):e.edgesWith(t)).intersect(g),i=1/0,o=0;o<n.length;o++){var s=n[o],u=l(s);(u<i||!r)&&(i=u,r=s)}return{edge:r,dist:i}}),"distBetween");v.size()>0;){var T=v.pop(),w=m(T),k=T.id();if(d[k]=w,w!==1/0)for(var _=T.neighborhood().intersect(p),E=0;E<_.length;E++){var S=_[E],A=S.id(),N=C(T,S),R=w+N.dist;R<m(S)&&(y(S,R),h[A]={node:T,edge:N.edge})}}return{distanceTo:s((function(e){var t=I(e)?p.filter(e)[0]:e[0];return d[t.id()]}),"distanceTo"),pathTo:s((function(e){var t=I(e)?p.filter(e)[0]:e[0],r=[],n=t,i=n.id();if(t.length>0)for(r.unshift(t);h[i];){var a=h[i];r.unshift(a.edge),r.unshift(a.node),i=(n=a.node).id()}return o.spawn(r)}),"pathTo")}}),"dijkstra")},rr={kruskal:s((function(e){e=e||function(e){return 1};for(var t=this.byGroup(),r=t.nodes,n=t.edges,i=r.length,a=new Array(i),o=r,l=s((function(e){for(var t=0;t<a.length;t++){if(a[t].has(e))return t}}),"findSetIndex"),u=0;u<i;u++)a[u]=this.spawn(r[u]);for(var c=n.sort((function(t,r){return e(t)-e(r)})),h=0;h<c.length;h++){var d=c[h],f=d.source()[0],p=d.target()[0],g=l(f),m=l(p),y=a[g],v=a[m];g!==m&&(o.merge(d),y.merge(v),a.splice(m,1))}return o}),"kruskal")},nr=$t({root:null,goal:null,weight:s((function(e){return 1}),"weight"),heuristic:s((function(e){return 0}),"heuristic"),directed:!1}),ir={aStar:s((function(e){var t=this.cy(),r=nr(e),n=r.root,i=r.goal,a=r.heuristic,o=r.directed,l=r.weight;n=t.collection(n)[0],i=t.collection(i)[0];var u,c,h=n.id(),d=i.id(),f={},p={},g={},m=new Jt((function(e,t){return p[e.id()]-p[t.id()]})),y=new Yt,v={},x={},b=s((function(e,t){m.push(e),y.add(t)}),"addToOpenSet"),C=s((function(){u=m.pop(),c=u.id(),y.delete(c)}),"popFromOpenSet"),T=s((function(e){return y.has(e)}),"isInOpenSet");b(n,h),f[h]=0,p[h]=a(n);for(var w=0;m.size()>0;){if(C(),w++,c===d){for(var k=[],_=i,E=d,S=x[E];k.unshift(_),null!=S&&k.unshift(S),null!=(_=v[E]);)S=x[E=_.id()];return{found:!0,distance:f[c],path:this.spawn(k),steps:w}}g[c]=!0;for(var A=u._private.edges,N=0;N<A.length;N++){var R=A[N];if(this.hasElementWithId(R.id())&&(!o||R.data("source")===c)){var L=R.source(),I=R.target(),M=L.id()!==c?L:I,O=M.id();if(this.hasElementWithId(O)&&!g[O]){var D=f[c]+l(R);if(!T(O)){f[O]=D,p[O]=D+a(M),b(M,O),v[O]=u,x[O]=R;continue}D<f[O]&&(f[O]=D,p[O]=D+a(M),v[O]=u,x[O]=R)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}),"aStar")},ar=$t({weight:s((function(e){return 1}),"weight"),directed:!1}),or={floydWarshall:s((function(e){for(var t=this.cy(),r=ar(e),n=r.weight,i=r.directed,a=n,o=this.byGroup(),l=o.nodes,u=o.edges,c=l.length,h=c*c,d=s((function(e){return l.indexOf(e)}),"indexOf"),f=s((function(e){return l[e]}),"atIndex"),p=new Array(h),g=0;g<h;g++){var m=g%c,y=(g-m)/c;p[g]=y===m?0:1/0}for(var v=new Array(h),x=new Array(h),b=0;b<u.length;b++){var C=u[b],T=C.source()[0],w=C.target()[0];if(T!==w){var k=d(T),_=d(w),E=k*c+_,S=a(C);if(p[E]>S&&(p[E]=S,v[E]=_,x[E]=C),!i){var A=_*c+k;!i&&p[A]>S&&(p[A]=S,v[A]=k,x[A]=C)}}}for(var N=0;N<c;N++)for(var R=0;R<c;R++)for(var L=R*c+N,M=0;M<c;M++){var O=R*c+M,D=N*c+M;p[L]+p[D]<p[O]&&(p[O]=p[L]+p[D],v[O]=v[L])}var P=s((function(e){return(I(e)?t.filter(e):e)[0]}),"getArgEle"),F=s((function(e){return d(P(e))}),"indexOfArgEle"),B={distance:s((function(e,t){var r=F(e),n=F(t);return p[r*c+n]}),"distance"),path:s((function(e,r){var n=F(e),i=F(r),a=f(n);if(n===i)return a.collection();if(null==v[n*c+i])return t.collection();var o,s=t.collection(),l=n;for(s.merge(a);n!==i;)l=n,n=v[n*c+i],o=x[l*c+n],s.merge(o),s.merge(f(n));return s}),"path")};return B}),"floydWarshall")},sr=$t({weight:s((function(e){return 1}),"weight"),directed:!1,root:null}),lr={bellmanFord:s((function(e){var t=this,r=sr(e),n=r.weight,i=r.directed,a=r.root,o=n,l=this,u=this.cy(),c=this.byGroup(),h=c.edges,d=c.nodes,f=d.length,p=new qt,g=!1,m=[];a=u.collection(a)[0],h.unmergeBy((function(e){return e.isLoop()}));for(var y=h.length,v=s((function(e){var t=p.get(e.id());return t||(t={},p.set(e.id(),t)),t}),"getInfo"),x=s((function(e){return(I(e)?u.$(e):e)[0]}),"getNodeFromTo"),b=s((function(e){return v(x(e)).dist}),"distanceTo"),C=s((function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=[],i=x(e);;){if(null==i)return t.spawn();var o=v(i),s=o.edge,u=o.pred;if(n.unshift(i[0]),i.same(r)&&n.length>0)break;null!=s&&n.unshift(s),i=u}return l.spawn(n)}),"pathTo"),T=0;T<f;T++){var w=d[T],k=v(w);w.same(a)?k.dist=0:k.dist=1/0,k.pred=null,k.edge=null}for(var _=!1,E=s((function(e,t,r,n,i,a){var o=n.dist+a;o<i.dist&&!r.same(n.edge)&&(i.dist=o,i.pred=e,i.edge=r,_=!0)}),"checkForEdgeReplacement"),S=1;S<f;S++){_=!1;for(var A=0;A<y;A++){var N=h[A],R=N.source(),L=N.target(),M=o(N),O=v(R),D=v(L);E(R,L,N,O,D,M),i||E(L,R,N,D,O,M)}if(!_)break}if(_)for(var P=[],F=0;F<y;F++){var B=h[F],$=B.source(),z=B.target(),U=o(B),G=v($).dist,j=v(z).dist;if(G+U<j||!i&&j+U<G){if(g||(It("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),!1===e.findNegativeWeightCycles)break;var V=[];G+U<j&&V.push($),!i&&j+U<G&&V.push(z);for(var W=V.length,q=0;q<W;q++){var H=V[q],Y=[H];Y.push(v(H).edge);for(var X=v(H).pred;-1===Y.indexOf(X);)Y.push(X),Y.push(v(X).edge),X=v(X).pred;for(var K=(Y=Y.slice(Y.indexOf(X)))[0].id(),Z=0,Q=2;Q<Y.length;Q+=2)Y[Q].id()<K&&(K=Y[Q].id(),Z=Q);(Y=Y.slice(Z).concat(Y.slice(0,Z))).push(Y[0]);var J=Y.map((function(e){return e.id()})).join(",");-1===P.indexOf(J)&&(m.push(l.spawn(Y)),P.push(J))}}}return{distanceTo:b,pathTo:C,hasNegativeWeightCycle:g,negativeWeightCycles:m}}),"bellmanFord")},ur=Math.sqrt(2),cr=s((function(e,t,r){0===r.length&&Rt("Karger-Stein must be run on a connected (sub)graph");for(var n=r[e],i=n[1],a=n[2],o=t[i],s=t[a],l=r,u=l.length-1;u>=0;u--){var c=l[u],h=c[1],d=c[2];(t[h]===o&&t[d]===s||t[h]===s&&t[d]===o)&&l.splice(u,1)}for(var f=0;f<l.length;f++){var p=l[f];p[1]===s?(l[f]=p.slice(),l[f][1]=o):p[2]===s&&(l[f]=p.slice(),l[f][2]=o)}for(var g=0;g<t.length;g++)t[g]===s&&(t[g]=o);return l}),"collapse"),hr=s((function(e,t,r,n){for(;r>n;){var i=Math.floor(Math.random()*t.length);t=cr(i,e,t),r--}return t}),"contractUntil"),dr={kargerStein:s((function(){var e=this,t=this.byGroup(),r=t.nodes,n=t.edges;n.unmergeBy((function(e){return e.isLoop()}));var i=r.length,a=n.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/ur);if(!(i<2)){for(var u=[],c=0;c<a;c++){var h=n[c];u.push([c,r.indexOf(h.source()),r.indexOf(h.target())])}for(var d=1/0,f=[],p=new Array(i),g=new Array(i),m=new Array(i),y=s((function(e,t){for(var r=0;r<i;r++)t[r]=e[r]}),"copyNodesMap"),v=0;v<=o;v++){for(var x=0;x<i;x++)g[x]=x;var b=hr(g,u.slice(),i,l),C=b.slice();y(g,m);var T=hr(g,b,l,2),w=hr(m,C,l,2);T.length<=w.length&&T.length<d?(d=T.length,f=T,y(g,p)):w.length<=T.length&&w.length<d&&(d=w.length,f=w,y(m,p))}for(var k=this.spawn(f.map((function(e){return n[e[0]]}))),_=this.spawn(),E=this.spawn(),S=p[0],A=0;A<p.length;A++){var N=p[A],R=r[A];N===S?_.merge(R):E.merge(R)}var L=s((function(t){var r=e.spawn();return t.forEach((function(t){r.merge(t),t.connectedEdges().forEach((function(t){e.contains(t)&&!k.contains(t)&&r.merge(t)}))})),r}),"constructComponent"),I=[L(_),L(E)];return{cut:k,components:I,partition1:_,partition2:E}}Rt("At least 2 nodes are required for Karger-Stein algorithm")}),"kargerStein")},fr=s((function(e){return{x:e.x,y:e.y}}),"copyPosition"),pr=s((function(e,t,r){return{x:e.x*t+r.x,y:e.y*t+r.y}}),"modelToRenderedPosition"),gr=s((function(e,t,r){return{x:(e.x-r.x)/t,y:(e.y-r.y)/t}}),"renderedToModelPosition"),mr=s((function(e){return{x:e[0],y:e[1]}}),"array2point"),yr=s((function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=1/0,i=t;i<r;i++){var a=e[i];isFinite(a)&&(n=Math.min(a,n))}return n}),"min"),vr=s((function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=-1/0,i=t;i<r;i++){var a=e[i];isFinite(a)&&(n=Math.max(a,n))}return n}),"max"),xr=s((function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=0,i=0,a=t;a<r;a++){var o=e[a];isFinite(o)&&(n+=o,i++)}return n/i}),"mean"),br=s((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];!(arguments.length>3&&void 0!==arguments[3])||arguments[3]?e=e.slice(t,r):(r<e.length&&e.splice(r,e.length-r),t>0&&e.splice(0,t));for(var a=0,o=e.length-1;o>=0;o--){var s=e[o];i?isFinite(s)||(e[o]=-1/0,a++):e.splice(o,1)}n&&e.sort((function(e,t){return e-t}));var l=e.length,u=Math.floor(l/2);return l%2!=0?e[u+1+a]:(e[u-1+a]+e[u+a])/2}),"median"),Cr=s((function(e){return Math.PI*e/180}),"deg2rad"),Tr=s((function(e,t){return Math.atan2(t,e)-Math.PI/2}),"getAngleFromDisp"),wr=Math.log2||function(e){return Math.log(e)/Math.log(2)},kr=s((function(e){return e>0?1:e<0?-1:0}),"signum"),_r=s((function(e,t){return Math.sqrt(Er(e,t))}),"dist"),Er=s((function(e,t){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n}),"sqdist"),Sr=s((function(e){for(var t=e.length,r=0,n=0;n<t;n++)r+=e[n];for(var i=0;i<t;i++)e[i]=e[i]/r;return e}),"inPlaceSumNormalize"),Ar=s((function(e,t,r,n){return(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*r}),"qbezierAt"),Nr=s((function(e,t,r,n){return{x:Ar(e.x,t.x,r.x,n),y:Ar(e.y,t.y,r.y,n)}}),"qbezierPtAt"),Rr=s((function(e,t,r,n){var i=t.x-e.x,a=t.y-e.y,o=_r(e,t),s=i/o,l=a/o;return r=r??0,n=n??r*o,{x:e.x+s*n,y:e.y+l*n}}),"lineAt"),Lr=s((function(e,t,r){return Math.max(e,Math.min(r,t))}),"bound"),Ir=s((function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}}),"makeBoundingBox"),Mr=s((function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}}),"copyBoundingBox"),Or=s((function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0}),"clearBoundingBox"),Dr=s((function(e,t,r){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+r,y2:e.y2+r,w:e.w,h:e.h}}),"shiftBoundingBox"),Pr=s((function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1}),"updateBoundingBox"),Fr=s((function(e,t,r){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1}),"expandBoundingBoxByPoint"),Br=s((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e}),"expandBoundingBox"),$r=s((function(e){var t,r,n,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===a.length)t=r=n=i=a[0];else if(2===a.length)t=n=a[0],i=r=a[1];else if(4===a.length){var o=v(a,4);t=o[0],r=o[1],n=o[2],i=o[3]}return e.x1-=i,e.x2+=r,e.y1-=t,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e}),"expandBoundingBoxSides"),zr=s((function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1}),"assignBoundingBox"),Ur=s((function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)}),"boundingBoxesIntersect"),Gr=s((function(e,t,r){return e.x1<=t&&t<=e.x2&&e.y1<=r&&r<=e.y2}),"inBoundingBox"),jr=s((function(e,t){return Gr(e,t.x,t.y)}),"pointInBoundingBox"),Vr=s((function(e,t){return Gr(e,t.x1,t.y1)&&Gr(e,t.x2,t.y2)}),"boundingBoxInBoundingBox"),Wr=s((function(e,t,r,n,i,a,o){var s,l,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",c="auto"===u?gn(i,a):u,h=i/2,d=a/2,f=(c=Math.min(c,h,d))!==h,p=c!==d;if(f){var g=n-d-o;if((s=ln(e,t,r,n,r-h+c-o,g,r+h-c+o,g,!1)).length>0)return s}if(p){var m=r+h+o;if((s=ln(e,t,r,n,m,n-d+c-o,m,n+d-c+o,!1)).length>0)return s}if(f){var y=n+d+o;if((s=ln(e,t,r,n,r-h+c-o,y,r+h-c+o,y,!1)).length>0)return s}if(p){var v=r-h-o;if((s=ln(e,t,r,n,v,n-d+c-o,v,n+d-c+o,!1)).length>0)return s}var x=r-h+c,b=n-d+c;if((l=on(e,t,r,n,x,b,c+o)).length>0&&l[0]<=x&&l[1]<=b)return[l[0],l[1]];var C=r+h-c,T=n-d+c;if((l=on(e,t,r,n,C,T,c+o)).length>0&&l[0]>=C&&l[1]<=T)return[l[0],l[1]];var w=r+h-c,k=n+d-c;if((l=on(e,t,r,n,w,k,c+o)).length>0&&l[0]>=w&&l[1]>=k)return[l[0],l[1]];var _=r-h+c,E=n+d-c;return(l=on(e,t,r,n,_,E,c+o)).length>0&&l[0]<=_&&l[1]>=E?[l[0],l[1]]:[]}),"roundRectangleIntersectLine"),qr=s((function(e,t,r,n,i,a,o){var s=o,l=Math.min(r,i),u=Math.max(r,i),c=Math.min(n,a),h=Math.max(n,a);return l-s<=e&&e<=u+s&&c-s<=t&&t<=h+s}),"inLineVicinity"),Hr=s((function(e,t,r,n,i,a,o,s,l){var u=Math.min(r,o,i)-l,c=Math.max(r,o,i)+l,h=Math.min(n,s,a)-l,d=Math.max(n,s,a)+l;return!(e<u||e>c||t<h||t>d)}),"inBezierVicinity"),Yr=s((function(e,t,r,n){var i=t*t-4*e*(r-=n);if(i<0)return[];var a=Math.sqrt(i),o=2*e;return[(-t+a)/o,(-t-a)/o]}),"solveQuadratic"),Xr=s((function(e,t,r,n,i){var a,o,s,l,u,c,h,d;return 0===e&&(e=1e-5),s=-27*(n/=e)+(t/=e)*(9*(r/=e)-t*t*2),a=(o=(3*r-t*t)/9)*o*o+(s/=54)*s,i[1]=0,h=t/3,a>0?(u=(u=s+Math.sqrt(a))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(a))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+u+c,h+=(u+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+u)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===a?(d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*d-h,void(i[4]=i[2]=-(d+h))):(l=(o=-o)*o*o,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(o),i[0]=-h+d*Math.cos(l/3),i[2]=-h+d*Math.cos((l+2*Math.PI)/3),void(i[4]=-h+d*Math.cos((l+4*Math.PI)/3))))}),"solveCubic"),Kr=s((function(e,t,r,n,i,a,o,s){var l=[];Xr(1*r*r-4*r*i+2*r*o+4*i*i-4*i*o+o*o+n*n-4*n*a+2*n*s+4*a*a-4*a*s+s*s,9*r*i-3*r*r-3*r*o-6*i*i+3*i*o+9*n*a-3*n*n-3*n*s-6*a*a+3*a*s,3*r*r-6*r*i+r*o-r*e+2*i*i+2*i*e-o*e+3*n*n-6*n*a+n*s-n*t+2*a*a+2*a*t-s*t,1*r*i-r*r+r*e-i*e+n*a-n*n+n*t-a*t,l);for(var u=[],c=0;c<6;c+=2)Math.abs(l[c+1])<1e-7&&l[c]>=0&&l[c]<=1&&u.push(l[c]);u.push(1),u.push(0);for(var h,d,f,p=-1,g=0;g<u.length;g++)h=Math.pow(1-u[g],2)*r+2*(1-u[g])*u[g]*i+u[g]*u[g]*o,d=Math.pow(1-u[g],2)*n+2*(1-u[g])*u[g]*a+u[g]*u[g]*s,f=Math.pow(h-e,2)+Math.pow(d-t,2),p>=0?f<p&&(p=f):p=f;return p}),"sqdistToQuadraticBezier"),Zr=s((function(e,t,r,n,i,a){var o=[e-r,t-n],s=[i-r,a-n],l=s[0]*s[0]+s[1]*s[1],u=o[0]*o[0]+o[1]*o[1],c=o[0]*s[0]+o[1]*s[1],h=c*c/l;return c<0?u:h>l?(e-i)*(e-i)+(t-a)*(t-a):u-h}),"sqdistToFiniteLine"),Qr=s((function(e,t,r){for(var n,i,a,o,s=0,l=0;l<r.length/2;l++)if(n=r[2*l],i=r[2*l+1],l+1<r.length/2?(a=r[2*(l+1)],o=r[2*(l+1)+1]):(a=r[2*(l+1-r.length/2)],o=r[2*(l+1-r.length/2)+1]),n!=e||a!=e){if(!(n>=e&&e>=a||n<=e&&e<=a))continue;(e-n)/(a-n)*(o-i)+i>t&&s++}return s%2!=0}),"pointInsidePolygonPoints"),Jr=s((function(e,t,r,n,i,a,o,s,l){var u,c,h=new Array(r.length);null!=s[0]?(u=Math.atan(s[1]/s[0]),s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=s;for(var d=Math.cos(-u),f=Math.sin(-u),p=0;p<h.length/2;p++)h[2*p]=a/2*(r[2*p]*d-r[2*p+1]*f),h[2*p+1]=o/2*(r[2*p+1]*d+r[2*p]*f),h[2*p]+=n,h[2*p+1]+=i;if(l>0){var g=rn(h,-l);c=tn(g)}else c=h;return Qr(e,t,c)}),"pointInsidePolygon"),en=s((function(e,t,r,n,i,a,o,s){for(var l=new Array(2*r.length),u=0;u<s.length;u++){var c=s[u];if(l[4*u+0]=c.startX,l[4*u+1]=c.startY,l[4*u+2]=c.stopX,l[4*u+3]=c.stopY,Math.pow(c.cx-e,2)+Math.pow(c.cy-t,2)<=Math.pow(c.radius,2))return!0}return Qr(e,t,l)}),"pointInsideRoundPolygon"),tn=s((function(e){for(var t,r,n,i,a,o,s,l,u=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],r=e[4*c+1],n=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(a=e[4*(c+1)],o=e[4*(c+1)+1],s=e[4*(c+1)+2],l=e[4*(c+1)+3]):(a=e[0],o=e[1],s=e[2],l=e[3]);var h=ln(t,r,n,i,a,o,s,l,!0);u[2*c]=h[0],u[2*c+1]=h[1]}return u}),"joinLines"),rn=s((function(e,t){for(var r,n,i,a,o=new Array(2*e.length),s=0;s<e.length/2;s++){r=e[2*s],n=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],a=e[2*(s+1)+1]):(i=e[0],a=e[1]);var l=a-n,u=-(i-r),c=Math.sqrt(l*l+u*u),h=l/c,d=u/c;o[4*s]=r+h*t,o[4*s+1]=n+d*t,o[4*s+2]=i+h*t,o[4*s+3]=a+d*t}return o}),"expandPolygon"),nn=s((function(e,t,r,n,i,a){var o=r-e,s=n-t;o/=i,s/=a;var l=Math.sqrt(o*o+s*s),u=l-1;if(u<0)return[];var c=u/l;return[(r-e)*c+e,(n-t)*c+t]}),"intersectLineEllipse"),an=s((function(e,t,r,n,i,a,o){return e-=i,t-=a,(e/=r/2+o)*e+(t/=n/2+o)*t<=1}),"checkInEllipse"),on=s((function(e,t,r,n,i,a,o){var s=[r-e,n-t],l=[e-i,t-a],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),h=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-o*o);if(h<0)return[];var d=(-c+Math.sqrt(h))/(2*u),f=(-c-Math.sqrt(h))/(2*u),p=Math.min(d,f),g=Math.max(d,f),m=[];if(p>=0&&p<=1&&m.push(p),g>=0&&g<=1&&m.push(g),0===m.length)return[];var y=m[0]*s[0]+e,v=m[0]*s[1]+t;return m.length>1?m[0]==m[1]?[y,v]:[y,v,m[1]*s[0]+e,m[1]*s[1]+t]:[y,v]}),"intersectLineCircle"),sn=s((function(e,t,r){return t<=e&&e<=r||r<=e&&e<=t?e:e<=t&&t<=r||r<=t&&t<=e?t:r}),"midOfThree"),ln=s((function(e,t,r,n,i,a,o,s,l){var u=e-i,c=r-e,h=o-i,d=t-a,f=n-t,p=s-a,g=h*d-p*u,m=c*d-f*u,y=p*c-h*f;if(0!==y){var v=g/y,x=m/y,b=-.001;return b<=v&&v<=1.001&&b<=x&&x<=1.001||l?[e+v*c,t+v*f]:[]}return 0===g||0===m?sn(e,r,o)===o?[o,s]:sn(e,r,i)===i?[i,a]:sn(i,o,r)===r?[r,n]:[]:[]}),"finiteLinesIntersect"),un=s((function(e,t,r,n,i,a,o,s){var l,u,c=[],h=new Array(r.length),d=!0;if(null==a&&(d=!1),d){for(var f=0;f<h.length/2;f++)h[2*f]=r[2*f]*a+n,h[2*f+1]=r[2*f+1]*o+i;if(s>0){var p=rn(h,-s);u=tn(p)}else u=h}else u=r;for(var g,m,y,v,x=0;x<u.length/2;x++)g=u[2*x],m=u[2*x+1],x<u.length/2-1?(y=u[2*(x+1)],v=u[2*(x+1)+1]):(y=u[0],v=u[1]),0!==(l=ln(e,t,n,i,g,m,y,v)).length&&c.push(l[0],l[1]);return c}),"polygonIntersectLine"),cn=s((function(e,t,r,n,i,a,o,s,l){var u,c=[],h=new Array(2*r.length);l.forEach((function(r,a){0===a?(h[h.length-2]=r.startX,h[h.length-1]=r.startY):(h[4*a-2]=r.startX,h[4*a-1]=r.startY),h[4*a]=r.stopX,h[4*a+1]=r.stopY,0!==(u=on(e,t,n,i,r.cx,r.cy,r.radius)).length&&c.push(u[0],u[1])}));for(var d=0;d<h.length/4;d++)0!==(u=ln(e,t,n,i,h[4*d],h[4*d+1],h[4*d+2],h[4*d+3],!1)).length&&c.push(u[0],u[1]);if(c.length>2){for(var f=[c[0],c[1]],p=Math.pow(f[0]-e,2)+Math.pow(f[1]-t,2),g=1;g<c.length/2;g++){var m=Math.pow(c[2*g]-e,2)+Math.pow(c[2*g+1]-t,2);m<=p&&(f[0]=c[2*g],f[1]=c[2*g+1],p=m)}return f}return c}),"roundPolygonIntersectLine"),hn=s((function(e,t,r){var n=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=(i-r)/i;return a<0&&(a=1e-5),[t[0]+a*n[0],t[1]+a*n[1]]}),"shortenIntersection"),dn=s((function(e,t){var r=pn(e,t);return r=fn(r)}),"generateUnitNgonPointsFitToSquare"),fn=s((function(e){for(var t,r,n=e.length/2,i=1/0,a=1/0,o=-1/0,s=-1/0,l=0;l<n;l++)t=e[2*l],r=e[2*l+1],i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,r),s=Math.max(s,r);for(var u=2/(o-i),c=2/(s-a),h=0;h<n;h++)t=e[2*h]=e[2*h]*u,r=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,r),s=Math.max(s,r);if(a<-1)for(var d=0;d<n;d++)r=e[2*d+1]=e[2*d+1]+(-1-a);return e}),"fitPolygonToSquare"),pn=s((function(e,t){var r=1/e*2*Math.PI,n=e%2==0?Math.PI/2+r/2:Math.PI/2;n+=t;for(var i,a=new Array(2*e),o=0;o<e;o++)i=o*r+n,a[2*o]=Math.cos(i),a[2*o+1]=Math.sin(-i);return a}),"generateUnitNgonPoints"),gn=s((function(e,t){return Math.min(e/4,t/4,8)}),"getRoundRectangleRadius"),mn=s((function(e,t){return Math.min(e/10,t/10,8)}),"getRoundPolygonRadius"),yn=s((function(){return 8}),"getCutRectangleCornerLength"),vn=s((function(e,t,r){return[e-2*t+r,2*(t-e),e]}),"bezierPtsToQuadCoeff"),xn=s((function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}}),"getBarrelCurveConstants"),bn=$t({dampingFactor:.8,precision:1e-6,iterations:200,weight:s((function(e){return 1}),"weight")}),Cn={pageRank:s((function(e){for(var t=bn(e),r=t.dampingFactor,n=t.precision,i=t.iterations,a=t.weight,o=this._private.cy,l=this.byGroup(),u=l.nodes,c=l.edges,h=u.length,d=h*h,f=c.length,p=new Array(d),g=new Array(h),m=(1-r)/h,y=0;y<h;y++){for(var v=0;v<h;v++){p[y*h+v]=0}g[y]=0}for(var x=0;x<f;x++){var b=c[x],C=b.data("source"),T=b.data("target");if(C!==T){var w=u.indexOfId(C),k=u.indexOfId(T),_=a(b);p[k*h+w]+=_,g[w]+=_}}for(var E=1/h+m,S=0;S<h;S++)if(0===g[S])for(var A=0;A<h;A++){p[A*h+S]=E}else for(var N=0;N<h;N++){var R=N*h+S;p[R]=p[R]/g[S]+m}for(var L,I=new Array(h),M=new Array(h),O=0;O<h;O++)I[O]=1;for(var D=0;D<i;D++){for(var P=0;P<h;P++)M[P]=0;for(var F=0;F<h;F++)for(var B=0;B<h;B++){var $=F*h+B;M[F]+=p[$]*I[B]}Sr(M),L=I,I=M,M=L;for(var z=0,U=0;U<h;U++){var G=L[U]-I[U];z+=G*G}if(z<n)break}var j={rank:s((function(e){return e=o.collection(e)[0],I[u.indexOf(e)]}),"rank")};return j}),"pageRank")},Tn=$t({root:null,weight:s((function(e){return 1}),"weight"),directed:!1,alpha:0}),wn={degreeCentralityNormalized:s((function(e){e=Tn(e);var t=this.cy(),r=this.nodes(),n=r.length;if(e.directed){for(var i={},a={},o=0,l=0,u=0;u<n;u++){var c=r[u],h=c.id();e.root=c;var d=this.degreeCentrality(e);o<d.indegree&&(o=d.indegree),l<d.outdegree&&(l=d.outdegree),i[h]=d.indegree,a[h]=d.outdegree}return{indegree:s((function(e){return 0==o?0:(I(e)&&(e=t.filter(e)),i[e.id()]/o)}),"indegree"),outdegree:s((function(e){return 0===l?0:(I(e)&&(e=t.filter(e)),a[e.id()]/l)}),"outdegree")}}for(var f={},p=0,g=0;g<n;g++){var m=r[g];e.root=m;var y=this.degreeCentrality(e);p<y.degree&&(p=y.degree),f[m.id()]=y.degree}return{degree:s((function(e){return 0===p?0:(I(e)&&(e=t.filter(e)),f[e.id()]/p)}),"degree")}}),"degreeCentralityNormalized"),degreeCentrality:s((function(e){e=Tn(e);var t=this.cy(),r=this,n=e,i=n.root,a=n.weight,o=n.directed,s=n.alpha;if(i=t.collection(i)[0],o){for(var l=i.connectedEdges(),u=l.filter((function(e){return e.target().same(i)&&r.has(e)})),c=l.filter((function(e){return e.source().same(i)&&r.has(e)})),h=u.length,d=c.length,f=0,p=0,g=0;g<u.length;g++)f+=a(u[g]);for(var m=0;m<c.length;m++)p+=a(c[m]);return{indegree:Math.pow(h,1-s)*Math.pow(f,s),outdegree:Math.pow(d,1-s)*Math.pow(p,s)}}for(var y=i.connectedEdges().intersection(r),v=y.length,x=0,b=0;b<y.length;b++)x+=a(y[b]);return{degree:Math.pow(v,1-s)*Math.pow(x,s)}}),"degreeCentrality")};wn.dc=wn.degreeCentrality,wn.dcn=wn.degreeCentralityNormalised=wn.degreeCentralityNormalized;var kn=$t({harmonic:!0,weight:s((function(){return 1}),"weight"),directed:!1,root:null}),_n={closenessCentralityNormalized:s((function(e){for(var t=kn(e),r=t.harmonic,n=t.weight,i=t.directed,a=this.cy(),o={},l=0,u=this.nodes(),c=this.floydWarshall({weight:n,directed:i}),h=0;h<u.length;h++){for(var d=0,f=u[h],p=0;p<u.length;p++)if(h!==p){var g=c.distance(f,u[p]);d+=r?1/g:g}r||(d=1/d),l<d&&(l=d),o[f.id()]=d}return{closeness:s((function(e){return 0==l?0:(e=I(e)?a.filter(e)[0].id():e.id(),o[e]/l)}),"closeness")}}),"closenessCentralityNormalized"),closenessCentrality:s((function(e){var t=kn(e),r=t.root,n=t.weight,i=t.directed,a=t.harmonic;r=this.filter(r)[0];for(var o=this.dijkstra({root:r,weight:n,directed:i}),s=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(r)){var h=o.distanceTo(c);s+=a?1/h:h}}return a?s:1/s}),"closenessCentrality")};_n.cc=_n.closenessCentrality,_n.ccn=_n.closenessCentralityNormalised=_n.closenessCentralityNormalized;var En=$t({weight:null,directed:!1}),Sn={betweennessCentrality:s((function(e){for(var t=En(e),r=t.directed,n=t.weight,i=null!=n,a=this.cy(),o=this.nodes(),l={},u={},c=0,h={set:s((function(e,t){u[e]=t,t>c&&(c=t)}),"set"),get:s((function(e){return u[e]}),"get")},d=0;d<o.length;d++){var f=o[d],p=f.id();l[p]=r?f.outgoers().nodes():f.openNeighborhood().nodes(),h.set(p,0)}for(var g=s((function(e){for(var t=o[e].id(),r=[],s={},u={},c={},d=new Jt((function(e,t){return c[e]-c[t]})),f=0;f<o.length;f++){var p=o[f].id();s[p]=[],u[p]=0,c[p]=1/0}for(u[t]=1,c[t]=0,d.push(t);!d.empty();){var g=d.pop();if(r.push(g),i)for(var m=0;m<l[g].length;m++){var y=l[g][m],v=a.getElementById(g),x=void 0;x=v.edgesTo(y).length>0?v.edgesTo(y)[0]:y.edgesTo(v)[0];var b=n(x);y=y.id(),c[y]>c[g]+b&&(c[y]=c[g]+b,d.nodes.indexOf(y)<0?d.push(y):d.updateItem(y),u[y]=0,s[y]=[]),c[y]==c[g]+b&&(u[y]=u[y]+u[g],s[y].push(g))}else for(var C=0;C<l[g].length;C++){var T=l[g][C].id();c[T]==1/0&&(d.push(T),c[T]=c[g]+1),c[T]==c[g]+1&&(u[T]=u[T]+u[g],s[T].push(g))}}for(var w={},k=0;k<o.length;k++)w[o[k].id()]=0;for(;r.length>0;){for(var _=r.pop(),E=0;E<s[_].length;E++){var S=s[_][E];w[S]=w[S]+u[S]/u[_]*(1+w[_])}_!=o[e].id()&&h.set(_,h.get(_)+w[_])}}),"_loop"),m=0;m<o.length;m++)g(m);var y={betweenness:s((function(e){var t=a.collection(e).id();return h.get(t)}),"betweenness"),betweennessNormalized:s((function(e){if(0==c)return 0;var t=a.collection(e).id();return h.get(t)/c}),"betweennessNormalized")};return y.betweennessNormalised=y.betweennessNormalized,y}),"betweennessCentrality")};Sn.bc=Sn.betweennessCentrality;var An=$t({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),Nn=s((function(e){return An(e)}),"setOptions"),Rn=s((function(e,t){for(var r=0,n=0;n<t.length;n++)r+=t[n](e);return r}),"getSimilarity"),Ln=s((function(e,t,r){for(var n=0;n<t;n++)e[n*t+n]=r}),"addLoops"),In=s((function(e,t){for(var r,n=0;n<t;n++){r=0;for(var i=0;i<t;i++)r+=e[i*t+n];for(var a=0;a<t;a++)e[a*t+n]=e[a*t+n]/r}}),"normalize"),Mn=s((function(e,t,r){for(var n=new Array(r*r),i=0;i<r;i++){for(var a=0;a<r;a++)n[i*r+a]=0;for(var o=0;o<r;o++)for(var s=0;s<r;s++)n[i*r+s]+=e[i*r+o]*t[o*r+s]}return n}),"mmult"),On=s((function(e,t,r){for(var n=e.slice(0),i=1;i<r;i++)e=Mn(e,n,t);return e}),"expand"),Dn=s((function(e,t,r){for(var n=new Array(t*t),i=0;i<t*t;i++)n[i]=Math.pow(e[i],r);return In(n,t),n}),"inflate"),Pn=s((function(e,t,r,n){for(var i=0;i<r;i++){if(Math.round(e[i]*Math.pow(10,n))/Math.pow(10,n)!==Math.round(t[i]*Math.pow(10,n))/Math.pow(10,n))return!1}return!0}),"hasConverged"),Fn=s((function(e,t,r,n){for(var i=[],a=0;a<t;a++){for(var o=[],s=0;s<t;s++)Math.round(1e3*e[a*t+s])/1e3>0&&o.push(r[s]);0!==o.length&&i.push(n.collection(o))}return i}),"assign"),Bn=s((function(e,t){for(var r=0;r<e.length;r++)if(!t[r]||e[r].id()!==t[r].id())return!1;return!0}),"isDuplicate"),$n=s((function(e){for(var t=0;t<e.length;t++)for(var r=0;r<e.length;r++)t!=r&&Bn(e[t],e[r])&&e.splice(r,1);return e}),"removeDuplicates"),zn=s((function(e){for(var t=this.nodes(),r=this.edges(),n=this.cy(),i=Nn(e),a={},o=0;o<t.length;o++)a[t[o].id()]=o;for(var s,l=t.length,u=l*l,c=new Array(u),h=0;h<u;h++)c[h]=0;for(var d=0;d<r.length;d++){var f=r[d],p=a[f.source().id()],g=a[f.target().id()],m=Rn(f,i.attributes);c[p*l+g]+=m,c[g*l+p]+=m}Ln(c,l,i.multFactor),In(c,l);for(var y=!0,v=0;y&&v<i.maxIterations;)y=!1,s=On(c,l,i.expandFactor),c=Dn(s,l,i.inflateFactor),Pn(c,s,u,4)||(y=!0),v++;var x=Fn(c,l,t,n);return x=$n(x)}),"markovClustering"),Un={markovClustering:zn,mcl:zn},Gn=s((function(e){return e}),"identity"),jn=s((function(e,t){return Math.abs(t-e)}),"absDiff"),Vn=s((function(e,t,r){return e+jn(t,r)}),"addAbsDiff"),Wn=s((function(e,t,r){return e+Math.pow(r-t,2)}),"addSquaredDiff"),qn=s((function(e){return Math.sqrt(e)}),"sqrt"),Hn=s((function(e,t,r){return Math.max(e,jn(t,r))}),"maxAbsDiff"),Yn=s((function(e,t,r,n,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Gn,o=n,s=0;s<e;s++)o=i(o,t(s),r(s));return a(o)}),"getDistance"),Xn={euclidean:s((function(e,t,r){return e>=2?Yn(e,t,r,0,Wn,qn):Yn(e,t,r,0,Vn)}),"euclidean"),squaredEuclidean:s((function(e,t,r){return Yn(e,t,r,0,Wn)}),"squaredEuclidean"),manhattan:s((function(e,t,r){return Yn(e,t,r,0,Vn)}),"manhattan"),max:s((function(e,t,r){return Yn(e,t,r,-1/0,Hn)}),"max")};function Kn(e,t,r,n,i,a){var o;return o=M(e)?e:Xn[e]||Xn.euclidean,0===t&&M(e)?o(i,a):o(t,r,n,i,a)}Xn["squared-euclidean"]=Xn.squaredEuclidean,Xn.squaredeuclidean=Xn.squaredEuclidean,s(Kn,"clusteringDistance");var Zn=$t({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Qn=s((function(e){return Zn(e)}),"setOptions"),Jn=s((function(e,t,r,n,i){var a="kMedoids"!==i?function(e){return r[e]}:function(e){return n[e](r)},o=s((function(e){return n[e](t)}),"getQ"),l=r,u=t;return Kn(e,n.length,a,o,l,u)}),"getDist"),ei=s((function(e,t,r){for(var n=r.length,i=new Array(n),a=new Array(n),o=new Array(t),s=null,l=0;l<n;l++)i[l]=e.min(r[l]).value,a[l]=e.max(r[l]).value;for(var u=0;u<t;u++){s=[];for(var c=0;c<n;c++)s[c]=Math.random()*(a[c]-i[c])+i[c];o[u]=s}return o}),"randomCentroids"),ti=s((function(e,t,r,n,i){for(var a=1/0,o=0,s=0;s<t.length;s++){var l=Jn(r,e,t[s],n,i);l<a&&(a=l,o=s)}return o}),"classify"),ri=s((function(e,t,r){for(var n=[],i=null,a=0;a<t.length;a++)r[(i=t[a]).id()]===e&&n.push(i);return n}),"buildCluster"),ni=s((function(e,t,r){return Math.abs(t-e)<=r}),"haveValuesConverged"),ii=s((function(e,t,r){for(var n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++){if(Math.abs(e[n][i]-t[n][i])>r)return!1}return!0}),"haveMatricesConverged"),ai=s((function(e,t,r){for(var n=0;n<r;n++)if(e===t[n])return!0;return!1}),"seenBefore"),oi=s((function(e,t){var r=new Array(t);if(e.length<50)for(var n=0;n<t;n++){for(var i=e[Math.floor(Math.random()*e.length)];ai(i,r,n);)i=e[Math.floor(Math.random()*e.length)];r[n]=i}else for(var a=0;a<t;a++)r[a]=e[Math.floor(Math.random()*e.length)];return r}),"randomMedoids"),si=s((function(e,t,r){for(var n=0,i=0;i<t.length;i++)n+=Jn("manhattan",t[i],e,r,"kMedoids");return n}),"findCost"),li=s((function(e){var t,r=this.cy(),n=this.nodes(),i=null,a=Qn(e),o=new Array(a.k),s={};a.testMode?"number"==typeof a.testCentroids?(a.testCentroids,t=ei(n,a.k,a.attributes)):t="object"===f(a.testCentroids)?a.testCentroids:ei(n,a.k,a.attributes):t=ei(n,a.k,a.attributes);for(var l=!0,u=0;l&&u<a.maxIterations;){for(var c=0;c<n.length;c++)s[(i=n[c]).id()]=ti(i,t,a.distance,a.attributes,"kMeans");l=!1;for(var h=0;h<a.k;h++){var d=ri(h,n,s);if(0!==d.length){for(var p=a.attributes.length,g=t[h],m=new Array(p),y=new Array(p),v=0;v<p;v++){y[v]=0;for(var x=0;x<d.length;x++)i=d[x],y[v]+=a.attributes[v](i);m[v]=y[v]/d.length,ni(m[v],g[v],a.sensitivityThreshold)||(l=!0)}t[h]=m,o[h]=r.collection(d)}}u++}return o}),"kMeans"),ui=s((function(e){var t,r,n=this.cy(),i=this.nodes(),a=null,o=Qn(e),s=new Array(o.k),l={},u=new Array(o.k);o.testMode?"number"==typeof o.testCentroids||(t="object"===f(o.testCentroids)?o.testCentroids:oi(i,o.k)):t=oi(i,o.k);for(var c=!0,h=0;c&&h<o.maxIterations;){for(var d=0;d<i.length;d++)l[(a=i[d]).id()]=ti(a,t,o.distance,o.attributes,"kMedoids");c=!1;for(var p=0;p<t.length;p++){var g=ri(p,i,l);if(0!==g.length){u[p]=si(t[p],g,o.attributes);for(var m=0;m<g.length;m++)(r=si(g[m],g,o.attributes))<u[p]&&(u[p]=r,t[p]=g[m],c=!0);s[p]=n.collection(g)}}h++}return s}),"kMedoids"),ci=s((function(e,t,r,n,i){for(var a,o,s=0;s<t.length;s++)for(var l=0;l<e.length;l++)n[s][l]=Math.pow(r[s][l],i.m);for(var u=0;u<e.length;u++)for(var c=0;c<i.attributes.length;c++){a=0,o=0;for(var h=0;h<t.length;h++)a+=n[h][u]*i.attributes[c](t[h]),o+=n[h][u];e[u][c]=a/o}}),"updateCentroids"),hi=s((function(e,t,r,n,i){for(var a=0;a<e.length;a++)t[a]=e[a].slice();for(var o,s,l,u=2/(i.m-1),c=0;c<r.length;c++)for(var h=0;h<n.length;h++){o=0;for(var d=0;d<r.length;d++)s=Jn(i.distance,n[h],r[c],i.attributes,"cmeans"),l=Jn(i.distance,n[h],r[d],i.attributes,"cmeans"),o+=Math.pow(s/l,u);e[h][c]=1/o}}),"updateMembership"),di=s((function(e,t,r,n){for(var i=new Array(r.k),a=0;a<i.length;a++)i[a]=[];for(var o,s,l=0;l<t.length;l++){o=-1/0,s=-1;for(var u=0;u<t[0].length;u++)t[l][u]>o&&(o=t[l][u],s=u);i[s].push(e[l])}for(var c=0;c<i.length;c++)i[c]=n.collection(i[c]);return i}),"assign"),fi=s((function(e){var t,r,n,i,a=this.cy(),o=this.nodes(),s=Qn(e);n=new Array(o.length);for(var l=0;l<o.length;l++)n[l]=new Array(s.k);r=new Array(o.length);for(var u=0;u<o.length;u++)r[u]=new Array(s.k);for(var c=0;c<o.length;c++){for(var h=0,d=0;d<s.k;d++)r[c][d]=Math.random(),h+=r[c][d];for(var f=0;f<s.k;f++)r[c][f]=r[c][f]/h}t=new Array(s.k);for(var p=0;p<s.k;p++)t[p]=new Array(s.attributes.length);i=new Array(o.length);for(var g=0;g<o.length;g++)i[g]=new Array(s.k);for(var m=!0,y=0;m&&y<s.maxIterations;)m=!1,ci(t,o,r,i,s),hi(r,n,t,o,s),ii(r,n,s.sensitivityThreshold)||(m=!0),y++;return{clusters:di(o,r,s,a),degreeOfMembership:r}}),"fuzzyCMeans"),pi={kMeans:li,kMedoids:ui,fuzzyCMeans:fi,fcm:fi},gi=$t({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),mi={single:"min",complete:"max"},yi=s((function(e){var t=gi(e),r=mi[t.linkage];return null!=r&&(t.linkage=r),t}),"setOptions"),vi=s((function(e,t,r,n,i){for(var a,o=0,l=1/0,u=i.attributes,c=s((function(e,t){return Kn(i.distance,u.length,(function(t){return u[t](e)}),(function(e){return u[e](t)}),e,t)}),"getDist"),h=0;h<e.length;h++){var d=e[h].key,f=r[d][n[d]];f<l&&(o=d,l=f)}if("threshold"===i.mode&&l>=i.threshold||"dendrogram"===i.mode&&1===e.length)return!1;var p,g=t[o],m=t[n[o]];p="dendrogram"===i.mode?{left:g,right:m,key:g.key}:{value:g.value.concat(m.value),key:g.key},e[g.index]=p,e.splice(m.index,1),t[g.key]=p;for(var y=0;y<e.length;y++){var v=e[y];g.key===v.key?a=1/0:"min"===i.linkage?(a=r[g.key][v.key],r[g.key][v.key]>r[m.key][v.key]&&(a=r[m.key][v.key])):"max"===i.linkage?(a=r[g.key][v.key],r[g.key][v.key]<r[m.key][v.key]&&(a=r[m.key][v.key])):a="mean"===i.linkage?(r[g.key][v.key]*g.size+r[m.key][v.key]*m.size)/(g.size+m.size):"dendrogram"===i.mode?c(v.value,g.value):c(v.value[0],g.value[0]),r[g.key][v.key]=r[v.key][g.key]=a}for(var x=0;x<e.length;x++){var b=e[x].key;if(n[b]===g.key||n[b]===m.key){for(var C=b,T=0;T<e.length;T++){var w=e[T].key;r[b][w]<r[b][C]&&(C=w)}n[b]=C}e[x].index=x}return g.key=m.key=g.index=m.index=null,!0}),"mergeClosest"),xi=s((function e(t,r,n){t&&(t.value?r.push(t.value):(t.left&&e(t.left,r),t.right&&e(t.right,r)))}),"getAllChildren"),bi=s((function e(t,r){if(!t)return"";if(t.left&&t.right){var n=e(t.left,r),i=e(t.right,r),a=r.add({group:"nodes",data:{id:n+","+i}});return r.add({group:"edges",data:{source:n,target:a.id()}}),r.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}return t.value?t.value.id():void 0}),"buildDendrogram"),Ci=s((function e(t,r,n){if(!t)return[];var i=[],a=[],o=[];return 0===r?(t.left&&xi(t.left,i),t.right&&xi(t.right,a),o=i.concat(a),[n.collection(o)]):1===r?t.value?[n.collection(t.value)]:(t.left&&xi(t.left,i),t.right&&xi(t.right,a),[n.collection(i),n.collection(a)]):t.value?[n.collection(t.value)]:(t.left&&(i=e(t.left,r-1,n)),t.right&&(a=e(t.right,r-1,n)),i.concat(a))}),"buildClustersFromTree"),Ti=s((function(e){for(var t=this.cy(),r=this.nodes(),n=yi(e),i=n.attributes,a=s((function(e,t){return Kn(n.distance,i.length,(function(t){return i[t](e)}),(function(e){return i[e](t)}),e,t)}),"getDist"),o=[],l=[],u=[],c=[],h=0;h<r.length;h++){var d={value:"dendrogram"===n.mode?r[h]:[r[h]],key:h,index:h};o[h]=d,c[h]=d,l[h]=[],u[h]=0}for(var f=0;f<o.length;f++)for(var p=0;p<=f;p++){var g=void 0;g="dendrogram"===n.mode?f===p?1/0:a(o[f].value,o[p].value):f===p?1/0:a(o[f].value[0],o[p].value[0]),l[f][p]=g,l[p][f]=g,g<l[f][u[f]]&&(u[f]=p)}for(var m=vi(o,c,l,u,n);m;)m=vi(o,c,l,u,n);var y;return"dendrogram"===n.mode?(y=Ci(o[0],n.dendrogramDepth,t),n.addDendrogram&&bi(o[0],t)):(y=new Array(o.length),o.forEach((function(e,r){e.key=e.index=null,y[r]=t.collection(e.value)}))),y}),"hierarchicalClustering"),wi={hierarchicalClustering:Ti,hca:Ti},ki=$t({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),_i=s((function(e){var t=e.damping,r=e.preference;.5<=t&&t<1||Rt("Damping must range on [0.5, 1).  Got: ".concat(t));var n=["median","mean","min","max"];return n.some((function(e){return e===r}))||F(r)||Rt("Preference must be one of [".concat(n.map((function(e){return"'".concat(e,"'")})).join(", "),"] or a number.  Got: ").concat(r)),ki(e)}),"setOptions"),Ei=s((function(e,t,r,n){var i=s((function(e,t){return n[t](e)}),"attr");return-Kn(e,n.length,(function(e){return i(t,e)}),(function(e){return i(r,e)}),t,r)}),"getSimilarity"),Si=s((function(e,t){return"median"===t?br(e):"mean"===t?xr(e):"min"===t?yr(e):"max"===t?vr(e):t}),"getPreference"),Ai=s((function(e,t,r){for(var n=[],i=0;i<e;i++)t[i*e+i]+r[i*e+i]>0&&n.push(i);return n}),"findExemplars"),Ni=s((function(e,t,r){for(var n=[],i=0;i<e;i++){for(var a=-1,o=-1/0,s=0;s<r.length;s++){var l=r[s];t[i*e+l]>o&&(a=l,o=t[i*e+l])}a>0&&n.push(a)}for(var u=0;u<r.length;u++)n[r[u]]=r[u];return n}),"assignClusters"),Ri=s((function(e,t,r){for(var n=Ni(e,t,r),i=0;i<r.length;i++){for(var a=[],o=0;o<n.length;o++)n[o]===r[i]&&a.push(o);for(var s=-1,l=-1/0,u=0;u<a.length;u++){for(var c=0,h=0;h<a.length;h++)c+=t[a[h]*e+a[u]];c>l&&(s=u,l=c)}r[i]=a[s]}return n=Ni(e,t,r)}),"assign"),Li=s((function(e){for(var t=this.cy(),r=this.nodes(),n=_i(e),i={},a=0;a<r.length;a++)i[r[a].id()]=a;var o,s,l,u,c,h,d;s=(o=r.length)*o,l=new Array(s);for(var f=0;f<s;f++)l[f]=-1/0;for(var p=0;p<o;p++)for(var g=0;g<o;g++)p!==g&&(l[p*o+g]=Ei(n.distance,r[p],r[g],n.attributes));u=Si(l,n.preference);for(var m=0;m<o;m++)l[m*o+m]=u;c=new Array(s);for(var y=0;y<s;y++)c[y]=0;h=new Array(s);for(var v=0;v<s;v++)h[v]=0;for(var x=new Array(o),b=new Array(o),C=new Array(o),T=0;T<o;T++)x[T]=0,b[T]=0,C[T]=0;for(var w=new Array(o*n.minIterations),k=0;k<w.length;k++)w[k]=0;for(d=0;d<n.maxIterations;d++){for(var _=0;_<o;_++){for(var E=-1/0,S=-1/0,A=-1,N=0,R=0;R<o;R++)x[R]=c[_*o+R],(N=h[_*o+R]+l[_*o+R])>=E?(S=E,E=N,A=R):N>S&&(S=N);for(var L=0;L<o;L++)c[_*o+L]=(1-n.damping)*(l[_*o+L]-E)+n.damping*x[L];c[_*o+A]=(1-n.damping)*(l[_*o+A]-S)+n.damping*x[A]}for(var I=0;I<o;I++){for(var M=0,O=0;O<o;O++)x[O]=h[O*o+I],b[O]=Math.max(0,c[O*o+I]),M+=b[O];M-=b[I],b[I]=c[I*o+I],M+=b[I];for(var D=0;D<o;D++)h[D*o+I]=(1-n.damping)*Math.min(0,M-b[D])+n.damping*x[D];h[I*o+I]=(1-n.damping)*(M-b[I])+n.damping*x[I]}for(var P=0,F=0;F<o;F++){var B=h[F*o+F]+c[F*o+F]>0?1:0;w[d%n.minIterations*o+F]=B,P+=B}if(P>0&&(d>=n.minIterations-1||d==n.maxIterations-1)){for(var $=0,z=0;z<o;z++){C[z]=0;for(var U=0;U<n.minIterations;U++)C[z]+=w[U*o+z];(0===C[z]||C[z]===n.minIterations)&&$++}if($===o)break}}for(var G=Ai(o,c,h),j=Ri(o,l,G),V={},W=0;W<G.length;W++)V[G[W]]=[];for(var q=0;q<r.length;q++){var H=j[i[r[q].id()]];null!=H&&V[H].push(r[q])}for(var Y=new Array(G.length),X=0;X<G.length;X++)Y[X]=t.collection(V[G[X]]);return Y}),"affinityPropagation"),Ii={affinityPropagation:Li,ap:Li},Mi=$t({root:void 0,directed:!1}),Oi={hierholzer:s((function(e){if(!D(e)){var t=arguments;e={root:t[0],directed:t[1]}}var r,n,i,a=Mi(e),o=a.root,l=a.directed,u=this,c=!1;o&&(i=I(o)?this.filter(o)[0].id():o[0].id());var h={},d={};l?u.forEach((function(e){var t=e.id();if(e.isNode()){var i=e.indegree(!0),a=e.outdegree(!0),o=i-a,s=a-i;1==o?r?c=!0:r=t:1==s?n?c=!0:n=t:(s>1||o>1)&&(c=!0),h[t]=[],e.outgoers().forEach((function(e){e.isEdge()&&h[t].push(e.id())}))}else d[t]=[void 0,e.target().id()]})):u.forEach((function(e){var t=e.id();e.isNode()?(e.degree(!0)%2&&(r?n?c=!0:n=t:r=t),h[t]=[],e.connectedEdges().forEach((function(e){return h[t].push(e.id())}))):d[t]=[e.source().id(),e.target().id()]}));var f={found:!1,trail:void 0};if(c)return f;if(n&&r)if(l){if(i&&n!=i)return f;i=n}else{if(i&&n!=i&&r!=i)return f;i||(i=n)}else i||(i=u[0].id());var p=s((function(e){for(var t,r,n,i=e,a=[e];h[i].length;)t=h[i].shift(),r=d[t][0],i!=(n=d[t][1])?(h[n]=h[n].filter((function(e){return e!=t})),i=n):!l&&i!=r&&(h[r]=h[r].filter((function(e){return e!=t})),i=r),a.unshift(t),a.unshift(i);return a}),"walk"),g=[],m=[];for(m=p(i);1!=m.length;)0==h[m[0]].length?(g.unshift(u.getElementById(m.shift())),g.unshift(u.getElementById(m.shift()))):m=p(m.shift()).concat(m);for(var y in g.unshift(u.getElementById(m.shift())),h)if(h[y].length)return f;return f.found=!0,f.trail=this.spawn(g,!0),f}),"hierholzer")},Di=s((function(){var e=this,t={},r=0,n=0,i=[],a=[],o={},l=s((function(r,n){for(var o=a.length-1,s=[],l=e.spawn();a[o].x!=r||a[o].y!=n;)s.push(a.pop().edge),o--;s.push(a.pop().edge),s.forEach((function(r){var n=r.connectedNodes().intersection(e);l.merge(r),n.forEach((function(r){var n=r.id(),i=r.connectedEdges().intersection(e);l.merge(r),t[n].cutVertex?l.merge(i.filter((function(e){return e.isLoop()}))):l.merge(i)}))})),i.push(l)}),"buildComponent"),u=s((function s(u,c,h){u===h&&(n+=1),t[c]={id:r,low:r++,cutVertex:!1};var d,f,p,g,m=e.getElementById(c).connectedEdges().intersection(e);0===m.size()?i.push(e.spawn(e.getElementById(c))):m.forEach((function(e){d=e.source().id(),f=e.target().id(),(p=d===c?f:d)!==h&&(g=e.id(),o[g]||(o[g]=!0,a.push({x:c,y:p,edge:e})),p in t?t[c].low=Math.min(t[c].low,t[p].id):(s(u,p,c),t[c].low=Math.min(t[c].low,t[p].low),t[c].id<=t[p].low&&(t[c].cutVertex=!0,l(c,p))))}))}),"biconnectedSearch");e.forEach((function(e){if(e.isNode()){var r=e.id();r in t||(n=0,u(r,r),t[r].cutVertex=n>1)}}));var c=Object.keys(t).filter((function(e){return t[e].cutVertex})).map((function(t){return e.getElementById(t)}));return{cut:e.spawn(c),components:i}}),"hopcroftTarjanBiconnected"),Pi={hopcroftTarjanBiconnected:Di,htbc:Di,htb:Di,hopcroftTarjanBiconnectedComponents:Di},Fi=s((function(){var e=this,t={},r=0,n=[],i=[],a=e.spawn(e),o=s((function o(s){if(i.push(s),t[s]={index:r,low:r++,explored:!1},e.getElementById(s).connectedEdges().intersection(e).forEach((function(e){var r=e.target().id();r!==s&&(r in t||o(r),t[r].explored||(t[s].low=Math.min(t[s].low,t[r].low)))})),t[s].index===t[s].low){for(var l=e.spawn();;){var u=i.pop();if(l.merge(e.getElementById(u)),t[u].low=t[s].index,t[u].explored=!0,u===s)break}var c=l.edgesWith(l),h=l.merge(c);n.push(h),a=a.difference(h)}}),"stronglyConnectedSearch");return e.forEach((function(e){if(e.isNode()){var r=e.id();r in t||o(r)}})),{cut:a,components:n}}),"tarjanStronglyConnected"),Bi={};[Zt,tr,rr,ir,or,lr,dr,Cn,wn,_n,Sn,Un,pi,wi,Ii,Oi,Pi,{tarjanStronglyConnected:Fi,tsc:Fi,tscc:Fi,tarjanStronglyConnectedComponents:Fi}].forEach((function(e){ue(Bi,e)}));var $i=s((function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))}),"api");$i.prototype={fulfill:s((function(e){return zi(this,1,"fulfillValue",e)}),"fulfill"),reject:s((function(e){return zi(this,2,"rejectReason",e)}),"reject"),then:s((function(e,t){var r=this,n=new $i;return r.onFulfilled.push(ji(e,n,"fulfill")),r.onRejected.push(ji(t,n,"reject")),Ui(r),n.proxy}),"then")};var zi=s((function(e,t,r,n){return 0===e.state&&(e.state=t,e[r]=n,Ui(e)),e}),"deliver"),Ui=s((function(e){1===e.state?Gi(e,"onFulfilled",e.fulfillValue):2===e.state&&Gi(e,"onRejected",e.rejectReason)}),"execute"),Gi=s((function(e,t,r){if(0!==e[t].length){var n=e[t];e[t]=[];var i=s((function(){for(var e=0;e<n.length;e++)n[e](r)}),"func");"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}}),"execute_handlers"),ji=s((function(e,t,r){return function(n){if("function"!=typeof e)t[r].call(t,n);else{var i;try{i=e(n)}catch(e){return void t.reject(e)}Vi(t,i)}}}),"resolver"),Vi=s((function e(t,r){if(t!==r&&t.proxy!==r){var n;if("object"===f(r)&&null!==r||"function"==typeof r)try{n=r.then}catch(e){return void t.reject(e)}if("function"!=typeof n)t.fulfill(r);else{var i=!1;try{n.call(r,(function(n){i||(i=!0,n===r?t.reject(new TypeError("circular thenable chain")):e(t,n))}),(function(e){i||(i=!0,t.reject(e))}))}catch(e){i||t.reject(e)}}}else t.reject(new TypeError("cannot resolve promise with itself"))}),"resolve");$i.all=function(e){return new $i((function(t,r){for(var n=new Array(e.length),i=0,a=s((function(r,a){n[r]=a,++i===e.length&&t(n)}),"fulfill"),o=0;o<e.length;o++)!function(t){var n=e[t];null!=n&&null!=n.then?n.then((function(e){a(t,e)}),(function(e){r(e)})):a(t,n)}(o)}))},$i.resolve=function(e){return new $i((function(t,r){t(e)}))},$i.reject=function(e){return new $i((function(t,r){r(e)}))};var Wi=typeof Promise<"u"?Promise:$i,qi=s((function(e,t,r){var n=j(e),i=!n,a=this._private=ue({duration:1e3},t,r);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&M(a.complete)&&a.completes.push(a.complete),i){var o=e.position();a.startPosition=a.startPosition||{x:o.x,y:o.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(n){var s=e.pan();a.startPan={x:s.x,y:s.y},a.startZoom=e.zoom()}this.length=1,this[0]=this}),"Animation"),Hi=qi.prototype;ue(Hi,{instanceString:s((function(){return"animation"}),"instanceString"),hook:s((function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),z(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this}),"hook"),play:s((function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this}),"play"),playing:s((function(){return this._private.playing}),"playing"),apply:s((function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this}),"apply"),applying:s((function(){return this._private.applying}),"applying"),pause:s((function(){var e=this._private;return e.playing=!1,e.started=!1,this}),"pause"),stop:s((function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this}),"stop"),rewind:s((function(){return this.progress(0)}),"rewind"),fastforward:s((function(){return this.progress(1)}),"fastforward"),time:s((function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)}),"time"),progress:s((function(e){var t=this._private,r=t.playing;return void 0===e?t.progress:(r&&this.pause(),t.progress=e,t.started=!1,r&&this.play(),this)}),"progress"),completed:s((function(){return 1===this._private.progress}),"completed"),reverse:s((function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=s((function(t,r){var n=e[t];null!=n&&(e[t]=e[r],e[r]=n)}),"swap");if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var n=0;n<e.style.length;n++){var i=e.style[n],a=i.name,o=e.startStyle[a];e.startStyle[a]=i,e.style[n]=o}return t&&this.play(),this}),"reverse"),promise:s((function(e){var t,r=this._private;if("frame"===e)t=r.frames;else t=r.completes;return new Wi((function(e,r){t.push((function(){e()}))}))}),"promise")}),Hi.complete=Hi.completed,Hi.run=Hi.play,Hi.running=Hi.playing;var Yi={animated:s((function(){return s((function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return!1;var r=t[0];return r?r._private.animation.current.length>0:void 0}),"animatedImpl")}),"animated"),clearQueue:s((function(){return s((function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return this;for(var r=0;r<t.length;r++){t[r]._private.animation.queue=[]}return this}),"clearQueueImpl")}),"clearQueue"),delay:s((function(){return s((function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}),"delayImpl")}),"delay"),delayAnimation:s((function(){return s((function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}),"delayAnimationImpl")}),"delayAnimation"),animation:s((function(){return s((function(e,t){var r=this,n=void 0!==r.length,i=n?r:[r],a=this._private.cy||this,o=!n,s=!o;if(!a.styleEnabled())return this;var l=a.style();if(e=ue({},e,t),0===Object.keys(e).length)return new qi(i[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(s&&(e.style=l.getPropsList(e.style||e.css),e.css=void 0),s&&null!=e.renderedPosition){var u=e.renderedPosition,c=a.pan(),h=a.zoom();e.position=gr(u,h,c)}if(o&&null!=e.panBy){var d=e.panBy,f=a.pan();e.pan={x:f.x+d.x,y:f.y+d.y}}var p=e.center||e.centre;if(o&&null!=p){var g=a.getCenterPan(p.eles,e.zoom);null!=g&&(e.pan=g)}if(o&&null!=e.fit){var m=e.fit,y=a.getFitViewport(m.eles||m.boundingBox,m.padding);null!=y&&(e.pan=y.pan,e.zoom=y.zoom)}if(o&&D(e.zoom)){var v=a.getZoomedViewport(e.zoom);null!=v?(v.zoomed&&(e.zoom=v.zoom),v.panned&&(e.pan=v.pan)):e.zoom=null}return new qi(i[0],e)}),"animationImpl")}),"animation"),animate:s((function(){return s((function(e,t){var r=this,n=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=ue({},e,t));for(var i=0;i<n.length;i++){var a=n[i],o=a.animated()&&(void 0===e.queue||e.queue);a.animation(e,o?{queue:!0}:void 0).play()}return this}),"animateImpl")}),"animate"),stop:s((function(){return s((function(e,t){var r=this,n=void 0!==r.length?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var a=0;a<n.length;a++){for(var o=n[a]._private,s=o.animation.current,l=0;l<s.length;l++){var u=s[l]._private;t&&(u.duration=0)}e&&(o.animation.queue=[]),t||(o.animation.current=[])}return i.notify("draw"),this}),"stopImpl")}),"stop")},Xi=Array.isArray,Ki=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zi=/^\w*$/;function Qi(e,t){if(Xi(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Ye(e))||(Zi.test(e)||!Ki.test(e)||null!=t&&e in Object(t))}s(Qi,"isKey");var Ji=Qi;function ea(e){if(!xe(e))return!1;var t=Ve(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}s(ea,"isFunction");var ta,ra=ea,na=ke["__core-js_shared__"],ia=(ta=/[^.]+$/.exec(na&&na.keys&&na.keys.IE_PROTO||""))?"Symbol(src)_1."+ta:"";function aa(e){return!!ia&&ia in e}s(aa,"isMasked");var oa=aa,sa=Function.prototype.toString;function la(e){if(null!=e){try{return sa.call(e)}catch{}try{return e+""}catch{}}return""}s(la,"toSource");var ua=la,ca=/^\[object .+?Constructor\]$/,ha=Function.prototype,da=Object.prototype,fa=ha.toString,pa=da.hasOwnProperty,ga=RegExp("^"+fa.call(pa).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ma(e){return!(!xe(e)||oa(e))&&(ra(e)?ga:ca).test(ua(e))}s(ma,"baseIsNative");var ya=ma;function va(e,t){return e?.[t]}s(va,"getValue$1");var xa=va;function ba(e,t){var r=xa(e,t);return ya(r)?r:void 0}s(ba,"getNative");var Ca=ba,Ta=Ca(Object,"create");function wa(){this.__data__=Ta?Ta(null):{},this.size=0}s(wa,"hashClear");var ka=wa;function _a(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}s(_a,"hashDelete");var Ea=_a,Sa=Object.prototype.hasOwnProperty;function Aa(e){var t=this.__data__;if(Ta){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Sa.call(t,e)?t[e]:void 0}s(Aa,"hashGet");var Na=Aa,Ra=Object.prototype.hasOwnProperty;function La(e){var t=this.__data__;return Ta?void 0!==t[e]:Ra.call(t,e)}s(La,"hashHas");var Ia=La;function Ma(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ta&&void 0===t?"__lodash_hash_undefined__":t,this}s(Ma,"hashSet");var Oa=Ma;function Da(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(Da,"Hash"),Da.prototype.clear=ka,Da.prototype.delete=Ea,Da.prototype.get=Na,Da.prototype.has=Ia,Da.prototype.set=Oa;var Pa=Da;function Fa(){this.__data__=[],this.size=0}s(Fa,"listCacheClear");var Ba=Fa;function $a(e,t){return e===t||e!=e&&t!=t}s($a,"eq");var za=$a;function Ua(e,t){for(var r=e.length;r--;)if(za(e[r][0],t))return r;return-1}s(Ua,"assocIndexOf");var Ga=Ua,ja=Array.prototype.splice;function Va(e){var t=this.__data__,r=Ga(t,e);return!(r<0)&&(r==t.length-1?t.pop():ja.call(t,r,1),--this.size,!0)}s(Va,"listCacheDelete");var Wa=Va;function qa(e){var t=this.__data__,r=Ga(t,e);return r<0?void 0:t[r][1]}s(qa,"listCacheGet");var Ha=qa;function Ya(e){return Ga(this.__data__,e)>-1}s(Ya,"listCacheHas");var Xa=Ya;function Ka(e,t){var r=this.__data__,n=Ga(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}s(Ka,"listCacheSet");var Za=Ka;function Qa(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(Qa,"ListCache"),Qa.prototype.clear=Ba,Qa.prototype.delete=Wa,Qa.prototype.get=Ha,Qa.prototype.has=Xa,Qa.prototype.set=Za;var Ja=Qa,eo=Ca(ke,"Map");function to(){this.size=0,this.__data__={hash:new Pa,map:new(eo||Ja),string:new Pa}}s(to,"mapCacheClear");var ro=to;function no(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}s(no,"isKeyable");var io=no;function ao(e,t){var r=e.__data__;return io(t)?r["string"==typeof t?"string":"hash"]:r.map}s(ao,"getMapData");var oo=ao;function so(e){var t=oo(this,e).delete(e);return this.size-=t?1:0,t}s(so,"mapCacheDelete");var lo=so;function uo(e){return oo(this,e).get(e)}s(uo,"mapCacheGet");var co=uo;function ho(e){return oo(this,e).has(e)}s(ho,"mapCacheHas");var fo=ho;function po(e,t){var r=oo(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}s(po,"mapCacheSet");var go=po;function mo(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(mo,"MapCache"),mo.prototype.clear=ro,mo.prototype.delete=lo,mo.prototype.get=co,mo.prototype.has=fo,mo.prototype.set=go;var yo=mo;function vo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=s((function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o}),"memoized");return r.cache=new(vo.Cache||yo),r}s(vo,"memoize"),vo.Cache=yo;var xo=vo;function bo(e){var t=xo(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}s(bo,"memoizeCapped");var Co=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,To=/\\(\\)?/g,wo=bo((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Co,(function(e,r,n,i){t.push(n?i.replace(To,"$1"):r||e)})),t})),ko=wo;function _o(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}s(_o,"arrayMap");var Eo=_o,So=Ie?Ie.prototype:void 0,Ao=So?So.toString:void 0;function No(e){if("string"==typeof e)return e;if(Xi(e))return Eo(e,No)+"";if(Ye(e))return Ao?Ao.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}s(No,"baseToString");var Ro=No;function Lo(e){return null==e?"":Ro(e)}s(Lo,"toString$1");var Io=Lo;function Mo(e,t){return Xi(e)?e:Ji(e,t)?[e]:ko(Io(e))}s(Mo,"castPath");var Oo=Mo;function Do(e){if("string"==typeof e||Ye(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}s(Do,"toKey");var Po=Do;function Fo(e,t){for(var r=0,n=(t=Oo(t,e)).length;null!=e&&r<n;)e=e[Po(t[r++])];return r&&r==n?e:void 0}s(Fo,"baseGet");var Bo=Fo;function $o(e,t,r){var n=null==e?void 0:Bo(e,t);return void 0===n?r:n}s($o,"get");var zo=$o,Uo=function(){try{var e=Ca(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Go=Uo;function jo(e,t,r){"__proto__"==t&&Go?Go(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}s(jo,"baseAssignValue");var Vo=jo,Wo=Object.prototype.hasOwnProperty;function qo(e,t,r){var n=e[t];(!Wo.call(e,t)||!za(n,r)||void 0===r&&!(t in e))&&Vo(e,t,r)}s(qo,"assignValue");var Ho=qo,Yo=/^(?:0|[1-9]\d*)$/;function Xo(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&Yo.test(e))&&e>-1&&e%1==0&&e<t}s(Xo,"isIndex");var Ko=Xo;function Zo(e,t,r,n){if(!xe(e))return e;for(var i=-1,a=(t=Oo(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var l=Po(t[i]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=o){var c=s[l];void 0===(u=n?n(c,l,s):void 0)&&(u=xe(c)?c:Ko(t[i+1])?[]:{})}Ho(s,l,u),s=s[l]}return e}s(Zo,"baseSet");var Qo=Zo;function Jo(e,t,r){return null==e?e:Qo(e,t,r)}s(Jo,"set");var es=Jo;function ts(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}s(ts,"copyArray");var rs=ts;function ns(e){return Xi(e)?Eo(e,Po):Ye(e)?[e]:rs(ko(Io(e)))}s(ns,"toPath");var is=ns,as={data:s((function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:s((function(e){}),"beforeGet"),beforeSet:s((function(e,t){}),"beforeSet"),onSet:s((function(e){}),"onSet"),canSet:s((function(e){return!0}),"canSet")};return e=ue({},t,e),s((function(t,r){var n=e,i=this,a=void 0!==i.length,o=a?i:[i],s=a?i[0]:i;if(I(t)){var l,u=-1!==t.indexOf(".")&&is(t);if(n.allowGetting&&void 0===r)return s&&(n.beforeGet(s),l=u&&void 0===s._private[n.field][t]?zo(s._private[n.field],u):s._private[n.field][t]),l;if(n.allowSetting&&void 0!==r&&!n.immutableKeys[t]){var c=y({},t,r);n.beforeSet(i,c);for(var h=0,d=o.length;h<d;h++){var f=o[h];n.canSet(f)&&(u&&void 0===s._private[n.field][t]?es(f._private[n.field],u,r):f._private[n.field][t]=r)}n.updateStyle&&i.updateStyle(),n.onSet(i),n.settingTriggersEvent&&i[n.triggerFnName](n.settingEvent)}}else if(n.allowSetting&&D(t)){var p,g,m=t,v=Object.keys(m);n.beforeSet(i,m);for(var x=0;x<v.length;x++){if(g=m[p=v[x]],!n.immutableKeys[p])for(var b=0;b<o.length;b++){var C=o[b];n.canSet(C)&&(C._private[n.field][p]=g)}}n.updateStyle&&i.updateStyle(),n.onSet(i),n.settingTriggersEvent&&i[n.triggerFnName](n.settingEvent)}else if(n.allowBinding&&M(t)){var T=t;i.on(n.bindingEvent,T)}else if(n.allowGetting&&void 0===t){var w;return s&&(n.beforeGet(s),w=s._private[n.field]),w}return i}),"dataImpl")}),"data"),removeData:s((function(e){return e=ue({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),s((function(t){var r=e,n=this,i=void 0!==n.length?n:[n];if(I(t)){for(var a=t.split(/\s+/),o=a.length,s=0;s<o;s++){var l=a[s];if(!q(l))if(!r.immutableKeys[l])for(var u=0,c=i.length;u<c;u++)i[u]._private[r.field][l]=void 0}r.triggerEvent&&n[r.triggerFnName](r.event)}else if(void 0===t){for(var h=0,d=i.length;h<d;h++)for(var f=i[h]._private[r.field],p=Object.keys(f),g=0;g<p.length;g++){var m=p[g];!r.immutableKeys[m]&&(f[m]=void 0)}r.triggerEvent&&n[r.triggerFnName](r.event)}return n}),"removeDataImpl")}),"removeData")},os={eventAliasesOn:s((function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var r=this,n=Array.prototype.slice.call(arguments,0);return new Wi((function(e,t){var i=s((function(t){r.off.apply(r,o),e(t)}),"callback"),a=n.concat([i]),o=a.concat([]);r.on.apply(r,a)}))}}),"eventAliasesOn")},ss={};[Yi,as,os].forEach((function(e){ue(ss,e)}));var ls={animate:ss.animate(),animation:ss.animation(),animated:ss.animated(),clearQueue:ss.clearQueue(),delay:ss.delay(),delayAnimation:ss.delayAnimation(),stop:ss.stop()},us={classes:s((function(e){var t=this;if(void 0===e){var r=[];return t[0]._private.classes.forEach((function(e){return r.push(e)})),r}O(e)||(e=(e||"").match(/\S+/g)||[]);for(var n=[],i=new Yt(e),a=0;a<t.length;a++){for(var o=t[a],s=o._private,l=s.classes,u=!1,c=0;c<e.length;c++){var h=e[c];if(!l.has(h)){u=!0;break}}u||(u=l.size!==e.length),u&&(s.classes=i,n.push(o))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),t}),"classes"),addClass:s((function(e){return this.toggleClass(e,!0)}),"addClass"),hasClass:s((function(e){var t=this[0];return null!=t&&t._private.classes.has(e)}),"hasClass"),toggleClass:s((function(e,t){O(e)||(e=e.match(/\S+/g)||[]);for(var r=this,n=void 0===t,i=[],a=0,o=r.length;a<o;a++)for(var s=r[a],l=s._private.classes,u=!1,c=0;c<e.length;c++){var h=e[c],d=l.has(h),f=!1;t||n&&!d?(l.add(h),f=!0):(!t||n&&d)&&(l.delete(h),f=!0),!u&&f&&(i.push(s),u=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r}),"toggleClass"),removeClass:s((function(e){return this.toggleClass(e,!1)}),"removeClass"),flashClass:s((function(e,t){var r=this;if(null==t)t=250;else if(0===t)return r;return r.addClass(e),setTimeout((function(){r.removeClass(e)}),t),r}),"flashClass")};us.className=us.classNames=us.classes;var cs={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:re,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};cs.variable="(?:[\\w-.]|(?:\\\\"+cs.metaChar+"))+",cs.className="(?:[\\w-]|(?:\\\\"+cs.metaChar+"))+",cs.value=cs.string+"|"+cs.number,cs.id=cs.variable,function(){var e,t,r;for(e=cs.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],cs.comparatorOp+="|@"+t;for(e=cs.comparatorOp.split("|"),r=0;r<e.length;r++)!((t=e[r]).indexOf("!")>=0)&&"="!==t&&(cs.comparatorOp+="|\\!"+t)}();var hs=s((function(){return{checks:[]}}),"newQuery"),ds=0,fs=1,ps=2,gs=3,ms=4,ys=5,vs=6,xs=7,bs=8,Cs=9,Ts=10,ws=11,ks=12,_s=13,Es=14,Ss=15,As=16,Ns=17,Rs=18,Ls=19,Is=20,Ms=[{selector:":selected",matches:s((function(e){return e.selected()}),"matches")},{selector:":unselected",matches:s((function(e){return!e.selected()}),"matches")},{selector:":selectable",matches:s((function(e){return e.selectable()}),"matches")},{selector:":unselectable",matches:s((function(e){return!e.selectable()}),"matches")},{selector:":locked",matches:s((function(e){return e.locked()}),"matches")},{selector:":unlocked",matches:s((function(e){return!e.locked()}),"matches")},{selector:":visible",matches:s((function(e){return e.visible()}),"matches")},{selector:":hidden",matches:s((function(e){return!e.visible()}),"matches")},{selector:":transparent",matches:s((function(e){return e.transparent()}),"matches")},{selector:":grabbed",matches:s((function(e){return e.grabbed()}),"matches")},{selector:":free",matches:s((function(e){return!e.grabbed()}),"matches")},{selector:":removed",matches:s((function(e){return e.removed()}),"matches")},{selector:":inside",matches:s((function(e){return!e.removed()}),"matches")},{selector:":grabbable",matches:s((function(e){return e.grabbable()}),"matches")},{selector:":ungrabbable",matches:s((function(e){return!e.grabbable()}),"matches")},{selector:":animated",matches:s((function(e){return e.animated()}),"matches")},{selector:":unanimated",matches:s((function(e){return!e.animated()}),"matches")},{selector:":parent",matches:s((function(e){return e.isParent()}),"matches")},{selector:":childless",matches:s((function(e){return e.isChildless()}),"matches")},{selector:":child",matches:s((function(e){return e.isChild()}),"matches")},{selector:":orphan",matches:s((function(e){return e.isOrphan()}),"matches")},{selector:":nonorphan",matches:s((function(e){return e.isChild()}),"matches")},{selector:":compound",matches:s((function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}),"matches")},{selector:":loop",matches:s((function(e){return e.isLoop()}),"matches")},{selector:":simple",matches:s((function(e){return e.isSimple()}),"matches")},{selector:":active",matches:s((function(e){return e.active()}),"matches")},{selector:":inactive",matches:s((function(e){return!e.active()}),"matches")},{selector:":backgrounding",matches:s((function(e){return e.backgrounding()}),"matches")},{selector:":nonbackgrounding",matches:s((function(e){return!e.backgrounding()}),"matches")}].sort((function(e,t){return le(e.selector,t.selector)})),Os=function(){for(var e,t={},r=0;r<Ms.length;r++)t[(e=Ms[r]).selector]=e.matches;return t}(),Ds=s((function(e,t){return Os[e](t)}),"stateSelectorMatches"),Ps="("+Ms.map((function(e){return e.selector})).join("|")+")",Fs=s((function(e){return e.replace(new RegExp("\\\\("+cs.metaChar+")","g"),(function(e,t){return t}))}),"cleanMetaChars"),Bs=s((function(e,t,r){e[e.length-1]=r}),"replaceLastQuery"),$s=[{name:"group",query:!0,regex:"("+cs.group+")",populate:s((function(e,t,r){var n=v(r,1)[0];t.checks.push({type:ds,value:"*"===n?n:n+"s"})}),"populate")},{name:"state",query:!0,regex:Ps,populate:s((function(e,t,r){var n=v(r,1)[0];t.checks.push({type:xs,value:n})}),"populate")},{name:"id",query:!0,regex:"\\#("+cs.id+")",populate:s((function(e,t,r){var n=v(r,1)[0];t.checks.push({type:bs,value:Fs(n)})}),"populate")},{name:"className",query:!0,regex:"\\.("+cs.className+")",populate:s((function(e,t,r){var n=v(r,1)[0];t.checks.push({type:Cs,value:Fs(n)})}),"populate")},{name:"dataExists",query:!0,regex:"\\[\\s*("+cs.variable+")\\s*\\]",populate:s((function(e,t,r){var n=v(r,1)[0];t.checks.push({type:ms,field:Fs(n)})}),"populate")},{name:"dataCompare",query:!0,regex:"\\[\\s*("+cs.variable+")\\s*("+cs.comparatorOp+")\\s*("+cs.value+")\\s*\\]",populate:s((function(e,t,r){var n=v(r,3),i=n[0],a=n[1],o=n[2];o=null!=new RegExp("^"+cs.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),t.checks.push({type:gs,field:Fs(i),operator:a,value:o})}),"populate")},{name:"dataBool",query:!0,regex:"\\[\\s*("+cs.boolOp+")\\s*("+cs.variable+")\\s*\\]",populate:s((function(e,t,r){var n=v(r,2),i=n[0],a=n[1];t.checks.push({type:ys,field:Fs(a),operator:i})}),"populate")},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+cs.meta+")\\s*("+cs.comparatorOp+")\\s*("+cs.number+")\\s*\\]\\]",populate:s((function(e,t,r){var n=v(r,3),i=n[0],a=n[1],o=n[2];t.checks.push({type:vs,field:Fs(i),operator:a,value:parseFloat(o)})}),"populate")},{name:"nextQuery",separator:!0,regex:cs.separator,populate:s((function(e,t){var r=e.currentSubject,n=e.edgeCount,i=e.compoundCount,a=e[e.length-1];return null!=r&&(a.subject=r,e.currentSubject=null),a.edgeCount=n,a.compoundCount=i,e.edgeCount=0,e.compoundCount=0,e[e.length++]=hs()}),"populate")},{name:"directedEdge",separator:!0,regex:cs.directedEdge,populate:s((function(e,t){if(null==e.currentSubject){var r=hs(),n=t,i=hs();return r.checks.push({type:ws,source:n,target:i}),Bs(e,t,r),e.edgeCount++,i}var a=hs(),o=t,s=hs();return a.checks.push({type:ks,source:o,target:s}),Bs(e,t,a),e.edgeCount++,s}),"populate")},{name:"undirectedEdge",separator:!0,regex:cs.undirectedEdge,populate:s((function(e,t){if(null==e.currentSubject){var r=hs(),n=t,i=hs();return r.checks.push({type:Ts,nodes:[n,i]}),Bs(e,t,r),e.edgeCount++,i}var a=hs(),o=t,s=hs();return a.checks.push({type:Es,node:o,neighbor:s}),Bs(e,t,a),s}),"populate")},{name:"child",separator:!0,regex:cs.child,populate:s((function(e,t){if(null==e.currentSubject){var r=hs(),n=hs(),i=e[e.length-1];return r.checks.push({type:Ss,parent:i,child:n}),Bs(e,t,r),e.compoundCount++,n}if(e.currentSubject===t){var a=hs(),o=e[e.length-1],s=hs(),l=hs(),u=hs(),c=hs();return a.checks.push({type:Ls,left:o,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:Is}],c.checks.push({type:Is}),s.checks.push({type:Ns,parent:c,child:u}),Bs(e,o,a),e.currentSubject=l,e.compoundCount++,u}var h=hs(),d=hs(),f=[{type:Ns,parent:h,child:d}];return h.checks=t.checks,t.checks=f,e.compoundCount++,d}),"populate")},{name:"descendant",separator:!0,regex:cs.descendant,populate:s((function(e,t){if(null==e.currentSubject){var r=hs(),n=hs(),i=e[e.length-1];return r.checks.push({type:As,ancestor:i,descendant:n}),Bs(e,t,r),e.compoundCount++,n}if(e.currentSubject===t){var a=hs(),o=e[e.length-1],s=hs(),l=hs(),u=hs(),c=hs();return a.checks.push({type:Ls,left:o,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:Is}],c.checks.push({type:Is}),s.checks.push({type:Rs,ancestor:c,descendant:u}),Bs(e,o,a),e.currentSubject=l,e.compoundCount++,u}var h=hs(),d=hs(),f=[{type:Rs,ancestor:h,descendant:d}];return h.checks=t.checks,t.checks=f,e.compoundCount++,d}),"populate")},{name:"subject",modifier:!0,regex:cs.subject,populate:s((function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return It("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var r=e[e.length-1].checks[0],n=null==r?null:r.type;n===ws?r.type=_s:n===Ts&&(r.type=Es,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}),"populate")}];$s.forEach((function(e){return e.regexObj=new RegExp("^"+e.regex)}));var zs=s((function(e){for(var t,r,n,i=0;i<$s.length;i++){var a=$s[i],o=a.name,s=e.match(a.regexObj);if(null!=s){r=s,t=a,n=o;var l=s[0];e=e.substring(l.length);break}}return{expr:t,match:r,name:n,remaining:e}}),"consumeExpr"),Us=s((function(e){var t=e.match(/^\s+/);if(t){var r=t[0];e=e.substring(r.length)}return e}),"consumeWhitespace"),Gs=s((function(e){var t=this,r=t.inputText=e,n=t[0]=hs();for(t.length=1,r=Us(r);;){var i=zs(r);if(null==i.expr)return It("The selector `"+e+"`is invalid"),!1;var a=i.match.slice(1),o=i.expr.populate(t,n,a);if(!1===o)return!1;if(null!=o&&(n=o),(r=i.remaining).match(/^\s*$/))break}var s=t[t.length-1];null!=t.currentSubject&&(s.subject=t.currentSubject),s.edgeCount=t.edgeCount,s.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var u=t[l];if(u.compoundCount>0&&u.edgeCount>0)return It("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(u.edgeCount>1)return It("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===u.edgeCount&&It("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0}),"parse"),js=s((function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=s((function(e){return e??""}),"clean"),t=s((function(t){return I(t)?'"'+t+'"':e(t)}),"cleanVal"),r=s((function(e){return" "+e+" "}),"space"),n=s((function(n,a){var o=n.type,s=n.value;switch(o){case ds:var l=e(s);return l.substring(0,l.length-1);case gs:var u=n.field,c=n.operator;return"["+u+r(e(c))+t(s)+"]";case ys:var h=n.operator,d=n.field;return"["+e(h)+d+"]";case ms:return"["+n.field+"]";case vs:var f=n.operator;return"[["+n.field+r(e(f))+t(s)+"]]";case xs:return s;case bs:return"#"+s;case Cs:return"."+s;case Ns:case Ss:return i(n.parent,a)+r(">")+i(n.child,a);case Rs:case As:return i(n.ancestor,a)+" "+i(n.descendant,a);case Ls:var p=i(n.left,a),g=i(n.subject,a),m=i(n.right,a);return p+(p.length>0?" ":"")+g+m;case Is:return""}}),"checkToString"),i=s((function(e,t){return e.checks.reduce((function(r,i,a){return r+(t===e&&0===a?"$":"")+n(i,t)}),"")}),"queryToString"),a="",o=0;o<this.length;o++){var l=this[o];a+=i(l,l.subject),this.length>1&&o<this.length-1&&(a+=", ")}return this.toStringCache=a,a}),"toString"),Vs={parse:Gs,toString:js},Ws=s((function(e,t,r){var n,i,a,o=I(e),s=F(e),l=I(r),u=!1,c=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),u=!0),(o||l||u)&&(i=o||s?""+e:"",a=""+r),u&&(e=i=i.toLowerCase(),r=a=a.toLowerCase()),t){case"*=":n=i.indexOf(a)>=0;break;case"$=":n=i.indexOf(a,i.length-a.length)>=0;break;case"^=":n=0===i.indexOf(a);break;case"=":n=e===r;break;case">":h=!0,n=e>r;break;case">=":h=!0,n=e>=r;break;case"<":h=!0,n=e<r;break;case"<=":h=!0,n=e<=r;break;default:n=!1}return c&&(null!=e||!h)&&(n=!n),n}),"valCmp"),qs=s((function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}}),"boolCmp"),Hs=s((function(e){return void 0!==e}),"existCmp"),Ys=s((function(e,t){return e.data(t)}),"data"),Xs=s((function(e,t){return e[t]()}),"meta"),Ks=[],Zs=s((function(e,t){return e.checks.every((function(e){return Ks[e.type](e,t)}))}),"matches");Ks[ds]=function(e,t){var r=e.value;return"*"===r||r===t.group()},Ks[xs]=function(e,t){var r=e.value;return Ds(r,t)},Ks[bs]=function(e,t){var r=e.value;return t.id()===r},Ks[Cs]=function(e,t){var r=e.value;return t.hasClass(r)},Ks[vs]=function(e,t){var r=e.field,n=e.operator,i=e.value;return Ws(Xs(t,r),n,i)},Ks[gs]=function(e,t){var r=e.field,n=e.operator,i=e.value;return Ws(Ys(t,r),n,i)},Ks[ys]=function(e,t){var r=e.field,n=e.operator;return qs(Ys(t,r),n)},Ks[ms]=function(e,t){var r=e.field;return e.operator,Hs(Ys(t,r))},Ks[Ts]=function(e,t){var r=e.nodes[0],n=e.nodes[1],i=t.source(),a=t.target();return Zs(r,i)&&Zs(n,a)||Zs(n,i)&&Zs(r,a)},Ks[Es]=function(e,t){return Zs(e.node,t)&&t.neighborhood().some((function(t){return t.isNode()&&Zs(e.neighbor,t)}))},Ks[ws]=function(e,t){return Zs(e.source,t.source())&&Zs(e.target,t.target())},Ks[ks]=function(e,t){return Zs(e.source,t)&&t.outgoers().some((function(t){return t.isNode()&&Zs(e.target,t)}))},Ks[_s]=function(e,t){return Zs(e.target,t)&&t.incomers().some((function(t){return t.isNode()&&Zs(e.source,t)}))},Ks[Ss]=function(e,t){return Zs(e.child,t)&&Zs(e.parent,t.parent())},Ks[Ns]=function(e,t){return Zs(e.parent,t)&&t.children().some((function(t){return Zs(e.child,t)}))},Ks[As]=function(e,t){return Zs(e.descendant,t)&&t.ancestors().some((function(t){return Zs(e.ancestor,t)}))},Ks[Rs]=function(e,t){return Zs(e.ancestor,t)&&t.descendants().some((function(t){return Zs(e.descendant,t)}))},Ks[Ls]=function(e,t){return Zs(e.subject,t)&&Zs(e.left,t)&&Zs(e.right,t)},Ks[Is]=function(){return!0},Ks[fs]=function(e,t){return e.value.has(t)},Ks[ps]=function(e,t){return(0,e.value)(t)};var Qs=s((function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===bs)return e.getElementById(t[0].checks[0].value).collection();var r=s((function(e){for(var r=0;r<t.length;r++){var n=t[r];if(Zs(n,e))return!0}return!1}),"selectorFunction");return null==t.text()&&(r=s((function(){return!0}),"selectorFunction")),e.filter(r)}),"filter"),Js=s((function(e){for(var t=0;t<this.length;t++){var r=this[t];if(Zs(r,e))return!0}return!1}),"matches"),el={matches:Js,filter:Qs},tl=s((function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||I(e)&&e.match(/^\s*$/)||(z(e)?this.addQuery({checks:[{type:fs,value:e.collection()}]}):M(e)?this.addQuery({checks:[{type:ps,value:e}]}):I(e)?this.parse(e)||(this.invalid=!0):Rt("A selector must be created from a string; found "))}),"Selector"),rl=tl.prototype;[Vs,el].forEach((function(e){return ue(rl,e)})),rl.text=function(){return this.inputText},rl.size=function(){return this.length},rl.eq=function(e){return this[e]},rl.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},rl.addQuery=function(e){this[this.length++]=e},rl.selector=rl.toString;var nl={allAre:s((function(e){var t=new tl(e);return this.every((function(e){return t.matches(e)}))}),"allAre"),is:s((function(e){var t=new tl(e);return this.some((function(e){return t.matches(e)}))}),"is"),some:s((function(e,t){for(var r=0;r<this.length;r++){if(t?e.apply(t,[this[r],r,this]):e(this[r],r,this))return!0}return!1}),"some"),every:s((function(e,t){for(var r=0;r<this.length;r++){if(!(t?e.apply(t,[this[r],r,this]):e(this[r],r,this)))return!1}return!0}),"every"),same:s((function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every((function(t){return e.hasElementWithId(t.id())})))}),"same"),anySame:s((function(e){return e=this.cy().collection(e),this.some((function(t){return e.hasElementWithId(t.id())}))}),"anySame"),allAreNeighbors:s((function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every((function(e){return t.hasElementWithId(e.id())}))}),"allAreNeighbors"),contains:s((function(e){e=this.cy().collection(e);var t=this;return e.every((function(e){return t.hasElementWithId(e.id())}))}),"contains")};nl.allAreNeighbours=nl.allAreNeighbors,nl.has=nl.contains,nl.equal=nl.equals=nl.same;var il,al,ol=s((function(e,t){return s((function(r,n,i,a){var o,s=r,l=this;if(null==s?o="":z(s)&&1===s.length&&(o=s.id()),1===l.length&&o){var u=l[0]._private,c=u.traversalCache=u.traversalCache||{},h=c[t]=c[t]||[],d=xt(o);return h[d]||(h[d]=e.call(l,r,n,i,a))}return e.call(l,r,n,i,a)}),"traversalCache")}),"cache"),sl={parent:s((function(e){var t=[];if(1===this.length){var r=this[0]._private.parent;if(r)return r}for(var n=0;n<this.length;n++){var i=this[n]._private.parent;i&&t.push(i)}return this.spawn(t,!0).filter(e)}),"parent"),parents:s((function(e){for(var t=[],r=this.parent();r.nonempty();){for(var n=0;n<r.length;n++){var i=r[n];t.push(i)}r=r.parent()}return this.spawn(t,!0).filter(e)}),"parents"),commonAncestors:s((function(e){for(var t,r=0;r<this.length;r++){var n=this[r].parents();t=(t=t||n).intersect(n)}return t.filter(e)}),"commonAncestors"),orphans:s((function(e){return this.stdFilter((function(e){return e.isOrphan()})).filter(e)}),"orphans"),nonorphans:s((function(e){return this.stdFilter((function(e){return e.isChild()})).filter(e)}),"nonorphans"),children:ol((function(e){for(var t=[],r=0;r<this.length;r++)for(var n=this[r]._private.children,i=0;i<n.length;i++)t.push(n[i]);return this.spawn(t,!0).filter(e)}),"children"),siblings:s((function(e){return this.parent().children().not(this).filter(e)}),"siblings"),isParent:s((function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length}),"isParent"),isChildless:s((function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length}),"isChildless"),isChild:s((function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent}),"isChild"),isOrphan:s((function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent}),"isOrphan"),descendants:s((function(e){var t=[];function r(e){for(var n=0;n<e.length;n++){var i=e[n];t.push(i),i.children().nonempty()&&r(i.children())}}return s(r,"add"),r(this.children()),this.spawn(t,!0).filter(e)}),"descendants")};function ll(e,t,r,n){for(var i=[],a=new Yt,o=e.cy().hasCompoundNodes(),s=0;s<e.length;s++){var l=e[s];r?i.push(l):o&&n(i,a,l)}for(;i.length>0;){var u=i.shift();t(u),a.add(u.id()),o&&n(i,a,u)}return e}function ul(e,t,r){if(r.isParent())for(var n=r._private.children,i=0;i<n.length;i++){var a=n[i];t.has(a.id())||e.push(a)}}function cl(e,t,r){if(r.isChild()){var n=r._private.parent;t.has(n.id())||e.push(n)}}function hl(e,t,r){cl(e,t,r),ul(e,t,r)}s(ll,"forEachCompound"),s(ul,"addChildren"),sl.forEachDown=function(e){return ll(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ul)},s(cl,"addParent"),sl.forEachUp=function(e){return ll(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],cl)},s(hl,"addParentAndChildren"),sl.forEachUpAndDown=function(e){return ll(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],hl)},sl.ancestors=sl.parents,il=al={data:ss.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:ss.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:ss.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ss.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:ss.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:ss.removeData({field:"rscratch",triggerEvent:!1}),id:s((function(){var e=this[0];if(e)return e._private.data.id}),"id")},il.attr=il.data,il.removeAttr=il.removeData;var dl=al,fl={};function pl(e){return function(t){var r=this;if(void 0===t&&(t=!0),0===r.length);else if(r.isNode()&&!r.removed()){for(var n=0,i=r[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];!t&&s.isLoop()||(n+=e(i,s))}return n}}}function gl(e,t){return function(r){for(var n,i=this.nodes(),a=0;a<i.length;a++){var o=i[a][e](r);void 0!==o&&(void 0===n||t(o,n))&&(n=o)}return n}}s(pl,"defineDegreeFunction"),ue(fl,{degree:pl((function(e,t){return t.source().same(t.target())?2:1})),indegree:pl((function(e,t){return t.target().same(e)?1:0})),outdegree:pl((function(e,t){return t.source().same(e)?1:0}))}),s(gl,"defineDegreeBoundsFunction"),ue(fl,{minDegree:gl("degree",(function(e,t){return e<t})),maxDegree:gl("degree",(function(e,t){return e>t})),minIndegree:gl("indegree",(function(e,t){return e<t})),maxIndegree:gl("indegree",(function(e,t){return e>t})),minOutdegree:gl("outdegree",(function(e,t){return e<t})),maxOutdegree:gl("outdegree",(function(e,t){return e>t}))}),ue(fl,{totalDegree:s((function(e){for(var t=0,r=this.nodes(),n=0;n<r.length;n++)t+=r[n].degree(e);return t}),"totalDegree")});var ml,yl,vl=s((function(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];if(!i.locked()){var a=i._private.position,o={x:null!=t.x?t.x-a.x:0,y:null!=t.y?t.y-a.y:0};i.isParent()&&!(0===o.x&&0===o.y)&&i.children().shift(o,r),i.dirtyBoundingBoxCache()}}}),"beforePositionSet"),xl={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:s((function(e){e.updateCompoundBounds()}),"beforeGet"),beforeSet:s((function(e,t){vl(e,t,!1)}),"beforeSet"),onSet:s((function(e){e.dirtyCompoundBoundsCache()}),"onSet"),canSet:s((function(e){return!e.locked()}),"canSet")};ml=yl={position:ss.data(xl),silentPosition:ss.data(ue({},xl,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:s((function(e,t){vl(e,t,!0)}),"beforeSet"),onSet:s((function(e){e.dirtyCompoundBoundsCache()}),"onSet")})),positions:s((function(e,t){if(D(e))t?this.silentPosition(e):this.position(e);else if(M(e)){var r=e,n=this.cy();n.startBatch();for(var i=0;i<this.length;i++){var a,o=this[i];(a=r(o,i))&&(t?o.silentPosition(a):o.position(a))}n.endBatch()}return this}),"positions"),silentPositions:s((function(e){return this.positions(e,!0)}),"silentPositions"),shift:s((function(e,t,r){var n;if(D(e)?(n={x:F(e.x)?e.x:0,y:F(e.y)?e.y:0},r=t):I(e)&&F(t)&&((n={x:0,y:0})[e]=t),null!=n){var i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var s=o.position(),l={x:s.x+n.x,y:s.y+n.y};r?o.silentPosition(l):o.position(l)}}i.endBatch()}return this}),"shift"),silentShift:s((function(e,t){return D(e)?this.shift(e,!0):I(e)&&F(t)&&this.shift(e,t,!0),this}),"silentShift"),renderedPosition:s((function(e,t){var r=this[0],n=this.cy(),i=n.zoom(),a=n.pan(),o=D(e)?e:void 0,s=void 0!==o||void 0!==t&&I(e);if(r&&r.isNode()){if(!s){var l=r.position();return o=pr(l,i,a),void 0===e?o:o[e]}for(var u=0;u<this.length;u++){var c=this[u];void 0!==t?c.position(e,(t-a[e])/i):void 0!==o&&c.position(gr(o,i,a))}}else if(!s)return;return this}),"renderedPosition"),relativePosition:s((function(e,t){var r=this[0],n=this.cy(),i=D(e)?e:void 0,a=void 0!==i||void 0!==t&&I(e),o=n.hasCompoundNodes();if(r&&r.isNode()){if(!a){var s=r.position(),l=o?r.parent():null,u=l&&l.length>0,c=u;u&&(l=l[0]);var h=c?l.position():{x:0,y:0};return i={x:s.x-h.x,y:s.y-h.y},void 0===e?i:i[e]}for(var d=0;d<this.length;d++){var f=this[d],p=o?f.parent():null,g=p&&p.length>0,m=g;g&&(p=p[0]);var y=m?p.position():{x:0,y:0};void 0!==t?f.position(e,t+y[e]):void 0!==i&&f.position({x:i.x+y.x,y:i.y+y.y})}}else if(!a)return;return this}),"relativePosition")},ml.modelPosition=ml.point=ml.position,ml.modelPositions=ml.points=ml.positions,ml.renderedPoint=ml.renderedPosition,ml.relativePoint=ml.relativePosition;var bl,Cl,Tl=yl;bl=Cl={},Cl.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),n=r.zoom(),i=r.pan(),a=t.x1*n+i.x,o=t.x2*n+i.x,s=t.y1*n+i.y,l=t.y2*n+i.y;return{x1:a,x2:o,y1:s,y2:l,w:o-a,h:l-s}},Cl.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp((function(t){if(t.isParent()){var r=t._private;r.compoundBoundsClean=!1,r.bbCache=null,e||t.emitAndNotify("bounds")}})),this):this},Cl.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(e){if(e.isParent()){var t=e._private,r=e.children(),n="include"===e.pstyle("compound-sizing-wrt-labels").value,i={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},a=r.boundingBox({includeLabels:n,includeOverlays:!1,useCache:!1}),o=t.position;(0===a.w||0===a.h)&&((a={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=o.x-a.w/2,a.x2=o.x+a.w/2,a.y1=o.y-a.h/2,a.y2=o.y+a.h/2),s(v,"computeBiasValues"),s(x,"computePaddingValues");var l=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(l=100*l/i.width.val);var u=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(u=100*u/i.width.val);var c=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(c=100*c/i.height.val);var h=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(h=100*h/i.height.val);var d=v(i.width.val-a.w,l,u),f=d.biasDiff,p=d.biasComplementDiff,g=v(i.height.val-a.h,c,h),m=g.biasDiff,y=g.biasComplementDiff;t.autoPadding=x(a.w,a.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(a.w,i.width.val),o.x=(-f+a.x1+a.x2+p)/2,t.autoHeight=Math.max(a.h,i.height.val),o.y=(-m+a.y1+a.y2+y)/2}function v(e,t,r){var n=0,i=0,a=t+r;return e>0&&a>0&&(n=t/a*e,i=r/a*e),{biasDiff:n,biasComplementDiff:i}}function x(e,t,r,n){if("%"!==r.units)return"px"===r.units?r.pfValue:0;switch(n){case"width":return e>0?r.pfValue*e:0;case"height":return t>0?r.pfValue*t:0;case"average":return e>0&&t>0?r.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?r.pfValue*t:r.pfValue*e:0;case"max":return e>0&&t>0?e>t?r.pfValue*e:r.pfValue*t:0;default:return 0}}}s(r,"update");for(var n=0;n<this.length;n++){var i=this[n],a=i._private;(!a.compoundBoundsClean||e)&&(r(i),t.batching()||(a.compoundBoundsClean=!0))}return this};var wl=s((function(e){return e===1/0||e===-1/0?0:e}),"noninf"),kl=s((function(e,t,r,n,i){n-t==0||i-r==0||null==t||null==r||null==n||null==i||(e.x1=t<e.x1?t:e.x1,e.x2=n>e.x2?n:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)}),"updateBounds"),_l=s((function(e,t){return null==t?e:kl(e,t.x1,t.y1,t.x2,t.y2)}),"updateBoundsFromBox"),El=s((function(e,t,r){return jt(e,t,r)}),"prefixedProperty"),Sl=s((function(e,t,r){if(!t.cy().headless()){var n,i,a=t._private,o=a.rstyle,s=o.arrowWidth/2;if("none"!==t.pstyle(r+"-arrow-shape").value){"source"===r?(n=o.srcX,i=o.srcY):"target"===r?(n=o.tgtX,i=o.tgtY):(n=o.midX,i=o.midY);var l=a.arrowBounds=a.arrowBounds||{},u=l[r]=l[r]||{};u.x1=n-s,u.y1=i-s,u.x2=n+s,u.y2=i+s,u.w=u.x2-u.x1,u.h=u.y2-u.y1,Br(u,1),kl(e,u.x1,u.y1,u.x2,u.y2)}}}),"updateBoundsFromArrow"),Al=s((function(e,t,r){if(!t.cy().headless()){var n;n=r?r+"-":"";var i=t._private,a=i.rstyle;if(t.pstyle(n+"label").strValue){var o,l,u,c,h=t.pstyle("text-halign"),d=t.pstyle("text-valign"),f=El(a,"labelWidth",r),p=El(a,"labelHeight",r),g=El(a,"labelX",r),m=El(a,"labelY",r),y=t.pstyle(n+"text-margin-x").pfValue,v=t.pstyle(n+"text-margin-y").pfValue,x=t.isEdge(),b=t.pstyle(n+"text-rotation"),C=t.pstyle("text-outline-width").pfValue,T=t.pstyle("text-border-width").pfValue/2,w=t.pstyle("text-background-padding").pfValue,k=p,_=f,E=_/2,S=k/2;if(x)o=g-E,l=g+E,u=m-S,c=m+S;else{switch(h.value){case"left":o=g-_,l=g;break;case"center":o=g-E,l=g+E;break;case"right":o=g,l=g+_}switch(d.value){case"top":u=m-k,c=m;break;case"center":u=m-S,c=m+S;break;case"bottom":u=m,c=m+k}}o+=y-Math.max(C,T)-w-2,l+=y+Math.max(C,T)+w+2,u+=v-Math.max(C,T)-w-2,c+=v+Math.max(C,T)+w+2;var A=r||"main",N=i.labelBounds,R=N[A]=N[A]||{};R.x1=o,R.y1=u,R.x2=l,R.y2=c,R.w=l-o,R.h=c-u;var L=x&&"autorotate"===b.strValue,I=null!=b.pfValue&&0!==b.pfValue;if(L||I){var M=L?El(i.rstyle,"labelAngle",r):b.pfValue,O=Math.cos(M),D=Math.sin(M),P=(o+l)/2,F=(u+c)/2;if(!x){switch(h.value){case"left":P=l;break;case"right":P=o}switch(d.value){case"top":F=c;break;case"bottom":F=u}}var B=s((function(e,t){return{x:(e-=P)*O-(t-=F)*D+P,y:e*D+t*O+F}}),"rotate"),$=B(o,u),z=B(o,c),U=B(l,u),G=B(l,c);o=Math.min($.x,z.x,U.x,G.x),l=Math.max($.x,z.x,U.x,G.x),u=Math.min($.y,z.y,U.y,G.y),c=Math.max($.y,z.y,U.y,G.y)}var j=A+"Rot",V=N[j]=N[j]||{};V.x1=o,V.y1=u,V.x2=l,V.y2=c,V.w=l-o,V.h=c-u,kl(e,o,u,l,c),kl(i.labelBounds.all,o,u,l,c)}return e}}),"updateBoundsFromLabel"),Nl=s((function(e,t){if(!t.cy().headless()){var r=t.pstyle("outline-opacity").value,n=t.pstyle("outline-width").value;if(r>0&&n>0){var i=t.pstyle("outline-offset").value,a=t.pstyle("shape").value,o=n+i,s=(e.w+2*o)/e.w,l=(e.h+2*o)/e.h,u=0;["diamond","pentagon","round-triangle"].includes(a)?(s=(e.w+2.4*o)/e.w,u=-o/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(a)?s=(e.w+2.4*o)/e.w:"star"===a?(s=(e.w+2.8*o)/e.w,l=(e.h+2.6*o)/e.h,u=-o/3.8):"triangle"===a?(s=(e.w+2.8*o)/e.w,l=(e.h+2.4*o)/e.h,u=-o/1.4):"vee"===a&&(s=(e.w+4.4*o)/e.w,l=(e.h+3.8*o)/e.h,u=.5*-o);var c=e.h*l-e.h,h=e.w*s-e.w;if($r(e,[Math.ceil(c/2),Math.ceil(h/2)]),0!==u){var d=Dr(e,0,u);Pr(e,d)}}}}),"updateBoundsFromOutline"),Rl=s((function(e,t){var r,n,i,a,o,l,u=e._private.cy,c=u.styleEnabled(),h=u.headless(),d=Ir(),f=e._private,p=e.isNode(),g=e.isEdge(),m=f.rstyle,y=p&&c?e.pstyle("bounds-expansion").pfValue:[0],v=s((function(e){return"none"!==e.pstyle("display").value}),"isDisplayed"),x=!c||v(e)&&(!g||v(e.source())&&v(e.target()));if(x){var b=0;c&&t.includeOverlays&&(0!==e.pstyle("overlay-opacity").value&&(b=e.pstyle("overlay-padding").value));var C=0;c&&t.includeUnderlays&&(0!==e.pstyle("underlay-opacity").value&&(C=e.pstyle("underlay-padding").value));var T=Math.max(b,C),w=0;if(c&&(w=e.pstyle("width").pfValue/2),p&&t.includeNodes){var k=e.position();o=k.x,l=k.y;var _=e.outerWidth()/2,E=e.outerHeight()/2;kl(d,r=o-_,i=l-E,n=o+_,a=l+E),c&&t.includeOutlines&&Nl(d,e)}else if(g&&t.includeEdges)if(c&&!h){var S=e.pstyle("curve-style").strValue;if(r=Math.min(m.srcX,m.midX,m.tgtX),n=Math.max(m.srcX,m.midX,m.tgtX),i=Math.min(m.srcY,m.midY,m.tgtY),a=Math.max(m.srcY,m.midY,m.tgtY),kl(d,r-=w,i-=w,n+=w,a+=w),"haystack"===S){var A=m.haystackPts;if(A&&2===A.length){if(r=A[0].x,i=A[0].y,r>(n=A[1].x)){var N=r;r=n,n=N}if(i>(a=A[1].y)){var R=i;i=a,a=R}kl(d,r-w,i-w,n+w,a+w)}}else if("bezier"===S||"unbundled-bezier"===S||S.endsWith("segments")||S.endsWith("taxi")){var L;switch(S){case"bezier":case"unbundled-bezier":L=m.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":L=m.linePts}if(null!=L)for(var I=0;I<L.length;I++){var M=L[I];r=M.x-w,n=M.x+w,i=M.y-w,a=M.y+w,kl(d,r,i,n,a)}}}else{var O=e.source().position(),D=e.target().position();if((r=O.x)>(n=D.x)){var P=r;r=n,n=P}if((i=O.y)>(a=D.y)){var F=i;i=a,a=F}kl(d,r-=w,i-=w,n+=w,a+=w)}if(c&&t.includeEdges&&g&&(Sl(d,e,"mid-source"),Sl(d,e,"mid-target"),Sl(d,e,"source"),Sl(d,e,"target")),c)if("yes"===e.pstyle("ghost").value){var B=e.pstyle("ghost-offset-x").pfValue,$=e.pstyle("ghost-offset-y").pfValue;kl(d,d.x1+B,d.y1+$,d.x2+B,d.y2+$)}var z=f.bodyBounds=f.bodyBounds||{};zr(z,d),$r(z,y),Br(z,1),c&&(r=d.x1,n=d.x2,i=d.y1,a=d.y2,kl(d,r-T,i-T,n+T,a+T));var U=f.overlayBounds=f.overlayBounds||{};zr(U,d),$r(U,y),Br(U,1);var G=f.labelBounds=f.labelBounds||{};null!=G.all?Or(G.all):G.all=Ir(),c&&t.includeLabels&&(t.includeMainLabels&&Al(d,e,null),g&&(t.includeSourceLabels&&Al(d,e,"source"),t.includeTargetLabels&&Al(d,e,"target")))}return d.x1=wl(d.x1),d.y1=wl(d.y1),d.x2=wl(d.x2),d.y2=wl(d.y2),d.w=wl(d.x2-d.x1),d.h=wl(d.y2-d.y1),d.w>0&&d.h>0&&x&&($r(d,y),Br(d,1)),d}),"boundingBoxImpl"),Ll=s((function(e){var t=0,r=s((function(e){return(e?1:0)<<t++}),"tf"),n=0;return n+=r(e.incudeNodes),n+=r(e.includeEdges),n+=r(e.includeLabels),n+=r(e.includeMainLabels),n+=r(e.includeSourceLabels),n+=r(e.includeTargetLabels),n+=r(e.includeOverlays),n+=r(e.includeOutlines)}),"getKey"),Il=s((function(e){if(e.isEdge()){var t=e.source().position(),r=e.target().position(),n=s((function(e){return Math.round(e)}),"r");return vt([n(t.x),n(t.y),n(r.x),n(r.y)])}return 0}),"getBoundingBoxPosKey"),Ml=s((function(e,t){var r,n=e._private,i=e.isEdge(),a=(null==t?Dl:Ll(t))===Dl,o=Il(e),l=n.bbCachePosKey===o,u=t.useCache&&l,c=s((function(e){return null==e._private.bbCache||e._private.styleDirty}),"isDirty");if(!u||c(e)||i&&c(e.source())||c(e.target())?(l||e.recalculateRenderedStyle(u),r=Rl(e,Ol),n.bbCache=r,n.bbCachePosKey=o):r=n.bbCache,!a){var h=e.isNode();r=Ir(),(t.includeNodes&&h||t.includeEdges&&!h)&&(t.includeOverlays?_l(r,n.overlayBounds):_l(r,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?_l(r,n.labelBounds.all):(t.includeMainLabels&&_l(r,n.labelBounds.mainRot),t.includeSourceLabels&&_l(r,n.labelBounds.sourceRot),t.includeTargetLabels&&_l(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r}),"cachedBoundingBoxImpl"),Ol={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Dl=Ll(Ol),Pl=$t(Ol);Cl.boundingBox=function(e){var t;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==e&&void 0!==e.useCache&&!0!==e.useCache){t=Ir();var r=Pl(e=e||Ol),n=this;if(n.cy().styleEnabled())for(var i=0;i<n.length;i++){var a=n[i],o=a._private,s=Il(a),l=o.bbCachePosKey===s,u=r.useCache&&l&&!o.styleDirty;a.recalculateRenderedStyle(u)}this.updateCompoundBounds(!e.useCache);for(var c=0;c<n.length;c++){var h=n[c];_l(t,Ml(h,r))}}else e=void 0===e?Ol:Pl(e),t=Ml(this[0],e);return t.x1=wl(t.x1),t.y1=wl(t.y1),t.x2=wl(t.x2),t.y2=wl(t.y2),t.w=wl(t.x2-t.x1),t.h=wl(t.y2-t.y1),t},Cl.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Cl.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),i=r.collection();if(n&&(i=t.filter((function(e){return e.isParent()})),t=t.not(i)),D(e)){var a=e;e=s((function(){return a}),"fn")}var o=s((function(t,r){return t._private.bbAtOldPos=e(t,r)}),"storeOldPos"),l=s((function(e){return e._private.bbAtOldPos}),"getOldPos");r.startBatch(),t.forEach(o).silentPositions(e),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=Mr(this.boundingBox({useCache:!1}));return t.silentPositions(l),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),r.endBatch(),u},bl.boundingbox=bl.bb=bl.boundingBox,bl.renderedBoundingbox=bl.renderedBoundingBox;var Fl,Bl,$l=Cl;Fl=Bl={};var zl=s((function(e){e.uppercaseName=te(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=te(e.outerName),Fl[e.name]=s((function(){var t=this[0],r=t._private,n=r.cy._private.styleEnabled;if(t){if(n){if(t.isParent())return t.updateCompoundBounds(),r[e.autoName]||0;var i=t.pstyle(e.name);return"label"===i.strValue?(t.recalculateRenderedStyle(),r.rstyle[e.labelName]||0):i.pfValue}return 1}}),"dimImpl"),Fl["outer"+e.uppercaseName]=s((function(){var t=this[0],r=t._private.cy._private.styleEnabled;if(t)return r?t[e.name]()+t.pstyle("border-width").pfValue+2*t.padding():1}),"outerDimImpl"),Fl["rendered"+e.uppercaseName]=s((function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()}),"renderedDimImpl"),Fl["rendered"+e.uppercaseOuterName]=s((function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}),"renderedOuterDimImpl")}),"defineDimFns");zl({name:"width"}),zl({name:"height"}),Bl.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},Bl.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},Bl.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var Ul=Bl,Gl=s((function(e,t){if(e.isEdge())return t(e)}),"ifEdge"),jl=s((function(e,t){if(e.isEdge()){var r=e.cy();return pr(t(e),r.zoom(),r.pan())}}),"ifEdgeRenderedPosition"),Vl=s((function(e,t){if(e.isEdge()){var r=e.cy(),n=r.pan(),i=r.zoom();return t(e).map((function(e){return pr(e,i,n)}))}}),"ifEdgeRenderedPositions"),Wl=s((function(e){return e.renderer().getControlPoints(e)}),"controlPoints"),ql=s((function(e){return e.renderer().getSegmentPoints(e)}),"segmentPoints"),Hl=s((function(e){return e.renderer().getSourceEndpoint(e)}),"sourceEndpoint"),Yl=s((function(e){return e.renderer().getTargetEndpoint(e)}),"targetEndpoint"),Xl=s((function(e){return e.renderer().getEdgeMidpoint(e)}),"midpoint"),Kl={controlPoints:{get:Wl,mult:!0},segmentPoints:{get:ql,mult:!0},sourceEndpoint:{get:Hl},targetEndpoint:{get:Yl},midpoint:{get:Xl}},Zl=s((function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)}),"renderedName"),Ql=Object.keys(Kl).reduce((function(e,t){var r=Kl[t],n=Zl(t);return e[t]=function(){return Gl(this,r.get)},r.mult?e[n]=function(){return Vl(this,r.get)}:e[n]=function(){return jl(this,r.get)},e}),{}),Jl=ue({},Tl,$l,Ul,Ql),eu=s((function(e,t){this.recycle(e,t)}),"Event");function tu(){return!1}function ru(){return!0}s(tu,"returnFalse"),s(ru,"returnTrue"),eu.prototype={instanceString:s((function(){return"event"}),"instanceString"),recycle:s((function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=tu,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ru:tu):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var r=this.position,n=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:r.x*n+i.x,y:r.y*n+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()}),"recycle"),preventDefault:s((function(){this.isDefaultPrevented=ru;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()}),"preventDefault"),stopPropagation:s((function(){this.isPropagationStopped=ru;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()}),"stopPropagation"),stopImmediatePropagation:s((function(){this.isImmediatePropagationStopped=ru,this.stopPropagation()}),"stopImmediatePropagation"),isDefaultPrevented:tu,isPropagationStopped:tu,isImmediatePropagationStopped:tu};var nu=/^([^.]+)(\.(?:[^.]+))?$/,iu={qualifierCompare:s((function(e,t){return e===t}),"qualifierCompare"),eventMatches:s((function(){return!0}),"eventMatches"),addEventFields:s((function(){}),"addEventFields"),callbackContext:s((function(e){return e}),"callbackContext"),beforeEmit:s((function(){}),"beforeEmit"),afterEmit:s((function(){}),"afterEmit"),bubble:s((function(){return!1}),"bubble"),parent:s((function(){return null}),"parent"),context:null},au=Object.keys(iu),ou={};function su(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ou,t=arguments.length>1?arguments[1]:void 0,r=0;r<au.length;r++){var n=au[r];this[n]=e[n]||iu[n]}this.context=t||this.context,this.listeners=[],this.emitting=0}s(su,"Emitter");var lu=su.prototype,uu=s((function(e,t,r,n,i,a,o){M(n)&&(i=n,n=null),o&&(a=null==a?o:ue({},a,o));for(var s=O(r)?r:r.split(/\s+/),l=0;l<s.length;l++){var u=s[l];if(!q(u)){var c=u.match(nu);if(c)if(!1===t(e,u,c[1],c[2]?c[2]:null,n,i,a))break}}}),"forEachEvent"),cu=s((function(e,t){return e.addEventFields(e.context,t),new eu(t.type,t)}),"makeEventObj"),hu=s((function(e,t,r){if(W(r))t(e,r);else if(D(r))t(e,cu(e,r));else for(var n=O(r)?r:r.split(/\s+/),i=0;i<n.length;i++){var a=n[i];if(!q(a)){var o=a.match(nu);if(o){var s=o[1],l=o[2]?o[2]:null;t(e,cu(e,{type:s,namespace:l,target:e.context}))}}}}),"forEachEventObj");lu.on=lu.addListener=function(e,t,r,n,i){return uu(this,(function(e,t,r,n,i,a,o){M(a)&&e.listeners.push({event:t,callback:a,type:r,namespace:n,qualifier:i,conf:o})}),e,t,r,n,i),this},lu.one=function(e,t,r,n){return this.on(e,t,r,n,{one:!0})},lu.removeListener=lu.off=function(e,t,r,n){var i=this;0!==this.emitting&&(this.listeners=Dt(this.listeners));for(var a=this.listeners,o=s((function(o){var s=a[o];uu(i,(function(t,r,n,i,l,u){if((s.type===n||"*"===e)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!l||t.qualifierCompare(s.qualifier,l))&&(!u||s.callback===u))return a.splice(o,1),!1}),e,t,r,n)}),"_loop"),l=a.length-1;l>=0;l--)o(l);return this},lu.removeAllListeners=function(){return this.removeListener("*")},lu.emit=lu.trigger=function(e,t,r){var n=this.listeners,i=n.length;return this.emitting++,O(t)||(t=[t]),hu(this,(function(e,a){null!=r&&(n=[{event:a.event,type:a.type,namespace:a.namespace,callback:r}],i=n.length);for(var o=s((function(r){var i=n[r];if(i.type===a.type&&(!i.namespace||i.namespace===a.namespace||".*"===i.namespace)&&e.eventMatches(e.context,i,a)){var o=[a];null!=t&&Gt(o,t),e.beforeEmit(e.context,i,a),i.conf&&i.conf.one&&(e.listeners=e.listeners.filter((function(e){return e!==i})));var s=e.callbackContext(e.context,i,a),l=i.callback.apply(s,o);e.afterEmit(e.context,i,a),!1===l&&(a.stopPropagation(),a.preventDefault())}}),"_loop2"),l=0;l<i;l++)o(l);e.bubble(e.context)&&!a.isPropagationStopped()&&e.parent(e.context).emit(a,t)}),e),this.emitting--,this};var du={qualifierCompare:s((function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)}),"qualifierCompare"),eventMatches:s((function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&U(r.target)&&n.matches(r.target)}),"eventMatches"),addEventFields:s((function(e,t){t.cy=e.cy(),t.target=e}),"addEventFields"),callbackContext:s((function(e,t,r){return null!=t.qualifier?r.target:e}),"callbackContext"),beforeEmit:s((function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)}),"beforeEmit"),bubble:s((function(){return!0}),"bubble"),parent:s((function(e){return e.isChild()?e.parent():e.cy()}),"parent")},fu=s((function(e){return I(e)?new tl(e):e}),"argSelector"),pu={createEmitter:s((function(){for(var e=0;e<this.length;e++){var t=this[e],r=t._private;r.emitter||(r.emitter=new su(du,t))}return this}),"createEmitter"),emitter:s((function(){return this._private.emitter}),"emitter"),on:s((function(e,t,r){for(var n=fu(t),i=0;i<this.length;i++){this[i].emitter().on(e,n,r)}return this}),"on"),removeListener:s((function(e,t,r){for(var n=fu(t),i=0;i<this.length;i++){this[i].emitter().removeListener(e,n,r)}return this}),"removeListener"),removeAllListeners:s((function(){for(var e=0;e<this.length;e++){this[e].emitter().removeAllListeners()}return this}),"removeAllListeners"),one:s((function(e,t,r){for(var n=fu(t),i=0;i<this.length;i++){this[i].emitter().one(e,n,r)}return this}),"one"),once:s((function(e,t,r){for(var n=fu(t),i=0;i<this.length;i++){this[i].emitter().on(e,n,r,{once:!0,onceCollection:this})}}),"once"),emit:s((function(e,t){for(var r=0;r<this.length;r++){this[r].emitter().emit(e,t)}return this}),"emit"),emitAndNotify:s((function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}),"emitAndNotify")};ss.eventAliasesOn(pu);var gu={nodes:s((function(e){return this.filter((function(e){return e.isNode()})).filter(e)}),"nodes"),edges:s((function(e){return this.filter((function(e){return e.isEdge()})).filter(e)}),"edges"),byGroup:s((function(){for(var e=this.spawn(),t=this.spawn(),r=0;r<this.length;r++){var n=this[r];n.isNode()?e.push(n):t.push(n)}return{nodes:e,edges:t}}),"byGroup"),filter:s((function(e,t){if(void 0===e)return this;if(I(e)||z(e))return new tl(e).filter(this);if(M(e)){for(var r=this.spawn(),n=this,i=0;i<n.length;i++){var a=n[i];(t?e.apply(t,[a,i,n]):e(a,i,n))&&r.push(a)}return r}return this.spawn()}),"filter"),not:s((function(e){if(e){I(e)&&(e=this.filter(e));for(var t=this.spawn(),r=0;r<this.length;r++){var n=this[r];e.has(n)||t.push(n)}return t}return this}),"not"),absoluteComplement:s((function(){return this.cy().mutableElements().not(this)}),"absoluteComplement"),intersect:s((function(e){if(I(e)){var t=e;return this.filter(t)}for(var r=this.spawn(),n=e,i=this.length<e.length,a=i?this:n,o=i?n:this,s=0;s<a.length;s++){var l=a[s];o.has(l)&&r.push(l)}return r}),"intersect"),xor:s((function(e){var t=this._private.cy;I(e)&&(e=t.$(e));var r=this.spawn(),n=e,i=s((function(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=i._private.data.id;t.hasElementWithId(a)||r.push(i)}}),"add");return i(this,n),i(n,this),r}),"xor"),diff:s((function(e){var t=this._private.cy;I(e)&&(e=t.$(e));var r=this.spawn(),n=this.spawn(),i=this.spawn(),a=e,o=s((function(e,t,r){for(var n=0;n<e.length;n++){var a=e[n],o=a._private.data.id;t.hasElementWithId(o)?i.merge(a):r.push(a)}}),"add");return o(this,a,r),o(a,this,n),{left:r,right:n,both:i}}),"diff"),add:s((function(e){var t=this._private.cy;if(!e)return this;if(I(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=this.spawnSelf(),i=0;i<e.length;i++){var a=e[i];!this.has(a)&&n.push(a)}return n}),"add"),merge:s((function(e){var t=this._private,r=t.cy;if(!e)return this;if(e&&I(e)){var n=e;e=r.mutableElements().filter(n)}for(var i=t.map,a=0;a<e.length;a++){var o=e[a],s=o._private.data.id;if(!i.has(s)){var l=this.length++;this[l]=o,i.set(s,{ele:o,index:l})}}return this}),"merge"),unmergeAt:s((function(e){var t=this[e].id(),r=this._private.map;this[e]=void 0,r.delete(t);var n=e===this.length-1;if(this.length>1&&!n){var i=this.length-1,a=this[i],o=a._private.data.id;this[i]=void 0,this[e]=a,r.set(o,{ele:a,index:e})}return this.length--,this}),"unmergeAt"),unmergeOne:s((function(e){e=e[0];var t=this._private,r=e._private.data.id,n=t.map.get(r);if(!n)return this;var i=n.index;return this.unmergeAt(i),this}),"unmergeOne"),unmerge:s((function(e){var t=this._private.cy;if(!e)return this;if(e&&I(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=0;n<e.length;n++)this.unmergeOne(e[n]);return this}),"unmerge"),unmergeBy:s((function(e){for(var t=this.length-1;t>=0;t--){e(this[t])&&this.unmergeAt(t)}return this}),"unmergeBy"),map:s((function(e,t){for(var r=[],n=this,i=0;i<n.length;i++){var a=n[i],o=t?e.apply(t,[a,i,n]):e(a,i,n);r.push(o)}return r}),"map"),reduce:s((function(e,t){for(var r=t,n=this,i=0;i<n.length;i++)r=e(r,n[i],i,n);return r}),"reduce"),max:s((function(e,t){for(var r,n=-1/0,i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);s>n&&(n=s,r=o)}return{value:n,ele:r}}),"max"),min:s((function(e,t){for(var r,n=1/0,i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);s<n&&(n=s,r=o)}return{value:n,ele:r}}),"min")},mu=gu;mu.u=mu["|"]=mu["+"]=mu.union=mu.or=mu.add,mu["\\"]=mu["!"]=mu["-"]=mu.difference=mu.relativeComplement=mu.subtract=mu.not,mu.n=mu["&"]=mu["."]=mu.and=mu.intersection=mu.intersect,mu["^"]=mu["(+)"]=mu["(-)"]=mu.symmetricDifference=mu.symdiff=mu.xor,mu.fnFilter=mu.filterFn=mu.stdFilter=mu.filter,mu.complement=mu.abscomp=mu.absoluteComplement;var yu={isNode:s((function(){return"nodes"===this.group()}),"isNode"),isEdge:s((function(){return"edges"===this.group()}),"isEdge"),isLoop:s((function(){return this.isEdge()&&this.source()[0]===this.target()[0]}),"isLoop"),isSimple:s((function(){return this.isEdge()&&this.source()[0]!==this.target()[0]}),"isSimple"),group:s((function(){var e=this[0];if(e)return e._private.group}),"group")},vu=s((function(e,t){var r=e.cy().hasCompoundNodes();function n(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?r?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?_t:0}s(n,"getDepth");var i=n(e)-n(t);if(0!==i)return i;function a(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}s(a,"getEleDepth");var o=a(e)-a(t);if(0!==o)return o;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==l?l:e.poolIndex()-t.poolIndex()}),"zIndexSort"),xu={forEach:s((function(e,t){if(M(e))for(var r=this.length,n=0;n<r;n++){var i=this[n];if(!1===(t?e.apply(t,[i,n,this]):e(i,n,this)))break}return this}),"forEach"),toArray:s((function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e}),"toArray"),slice:s((function(e,t){var r=[],n=this.length;null==t&&(t=n),null==e&&(e=0),e<0&&(e=n+e),t<0&&(t=n+t);for(var i=e;i>=0&&i<t&&i<n;i++)r.push(this[i]);return this.spawn(r)}),"slice"),size:s((function(){return this.length}),"size"),eq:s((function(e){return this[e]||this.spawn()}),"eq"),first:s((function(){return this[0]||this.spawn()}),"first"),last:s((function(){return this[this.length-1]||this.spawn()}),"last"),empty:s((function(){return 0===this.length}),"empty"),nonempty:s((function(){return!this.empty()}),"nonempty"),sort:s((function(e){if(!M(e))return this;var t=this.toArray().sort(e);return this.spawn(t)}),"sort"),sortByZIndex:s((function(){return this.sort(vu)}),"sortByZIndex"),zDepth:s((function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:_t-1}var n=t.source,i=t.target,a=n.zDepth(),o=i.zDepth();return Math.max(a,o,0)}}),"zDepth")};xu.each=xu.forEach;var bu=s((function(){var e="undefined";(typeof Symbol>"u"?"undefined":f(Symbol))!=e&&f(Symbol.iterator)!=e&&(xu[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},r=0,n=this.length;return y({next:s((function(){return r<n?t.value=e[r++]:(t.value=void 0,t.done=!0),t}),"next")},Symbol.iterator,(function(){return this}))})}),"defineSymbolIterator");bu();var Cu=$t({nodeDimensionsIncludeLabels:!1}),Tu={layoutDimensions:s((function(e){var t;if(e=Cu(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var r=this.boundingBox();t={w:r.w,h:r.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return(0===t.w||0===t.h)&&(t.w=t.h=1),t}),"layoutDimensions"),layoutPositions:s((function(e,t,r){var n=this.nodes().filter((function(e){return!e.isParent()})),i=this.cy(),a=t.eles,o=s((function(e){return e.id()}),"getMemoizeKey"),l=Z(r,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=s((function(e,t,r){var n=t.x1+t.w/2,i=t.y1+t.h/2;return{x:n+(r.x-n)*e,y:i+(r.y-i)*e}}),"calculateSpacing"),c=t.spacingFactor&&1!==t.spacingFactor,h=s((function(){if(!c)return null;for(var e=Ir(),t=0;t<n.length;t++){var r=n[t],i=l(r,t);Fr(e,i.x,i.y)}return e}),"spacingBb"),d=h(),f=Z((function(e,r){var n=l(e,r);if(c){var i=Math.abs(t.spacingFactor);n=u(i,d,n)}return null!=t.transform&&(n=t.transform(e,n)),n}),o);if(t.animate){for(var p=0;p<n.length;p++){var g=n[p],m=f(g,p);if(null==t.animateFilter||t.animateFilter(g,p)){var y=g.animation({position:m,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}else g.position(m)}if(t.fit){var v=i.animation({fit:{boundingBox:a.boundingBoxAt(f),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(v)}else if(void 0!==t.zoom&&void 0!==t.pan){var x=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(x)}e.animations.forEach((function(e){return e.play()})),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Wi.all(e.animations.map((function(e){return e.promise()}))).then((function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})}))}else n.positions(f),t.fit&&i.fit(t.eles,t.padding),null!=t.zoom&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this}),"layoutPositions"),layout:s((function(e){return this.cy().makeLayout(ue({},e,{eles:this}))}),"layout")};function wu(e,t,r){var n,i=r._private,a=i.styleCache=i.styleCache||[];return null!=(n=a[e])||(n=a[e]=t(r)),n}function ku(e,t){return e=xt(e),s((function(r){return wu(e,t,r)}),"cachedStyleFunction")}function _u(e,t){e=xt(e);var r=s((function(e){return t.call(e)}),"selfFn");return s((function(){var t=this[0];if(t)return wu(e,r,t)}),"cachedPrototypeStyleFunction")}Tu.createLayout=Tu.makeLayout=Tu.layout,s(wu,"styleCache"),s(ku,"cacheStyleFunction"),s(_u,"cachePrototypeStyleFunction");var Eu={recalculateRenderedStyle:s((function(e){var t=this.cy(),r=t.renderer(),n=t.styleEnabled();return r&&n&&r.recalculateRenderedStyle(this,e),this}),"recalculateRenderedStyle"),dirtyStyleCache:s((function(){var e,t=this.cy(),r=s((function(e){return e._private.styleCache=null}),"dirty");t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(r)):this.forEach((function(e){r(e),e.connectedEdges().forEach(r)}));return this}),"dirtyStyleCache"),updateStyle:s((function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var r=this;e=!(!e&&void 0!==e),t.hasCompoundNodes()&&(r=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var n=r;return e?n.emitAndNotify("style"):n.emit("style"),r.forEach((function(e){return e._private.styleDirty=!0})),this}),"updateStyle"),cleanStyle:s((function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var r=this[t];r._private.styleDirty&&(r._private.styleDirty=!1,e.style().apply(r))}}),"cleanStyle"),parsedStyle:s((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this[0],n=r.cy();if(n.styleEnabled()&&r)return this.cleanStyle(),r._private.style[e]??(t?n.style().getDefaultProperty(e):null)}),"parsedStyle"),numericStyle:s((function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var r=t.pstyle(e);return void 0!==r.pfValue?r.pfValue:r.value}}),"numericStyle"),numericStyleUnits:s((function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units}),"numericStyleUnits"),renderedStyle:s((function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=this[0];return r?t.style().getRenderedStyle(r,e):void 0}),"renderedStyle"),style:s((function(e,t){var r=this.cy();if(!r.styleEnabled())return this;var n=r.style();if(D(e)){var i=e;n.applyBypass(this,i,false),this.emitAndNotify("style")}else if(I(e)){if(void 0===t){var a=this[0];return a?n.getStylePropertyValue(a,e):void 0}n.applyBypass(this,e,t,false),this.emitAndNotify("style")}else if(void 0===e){var o=this[0];return o?n.getRawStyle(o):void 0}return this}),"style"),removeStyle:s((function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=t.style(),n=this;if(void 0===e)for(var i=0;i<n.length;i++){var a=n[i];r.removeAllBypasses(a,false)}else{e=e.split(/\s+/);for(var o=0;o<n.length;o++){var s=n[o];r.removeBypasses(s,e,false)}}return this.emitAndNotify("style"),this}),"removeStyle"),show:s((function(){return this.css("display","element"),this}),"show"),hide:s((function(){return this.css("display","none"),this}),"hide"),effectiveOpacity:s((function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),r=this[0];if(r){var n=r._private,i=r.pstyle("opacity").value;if(!t)return i;var a=n.data.parent?r.parents():null;if(a)for(var o=0;o<a.length;o++){i*=a[o].pstyle("opacity").value}return i}}),"effectiveOpacity"),transparent:s((function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0}),"transparent"),backgrounding:s((function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}),"backgrounding")};function Su(e,t){var r=e._private.data.parent?e.parents():null;if(r)for(var n=0;n<r.length;n++){if(!t(r[n]))return!1}return!0}function Au(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,n=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var i=this[0],a=e.hasCompoundNodes();if(i){var o=i._private;if(!t(i))return!1;if(i.isNode())return!a||Su(i,n);var s=o.source,l=o.target;return r(s)&&(!a||Su(s,r))&&(s===l||r(l)&&(!a||Su(l,r)))}}}s(Su,"checkCompound"),s(Au,"defineDerivedStateFunction");var Nu=ku("eleTakesUpSpace",(function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())}));Eu.takesUpSpace=_u("takesUpSpace",Au({ok:Nu}));var Ru=ku("eleInteractive",(function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&Nu(e)})),Lu=ku("parentInteractive",(function(e){return"visible"===e.pstyle("visibility").value&&Nu(e)}));Eu.interactive=_u("interactive",Au({ok:Ru,parentOk:Lu,edgeOkViaNode:Nu})),Eu.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var Iu=ku("eleVisible",(function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&Nu(e)})),Mu=Nu;Eu.visible=_u("visible",Au({ok:Iu,edgeOkViaNode:Mu})),Eu.hidden=function(){var e=this[0];if(e)return!e.visible()},Eu.isBundledBezier=_u("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())})),Eu.bypass=Eu.css=Eu.style,Eu.renderedCss=Eu.renderedStyle,Eu.removeBypass=Eu.removeCss=Eu.removeStyle,Eu.pstyle=Eu.parsedStyle;var Ou={};function Du(e){return function(){var t=arguments,r=[];if(2===t.length){var n=t[0],i=t[1];this.on(e.event,n,i)}else if(1===t.length&&M(t[0])){var a=t[0];this.on(e.event,a)}else if(0===t.length||1===t.length&&O(t[0])){for(var o=1===t.length?t[0]:null,s=0;s<this.length;s++){var l=this[s],u=!e.ableField||l._private[e.ableField],c=l._private[e.field]!=e.value;if(e.overrideAble){var h=e.overrideAble(l);if(void 0!==h&&(u=h,!h))return this}u&&(l._private[e.field]=e.value,c&&r.push(l))}var d=this.spawn(r);d.updateStyle(),d.emit(e.event),o&&d.emit(o)}return this}}function Pu(e){Ou[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(void 0!==r)return r}return t._private[e.field]}},Ou[e.on]=Du({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),Ou[e.off]=Du({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}s(Du,"defineSwitchFunction"),s(Pu,"defineSwitchSet"),Pu({field:"locked",overrideField:s((function(e){return!!e.cy().autolock()||void 0}),"overrideField"),on:"lock",off:"unlock"}),Pu({field:"grabbable",overrideField:s((function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0}),"overrideField"),on:"grabify",off:"ungrabify"}),Pu({field:"selected",ableField:"selectable",overrideAble:s((function(e){return!e.cy().autounselectify()&&void 0}),"overrideAble"),on:"select",off:"unselect"}),Pu({field:"selectable",overrideField:s((function(e){return!e.cy().autounselectify()&&void 0}),"overrideField"),on:"selectify",off:"unselectify"}),Ou.deselect=Ou.unselect,Ou.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},Pu({field:"active",on:"activate",off:"unactivate"}),Pu({field:"pannable",on:"panify",off:"unpanify"}),Ou.inactive=function(){var e=this[0];if(e)return!e._private.active};var Fu={},Bu=s((function(e){return s((function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode()){for(var a=!1,o=i.connectedEdges(),s=0;s<o.length;s++){var l=o[s],u=l.source(),c=l.target();if(e.noIncomingEdges&&c===i&&u!==i||e.noOutgoingEdges&&u===i&&c!==i){a=!0;break}}a||r.push(i)}}return this.spawn(r,!0).filter(t)}),"dagExtremityImpl")}),"defineDagExtremity"),$u=s((function(e){return function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode())for(var a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target();e.outgoing&&l===i?(r.push(s),r.push(u)):e.incoming&&u===i&&(r.push(s),r.push(l))}}return this.spawn(r,!0).filter(t)}}),"defineDagOneHop"),zu=s((function(e){return function(t){for(var r=this,n=[],i={};;){var a=e.outgoing?r.outgoers():r.incomers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var l=a[s],u=l.id();i[u]||(i[u]=!0,n.push(l),o=!0)}if(!o)break;r=a}return this.spawn(n,!0).filter(t)}}),"defineDagAllHops");function Uu(e){return s((function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n]._private[e.attr];i&&r.push(i)}return this.spawn(r,!0).filter(t)}),"sourceImpl")}function Gu(e){return s((function(t){var r=[],n=this._private.cy,i=e||{};I(t)&&(t=n.$(t));for(var a=0;a<t.length;a++)for(var o=t[a]._private.edges,s=0;s<o.length;s++){var l=o[s],u=l._private.data,c=this.hasElementWithId(u.source)&&t.hasElementWithId(u.target),h=t.hasElementWithId(u.source)&&this.hasElementWithId(u.target);(c||h)&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!h)||r.push(l))}return this.spawn(r,!0)}),"edgesWithImpl")}function ju(e){return e=ue({},{codirected:!1},e),s((function(t){for(var r=[],n=this.edges(),i=e,a=0;a<n.length;a++)for(var o=n[a]._private,s=o.source,l=s._private.data.id,u=o.data.target,c=s._private.edges,h=0;h<c.length;h++){var d=c[h],f=d._private.data,p=f.target,g=f.source,m=p===u&&g===l,y=l===p&&u===g;(i.codirected&&m||!i.codirected&&(m||y))&&r.push(d)}return this.spawn(r,!0).filter(t)}),"parallelEdgesImpl")}Fu.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},ue(Fu,{roots:Bu({noIncomingEdges:!0}),leaves:Bu({noOutgoingEdges:!0}),outgoers:ol($u({outgoing:!0}),"outgoers"),successors:zu({outgoing:!0}),incomers:ol($u({incoming:!0}),"incomers"),predecessors:zu({incoming:!0})}),ue(Fu,{neighborhood:ol((function(e){for(var t=[],r=this.nodes(),n=0;n<r.length;n++)for(var i=r[n],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,!0).filter(e)}),"neighborhood"),closedNeighborhood:s((function(e){return this.neighborhood().add(this).filter(e)}),"closedNeighborhood"),openNeighborhood:s((function(e){return this.neighborhood(e)}),"openNeighborhood")}),Fu.neighbourhood=Fu.neighborhood,Fu.closedNeighbourhood=Fu.closedNeighborhood,Fu.openNeighbourhood=Fu.openNeighborhood,ue(Fu,{source:ol(s((function(e){var t,r=this[0];return r&&(t=r._private.source||r.cy().collection()),t&&e?t.filter(e):t}),"sourceImpl"),"source"),target:ol(s((function(e){var t,r=this[0];return r&&(t=r._private.target||r.cy().collection()),t&&e?t.filter(e):t}),"targetImpl"),"target"),sources:Uu({attr:"source"}),targets:Uu({attr:"target"})}),s(Uu,"defineSourceFunction"),ue(Fu,{edgesWith:ol(Gu(),"edgesWith"),edgesTo:ol(Gu({thisIsSrc:!0}),"edgesTo")}),s(Gu,"defineEdgesWithFunction"),ue(Fu,{connectedEdges:ol((function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];if(n.isNode())for(var i=n._private.edges,a=0;a<i.length;a++){var o=i[a];t.push(o)}}return this.spawn(t,!0).filter(e)}),"connectedEdges"),connectedNodes:ol((function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];n.isEdge()&&(t.push(n.source()[0]),t.push(n.target()[0]))}return this.spawn(t,!0).filter(e)}),"connectedNodes"),parallelEdges:ol(ju(),"parallelEdges"),codirectedEdges:ol(ju({codirected:!0}),"codirectedEdges")}),s(ju,"defineParallelEdgesFunction"),ue(Fu,{components:s((function(e){var t=this,r=t.cy(),n=r.collection(),i=null==e?t.nodes():e.nodes(),a=[];null!=e&&i.empty()&&(i=e.sources());var o=s((function(e,t){n.merge(e),i.unmerge(e),t.merge(e)}),"visitInComponent");if(i.empty())return t.spawn();var l=s((function(){var e=r.collection();a.push(e);var n=i[0];o(n,e),t.bfs({directed:!1,roots:n,visit:s((function(t){return o(t,e)}),"visit")}),e.forEach((function(r){r.connectedEdges().forEach((function(r){t.has(r)&&e.has(r.source())&&e.has(r.target())&&e.merge(r)}))}))}),"_loop");do{l()}while(i.length>0);return a}),"components"),component:s((function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}),"component")}),Fu.componentsOf=Fu.components;var Vu=s((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e){var i=new qt,a=!1;if(t){if(t.length>0&&D(t[0])&&!U(t[0])){a=!0;for(var o=[],l=new Yt,u=0,c=t.length;u<c;u++){var h=t[u];null==h.data&&(h.data={});var d=h.data;if(null==d.id)d.id=Pt();else if(e.hasElementWithId(d.id)||l.has(d.id))continue;var f=new Xt(e,h,!1);o.push(f),l.add(d.id)}t=o}}else t=[];this.length=0;for(var p=0,g=t.length;p<g;p++){var m=t[p][0];if(null!=m){var y=m._private.data.id;(!r||!i.has(y))&&(r&&i.set(y,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(e){this.lazyMap=e},rebuildMap:s((function(){for(var e=this.lazyMap=new qt,t=this.eles,r=0;r<t.length;r++){var n=t[r];e.set(n.id(),{index:r,ele:n})}}),"rebuildMap")},r&&(this._private.map=i),a&&!n&&this.restore()}else Rt("A collection must have a reference to the core")}),"Collection"),Wu=Xt.prototype=Vu.prototype=Object.create(Array.prototype);Wu.instanceString=function(){return"collection"},Wu.spawn=function(e,t){return new Vu(this.cy(),e,t)},Wu.spawnSelf=function(){return this.spawn(this)},Wu.cy=function(){return this._private.cy},Wu.renderer=function(){return this._private.cy.renderer()},Wu.element=function(){return this[0]},Wu.collection=function(){return G(this)?this:new Vu(this._private.cy,[this])},Wu.unique=function(){return new Vu(this._private.cy,this,!0)},Wu.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},Wu.getElementById=function(e){e=""+e;var t=this._private.cy,r=this._private.map.get(e);return r?r.ele:new Vu(t)},Wu.$id=Wu.getElementById,Wu.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},Wu.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},Wu.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},Wu.json=function(e){var t=this.element(),r=this.cy();if(null==t&&e)return this;if(null!=t){var n=t._private;if(D(e)){if(r.startBatch(),e.data){t.data(e.data);var i=n.data;if(t.isEdge()){var a=!1,o={},l=e.data.source,u=e.data.target;null!=l&&l!=i.source&&(o.source=""+l,a=!0),null!=u&&u!=i.target&&(o.target=""+u,a=!0),a&&(t=t.move(o))}else{var c="parent"in e.data,h=e.data.parent;c&&(null!=h||null!=i.parent)&&h!=i.parent&&(void 0===h&&(h=null),null!=h&&(h=""+h),t=t.move({parent:h}))}}e.position&&t.position(e.position);var d=s((function(r,i,a){var o=e[r];null!=o&&o!==n[r]&&(o?t[i]():t[a]())}),"checkSwitch");return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),r.endBatch(),this}if(void 0===e){var f={data:Ot(n.data),position:Ot(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};f.classes="";var p=0;return n.classes.forEach((function(e){return f.classes+=0==p++?e:" "+e})),f}}},Wu.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t].json();e.push(r)}return e},Wu.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var n=this[r].json(),i=new Xt(e,n,!1);t.push(i)}return new Vu(e,t)},Wu.copy=Wu.clone,Wu.restore=function(){for(var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=n.cy(),a=i._private,o=[],l=[],u=0,c=n.length;u<c;u++){var h=n[u];r&&!h.removed()||(h.isNode()?o.push(h):l.push(h))}e=o.concat(l);var d,f=s((function(){e.splice(d,1),d--}),"removeFromElements");for(d=0;d<e.length;d++){var p=e[d],g=p._private,m=g.data;if(p.clearTraversalCache(),r||g.removed)if(void 0===m.id)m.id=Pt();else if(F(m.id))m.id=""+m.id;else{if(q(m.id)||!I(m.id)){Rt("Can not create element with invalid string ID `"+m.id+"`"),f();continue}if(i.hasElementWithId(m.id)){Rt("Can not create second element with ID `"+m.id+"`"),f();continue}}var y=m.id;if(p.isNode()){var v=g.position;null==v.x&&(v.x=0),null==v.y&&(v.y=0)}if(p.isEdge()){for(var x=p,b=["source","target"],C=b.length,T=!1,w=0;w<C;w++){var k=b[w],_=m[k];F(_)&&(_=m[k]=""+m[k]),null==_||""===_?(Rt("Can not create edge `"+y+"` with unspecified "+k),T=!0):i.hasElementWithId(_)||(Rt("Can not create edge `"+y+"` with nonexistant "+k+" `"+_+"`"),T=!0)}if(T){f();continue}var E=i.getElementById(m.source),S=i.getElementById(m.target);E.same(S)?E._private.edges.push(x):(E._private.edges.push(x),S._private.edges.push(x)),x._private.source=E,x._private.target=S}g.map=new qt,g.map.set(y,{ele:p,index:0}),g.removed=!1,r&&i.addToPool(p)}for(var A=0;A<o.length;A++){var N=o[A],R=N._private.data;F(R.parent)&&(R.parent=""+R.parent);var L=R.parent;if(null!=L||N._private.parent){var M=N._private.parent?i.collection().merge(N._private.parent):i.getElementById(L);if(M.empty())R.parent=void 0;else if(M[0].removed())It("Node added with missing parent, reference to parent removed"),R.parent=void 0,N._private.parent=null;else{for(var O=!1,D=M;!D.empty();){if(N.same(D)){O=!0,R.parent=void 0;break}D=D.parent()}O||(M[0]._private.children.push(N),N._private.parent=M[0],a.hasCompoundNodes=!0)}}}if(e.length>0){for(var P=e.length===n.length?n:new Vu(i,e),B=0;B<P.length;B++){var $=P[B];$.isNode()||($.parallelEdges().clearTraversalCache(),$.source().clearTraversalCache(),$.target().clearTraversalCache())}(a.hasCompoundNodes?i.collection().merge(P).merge(P.connectedNodes()).merge(P.parent()):P).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?P.emitAndNotify("add"):r&&P.emit("add")}return n},Wu.removed=function(){var e=this[0];return e&&e._private.removed},Wu.inside=function(){var e=this[0];return e&&!e._private.removed},Wu.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,n=[],i={},a=r._private.cy;function o(e){for(var t=e._private.edges,r=0;r<t.length;r++)u(t[r])}function l(e){for(var t=e._private.children,r=0;r<t.length;r++)u(t[r])}function u(e){var r=i[e.id()];t&&e.removed()||r||(i[e.id()]=!0,e.isNode()?(n.push(e),o(e),l(e)):n.unshift(e))}s(o,"addConnectedEdges"),s(l,"addChildren"),s(u,"add");for(var c=0,h=r.length;c<h;c++){u(r[c])}function d(e,t){var r=e._private.edges;zt(r,t),e.clearTraversalCache()}function f(e){e.clearTraversalCache()}s(d,"removeEdgeRef"),s(f,"removeParallelRef");var p=[];function g(e,t){t=t[0];var r=(e=e[0])._private.children,n=e.id();zt(r,t),t._private.parent=null,p.ids[n]||(p.ids[n]=!0,p.push(e))}p.ids={},s(g,"removeChildRef"),r.dirtyCompoundBoundsCache(),t&&a.removeFromPool(n);for(var m=0;m<n.length;m++){var y=n[m];if(y.isEdge()){var v=y.source()[0],x=y.target()[0];d(v,y),d(x,y);for(var b=y.parallelEdges(),C=0;C<b.length;C++){var T=b[C];f(T),T.isBundledBezier()&&T.dirtyBoundingBoxCache()}}else{var w=y.parent();0!==w.length&&g(w,y)}t&&(y._private.removed=!0)}var k=a._private.elements;a._private.hasCompoundNodes=!1;for(var _=0;_<k.length;_++){if(k[_].isParent()){a._private.hasCompoundNodes=!0;break}}var E=new Vu(this.cy(),n);E.size()>0&&(e?E.emitAndNotify("remove"):t&&E.emit("remove"));for(var S=0;S<p.length;S++){var A=p[S];(!t||!A.removed())&&A.updateStyle()}return E},Wu.move=function(e){var t=this._private.cy,r=this,n=!1,i=!1,a=s((function(e){return null==e?e:""+e}),"toString");if(void 0!==e.source||void 0!==e.target){var o=a(e.source),l=a(e.target),u=null!=o&&t.hasElementWithId(o),c=null!=l&&t.hasElementWithId(l);(u||c)&&(t.batch((function(){r.remove(n,i),r.emitAndNotify("moveout");for(var e=0;e<r.length;e++){var t=r[e],a=t._private.data;t.isEdge()&&(u&&(a.source=o),c&&(a.target=l))}r.restore(n,i)})),r.emitAndNotify("move"))}else if(void 0!==e.parent){var h=a(e.parent);if(null===h||t.hasElementWithId(h)){var d=null===h?void 0:h;t.batch((function(){var e=r.remove(n,i);e.emitAndNotify("moveout");for(var t=0;t<r.length;t++){var a=r[t],o=a._private.data;a.isNode()&&(o.parent=d)}e.restore(n,i)})),r.emitAndNotify("move")}}return this},[Bi,ls,us,nl,sl,dl,fl,Jl,pu,gu,yu,xu,Tu,Eu,Ou,Fu].forEach((function(e){ue(Wu,e)}));var qu={add:s((function(e){var t,r=this;if(z(e)){var n=e;if(n._private.cy===r)t=n.restore();else{for(var i=[],a=0;a<n.length;a++){var o=n[a];i.push(o.json())}t=new Vu(r,i)}}else if(O(e)){t=new Vu(r,e)}else if(D(e)&&(O(e.nodes)||O(e.edges))){for(var s=e,l=[],u=["nodes","edges"],c=0,h=u.length;c<h;c++){var d=u[c],f=s[d];if(O(f))for(var p=0,g=f.length;p<g;p++){var m=ue({group:d},f[p]);l.push(m)}}t=new Vu(r,l)}else{t=new Xt(r,e).collection()}return t}),"add"),remove:s((function(e){if(!z(e)&&I(e)){var t=e;e=this.$(t)}return e.remove()}),"remove")};function Hu(e,t,r,n){var i=4,a=1e-7,o=10,l=11,u=1/(l-1),c=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var h=0;h<4;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var d=c?new Float32Array(l):new Array(l);function f(e,t){return 1-3*t+3*e}function p(e,t){return 3*t-6*e}function g(e){return 3*e}function m(e,t,r){return((f(t,r)*e+p(t,r))*e+g(t))*e}function y(e,t,r){return 3*f(t,r)*e*e+2*p(t,r)*e+g(t)}function v(t,n){for(var a=0;a<i;++a){var o=y(n,e,r);if(0===o)return n;n-=(m(n,e,r)-t)/o}return n}function x(){for(var t=0;t<l;++t)d[t]=m(t*u,e,r)}function b(t,n,i){var s,l,u=0;do{(s=m(l=n+(i-n)/2,e,r)-t)>0?i=l:n=l}while(Math.abs(s)>a&&++u<o);return l}function C(t){for(var n=0,i=1,a=l-1;i!==a&&d[i]<=t;++i)n+=u;--i;var o=n+(t-d[i])/(d[i+1]-d[i])*u,s=y(o,e,r);return s>=.001?v(t,o):0===s?o:b(t,n,n+u)}s(f,"A"),s(p,"B"),s(g,"C"),s(m,"calcBezier"),s(y,"getSlope"),s(v,"newtonRaphsonIterate"),s(x,"calcSampleValues"),s(b,"binarySubdivide"),s(C,"getTForX");var T=!1;function w(){T=!0,(e!==t||r!==n)&&x()}s(w,"precompute");var k=s((function(i){return T||w(),e===t&&r===n?i:0===i?0:1===i?1:m(C(i),t,n)}),"f");k.getControlPoints=function(){return[{x:e,y:t},{x:r,y:n}]};var _="generateBezier("+[e,t,r,n]+")";return k.toString=function(){return _},k}s(Hu,"generateCubicBezier");var Yu=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,n){var i={x:t.x+n.dx*r,v:t.v+n.dv*r,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function r(r,n){var i={dx:r.v,dv:e(r)},a=t(r,.5*n,i),o=t(r,.5*n,a),s=t(r,n,o),l=1/6*(i.dx+2*(a.dx+o.dx)+s.dx),u=1/6*(i.dv+2*(a.dv+o.dv)+s.dv);return r.x=r.x+l*n,r.v=r.v+u*n,r}return s(e,"springAccelerationForState"),s(t,"springEvaluateStateWithDerivative"),s(r,"springIntegrateState"),s((function e(t,n,i){var a,o,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,h=1e-4;for(t=parseFloat(t)||500,n=parseFloat(n)||20,i=i||null,l.tension=t,l.friction=n,(a=null!==i)?o=(c=e(t,n))/i*.016:o=.016;s=r(s||l,o),u.push(1+s.x),c+=16,Math.abs(s.x)>h&&Math.abs(s.v)>h;);return a?function(e){return u[e*(u.length-1)|0]}:c}),"springRK4Factory")}(),Xu=s((function(e,t,r,n){var i=Hu(e,t,r,n);return function(e,t,r){return e+(t-e)*i(r)}}),"cubicBezier"),Ku={linear:s((function(e,t,r){return e+(t-e)*r}),"linear"),ease:Xu(.25,.1,.25,1),"ease-in":Xu(.42,0,1,1),"ease-out":Xu(0,0,.58,1),"ease-in-out":Xu(.42,0,.58,1),"ease-in-sine":Xu(.47,0,.745,.715),"ease-out-sine":Xu(.39,.575,.565,1),"ease-in-out-sine":Xu(.445,.05,.55,.95),"ease-in-quad":Xu(.55,.085,.68,.53),"ease-out-quad":Xu(.25,.46,.45,.94),"ease-in-out-quad":Xu(.455,.03,.515,.955),"ease-in-cubic":Xu(.55,.055,.675,.19),"ease-out-cubic":Xu(.215,.61,.355,1),"ease-in-out-cubic":Xu(.645,.045,.355,1),"ease-in-quart":Xu(.895,.03,.685,.22),"ease-out-quart":Xu(.165,.84,.44,1),"ease-in-out-quart":Xu(.77,0,.175,1),"ease-in-quint":Xu(.755,.05,.855,.06),"ease-out-quint":Xu(.23,1,.32,1),"ease-in-out-quint":Xu(.86,0,.07,1),"ease-in-expo":Xu(.95,.05,.795,.035),"ease-out-expo":Xu(.19,1,.22,1),"ease-in-out-expo":Xu(1,0,0,1),"ease-in-circ":Xu(.6,.04,.98,.335),"ease-out-circ":Xu(.075,.82,.165,1),"ease-in-out-circ":Xu(.785,.135,.15,.86),spring:s((function(e,t,r){if(0===r)return Ku.linear;var n=Yu(e,t,r);return function(e,t,r){return e+(t-e)*n(r)}}),"spring"),"cubic-bezier":Xu};function Zu(e,t,r,n,i){if(1===n||t===r)return r;var a=i(t,r,n);return null==e||((e.roundValue||e.color)&&(a=Math.round(a)),void 0!==e.min&&(a=Math.max(a,e.min)),void 0!==e.max&&(a=Math.min(a,e.max))),a}function Qu(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function Ju(e,t,r,n,i){var a=null!=i?i.type:null;r<0?r=0:r>1&&(r=1);var o=Qu(e,i),s=Qu(t,i);if(F(o)&&F(s))return Zu(a,o,s,r,n);if(O(o)&&O(s)){for(var l=[],u=0;u<s.length;u++){var c=o[u],h=s[u];if(null!=c&&null!=h){var d=Zu(a,c,h,r,n);l.push(d)}else l.push(h)}return l}}function ec(e,t,r,n){var i=!n,a=e._private,o=t._private,s=o.easing,l=o.startTime,u=(n?e:e.cy()).style();if(!o.easingImpl)if(null==s)o.easingImpl=Ku.linear;else{var c,h,d;if(I(s))c=u.parse("transition-timing-function",s).value;else c=s;I(c)?(h=c,d=[]):(h=c[1],d=c.slice(2).map((function(e){return+e}))),d.length>0?("spring"===h&&d.push(o.duration),o.easingImpl=Ku[h].apply(null,d)):o.easingImpl=Ku[h]}var f,p=o.easingImpl;if(f=0===o.duration?1:(r-l)/o.duration,o.applying&&(f=o.progress),f<0?f=0:f>1&&(f=1),null==o.delay){var g=o.startPosition,m=o.position;if(m&&i&&!e.locked()){var y={};tc(g.x,m.x)&&(y.x=Ju(g.x,m.x,f,p)),tc(g.y,m.y)&&(y.y=Ju(g.y,m.y,f,p)),e.position(y)}var v=o.startPan,x=o.pan,b=a.pan,C=null!=x&&n;C&&(tc(v.x,x.x)&&(b.x=Ju(v.x,x.x,f,p)),tc(v.y,x.y)&&(b.y=Ju(v.y,x.y,f,p)),e.emit("pan"));var T=o.startZoom,w=o.zoom,k=null!=w&&n;k&&(tc(T,w)&&(a.zoom=Lr(a.minZoom,Ju(T,w,f,p),a.maxZoom)),e.emit("zoom")),(C||k)&&e.emit("viewport");var _=o.style;if(_&&_.length>0&&i){for(var E=0;E<_.length;E++){var S=_[E],A=S.name,N=S,R=o.startStyle[A],L=Ju(R,N,f,p,u.properties[R.name]);u.overrideBypass(e,A,L)}e.emit("style")}}return o.progress=f,f}function tc(e,t){return null!=e&&null!=t&&(!(!F(e)||!F(t))||!(!e||!t))}function rc(e,t,r,n){var i=t._private;i.started=!0,i.startTime=r-i.progress*i.duration}function nc(e,t){var r=t._private.aniEles,n=[];function i(t,r){var i=t._private,a=i.animation.current,o=i.animation.queue,l=!1;if(0===a.length){var u=o.shift();u&&a.push(u)}for(var c=s((function(e){for(var t=e.length-1;t>=0;t--){(0,e[t])()}e.splice(0,e.length)}),"callbacks"),h=a.length-1;h>=0;h--){var d=a[h],f=d._private;f.stopped?(a.splice(h,1),f.hooked=!1,f.playing=!1,f.started=!1,c(f.frames)):!f.playing&&!f.applying||(f.playing&&f.applying&&(f.applying=!1),f.started||rc(0,d,e),ec(t,d,e,r),f.applying&&(f.applying=!1),c(f.frames),null!=f.step&&f.step(e),d.completed()&&(a.splice(h,1),f.hooked=!1,f.playing=!1,f.started=!1,c(f.completes)),l=!0)}return!r&&0===a.length&&0===o.length&&n.push(t),l}s(i,"stepOne");for(var a=!1,o=0;o<r.length;o++){var l=i(r[o]);a=a||l}var u=i(t,!0);(a||u)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(n),t.emit("step")}s(Zu,"getEasedValue"),s(Qu,"getValue"),s(Ju,"ease"),s(ec,"step$1"),s(tc,"valid"),s(rc,"startAnimation"),s(nc,"stepAll");var ic={animate:ss.animate(),animation:ss.animation(),animated:ss.animated(),clearQueue:ss.clearQueue(),delay:ss.delay(),delayAnimation:ss.delayAnimation(),stop:ss.stop(),addToAnimationPool:s((function(e){this.styleEnabled()&&this._private.aniEles.merge(e)}),"addToAnimationPool"),stopAnimationLoop:s((function(){this._private.animationsRunning=!1}),"stopAnimationLoop"),startAnimationLoop:s((function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){s(r,"headlessStep");var t=e.renderer();t&&t.beforeRender?t.beforeRender(s((function(t,r){nc(r,e)}),"rendererAnimationStep"),t.beforeRenderPriorities.animations):r()}function r(){e._private.animationsRunning&&lt(s((function(t){nc(t,e),r()}),"animationStep"))}}),"startAnimationLoop")},ac={qualifierCompare:s((function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)}),"qualifierCompare"),eventMatches:s((function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&U(r.target)&&n.matches(r.target)}),"eventMatches"),addEventFields:s((function(e,t){t.cy=e,t.target=e}),"addEventFields"),callbackContext:s((function(e,t,r){return null!=t.qualifier?r.target:e}),"callbackContext")},oc=s((function(e){return I(e)?new tl(e):e}),"argSelector"),sc={createEmitter:s((function(){var e=this._private;return e.emitter||(e.emitter=new su(ac,this)),this}),"createEmitter"),emitter:s((function(){return this._private.emitter}),"emitter"),on:s((function(e,t,r){return this.emitter().on(e,oc(t),r),this}),"on"),removeListener:s((function(e,t,r){return this.emitter().removeListener(e,oc(t),r),this}),"removeListener"),removeAllListeners:s((function(){return this.emitter().removeAllListeners(),this}),"removeAllListeners"),one:s((function(e,t,r){return this.emitter().one(e,oc(t),r),this}),"one"),once:s((function(e,t,r){return this.emitter().one(e,oc(t),r),this}),"once"),emit:s((function(e,t){return this.emitter().emit(e,t),this}),"emit"),emitAndNotify:s((function(e,t){return this.emit(e),this.notify(e,t),this}),"emitAndNotify")};ss.eventAliasesOn(sc);var lc={png:s((function(e){return e=e||{},this._private.renderer.png(e)}),"png"),jpg:s((function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}),"jpg")};lc.jpeg=lc.jpg;var uc={layout:s((function(e){var t=this;if(null!=e)if(null!=e.name){var r,n=e.name,i=t.extension("layout",n);if(null!=i)return r=I(e.eles)?t.$(e.eles):null!=e.eles?e.eles:t.$(),new i(ue({},e,{cy:t,eles:r}));Rt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Rt("A `name` must be specified to make a layout");else Rt("Layout options must be specified to make a layout")}),"layout")};uc.createLayout=uc.makeLayout=uc.layout;var cc={notify:s((function(e,t){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var n=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();null!=t&&n.merge(t)}else if(r.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}}),"notify"),notifications:s((function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)}),"notifications"),noNotifications:s((function(e){this.notifications(!1),e(),this.notifications(!0)}),"noNotifications"),batching:s((function(){return this._private.batchCount>0}),"batching"),startBatch:s((function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this}),"startBatch"),endBatch:s((function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach((function(r){var n=e.batchNotifications[r];n.empty()?t.notify(r):t.notify(r,n)}))}return this}),"endBatch"),batch:s((function(e){return this.startBatch(),e(),this.endBatch(),this}),"batch"),batchData:s((function(e){var t=this;return this.batch((function(){for(var r=Object.keys(e),n=0;n<r.length;n++){var i=r[n],a=e[i];t.getElementById(i).data(a)}}))}),"batchData")},hc=$t({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),dc={renderTo:s((function(e,t,r,n){return this._private.renderer.renderTo(e,t,r,n),this}),"renderTo"),renderer:s((function(){return this._private.renderer}),"renderer"),forceRender:s((function(){return this.notify("draw"),this}),"forceRender"),resize:s((function(){return this.invalidateSize(),this.emitAndNotify("resize"),this}),"resize"),initRenderer:s((function(e){var t=this,r=t.extension("renderer",e.name);if(null!=r){void 0!==e.wheelSensitivity&&It("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=hc(e);n.cy=t,t._private.renderer=new r(n),this.notify("init")}else Rt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))}),"initRenderer"),destroyRenderer:s((function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach((function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]}))}),"destroyRenderer"),onRender:s((function(e){return this.on("render",e)}),"onRender"),offRender:s((function(e){return this.off("render",e)}),"offRender")};dc.invalidateDimensions=dc.resize;var fc={collection:s((function(e,t){return I(e)?this.$(e):z(e)?e.collection():O(e)?(t||(t={}),new Vu(this,e,t.unique,t.removed)):new Vu(this)}),"collection"),nodes:s((function(e){var t=this.$((function(e){return e.isNode()}));return e?t.filter(e):t}),"nodes"),edges:s((function(e){var t=this.$((function(e){return e.isEdge()}));return e?t.filter(e):t}),"edges"),$:s((function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()}),"$"),mutableElements:s((function(){return this._private.elements}),"mutableElements")};fc.elements=fc.filter=fc.$;var pc={},gc="t";pc.apply=function(e){for(var t=this,r=t._private.cy.collection(),n=0;n<e.length;n++){var i=e[n],a=t.getContextMeta(i);if(!a.empty){var o=t.getContextStyle(a),s=t.applyContextStyle(a,o,i);i._private.appliedInitStyle?t.updateTransitions(i,s.diffProps):i._private.appliedInitStyle=!0,t.updateStyleHints(i)&&r.push(i)}}return r},pc.getPropertiesDiff=function(e,t){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},i=e+"-"+t,a=n[i];if(a)return a;for(var o=[],s={},l=0;l<r.length;l++){var u=r[l],c=e[l]===gc,h=t[l]===gc,d=c!==h,f=u.mappedProperties.length>0;if(d||h&&f){var p=void 0;d&&f||d?p=u.properties:f&&(p=u.mappedProperties);for(var g=0;g<p.length;g++){for(var m=p[g],y=m.name,v=!1,x=l+1;x<r.length;x++){var b=r[x];if(t[x]===gc&&(v=null!=b.properties[m.name]))break}!s[y]&&!v&&(s[y]=!0,o.push(y))}}}return n[i]=o,o},pc.getContextMeta=function(e){for(var t,r=this,n="",i=e._private.styleCxtKey||"",a=0;a<r.length;a++){var o=r[a];n+=o.selector&&o.selector.matches(e)?gc:"f"}return t=r.getPropertiesDiff(i,n),e._private.styleCxtKey=n,{key:n,diffPropNames:t,empty:0===t.length}},pc.getContextStyle=function(e){var t=e.key,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var n={_private:{key:t}},i=0;i<this.length;i++){var a=this[i];if(t[i]===gc)for(var o=0;o<a.properties.length;o++){var s=a.properties[o];n[s.name]=s}}return r[t]=n,n},pc.applyContextStyle=function(e,t,r){for(var n=e.diffPropNames,i={},a=this.types,o=0;o<n.length;o++){var s=n[o],l=t[s],u=r.pstyle(s);if(!l){if(!u)continue;l=u.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(u!==l){if(l.mapped===a.fn&&null!=u&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(r))===c.prevFnValue)continue}var h=i[s]={prev:u};this.applyParsedProperty(r,l),h.next=r.pstyle(s),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}},pc.updateStyleHints=function(e){var t=e._private,r=this,n=r.propertyGroupNames,i=r.propertyGroupKeys,a=s((function(e,t,n){return r.getPropertiesHash(e,t,n)}),"propHash"),o=t.styleKey;if(e.removed())return!1;var l="nodes"===t.group,u=e._private.style;n=Object.keys(u);for(var c=0;c<i.length;c++){var h=i[c];t.styleKeys[h]=[ct,ht]}for(var d=s((function(e,r){return t.styleKeys[r][0]=ft(e,t.styleKeys[r][0])}),"updateGrKey1"),f=s((function(e,r){return t.styleKeys[r][1]=pt(e,t.styleKeys[r][1])}),"updateGrKey2"),p=s((function(e,t){d(e,t),f(e,t)}),"updateGrKey"),g=s((function(e,t){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);d(n,t),f(n,t)}}),"updateGrKeyWStr"),m=s((function(e){return-128<e&&e<128&&Math.floor(e)!==e?2e9-(1024*e|0):e}),"cleanNum"),y=0;y<n.length;y++){var v=n[y],x=u[v];if(null!=x){var b=this.properties[v],C=b.type,T=b.groupKey,w=void 0;null!=b.hashOverride?w=b.hashOverride(e,x):null!=x.pfValue&&(w=x.pfValue);var k=null==b.enums?x.value:null,_=null!=w,E=_||null!=k,S=x.units;if(C.number&&E&&!C.multiple)p(m(_?w:k),T),!_&&null!=S&&g(S,T);else g(x.strValue,T)}}for(var A=[ct,ht],N=0;N<i.length;N++){var R=i[N],L=t.styleKeys[R];A[0]=ft(L[0],A[0]),A[1]=pt(L[1],A[1])}t.styleKey=gt(A[0],A[1]);var I=t.styleKeys;t.labelDimsKey=mt(I.labelDimensions);var M=a(e,["label"],I.labelDimensions);if(t.labelKey=mt(M),t.labelStyleKey=mt(yt(I.commonLabel,M)),!l){var O=a(e,["source-label"],I.labelDimensions);t.sourceLabelKey=mt(O),t.sourceLabelStyleKey=mt(yt(I.commonLabel,O));var D=a(e,["target-label"],I.labelDimensions);t.targetLabelKey=mt(D),t.targetLabelStyleKey=mt(yt(I.commonLabel,D))}if(l){var P=t.styleKeys,F=P.nodeBody,B=P.nodeBorder,$=P.nodeOutline,z=P.backgroundImage,U=P.compound,G=P.pie,j=[F,B,$,z,U,G].filter((function(e){return null!=e})).reduce(yt,[ct,ht]);t.nodeKey=mt(j),t.hasPie=null!=G&&G[0]!==ct&&G[1]!==ht}return o!==t.styleKey},pc.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},pc.applyParsedProperty=function(e,t){var r,n=this,i=t,a=e._private.style,o=n.types,l=n.properties[i.name].type,u=i.bypass,c=a[i.name],h=c&&c.bypass,d=e._private,f="mapping",p=s((function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value}),"getVal"),g=s((function(){var t=p(c),r=p(i);n.checkTriggers(e,i.name,t,r)}),"checkTriggers");if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(i=t=this.parse(t.name,"bezier",u)),i.delete)return a[i.name]=void 0,g(),!0;if(i.deleteBypassed)return c?!!c.bypass&&(c.bypassed=void 0,g(),!0):(g(),!0);if(i.deleteBypass)return c?!!c.bypass&&(a[i.name]=c.bypassed,g(),!0):(g(),!0);var m=s((function(){It("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")}),"printMappingErr");switch(i.mapped){case o.mapData:for(var y=i.field.split("."),v=d.data,x=0;x<y.length&&v;x++){v=v[y[x]]}if(null==v)return m(),!1;var b;if(!F(v))return It("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+v+"` for `"+e.id()+"` is non-numeric)"),!1;var C=i.fieldMax-i.fieldMin;if((b=0===C?0:(v-i.fieldMin)/C)<0?b=0:b>1&&(b=1),l.color){var T=i.valueMin[0],w=i.valueMax[0],k=i.valueMin[1],_=i.valueMax[1],E=i.valueMin[2],S=i.valueMax[2],A=null==i.valueMin[3]?1:i.valueMin[3],N=null==i.valueMax[3]?1:i.valueMax[3],R=[Math.round(T+(w-T)*b),Math.round(k+(_-k)*b),Math.round(E+(S-E)*b),Math.round(A+(N-A)*b)];r={bypass:i.bypass,name:i.name,value:R,strValue:"rgb("+R[0]+", "+R[1]+", "+R[2]+")"}}else{if(!l.number)return!1;var L=i.valueMin+(i.valueMax-i.valueMin)*b;r=this.parse(i.name,L,i.bypass,f)}if(!r)return m(),!1;r.mapping=i,i=r;break;case o.data:for(var I=i.field.split("."),M=d.data,O=0;O<I.length&&M;O++){M=M[I[O]]}if(null!=M&&(r=this.parse(i.name,M,i.bypass,f)),!r)return m(),!1;r.mapping=i,i=r;break;case o.fn:var D=i.value,P=null!=i.fnValue?i.fnValue:D(e);if(i.prevFnValue=P,null==P)return It("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(r=this.parse(i.name,P,i.bypass,f)))return It("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+e.id()+"` is invalid)"),!1;r.mapping=Ot(i),i=r;break;case void 0:break;default:return!1}return u?(i.bypassed=h?c.bypassed:c,a[i.name]=i):h?c.bypassed=i:a[i.name]=i,g(),!0},pc.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),t)for(var i=n._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],l=i[s];null!=l&&(l.bypass?l.bypassed=null:i[s]=null)}else n._private.style={}}},pc.update=function(){this._private.cy.mutableElements().updateStyle()},pc.updateTransitions=function(e,t){var r=this,n=e._private,i=e.pstyle("transition-property").value,a=e.pstyle("transition-duration").pfValue,o=e.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],h=e.pstyle(c),d=t[c];if(d){var f=d.prev,p=null!=d.next?d.next:h,g=!1,m=void 0,y=1e-6;f&&(F(f.pfValue)&&F(p.pfValue)?(g=p.pfValue-f.pfValue,m=f.pfValue+y*g):F(f.value)&&F(p.value)?(g=p.value-f.value,m=f.value+y*g):O(f.value)&&O(p.value)&&(g=f.value[0]!==p.value[0]||f.value[1]!==p.value[1]||f.value[2]!==p.value[2],m=f.strValue),g&&(s[c]=p.strValue,this.applyBypass(e,c,m),l=!0))}}if(!l)return;n.transitioning=!0,new Wi((function(t){o>0?e.delayAnimation(o).play().promise().then(t):t()})).then((function(){return e.animation({style:s,duration:a,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){r.removeBypasses(e,i),e.emitAndNotify("style"),n.transitioning=!1}))}else n.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),n.transitioning=!1)},pc.checkTrigger=function(e,t,r,n,i,a){var o=this.properties[t],s=i(o);null!=s&&s(r,n)&&a(o)},pc.checkZOrderTrigger=function(e,t,r,n){var i=this;this.checkTrigger(e,t,r,n,(function(e){return e.triggersZOrder}),(function(){i._private.cy.notify("zorder",e)}))},pc.checkBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,(function(e){return e.triggersBounds}),(function(i){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),i.triggersBoundsOfParallelBeziers&&"curve-style"===t&&("bezier"===r||"bezier"===n)&&e.parallelEdges().forEach((function(e){e.isBundledBezier()&&e.dirtyBoundingBoxCache()})),i.triggersBoundsOfConnectedEdges&&"display"===t&&("none"===r||"none"===n)&&e.connectedEdges().forEach((function(e){e.dirtyBoundingBoxCache()}))}))},pc.checkTriggers=function(e,t,r,n){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,n),this.checkBoundsTrigger(e,t,r,n)};var mc={applyBypass:function(e,t,r,n){var i=[];if("*"===t||"**"===t){if(void 0!==r)for(var a=0;a<this.properties.length;a++){var o=this.properties[a].name,s=this.parse(o,r,!0);s&&i.push(s)}}else if(I(t)){var l=this.parse(t,r,!0);l&&i.push(l)}else{if(!D(t))return!1;var u=t;n=r;for(var c=Object.keys(u),h=0;h<c.length;h++){var d=c[h],f=u[d];if(void 0===f&&(f=u[J(d)]),void 0!==f){var p=this.parse(d,f,!0);p&&i.push(p)}}}if(0===i.length)return!1;for(var g=!1,m=0;m<e.length;m++){for(var y=e[m],v={},x=void 0,b=0;b<i.length;b++){var C=i[b];if(n){var T=y.pstyle(C.name);x=v[C.name]={prev:T}}g=this.applyParsedProperty(y,Ot(C))||g,n&&(x.next=y.pstyle(C.name))}g&&this.updateStyleHints(y),n&&this.updateTransitions(y,v,true)}return g},overrideBypass:function(e,t,r){t=Q(t);for(var n=0;n<e.length;n++){var i=e[n],a=i._private.style[t],o=this.properties[t].type,s=o.color,l=o.mutiple,u=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=r,null!=a.pfValue&&(a.pfValue=r),a.strValue=s?"rgb("+r.join(",")+")":l?r.join(" "):""+r,this.updateStyleHints(i)):this.applyBypass(i,t,r),this.checkTriggers(i,t,u,r)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,r){for(var n=0;n<e.length;n++){for(var i=e[n],a={},o=0;o<t.length;o++){var s=t[o],l=this.properties[s],u=i.pstyle(l.name);if(u&&u.bypass){var c=this.parse(s,"",!0),h=a[l.name]={prev:u};this.applyParsedProperty(i,c),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,a,true)}}},yc={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy,r=t.container(),n=t.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(e)}},vc={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){var r=this;if(e=e[0]){for(var n={},i=0;i<r.properties.length;i++){var a=r.properties[i],o=r.getStylePropertyValue(e,a.name,t);null!=o&&(n[a.name]=o,n[J(a.name)]=o)}return n}},getIndexedStyle:function(e,t,r,n){return e.pstyle(t)[r][n]??e.cy().style().getDefaultProperty(t)[r][0]},getStylePropertyValue:function(e,t,r){if(e=e[0]){var n=this.properties[t];n.alias&&(n=n.pointsTo);var i=n.type,a=e.pstyle(n.name);if(a){var o=a.value,l=a.units,u=a.strValue;if(r&&i.number&&null!=o&&F(o)){var c=e.cy().zoom(),h=s((function(e){return e*c}),"getRenderedValue"),d=s((function(e,t){return h(e)+t}),"getValueStringWithUnits"),f=O(o),p=f?l.every((function(e){return null!=e})):null!=l;return p?f?o.map((function(e,t){return d(e,l[t])})).join(" "):d(o,l):f?o.map((function(e){return I(e)?e:""+h(e)})).join(" "):""+h(o)}if(null!=u)return u}return null}},getAnimationStartStyle:function(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n].name,a=e.pstyle(i);void 0!==a&&(a=D(a)?this.parse(i,a.strValue):this.parse(i,a)),a&&(r[i]=a)}return r},getPropsList:function(e){var t=[],r=e,n=this.properties;if(r)for(var i=Object.keys(r),a=0;a<i.length;a++){var o=i[a],s=r[o],l=n[o]||n[Q(o)],u=this.parse(l.name,s);u&&t.push(u)}return t},getNonDefaultPropertiesHash:function(e,t,r){var n,i,a,o,s,l,u=r.slice();for(s=0;s<t.length;s++)if(n=t[s],null!=(i=e.pstyle(n,!1)))if(null!=i.pfValue)u[0]=ft(o,u[0]),u[1]=pt(o,u[1]);else for(a=i.strValue,l=0;l<a.length;l++)o=a.charCodeAt(l),u[0]=ft(o,u[0]),u[1]=pt(o,u[1]);return u}};vc.getPropertiesHash=vc.getNonDefaultPropertiesHash;var xc={appendFromJson:function(e){for(var t=this,r=0;r<e.length;r++){var n=e[r],i=n.selector,a=n.style||n.css,o=Object.keys(a);t.selector(i);for(var s=0;s<o.length;s++){var l=o[s],u=a[l];t.css(l,u)}}return t},fromJson:function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],n=r.selector,i=r.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}e.push({selector:n?n.toString():"core",style:a})}return e}},bc={appendFromString:function(e){var t,r,n,i=this,a=""+e;function o(){a=a.length>t.length?a.substr(t.length):""}function l(){r=r.length>n.length?r.substr(n.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,""),s(o,"removeSelAndBlockFromRemaining"),s(l,"removePropAndValFromRem");;){if(a.match(/^\s*$/))break;var u=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!u){It("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}t=u[0];var c=u[1];if("core"!==c)if(new tl(c).invalid){It("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),o();continue}var h=u[2],d=!1;r=h;for(var f=[];;){if(r.match(/^\s*$/))break;var p=r.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!p){It("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),d=!0;break}n=p[0];var g=p[1],m=p[2];if(this.properties[g])i.parse(g,m)?(f.push({name:g,val:m}),l()):(It("Skipping property: Invalid property definition in: "+n),l());else It("Skipping property: Invalid property name in: "+n),l()}if(d){o();break}i.selector(c);for(var y=0;y<f.length;y++){var v=f[y];i.css(v.name,v.val)}o()}return i},fromString:function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t}},Cc={};!function(){var e=re,t=ie,r=oe,n=s((function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"}),"data"),i=s((function(n){var i=e+"|\\w+|"+t+"|"+r+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+n+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"}),"mapData"),a=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Cc.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:n("data")},layoutData:{mapping:!0,regex:n("layoutData")},scratch:{mapping:!0,regex:n("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:a,singleRegexMatchValue:!0},urls:{regexes:a,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:s((function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return I(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}),"validate")},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:s((function(e){var t=e.length;return 1===t||2===t||4===t}),"validate")}};var o={zeroNonZero:s((function(e,t){return(null==e||null==t)&&e!==t||0==e&&0!=t||0!=e&&0==t}),"zeroNonZero"),any:s((function(e,t){return e!=t}),"any"),emptyNonEmpty:s((function(e,t){var r=q(e),n=q(t);return r&&!n||!r&&n}),"emptyNonEmpty")},l=Cc.types,u=[{name:"label",type:l.text,triggersBounds:o.any,triggersZOrder:o.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:o.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:o.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:o.any}],c=[{name:"source-label",type:l.text,triggersBounds:o.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:o.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:o.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:o.any},{name:"source-text-offset",type:l.size,triggersBounds:o.any}],h=[{name:"target-label",type:l.text,triggersBounds:o.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:o.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:o.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:o.any},{name:"target-text-offset",type:l.size,triggersBounds:o.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:o.any},{name:"font-style",type:l.fontStyle,triggersBounds:o.any},{name:"font-weight",type:l.fontWeight,triggersBounds:o.any},{name:"font-size",type:l.size,triggersBounds:o.any},{name:"text-transform",type:l.textTransform,triggersBounds:o.any},{name:"text-wrap",type:l.textWrap,triggersBounds:o.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:o.any},{name:"text-max-width",type:l.size,triggersBounds:o.any},{name:"text-outline-width",type:l.size,triggersBounds:o.any},{name:"line-height",type:l.positiveNumber,triggersBounds:o.any}],f=[{name:"text-valign",type:l.valign,triggersBounds:o.any},{name:"text-halign",type:l.halign,triggersBounds:o.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:o.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:o.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:o.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:o.any},{name:"text-justification",type:l.justification}],p=[{name:"events",type:l.bool,triggersZOrder:o.any},{name:"text-events",type:l.bool,triggersZOrder:o.any}],g=[{name:"display",type:l.display,triggersZOrder:o.any,triggersBounds:o.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:l.visibility,triggersZOrder:o.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:o.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:o.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:o.any},{name:"z-index",type:l.number,triggersZOrder:o.any}],m=[{name:"overlay-padding",type:l.size,triggersBounds:o.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:o.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:o.any},{name:"overlay-corner-radius",type:l.cornerRadius}],y=[{name:"underlay-padding",type:l.size,triggersBounds:o.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:o.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:o.any},{name:"underlay-corner-radius",type:l.cornerRadius}],v=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],x=s((function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue}),"nodeSizeHashOverride"),b=[{name:"height",type:l.nodeSize,triggersBounds:o.any,hashOverride:x},{name:"width",type:l.nodeSize,triggersBounds:o.any,hashOverride:x},{name:"shape",type:l.nodeShape,triggersBounds:o.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:o.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:o.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:o.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:o.any}],C=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:o.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],T=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:o.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:o.any}],w=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],k=[{name:"position",type:l.position,triggersBounds:o.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:o.any},{name:"min-width",type:l.size,triggersBounds:o.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:o.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:o.any},{name:"min-height",type:l.size,triggersBounds:o.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:o.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:o.any}],_=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:o.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:o.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:o.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:o.any},{name:"control-point-step-size",type:l.size,triggersBounds:o.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:o.any},{name:"control-point-weights",type:l.numbers,triggersBounds:o.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:o.any},{name:"segment-weights",type:l.numbers,triggersBounds:o.any},{name:"segment-radii",type:l.numbers,triggersBounds:o.any},{name:"radius-type",type:l.radiusType,triggersBounds:o.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:o.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:o.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:o.any},{name:"taxi-radius",type:l.number,triggersBounds:o.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:o.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:o.any},{name:"loop-direction",type:l.angle,triggersBounds:o.any},{name:"loop-sweep",type:l.angle,triggersBounds:o.any},{name:"source-distance-from-node",type:l.size,triggersBounds:o.any},{name:"target-distance-from-node",type:l.size,triggersBounds:o.any}],E=[{name:"ghost",type:l.bool,triggersBounds:o.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:o.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:o.any},{name:"ghost-opacity",type:l.zeroOneNumber}],S=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],A=[];Cc.pieBackgroundN=16,A.push({name:"pie-size",type:l.sizeMaybePercent});for(var N=1;N<=Cc.pieBackgroundN;N++)A.push({name:"pie-"+N+"-background-color",type:l.color}),A.push({name:"pie-"+N+"-background-size",type:l.percent}),A.push({name:"pie-"+N+"-background-opacity",type:l.zeroOneNumber});var R=[],L=Cc.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:o.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach((function(e){L.forEach((function(t){var r=t+"-"+e.name,n=e.type,i=e.triggersBounds;R.push({name:r,type:n,triggersBounds:i})}))}),{});var M=Cc.properties=[].concat(p,v,g,m,y,E,f,d,u,c,h,b,C,T,w,A,k,_,R,S),O=Cc.propertyGroups={behavior:p,transition:v,visibility:g,overlay:m,underlay:y,ghost:E,commonLabel:f,labelDimensions:d,mainLabel:u,sourceLabel:c,targetLabel:h,nodeBody:b,nodeBorder:C,nodeOutline:T,backgroundImage:w,pie:A,compound:k,edgeLine:_,edgeArrow:R,core:S},D=Cc.propertyGroupNames={};(Cc.propertyGroupKeys=Object.keys(O)).forEach((function(e){D[e]=O[e].map((function(e){return e.name})),O[e].forEach((function(t){return t.groupKey=e}))}));var P=Cc.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Cc.propertyNames=M.map((function(e){return e.name}));for(var F=0;F<M.length;F++){var B=M[F];M[B.name]=B}for(var $=0;$<P.length;$++){var z=P[$],U=M[z.pointsTo],G={name:z.name,alias:!0,pointsTo:U};M.push(G),M[z.name]=G}}(),Cc.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},Cc.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=ue({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(e,t){for(var r=1;r<=Cc.pieBackgroundN;r++){var n=t.name.replace("{{i}}",r),i=t.value;e[n]=i}return e}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce((function(e,t){return Cc.arrowPrefixes.forEach((function(r){var n=r+"-"+t.name,i=t.value;e[n]=i})),e}),{})),r={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,o=t[a],s=this.parse(a,o);r[a]=s}}return e.defaultProperties=r,e.defaultProperties},Cc.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Tc={parse:function(e,t,r,n){var i=this;if(M(t))return i.parseImplWarn(e,t,r,n);var a,o=bt(e,""+t,r?"t":"f","mapping"===n||!0===n||!1===n||null==n?"dontcare":n),s=i.propCache=i.propCache||[];return(a=s[o])||(a=s[o]=i.parseImplWarn(e,t,r,n)),(r||"mapping"===n)&&((a=Ot(a))&&(a.value=Ot(a.value))),a},parseImplWarn:function(e,t,r,n){var i=this.parseImpl(e,t,r,n);return!i&&null!=t&&It("The style property `".concat(e,": ").concat(t,"` is invalid")),i&&("width"===i.name||"height"===i.name)&&"label"===t&&It("The style value of `label` is deprecated for `"+i.name+"`"),i},parseImpl:function(e,t,r,n){var i=this;e=Q(e);var a=i.properties[e],o=t,l=i.types;if(!a||void 0===t)return null;a.alias&&(a=a.pointsTo,e=a.name);var u=I(t);u&&(t=t.trim());var c,h,d=a.type;if(!d)return null;if(r&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(M(t))return{name:e,value:t,strValue:"fn",mapped:l.fn,bypass:r};if(!(!u||n||t.length<7||"a"!==t[1])){if(t.length>=7&&"d"===t[0]&&(c=new RegExp(l.data.regex).exec(t))){if(r)return!1;var f=l.data;return{name:e,value:c,strValue:""+t,mapped:f,field:c[1],bypass:r}}if(t.length>=10&&"m"===t[0]&&(h=new RegExp(l.mapData.regex).exec(t))){if(r||d.multiple)return!1;var p=l.mapData;if(!d.color&&!d.number)return!1;var g=this.parse(e,h[4]);if(!g||g.mapped)return!1;var m=this.parse(e,h[5]);if(!m||m.mapped)return!1;if(g.pfValue===m.pfValue||g.strValue===m.strValue)return It("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+g.strValue+"`"),this.parse(e,g.strValue);if(d.color){var y=g.value,v=m.value;if(!(y[0]!==v[0]||y[1]!==v[1]||y[2]!==v[2]||y[3]!==v[3]&&(null!=y[3]&&1!==y[3]||null!=v[3]&&1!==v[3])))return!1}return{name:e,value:h,strValue:""+t,mapped:p,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:g.value,valueMax:m.value,bypass:r}}}if(d.multiple&&"multiple"!==n){var x;if(x=u?t.split(/\s+/):O(t)?t:[t],d.evenMultiple&&x.length%2!=0)return null;for(var b=[],C=[],T=[],w="",k=!1,_=0;_<x.length;_++){var E=i.parse(e,x[_],r,"multiple");k=k||I(E.value),b.push(E.value),T.push(null!=E.pfValue?E.pfValue:E.value),C.push(E.units),w+=(_>0?" ":"")+E.strValue}return d.validate&&!d.validate(b,C)?null:d.singleEnum&&k?1===b.length&&I(b[0])?{name:e,value:b[0],strValue:b[0],bypass:r}:null:{name:e,value:b,pfValue:T,strValue:w,bypass:r,units:C}}var S=s((function(){for(var n=0;n<d.enums.length;n++){if(d.enums[n]===t)return{name:e,value:t,strValue:""+t,bypass:r}}return null}),"checkEnums");if(d.number){var A,N="px";if(d.units&&(A=d.units),d.implicitUnits&&(N=d.implicitUnits),!d.unitless)if(u){var R="px|em"+(d.allowPercent?"|\\%":"");A&&(R=A);var L=t.match("^("+re+")("+R+")?$");L&&(t=L[1],A=L[2]||N)}else(!A||d.implicitUnits)&&(A=N);if(t=parseFloat(t),isNaN(t)&&void 0===d.enums)return null;if(isNaN(t)&&void 0!==d.enums)return t=o,S();if(d.integer&&!B(t)||void 0!==d.min&&(t<d.min||d.strictMin&&t===d.min)||void 0!==d.max&&(t>d.max||d.strictMax&&t===d.max))return null;var D={name:e,value:t,strValue:""+t+(A||""),units:A,bypass:r};return d.unitless||"px"!==A&&"em"!==A?D.pfValue=t:D.pfValue="px"!==A&&A?this.getEmSizeInPixels()*t:t,("ms"===A||"s"===A)&&(D.pfValue="ms"===A?t:1e3*t),("deg"===A||"rad"===A)&&(D.pfValue="rad"===A?t:Cr(t)),"%"===A&&(D.pfValue=t/100),D}if(d.propList){var P=[],F=""+t;if("none"!==F){for(var $=F.split(/\s*,\s*|\s+/),z=0;z<$.length;z++){var U=$[z].trim();i.properties[U]?P.push(U):It("`"+U+"` is not a valid property name")}if(0===P.length)return null}return{name:e,value:P,strValue:0===P.length?"none":P.join(" "),bypass:r}}if(d.color){var G=pe(t);return G?{name:e,value:G,pfValue:G,strValue:"rgb("+G[0]+","+G[1]+","+G[2]+")",bypass:r}:null}if(d.regex||d.regexes){if(d.enums){var j=S();if(j)return j}for(var V=d.regexes?d.regexes:[d.regex],W=0;W<V.length;W++){var q=new RegExp(V[W]).exec(t);if(q)return{name:e,value:d.singleRegexMatchValue?q[1]:q,strValue:""+t,bypass:r}}return null}return d.string?{name:e,value:""+t,strValue:""+t,bypass:r}:d.enums?S():null}},wc=s((function e(t){if(!(this instanceof e))return new e(t);j(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):Rt("A style must have a core reference")}),"Style"),kc=wc.prototype;kc.instanceString=function(){return"style"},kc.clear=function(){for(var e=this._private,t=e.cy.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0),t.forEach((function(e){var t=e[0]._private;t.styleDirty=!0,t.appliedInitStyle=!1})),this},kc.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},kc.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},kc.selector=function(e){var t="core"===e?null:new tl(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this},kc.css=function(){var e=arguments;if(1===e.length)for(var t=e[0],r=0;r<this.properties.length;r++){var n=this.properties[r],i=t[n.name];void 0===i&&(i=t[J(n.name)]),void 0!==i&&this.cssRule(n.name,i)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},kc.style=kc.css,kc.cssRule=function(e,t){var r=this.parse(e,t);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r),!this[n].selector&&(this._private.coreStyle[r.name]=r)}return this},kc.append=function(e){return V(e)?e.appendToStyle(this):O(e)?this.appendFromJson(e):I(e)&&this.appendFromString(e),this},wc.fromJson=function(e,t){var r=new wc(e);return r.fromJson(t),r},wc.fromString=function(e,t){return new wc(e).fromString(t)},[pc,mc,yc,vc,xc,bc,Cc,Tc].forEach((function(e){ue(kc,e)})),wc.types=kc.types,wc.properties=kc.properties,wc.propertyGroups=kc.propertyGroups,wc.propertyGroupNames=kc.propertyGroupNames,wc.propertyGroupKeys=kc.propertyGroupKeys;var _c={style:s((function(e){e&&this.setStyle(e).update();return this._private.style}),"style"),setStyle:s((function(e){var t=this._private;return V(e)?t.style=e.generateStyle(this):O(e)?t.style=wc.fromJson(this,e):I(e)?t.style=wc.fromString(this,e):t.style=wc(this),t.style}),"setStyle"),updateStyle:s((function(){this.mutableElements().updateStyle()}),"updateStyle")},Ec={autolock:s((function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)}),"autolock"),autoungrabify:s((function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)}),"autoungrabify"),autounselectify:s((function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)}),"autounselectify"),selectionType:s((function(e){var t=this._private;return null==t.selectionType&&(t.selectionType="single"),void 0===e?t.selectionType:(("additive"===e||"single"===e)&&(t.selectionType=e),this)}),"selectionType"),panningEnabled:s((function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)}),"panningEnabled"),userPanningEnabled:s((function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)}),"userPanningEnabled"),zoomingEnabled:s((function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)}),"zoomingEnabled"),userZoomingEnabled:s((function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)}),"userZoomingEnabled"),boxSelectionEnabled:s((function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)}),"boxSelectionEnabled"),pan:s((function(){var e,t,r,n,i,a=arguments,o=this._private.pan;switch(a.length){case 0:return o;case 1:if(I(a[0]))return o[e=a[0]];if(D(a[0])){if(!this._private.panningEnabled)return this;n=(r=a[0]).x,i=r.y,F(n)&&(o.x=n),F(i)&&(o.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=a[1],("x"===(e=a[0])||"y"===e)&&F(t)&&(o[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this}),"pan"),panBy:s((function(e,t){var r,n,i,a,o,s=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:D(e)&&(a=(i=s[0]).x,o=i.y,F(a)&&(l.x+=a),F(o)&&(l.y+=o),this.emit("pan viewport"));break;case 2:n=t,("x"===(r=e)||"y"===r)&&F(n)&&(l[r]+=n),this.emit("pan viewport")}return this.notify("viewport"),this}),"panBy"),fit:s((function(e,t){var r=this.getFitViewport(e,t);if(r){var n=this._private;n.zoom=r.zoom,n.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this}),"fit"),getFitViewport:s((function(e,t){if(F(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r;if(I(e)){var n=e;e=this.$(n)}else if(Y(e)){var i=e;(r={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}).w=r.x2-r.x1,r.h=r.y2-r.y1}else z(e)||(e=this.mutableElements());if(!z(e)||!e.empty()){r=r||e.boundingBox();var a,o=this.width(),s=this.height();if(t=F(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0)return{zoom:a=(a=(a=Math.min((o-2*t)/r.w,(s-2*t)/r.h))>this._private.maxZoom?this._private.maxZoom:a)<this._private.minZoom?this._private.minZoom:a,pan:{x:(o-a*(r.x1+r.x2))/2,y:(s-a*(r.y1+r.y2))/2}}}}}),"getFitViewport"),zoomRange:s((function(e,t){var r=this._private;if(null==t){var n=e;e=n.min,t=n.max}return F(e)&&F(t)&&e<=t?(r.minZoom=e,r.maxZoom=t):F(e)&&void 0===t&&e<=r.maxZoom?r.minZoom=e:F(t)&&void 0===e&&t>=r.minZoom&&(r.maxZoom=t),this}),"zoomRange"),minZoom:s((function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})}),"minZoom"),maxZoom:s((function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})}),"maxZoom"),getZoomedViewport:s((function(e){var t,r,n=this._private,i=n.pan,a=n.zoom,o=!1;if(n.zoomingEnabled||(o=!0),F(e)?r=e:D(e)&&(r=e.level,null!=e.position?t=pr(e.position,a,i):null!=e.renderedPosition&&(t=e.renderedPosition),null!=t&&!n.panningEnabled&&(o=!0)),r=(r=r>n.maxZoom?n.maxZoom:r)<n.minZoom?n.minZoom:r,o||!F(r)||r===a||null!=t&&(!F(t.x)||!F(t.y)))return null;if(null!=t){var s=i,l=a,u=r;return{zoomed:!0,panned:!0,zoom:u,pan:{x:-u/l*(t.x-s.x)+t.x,y:-u/l*(t.y-s.y)+t.y}}}return{zoomed:!0,panned:!1,zoom:r,pan:i}}),"getZoomedViewport"),zoom:s((function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),r=this._private;return null!=t&&t.zoomed?(r.zoom=t.zoom,t.panned&&(r.pan.x=t.pan.x,r.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this}),"zoom"),viewport:s((function(e){var t=this._private,r=!0,n=!0,i=[],a=!1,o=!1;if(!e)return this;if(F(e.zoom)||(r=!1),D(e.pan)||(n=!1),!r&&!n)return this;if(r){var s=e.zoom;s<t.minZoom||s>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=s,i.push("zoom"))}if(n&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;F(l.x)&&(t.pan.x=l.x,o=!1),F(l.y)&&(t.pan.y=l.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this}),"viewport"),center:s((function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this}),"center"),getCenterPan:s((function(e,t){if(this._private.panningEnabled){if(I(e)){var r=e;e=this.mutableElements().filter(r)}else z(e)||(e=this.mutableElements());if(0!==e.length){var n=e.boundingBox(),i=this.width(),a=this.height();return{x:(i-(t=void 0===t?this._private.zoom:t)*(n.x1+n.x2))/2,y:(a-t*(n.y1+n.y2))/2}}}}),"getCenterPan"),reset:s((function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this}),"reset"),invalidateSize:s((function(){this._private.sizeCache=null}),"invalidateSize"),size:s((function(){var e=this._private,t=e.container,r=this;return e.sizeCache=e.sizeCache||(t?function(){var e=r.window().getComputedStyle(t),n=s((function(t){return parseFloat(e.getPropertyValue(t))}),"val");return{width:t.clientWidth-n("padding-left")-n("padding-right"),height:t.clientHeight-n("padding-top")-n("padding-bottom")}}():{width:1,height:1})}),"size"),width:s((function(){return this.size().width}),"width"),height:s((function(){return this.size().height}),"height"),extent:s((function(){var e=this._private.pan,t=this._private.zoom,r=this.renderedExtent(),n={x1:(r.x1-e.x)/t,x2:(r.x2-e.x)/t,y1:(r.y1-e.y)/t,y2:(r.y2-e.y)/t};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n}),"extent"),renderedExtent:s((function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}),"renderedExtent"),multiClickDebounceTime:s((function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}),"multiClickDebounceTime")};Ec.centre=Ec.center,Ec.autolockNodes=Ec.autolock,Ec.autoungrabifyNodes=Ec.autoungrabify;var Sc={data:ss.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:ss.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:ss.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ss.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Sc.attr=Sc.data,Sc.removeAttr=Sc.removeData;var Ac=s((function(e){var t=this,r=(e=ue({},e)).container;r&&!$(r)&&$(r[0])&&(r=r[0]);var n=r?r._cyreg:null;(n=n||{})&&n.cy&&(n.cy.destroy(),n={});var i=n.readies=n.readies||[];r&&(r._cyreg=n),n.cy=t;var a=void 0!==_&&void 0!==r&&!e.headless,o=e;o.layout=ue({name:a?"grid":"null"},o.layout),o.renderer=ue({name:a?"canvas":"null"},o.renderer);var l=s((function(e,t,r){return void 0!==t?t:void 0!==r?r:e}),"defVal"),u=this._private={container:r,ready:!1,options:o,elements:new Vu(this),listeners:[],aniEles:new Vu(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?a:o.styleEnabled,zoom:F(o.zoom)?o.zoom:1,pan:{x:D(o.pan)&&F(o.pan.x)?o.pan.x:0,y:D(o.pan)&&F(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var c=s((function(e,t){if(e.some(X))return Wi.all(e).then(t);t(e)}),"loadExtData");u.styleEnabled&&t.setStyle([]);var h=ue({},o,o.renderer);t.initRenderer(h);var d=s((function(e,r,n){t.notifications(!1);var i=t.mutableElements();i.length>0&&i.remove(),null!=e&&(D(e)||O(e))&&t.add(e),t.one("layoutready",(function(e){t.notifications(!0),t.emit(e),t.one("load",r),t.emitAndNotify("load")})).one("layoutstop",(function(){t.one("done",n),t.emit("done")}));var a=ue({},t._private.options.layout);a.eles=t.elements(),t.layout(a).run()}),"setElesAndLayout");c([o.style,o.elements],(function(e){var r=e[0],a=e[1];u.styleEnabled&&t.style().append(r),d(a,(function(){t.startAnimationLoop(),u.ready=!0,M(o.ready)&&t.on("ready",o.ready);for(var e=0;e<i.length;e++){var r=i[e];t.on("ready",r)}n&&(n.readies=[]),t.emit("ready")}),o.done)}))}),"Core"),Nc=Ac.prototype;ue(Nc,{instanceString:s((function(){return"core"}),"instanceString"),isReady:s((function(){return this._private.ready}),"isReady"),destroyed:s((function(){return this._private.destroyed}),"destroyed"),ready:s((function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this}),"ready"),destroy:s((function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e}),"destroy"),hasElementWithId:s((function(e){return this._private.elements.hasElementWithId(e)}),"hasElementWithId"),getElementById:s((function(e){return this._private.elements.getElementById(e)}),"getElementById"),hasCompoundNodes:s((function(){return this._private.hasCompoundNodes}),"hasCompoundNodes"),headless:s((function(){return this._private.renderer.isHeadless()}),"headless"),styleEnabled:s((function(){return this._private.styleEnabled}),"styleEnabled"),addToPool:s((function(e){return this._private.elements.merge(e),this}),"addToPool"),removeFromPool:s((function(e){return this._private.elements.unmerge(e),this}),"removeFromPool"),container:s((function(){return this._private.container||null}),"container"),window:s((function(){if(null==this._private.container)return _;var e=this._private.container.ownerDocument;return void 0===e||null==e?_:e.defaultView||_}),"window"),mount:s((function(e){if(null!=e){var t=this,r=t._private,n=r.options;return!$(e)&&$(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),r.container=e,r.styleEnabled=!0,t.invalidateSize(),t.initRenderer(ue({},n,n.renderer,{name:"null"===n.renderer.name?"canvas":n.renderer.name})),t.startAnimationLoop(),t.style(n.style),t.emit("mount"),t}}),"mount"),unmount:s((function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e}),"unmount"),options:s((function(){return Ot(this._private.options)}),"options"),json:s((function(e){var t=this,r=t._private,n=t.mutableElements(),i=s((function(e){return t.getElementById(e.id())}),"getFreshRef");if(D(e)){if(t.startBatch(),e.elements){var a={},o=s((function(e,r){for(var n=[],i=[],o=0;o<e.length;o++){var s=e[o];if(s.data.id){var l=""+s.data.id,u=t.getElementById(l);a[l]=!0,0!==u.length?i.push({ele:u,json:s}):(r&&(s.group=r),n.push(s))}else It("cy.json() cannot handle elements without an ID attribute")}t.add(n);for(var c=0;c<i.length;c++){var h=i[c],d=h.ele,f=h.json;d.json(f)}}),"updateEles");if(O(e.elements))o(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var c=l[u],h=e.elements[c];O(h)&&o(h,c)}var d=t.collection();n.filter((function(e){return!a[e.id()]})).forEach((function(e){e.isParent()?d.merge(e):e.remove()})),d.forEach((function(e){return e.children().move({parent:null})})),d.forEach((function(e){return i(e).remove()}))}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==r.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==r.pan.x||e.pan.y!==r.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var f=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<f.length;p++){var g=f[p];null!=e[g]&&t[g](e[g])}return t.endBatch(),this}var m={};!!e?m.elements=this.elements().map((function(e){return e.json()})):(m.elements={},n.forEach((function(e){var t=e.group();m.elements[t]||(m.elements[t]=[]),m.elements[t].push(e.json())}))),this._private.styleEnabled&&(m.style=t.style().json()),m.data=Ot(t.data());var y=r.options;return m.zoomingEnabled=r.zoomingEnabled,m.userZoomingEnabled=r.userZoomingEnabled,m.zoom=r.zoom,m.minZoom=r.minZoom,m.maxZoom=r.maxZoom,m.panningEnabled=r.panningEnabled,m.userPanningEnabled=r.userPanningEnabled,m.pan=Ot(r.pan),m.boxSelectionEnabled=r.boxSelectionEnabled,m.renderer=Ot(y.renderer),m.hideEdgesOnViewport=y.hideEdgesOnViewport,m.textureOnViewport=y.textureOnViewport,m.wheelSensitivity=y.wheelSensitivity,m.motionBlur=y.motionBlur,m.multiClickDebounceTime=y.multiClickDebounceTime,m}),"json")}),Nc.$id=Nc.getElementById,[qu,ic,sc,lc,uc,cc,dc,fc,_c,Ec,Sc].forEach((function(e){ue(Nc,e)}));var Rc={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")},Lc={maximal:!1,acyclic:!1},Ic=s((function(e){return e.scratch("breadthfirst")}),"getInfo"),Mc=s((function(e,t){return e.scratch("breadthfirst",t)}),"setInfo");function Oc(e){this.options=ue({},Rc,Lc,e)}s(Oc,"BreadthFirstLayout"),Oc.prototype.run=function(){var e,t=this.options,r=t,n=t.cy,i=r.eles,a=i.nodes().filter((function(e){return!e.isParent()})),o=i,l=r.directed,u=r.acyclic||r.maximal||r.maximalAdjustments>0,c=Ir(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(z(r.roots))e=r.roots;else if(O(r.roots)){for(var h=[],d=0;d<r.roots.length;d++){var f=r.roots[d],p=n.getElementById(f);h.push(p)}e=n.collection(h)}else if(I(r.roots))e=n.$(r.roots);else if(l)e=a.roots();else{var g=i.components();e=n.collection();for(var m=s((function(t){var r=g[t],n=r.maxDegree(!1),i=r.filter((function(e){return e.degree(!1)===n}));e=e.add(i)}),"_loop"),y=0;y<g.length;y++)m(y)}var v=[],x={},b=s((function(e,t){null==v[t]&&(v[t]=[]);var r=v[t].length;v[t].push(e),Mc(e,{index:r,depth:t})}),"addToDepth"),C=s((function(e,t){var r=Ic(e),n=r.depth,i=r.index;v[n][i]=null,b(e,t)}),"changeDepth");o.bfs({roots:e,directed:r.directed,visit:s((function(e,t,r,n,i){var a=e[0],o=a.id();b(a,i),x[o]=!0}),"visit")});for(var T=[],w=0;w<a.length;w++){var k=a[w];x[k.id()]||T.push(k)}var _=s((function(e){for(var t=v[e],r=0;r<t.length;r++){var n=t[r];null!=n?Mc(n,{depth:e,index:r}):(t.splice(r,1),r--)}}),"assignDepthsAt"),E=s((function(){for(var e=0;e<v.length;e++)_(e)}),"assignDepths"),S=s((function(e,t){for(var n=Ic(e),a=e.incomers().filter((function(e){return e.isNode()&&i.has(e)})),o=-1,s=e.id(),l=0;l<a.length;l++){var u=a[l],c=Ic(u);o=Math.max(o,c.depth)}if(n.depth<=o){if(!r.acyclic&&t[s])return null;var h=o+1;return C(e,h),t[s]=h,!0}return!1}),"adjustMaximally");if(l&&u){var A=[],N={},R=s((function(e){return A.push(e)}),"enqueue"),L=s((function(){return A.shift()}),"dequeue");for(a.forEach((function(e){return A.push(e)}));A.length>0;){var M=L(),D=S(M,N);if(D)M.outgoers().filter((function(e){return e.isNode()&&i.has(e)})).forEach(R);else if(null===D){It("Detected double maximal shift for node `"+M.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}E();var P=0;if(r.avoidOverlap)for(var F=0;F<a.length;F++){var B=a[F].layoutDimensions(r),$=B.w,U=B.h;P=Math.max(P,$,U)}var G={},j=s((function(e){if(G[e.id()])return G[e.id()];for(var t=Ic(e).depth,r=e.neighborhood(),n=0,i=0,o=0;o<r.length;o++){var s=r[o];if(!s.isEdge()&&!s.isParent()&&a.has(s)){var l=Ic(s);if(null!=l){var u=l.index,c=l.depth;if(null!=u&&null!=c){var h=v[c].length;c<t&&(n+=u/h,i++)}}}}return n/=i=Math.max(1,i),0===i&&(n=0),G[e.id()]=n,n}),"getWeightedPercent"),V=s((function(e,t){var r=j(e)-j(t);return 0===r?se(e.id(),t.id()):r}),"sortFn");void 0!==r.depthSort&&(V=r.depthSort);for(var W=0;W<v.length;W++)v[W].sort(V),_(W);for(var q=[],H=0;H<T.length;H++)q.push(T[H]);v.unshift(q),E();for(var Y=0,X=0;X<v.length;X++)Y=Math.max(v[X].length,Y);var K=c.x1+c.w/2,Z=c.x1+c.h/2,Q=v.reduce((function(e,t){return Math.max(e,t.length)}),0),J=s((function(e){var t=Ic(e),n=t.depth,i=t.index,a=v[n].length,o=Math.max(c.w/((r.grid?Q:a)+1),P),s=Math.max(c.h/(v.length+1),P),l=Math.min(c.w/2/v.length,c.h/2/v.length);if(l=Math.max(l,P),r.circle){var u=l*n+l-(v.length>0&&v[0].length<=3?l/2:0),h=2*Math.PI/v[n].length*i;return 0===n&&1===v[0].length&&(u=1),{x:K+u*Math.cos(h),y:Z+u*Math.sin(h)}}return{x:K+(i+1-(a+1)/2)*o,y:(n+1)*s}}),"getPosition");return i.nodes().layoutPositions(this,r,J),this};var Dc={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")};function Pc(e){this.options=ue({},Dc,e)}s(Pc,"CircleLayout"),Pc.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,a=n.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));for(var o,l=Ir(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u={x:l.x1+l.w/2,y:l.y1+l.h/2},c=(void 0===t.sweep?2*Math.PI-2*Math.PI/a.length:t.sweep)/Math.max(1,a.length-1),h=0,d=0;d<a.length;d++){var f=a[d].layoutDimensions(t),p=f.w,g=f.h;h=Math.max(h,p,g)}if(o=F(t.radius)?t.radius:a.length<=1?0:Math.min(l.h,l.w)/2-h,a.length>1&&t.avoidOverlap){h*=1.75;var m=Math.cos(c)-Math.cos(0),y=Math.sin(c)-Math.sin(0),v=Math.sqrt(h*h/(m*m+y*y));o=Math.max(v,o)}var x=s((function(e,r){var n=t.startAngle+r*c*(i?1:-1),a=o*Math.cos(n),s=o*Math.sin(n);return{x:u.x+a,y:u.y+s}}),"getPos");return n.nodes().layoutPositions(this,t,x),this};var Fc={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:s((function(e){return e.degree()}),"concentric"),levelWidth:s((function(e){return e.maxDegree()/4}),"levelWidth"),animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")};function Bc(e){this.options=ue({},Fc,e)}s(Bc,"ConcentricLayout"),Bc.prototype.run=function(){for(var e=this.options,t=e,r=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,n=e.cy,i=t.eles,a=i.nodes().not(":parent"),o=Ir(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,c=0;c<a.length;c++){var h,d=a[c];h=t.concentric(d),l.push({value:h,node:d}),d._private.scratch.concentric=h}a.updateStyle();for(var f=0;f<a.length;f++){var p=a[f].layoutDimensions(t);u=Math.max(u,p.w,p.h)}l.sort((function(e,t){return t.value-e.value}));for(var g=t.levelWidth(a),m=[[]],y=m[0],v=0;v<l.length;v++){var x=l[v];if(y.length>0)Math.abs(y[0].value-x.value)>=g&&(y=[],m.push(y));y.push(x)}var b=u+t.minNodeSpacing;if(!t.avoidOverlap){var C=m.length>0&&m[0].length>1,T=(Math.min(o.w,o.h)/2-b)/(m.length+C?1:0);b=Math.min(b,T)}for(var w=0,k=0;k<m.length;k++){var _=m[k],E=void 0===t.sweep?2*Math.PI-2*Math.PI/_.length:t.sweep,S=_.dTheta=E/Math.max(1,_.length-1);if(_.length>1&&t.avoidOverlap){var A=Math.cos(S)-Math.cos(0),N=Math.sin(S)-Math.sin(0),R=Math.sqrt(b*b/(A*A+N*N));w=Math.max(R,w)}_.r=w,w+=b}if(t.equidistant){for(var L=0,I=0,M=0;M<m.length;M++){var O=m[M].r-I;L=Math.max(L,O)}I=0;for(var D=0;D<m.length;D++){var P=m[D];0===D&&(I=P.r),P.r=I,I+=L}}for(var F={},B=0;B<m.length;B++)for(var $=m[B],z=$.dTheta,U=$.r,G=0;G<$.length;G++){var j=$[G],V=t.startAngle+(r?1:-1)*z*G,W={x:s.x+U*Math.cos(V),y:s.y+U*Math.sin(V)};F[j.node.id()]=W}return i.nodes().layoutPositions(this,t,(function(e){var t=e.id();return F[t]})),this};var $c,zc={ready:s((function(){}),"ready"),stop:s((function(){}),"stop"),animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:s((function(e){return 2048}),"nodeRepulsion"),nodeOverlap:4,idealEdgeLength:s((function(e){return 32}),"idealEdgeLength"),edgeElasticity:s((function(e){return 32}),"edgeElasticity"),nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Uc(e){this.options=ue({},zc,e),this.options.layout=this;var t=this.options.eles.nodes(),r=this.options.eles.edges().filter((function(e){var r=e.source().data("id"),n=e.target().data("id"),i=t.some((function(e){return e.data("id")===r})),a=t.some((function(e){return e.data("id")===n}));return!i||!a}));this.options.eles=this.options.eles.not(r)}s(Uc,"CoseLayout"),Uc.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,(!0===e.animate||!1===e.animate)&&r.emit({type:"layoutstart",layout:r}),$c=!0===e.debug;var n=Gc(t,r,e);$c&&undefined(n),e.randomize&&Wc(n);var i=ut(),a=s((function(){Hc(n,t,e),!0===e.fit&&t.fit(e.padding)}),"refresh"),o=s((function(t){return!(r.stopped||t>=e.numIter||(Yc(n,e),n.temperature=n.temperature*e.coolingFactor,n.temperature<e.minTemp))}),"mainLoop"),l=s((function(){if(!0===e.animate||!1===e.animate)a(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var t=e.eles.nodes(),i=qc(n,e,t);t.layoutPositions(r,e,i)}}),"done"),u=0,c=!0;if(!0===e.animate){var h=s((function t(){for(var r=0;c&&r<e.refresh;)c=o(u),u++,r++;c?(ut()-i>=e.animationThreshold&&a(),lt(t)):(oh(n,e),l())}),"frame");h()}else{for(;c;)c=o(u),u++;oh(n,e),l()}return this},Uc.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Uc.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Gc=s((function(e,t,r){for(var n=r.eles.edges(),i=r.eles.nodes(),a=Ir(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:r.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},s=r.eles.components(),l={},u=0;u<s.length;u++)for(var c=s[u],h=0;h<c.length;h++){l[c[h].id()]=u}for(u=0;u<o.nodeSize;u++){var d=(y=i[u]).layoutDimensions(r);(O={}).isLocked=y.locked(),O.id=y.data("id"),O.parentId=y.data("parent"),O.cmptId=l[y.id()],O.children=[],O.positionX=y.position("x"),O.positionY=y.position("y"),O.offsetX=0,O.offsetY=0,O.height=d.w,O.width=d.h,O.maxX=O.positionX+O.width/2,O.minX=O.positionX-O.width/2,O.maxY=O.positionY+O.height/2,O.minY=O.positionY-O.height/2,O.padLeft=parseFloat(y.style("padding")),O.padRight=parseFloat(y.style("padding")),O.padTop=parseFloat(y.style("padding")),O.padBottom=parseFloat(y.style("padding")),O.nodeRepulsion=M(r.nodeRepulsion)?r.nodeRepulsion(y):r.nodeRepulsion,o.layoutNodes.push(O),o.idToIndex[O.id]=u}var f=[],p=0,g=-1,m=[];for(u=0;u<o.nodeSize;u++){var y,v=(y=o.layoutNodes[u]).parentId;null!=v?o.layoutNodes[o.idToIndex[v]].children.push(y.id):(f[++g]=y.id,m.push(y.id))}for(o.graphSet.push(m);p<=g;){var x=f[p++],b=o.idToIndex[x],C=o.layoutNodes[b].children;if(C.length>0){o.graphSet.push(C);for(u=0;u<C.length;u++)f[++g]=C[u]}}for(u=0;u<o.graphSet.length;u++){var T=o.graphSet[u];for(h=0;h<T.length;h++){var w=o.idToIndex[T[h]];o.indexToGraph[w]=u}}for(u=0;u<o.edgeSize;u++){var k=n[u],_={};_.id=k.data("id"),_.sourceId=k.data("source"),_.targetId=k.data("target");var E=M(r.idealEdgeLength)?r.idealEdgeLength(k):r.idealEdgeLength,S=M(r.edgeElasticity)?r.edgeElasticity(k):r.edgeElasticity,A=o.idToIndex[_.sourceId],N=o.idToIndex[_.targetId];if(o.indexToGraph[A]!=o.indexToGraph[N]){for(var R=jc(_.sourceId,_.targetId,o),L=o.graphSet[R],I=0,O=o.layoutNodes[A];-1===L.indexOf(O.id);)O=o.layoutNodes[o.idToIndex[O.parentId]],I++;for(O=o.layoutNodes[N];-1===L.indexOf(O.id);)O=o.layoutNodes[o.idToIndex[O.parentId]],I++;E*=I*r.nestingFactor}_.idealLength=E,_.elasticity=S,o.layoutEdges.push(_)}return o}),"createLayoutInfo"),jc=s((function(e,t,r){var n=Vc(e,t,0,r);return 2>n.count?0:n.graph}),"findLCA"),Vc=s((function e(t,r,n,i){var a=i.graphSet[n];if(-1<a.indexOf(t)&&-1<a.indexOf(r))return{count:2,graph:n};for(var o=0,s=0;s<a.length;s++){var l=a[s],u=i.idToIndex[l],c=i.layoutNodes[u].children;if(0!==c.length){var h=e(t,r,i.indexToGraph[i.idToIndex[c[0]]],i);if(0!==h.count){if(1!==h.count)return h;if(2===++o)break}}}return{count:o,graph:n}}),"findLCA_aux"),Wc=s((function(e,t){for(var r=e.clientWidth,n=e.clientHeight,i=0;i<e.nodeSize;i++){var a=e.layoutNodes[i];0===a.children.length&&!a.isLocked&&(a.positionX=Math.random()*r,a.positionY=Math.random()*n)}}),"randomizePositions"),qc=s((function(e,t,r){var n=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(r.forEach((function(t){var r=e.layoutNodes[e.idToIndex[t.data("id")]];i.x1=Math.min(i.x1,r.positionX),i.x2=Math.max(i.x2,r.positionX),i.y1=Math.min(i.y1,r.positionY),i.y2=Math.max(i.y2,r.positionY)})),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(r,a){var o=e.layoutNodes[e.idToIndex[r.data("id")]];if(t.boundingBox){var s=(o.positionX-i.x1)/i.w,l=(o.positionY-i.y1)/i.h;return{x:n.x1+s*n.w,y:n.y1+l*n.h}}return{x:o.positionX,y:o.positionY}}}),"getScaleInBoundsFn"),Hc=s((function(e,t,r){var n=r.layout,i=r.eles.nodes(),a=qc(e,r,i);i.positions(a),!0!==e.ready&&(e.ready=!0,n.one("layoutready",r.ready),n.emit({type:"layoutready",layout:this}))}),"refreshPositions"),Yc=s((function(e,t,r){Xc(e,t),eh(e),th(e,t),rh(e),nh(e)}),"step"),Xc=s((function(e,t){for(var r=0;r<e.graphSet.length;r++)for(var n=e.graphSet[r],i=n.length,a=0;a<i;a++)for(var o=e.layoutNodes[e.idToIndex[n[a]]],s=a+1;s<i;s++){var l=e.layoutNodes[e.idToIndex[n[s]]];Zc(o,l,e,t)}}),"calculateNodeForces"),Kc=s((function(e){return-e+2*e*Math.random()}),"randomDistance"),Zc=s((function(e,t,r,n){if(e.cmptId===t.cmptId||r.isCompound){var i=t.positionX-e.positionX,a=t.positionY-e.positionY;0===i&&0===a&&(i=Kc(1),a=Kc(1));var o=Qc(e,t,i,a);if(o>0)var s=(u=n.nodeOverlap*o)*i/(g=Math.sqrt(i*i+a*a)),l=u*a/g;else{var u,c=Jc(e,i,a),h=Jc(t,-1*i,-1*a),d=h.x-c.x,f=h.y-c.y,p=d*d+f*f,g=Math.sqrt(p);s=(u=(e.nodeRepulsion+t.nodeRepulsion)/p)*d/g,l=u*f/g}e.isLocked||(e.offsetX-=s,e.offsetY-=l),t.isLocked||(t.offsetX+=s,t.offsetY+=l)}}),"nodeRepulsion"),Qc=s((function(e,t,r,n){if(r>0)var i=e.maxX-t.minX;else i=t.maxX-e.minX;if(n>0)var a=e.maxY-t.minY;else a=t.maxY-e.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0}),"nodesOverlap"),Jc=s((function(e,t,r){var n=e.positionX,i=e.positionY,a=e.height||1,o=e.width||1,s=r/t,l=a/o,u={};return 0===t&&0<r||0===t&&0>r?(u.x=n,u.y=i+a/2,u):0<t&&-1*l<=s&&s<=l?(u.x=n+o/2,u.y=i+o*r/2/t,u):0>t&&-1*l<=s&&s<=l?(u.x=n-o/2,u.y=i-o*r/2/t,u):0<r&&(s<=-1*l||s>=l)?(u.x=n+a*t/2/r,u.y=i+a/2,u):(0>r&&(s<=-1*l||s>=l)&&(u.x=n-a*t/2/r,u.y=i-a/2),u)}),"findClippingPoint"),eh=s((function(e,t){for(var r=0;r<e.edgeSize;r++){var n=e.layoutEdges[r],i=e.idToIndex[n.sourceId],a=e.layoutNodes[i],o=e.idToIndex[n.targetId],s=e.layoutNodes[o],l=s.positionX-a.positionX,u=s.positionY-a.positionY;if(0!==l||0!==u){var c=Jc(a,l,u),h=Jc(s,-1*l,-1*u),d=h.x-c.x,f=h.y-c.y,p=Math.sqrt(d*d+f*f),g=Math.pow(n.idealLength-p,2)/n.elasticity;if(0!==p)var m=g*d/p,y=g*f/p;else m=0,y=0;a.isLocked||(a.offsetX+=m,a.offsetY+=y),s.isLocked||(s.offsetX-=m,s.offsetY-=y)}}}),"calculateEdgeForces"),th=s((function(e,t){if(0!==t.gravity)for(var r=0;r<e.graphSet.length;r++){var n=e.graphSet[r],i=n.length;if(0===r)var a=e.clientHeight/2,o=e.clientWidth/2;else{var s=e.layoutNodes[e.idToIndex[n[0]]],l=e.layoutNodes[e.idToIndex[s.parentId]];a=l.positionX,o=l.positionY}for(var u=0;u<i;u++){var c=e.layoutNodes[e.idToIndex[n[u]]];if(!c.isLocked){var h=a-c.positionX,d=o-c.positionY,f=Math.sqrt(h*h+d*d);if(f>1){var p=t.gravity*h/f,g=t.gravity*d/f;c.offsetX+=p,c.offsetY+=g}}}}}),"calculateGravityForces"),rh=s((function(e,t){var r=[],n=0,i=-1;for(r.push.apply(r,e.graphSet[0]),i+=e.graphSet[0].length;n<=i;){var a=r[n++],o=e.idToIndex[a],s=e.layoutNodes[o],l=s.children;if(0<l.length&&!s.isLocked){for(var u=s.offsetX,c=s.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=u,d.offsetY+=c,r[++i]=l[h]}s.offsetX=0,s.offsetY=0}}}),"propagateForces"),nh=s((function(e,t){for(var r=0;r<e.nodeSize;r++){0<(i=e.layoutNodes[r]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(r=0;r<e.nodeSize;r++){if(!(0<(i=e.layoutNodes[r]).children.length||i.isLocked)){var n=ih(i.offsetX,i.offsetY,e.temperature);i.positionX+=n.x,i.positionY+=n.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,ah(i,e)}}for(r=0;r<e.nodeSize;r++){var i;0<(i=e.layoutNodes[r]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}}),"updatePositions"),ih=s((function(e,t,r){var n=Math.sqrt(e*e+t*t);if(n>r)var i={x:r*e/n,y:r*t/n};else i={x:e,y:t};return i}),"limitForce"),ah=s((function e(t,r){var n=t.parentId;if(null!=n){var i=r.layoutNodes[r.idToIndex[n]],a=!1;if((null==i.maxX||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,a=!0),(null==i.minX||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,a=!0),(null==i.maxY||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,a=!0),(null==i.minY||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,a=!0),a)return e(i,r)}}),"updateAncestryBoundaries"),oh=s((function(e,t){for(var r=e.layoutNodes,n=[],i=0;i<r.length;i++){var a=r[i],o=a.cmptId;(n[o]=n[o]||[]).push(a)}var s=0;for(i=0;i<n.length;i++){if(g=n[i]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var l=0;l<g.length;l++){var u=g[l];g.x1=Math.min(g.x1,u.positionX-u.width/2),g.x2=Math.max(g.x2,u.positionX+u.width/2),g.y1=Math.min(g.y1,u.positionY-u.height/2),g.y2=Math.max(g.y2,u.positionY+u.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,s+=g.w*g.h}}n.sort((function(e,t){return t.w*t.h-e.w*e.h}));var c=0,h=0,d=0,f=0,p=Math.sqrt(s)*e.clientWidth/e.clientHeight;for(i=0;i<n.length;i++){var g;if(g=n[i]){for(l=0;l<g.length;l++){(u=g[l]).isLocked||(u.positionX+=c-g.x1,u.positionY+=h-g.y1)}c+=g.w+t.componentSpacing,d+=g.w+t.componentSpacing,f=Math.max(f,g.h),d>p&&(h+=f+t.componentSpacing,c=0,d=0,f=0)}}}),"separateComponents"),sh={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:s((function(e){}),"position"),sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")};function lh(e){this.options=ue({},sh,e)}s(lh,"GridLayout"),lh.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles,i=n.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var a=Ir(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===a.h||0===a.w)n.nodes().layoutPositions(this,t,(function(e){return{x:a.x1,y:a.y1}}));else{var o=i.size(),l=Math.sqrt(o*a.h/a.w),u=Math.round(l),c=Math.round(a.w/a.h*l),h=s((function(e){if(null==e)return Math.min(u,c);Math.min(u,c)==u?u=e:c=e}),"small"),d=s((function(e){if(null==e)return Math.max(u,c);Math.max(u,c)==u?u=e:c=e}),"large"),f=t.rows,p=null!=t.cols?t.cols:t.columns;if(null!=f&&null!=p)u=f,c=p;else if(null!=f&&null==p)u=f,c=Math.ceil(o/u);else if(null==f&&null!=p)c=p,u=Math.ceil(o/c);else if(c*u>o){var g=h(),m=d();(g-1)*m>=o?h(g-1):(m-1)*g>=o&&d(m-1)}else for(;c*u<o;){var y=h(),v=d();(v+1)*y>=o?d(v+1):h(y+1)}var x=a.w/c,b=a.h/u;if(t.condense&&(x=0,b=0),t.avoidOverlap)for(var C=0;C<i.length;C++){var T=i[C],w=T._private.position;(null==w.x||null==w.y)&&(w.x=0,w.y=0);var k=T.layoutDimensions(t),_=t.avoidOverlapPadding,E=k.w+_,S=k.h+_;x=Math.max(x,E),b=Math.max(b,S)}for(var A={},N=s((function(e,t){return!!A["c-"+e+"-"+t]}),"used"),R=s((function(e,t){A["c-"+e+"-"+t]=!0}),"use"),L=0,I=0,M=s((function(){++I>=c&&(I=0,L++)}),"moveToNextCell"),O={},D=0;D<i.length;D++){var P=i[D],F=t.position(P);if(F&&(void 0!==F.row||void 0!==F.col)){var B={row:F.row,col:F.col};if(void 0===B.col)for(B.col=0;N(B.row,B.col);)B.col++;else if(void 0===B.row)for(B.row=0;N(B.row,B.col);)B.row++;O[P.id()]=B,R(B.row,B.col)}}var $=s((function(e,t){var r,n;if(e.locked()||e.isParent())return!1;var i=O[e.id()];if(i)r=i.col*x+x/2+a.x1,n=i.row*b+b/2+a.y1;else{for(;N(L,I);)M();r=I*x+x/2+a.x1,n=L*b+b/2+a.y1,R(L,I),M()}return{x:r,y:n}}),"getPos");i.layoutPositions(this,t,$)}return this};var uh={ready:s((function(){}),"ready"),stop:s((function(){}),"stop")};function ch(e){this.options=ue({},uh,e)}s(ch,"NullLayout"),ch.prototype.run=function(){var e=this.options,t=e.eles,r=this;return e.cy,r.emit("layoutstart"),t.nodes().positions((function(){return{x:0,y:0}})),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this},ch.prototype.stop=function(){return this};var hh={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")};function dh(e){this.options=ue({},hh,e)}s(dh,"PresetLayout"),dh.prototype.run=function(){var e=this.options,t=e.eles.nodes(),r=M(e.positions);function n(t){return null==e.positions?fr(t.position()):r?e.positions(t):e.positions[t._private.data.id]??null}return s(n,"getPosition"),t.layoutPositions(this,e,(function(e,t){var r=n(e);return!e.locked()&&null!=r&&r})),this};var fh={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")};function ph(e){this.options=ue({},fh,e)}s(ph,"RandomLayout"),ph.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,n=Ir(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),i=s((function(e,t){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}}),"getPos");return r.nodes().layoutPositions(this,e,i),this};var gh=[{name:"breadthfirst",impl:Oc},{name:"circle",impl:Pc},{name:"concentric",impl:Bc},{name:"cose",impl:Uc},{name:"grid",impl:lh},{name:"null",impl:ch},{name:"preset",impl:dh},{name:"random",impl:ph}];function mh(e){this.options=e,this.notifications=0}s(mh,"NullRenderer");var yh=s((function(){}),"noop"),vh=s((function(){throw new Error("A headless instance can not render images")}),"throwImgErr");mh.prototype={recalculateRenderedStyle:yh,notify:s((function(){this.notifications++}),"notify"),init:yh,isHeadless:s((function(){return!0}),"isHeadless"),png:vh,jpg:vh};var xh={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,r=s((function(e,t,r,n,i,a,o){var s=i.x-r/2-o,l=i.x+r/2+o,u=i.y-r/2-o,c=i.y+r/2+o;return s<=e&&e<=l&&u<=t&&t<=c}),"bbCollide"),n=s((function(e,t,r,n,i){var a=e*Math.cos(n)-t*Math.sin(n),o=(e*Math.sin(n)+t*Math.cos(n))*r;return{x:a*r+i.x,y:o+i.y}}),"transform"),i=s((function(e,t,r,i){for(var a=[],o=0;o<e.length;o+=2){var s=e[o],l=e[o+1];a.push(n(s,l,t,r,i))}return a}),"transformPoints"),a=s((function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n.x,n.y)}return t}),"pointsToArr"),o=s((function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2}),"standardGap"),l=s((function(n,l){I(l)&&(l=e[l]),e[n]=ue({name:n,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:s((function(e,t,r,n,o,s){var l=a(i(this.points,r+2*s,n,o));return Qr(e,t,l)}),"collide"),roughCollide:r,draw:s((function(e,r,n,a){var o=i(this.points,r,n,a);t.arrowShapeImpl("polygon")(e,o)}),"draw"),spacing:s((function(e){return 0}),"spacing"),gap:o},l)}),"defineArrowShape");l("none",{collide:St,roughCollide:St,draw:Nt,spacing:At,gap:At}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:s((function(e,r,a,o,s){var l=i(this.points,r,a,o),u=this.controlPoint,c=n(u[0],u[1],r,a,o);t.arrowShapeImpl(this.name)(e,l,c)}),"draw"),gap:s((function(e){return.8*o(e)}),"gap")}),l("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:s((function(e,t,r,n,o,s,l){var u=a(i(this.points,r+2*l,n,o)),c=a(i(this.pointsTee,r+2*l,n,o));return Qr(e,t,u)||Qr(e,t,c)}),"collide"),draw:s((function(e,r,n,a,o){var s=i(this.points,r,n,a),l=i(this.pointsTee,r,n,a);t.arrowShapeImpl(this.name)(e,s,l)}),"draw")}),l("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:s((function(e,t,r,n,o,s,l){var u=o,c=Math.pow(u.x-e,2)+Math.pow(u.y-t,2)<=Math.pow((r+2*l)*this.radius,2),h=a(i(this.points,r+2*l,n,o));return Qr(e,t,h)||c}),"collide"),draw:s((function(e,r,n,a,o){var s=i(this.pointsTr,r,n,a);t.arrowShapeImpl(this.name)(e,s,a.x,a.y,this.radius*r)}),"draw"),spacing:s((function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}),"spacing")}),l("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:s((function(e,t){var r=this.baseCrossLinePts.slice(),n=t/e;return r[3]=r[3]-n,r[5]=r[5]-n,r}),"crossLinePts"),collide:s((function(e,t,r,n,o,s,l){var u=a(i(this.points,r+2*l,n,o)),c=a(i(this.crossLinePts(r,s),r+2*l,n,o));return Qr(e,t,u)||Qr(e,t,c)}),"collide"),draw:s((function(e,r,n,a,o){var s=i(this.points,r,n,a),l=i(this.crossLinePts(r,o),r,n,a);t.arrowShapeImpl(this.name)(e,s,l)}),"draw")}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:s((function(e){return.525*o(e)}),"gap")}),l("circle",{radius:.15,collide:s((function(e,t,r,n,i,a,o){var s=i;return Math.pow(s.x-e,2)+Math.pow(s.y-t,2)<=Math.pow((r+2*o)*this.radius,2)}),"collide"),draw:s((function(e,r,n,i,a){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*r)}),"draw"),spacing:s((function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}),"spacing")}),l("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:s((function(e){return 1}),"spacing"),gap:s((function(e){return 1}),"gap")}),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:s((function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}),"gap")}),l("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:s((function(e){return.95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}),"gap")})}},bh={projectIntoViewport:function(e,t){var r=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],o=n[4],s=r.pan(),l=r.zoom();return[((e-i)/o-s.x)/l,((t-a)/o-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),n=s((function(e){return parseFloat(r.getPropertyValue(e))}),"styleValue"),i=n("padding-left"),a=n("padding-right"),o=n("padding-top"),l=n("padding-bottom"),u=n("border-left-width"),c=n("border-right-width"),h=n("border-top-width"),d=(n("border-bottom-width"),e.clientWidth),f=e.clientHeight,p=i+a,g=o+l,m=u+c,y=t.width/(d+m),v=d-p,x=f-g,b=t.left+i+u,C=t.top+o+h;return this.containerBB=[b,C,v,x,y]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,r,n){return this.findNearestElements(e,t,r,n)[0]},findNearestElements:function(e,t,r,n){var i,a,o=this,l=this,u=l.getCachedZSortedEles(),c=[],h=l.cy.zoom(),d=l.cy.hasCompoundNodes(),f=(n?24:8)/h,p=(n?8:2)/h,g=(n?8:2)/h,m=1/0;function y(e,t){if(e.isNode()){if(a)return;a=e,c.push(e)}if(e.isEdge()&&(null==t||t<m))if(i){if(i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var r=0;r<c.length;r++)if(c[r].isEdge()){c[r]=e,i=e,m=t??m;break}}else c.push(e),i=e,m=t??m}function v(r){var n=r.outerWidth()+2*p,i=r.outerHeight()+2*p,a=n/2,s=i/2,u=r.position(),c="auto"===r.pstyle("corner-radius").value?"auto":r.pstyle("corner-radius").pfValue,h=r._private.rscratch;if(u.x-a<=e&&e<=u.x+a&&u.y-s<=t&&t<=u.y+s&&l.nodeShapes[o.getNodeShape(r)].checkPoint(e,t,0,n,i,u.x,u.y,c,h))return y(r,0),!0}function x(r){var n,i=r._private,a=i.rscratch,s=r.pstyle("width").pfValue,u=r.pstyle("arrow-scale").value,h=s/2+f,p=h*h,g=2*h,m=i.source,x=i.target;if("segments"===a.edgeType||"straight"===a.edgeType||"haystack"===a.edgeType){for(var b=a.allpts,C=0;C+3<b.length;C+=2)if(qr(e,t,b[C],b[C+1],b[C+2],b[C+3],g)&&p>(n=Zr(e,t,b[C],b[C+1],b[C+2],b[C+3])))return y(r,n),!0}else if("bezier"===a.edgeType||"multibezier"===a.edgeType||"self"===a.edgeType||"compound"===a.edgeType)for(b=a.allpts,C=0;C+5<a.allpts.length;C+=4)if(Hr(e,t,b[C],b[C+1],b[C+2],b[C+3],b[C+4],b[C+5],g)&&p>(n=Kr(e,t,b[C],b[C+1],b[C+2],b[C+3],b[C+4],b[C+5])))return y(r,n),!0;m=m||i.source,x=x||i.target;var T=o.getArrowWidth(s,u),w=[{name:"source",x:a.arrowStartX,y:a.arrowStartY,angle:a.srcArrowAngle},{name:"target",x:a.arrowEndX,y:a.arrowEndY,angle:a.tgtArrowAngle},{name:"mid-source",x:a.midX,y:a.midY,angle:a.midsrcArrowAngle},{name:"mid-target",x:a.midX,y:a.midY,angle:a.midtgtArrowAngle}];for(C=0;C<w.length;C++){var k=w[C],_=l.arrowShapes[r.pstyle(k.name+"-arrow-shape").value],E=r.pstyle("width").pfValue;if(_.roughCollide(e,t,T,k.angle,{x:k.x,y:k.y},E,f)&&_.collide(e,t,T,k.angle,{x:k.x,y:k.y},E,f))return y(r),!0}d&&c.length>0&&(v(m),v(x))}function b(e,t,r){return jt(e,t,r)}function C(r,n){var i,a=r._private,o=g;i=n?n+"-":"",r.boundingBox();var l=a.labelBounds[n||"main"],u=r.pstyle(i+"label").value;if("yes"===r.pstyle("text-events").strValue&&u){var c=b(a.rscratch,"labelX",n),h=b(a.rscratch,"labelY",n),d=b(a.rscratch,"labelAngle",n),f=r.pstyle(i+"text-margin-x").pfValue,p=r.pstyle(i+"text-margin-y").pfValue,m=l.x1-o-f,v=l.x2+o-f,x=l.y1-o-p,C=l.y2+o-p;if(d){var T=Math.cos(d),w=Math.sin(d),k=s((function(e,t){return{x:(e-=c)*T-(t-=h)*w+c,y:e*w+t*T+h}}),"rotate"),_=k(m,x),E=k(m,C),S=k(v,x),A=k(v,C),N=[_.x+f,_.y+p,S.x+f,S.y+p,A.x+f,A.y+p,E.x+f,E.y+p];if(Qr(e,t,N))return y(r),!0}else if(Gr(l,e,t))return y(r),!0}}r&&(u=u.interactive),s(y,"addEle"),s(v,"checkNode"),s(x,"checkEdge"),s(b,"preprop"),s(C,"checkLabel");for(var T=u.length-1;T>=0;T--){var w=u[T];w.isNode()?v(w)||C(w):x(w)||C(w)||C(w,"source")||C(w,"target")}return c},getAllInBox:function(e,t,r,n){for(var i=this.getCachedZSortedEles().interactive,a=[],o=Math.min(e,r),s=Math.max(e,r),l=Math.min(t,n),u=Math.max(t,n),c=Ir({x1:e=o,y1:t=l,x2:r=s,y2:n=u}),h=0;h<i.length;h++){var d=i[h];if(d.isNode()){var f=d,p=f.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Ur(c,p)&&!Vr(p,c)&&a.push(f)}else{var g=d,m=g._private,y=m.rscratch;if(null!=y.startX&&null!=y.startY&&!Gr(c,y.startX,y.startY)||null!=y.endX&&null!=y.endY&&!Gr(c,y.endX,y.endY))continue;if("bezier"===y.edgeType||"multibezier"===y.edgeType||"self"===y.edgeType||"compound"===y.edgeType||"segments"===y.edgeType||"haystack"===y.edgeType){for(var v=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,x=!0,b=0;b<v.length;b++)if(!jr(c,v[b])){x=!1;break}x&&a.push(g)}else("haystack"===y.edgeType||"straight"===y.edgeType)&&a.push(g)}}return a}},Ch={calculateArrowAngles:function(e){var t,r,n,i,a,o,s=e._private.rscratch,l="haystack"===s.edgeType,u="bezier"===s.edgeType,c="multibezier"===s.edgeType,h="segments"===s.edgeType,d="compound"===s.edgeType,f="self"===s.edgeType;if(l?(n=s.haystackPts[0],i=s.haystackPts[1],a=s.haystackPts[2],o=s.haystackPts[3]):(n=s.arrowStartX,i=s.arrowStartY,a=s.arrowEndX,o=s.arrowEndY),g=s.midX,m=s.midY,h)t=n-s.segpts[0],r=i-s.segpts[1];else if(c||d||f||u){var p=s.allpts;t=n-Ar(p[0],p[2],p[4],.1),r=i-Ar(p[1],p[3],p[5],.1)}else t=n-g,r=i-m;s.srcArrowAngle=Tr(t,r);var g=s.midX,m=s.midY;if(l&&(g=(n+a)/2,m=(i+o)/2),t=a-n,r=o-i,h)if((p=s.allpts).length/2%2==0){var y=(_=p.length/2)-2;t=p[_]-p[y],r=p[_+1]-p[y+1]}else if(s.isRound)t=s.midVector[1],r=-s.midVector[0];else{y=(_=p.length/2-1)-2;t=p[_]-p[y],r=p[_+1]-p[y+1]}else if(c||d||f){var v,x,b,C,p=s.allpts;if(s.ctrlpts.length/2%2==0){var T=(w=(k=p.length/2-1)+2)+2;v=Ar(p[k],p[w],p[T],0),x=Ar(p[k+1],p[w+1],p[T+1],0),b=Ar(p[k],p[w],p[T],1e-4),C=Ar(p[k+1],p[w+1],p[T+1],1e-4)}else{var w,k;T=(w=p.length/2-1)+2;v=Ar(p[k=w-2],p[w],p[T],.4999),x=Ar(p[k+1],p[w+1],p[T+1],.4999),b=Ar(p[k],p[w],p[T],.5),C=Ar(p[k+1],p[w+1],p[T+1],.5)}t=b-v,r=C-x}if((s.midtgtArrowAngle=Tr(t,r),s.midDispX=t,s.midDispY=r,t*=-1,r*=-1,h)&&((p=s.allpts).length/2%2!=0&&!s.isRound)){var _,E=(_=p.length/2-1)+2;t=-(p[E]-p[_]),r=-(p[E+1]-p[_+1])}if(s.midsrcArrowAngle=Tr(t,r),h)t=a-s.segpts[s.segpts.length-2],r=o-s.segpts[s.segpts.length-1];else if(c||d||f||u){var S=(p=s.allpts).length;t=a-Ar(p[S-6],p[S-4],p[S-2],.9),r=o-Ar(p[S-5],p[S-3],p[S-1],.9)}else t=a-g,r=o-m;s.tgtArrowAngle=Tr(t,r)}};Ch.getArrowWidth=Ch.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[e+", "+t];return n||(n=Math.max(Math.pow(13.37*e,.9),29)*t,r[e+", "+t]=n,n)};var Th,wh,kh,_h,Eh,Sh,Ah,Nh,Rh,Lh,Ih,Mh,Oh,Dh,Ph,Fh,Bh,$h={},zh={},Uh=s((function(e,t,r){r.x=t.x-e.x,r.y=t.y-e.y,r.len=Math.sqrt(r.x*r.x+r.y*r.y),r.nx=r.x/r.len,r.ny=r.y/r.len,r.ang=Math.atan2(r.ny,r.nx)}),"asVec"),Gh=s((function(e,t){t.x=-1*e.x,t.y=-1*e.y,t.nx=-1*e.nx,t.ny=-1*e.ny,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang}),"invertVec"),jh=s((function(e,t,r,n,i){if(e!==Bh?Uh(t,e,$h):Gh(zh,$h),Uh(t,r,zh),kh=$h.nx*zh.ny-$h.ny*zh.nx,_h=$h.nx*zh.nx-$h.ny*-zh.ny,Ah=Math.asin(Math.max(-1,Math.min(1,kh))),Math.abs(Ah)<1e-6)return Th=t.x,wh=t.y,void(Rh=Ih=0);Eh=1,Sh=!1,_h<0?Ah<0?Ah=Math.PI+Ah:(Ah=Math.PI-Ah,Eh=-1,Sh=!0):Ah>0&&(Eh=-1,Sh=!0),Ih=void 0!==t.radius?t.radius:n,Nh=Ah/2,Mh=Math.min($h.len/2,zh.len/2),i?(Lh=Math.abs(Math.cos(Nh)*Ih/Math.sin(Nh)))>Mh?(Lh=Mh,Rh=Math.abs(Lh*Math.sin(Nh)/Math.cos(Nh))):Rh=Ih:(Lh=Math.min(Mh,Ih),Rh=Math.abs(Lh*Math.sin(Nh)/Math.cos(Nh))),Ph=t.x+zh.nx*Lh,Fh=t.y+zh.ny*Lh,Th=Ph-zh.ny*Rh*Eh,wh=Fh+zh.nx*Rh*Eh,Oh=t.x+$h.nx*Lh,Dh=t.y+$h.ny*Lh,Bh=t}),"calcCornerArc");function Vh(e,t){0===t.radius?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function Wh(e,t,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return 0===n||0===t.radius?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(jh(e,t,r,n,i),{cx:Th,cy:wh,radius:Rh,startX:Oh,startY:Dh,stopX:Ph,stopY:Fh,startAngle:$h.ang+Math.PI/2*Eh,endAngle:zh.ang-Math.PI/2*Eh,counterClockwise:Sh})}s(Vh,"drawPreparedRoundCorner"),s(Wh,"getRoundCorner");var qh={};function Hh(e){var t=[];if(null!=e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];t.push({x:n,y:i})}return t}}qh.findMidptPtsEtc=function(e,t){var r,n=t.posPts,i=t.intersectionPts,a=t.vectorNormInverse,o=e.pstyle("source-endpoint"),l=e.pstyle("target-endpoint"),u=null!=o.units&&null!=l.units,c=s((function(e,t,r,n){var i=n-t,a=r-e,o=Math.sqrt(a*a+i*i);return{x:-i/o,y:a/o}}),"recalcVectorNormInverse");switch(e.pstyle("edge-distances").value){case"node-position":r=n;break;case"intersection":r=i;break;case"endpoints":if(u){var h=v(this.manualEndptToPx(e.source()[0],o),2),d=h[0],f=h[1],p=v(this.manualEndptToPx(e.target()[0],l),2),g=p[0],m=p[1],y={x1:d,y1:f,x2:g,y2:m};a=c(d,f,g,m),r=y}else It("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),r=i}return{midptPts:r,vectorNormInverse:a}},qh.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r._private,i=n.rscratch;if(!i.haystack){var a=2*Math.random()*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=2*Math.random()*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),c=o.width(),h=s.width(),d=o.height(),f=s.height(),p=r.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*p+l.x,i.source.y*d*p+l.y,i.target.x*h*p+u.x,i.target.y*f*p+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},qh.findSegmentsPoints=function(e,t){var r=e._private.rscratch,n=e.pstyle("segment-weights"),i=e.pstyle("segment-distances"),a=e.pstyle("segment-radii"),o=e.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),l=a.pfValue[a.pfValue.length-1],u=o.pfValue[o.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<s;c++){var h=n.pfValue[c],d=i.pfValue[c],f=1-h,p=h,g=this.findMidptPtsEtc(e,t),m=g.midptPts,y=g.vectorNormInverse,v={x:m.x1*f+m.x2*p,y:m.y1*f+m.y2*p};r.segpts.push(v.x+y.x*d,v.y+y.y*d),r.radii.push(void 0!==a.pfValue[c]?a.pfValue[c]:l),r.isArcRadius.push("arc-radius"===(void 0!==o.pfValue[c]?o.pfValue[c]:u))}},qh.findLoopPoints=function(e,t,r,n){var i=e._private.rscratch,a=t.dirCounts,o=t.srcPos,s=e.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,h=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=r,f=h;n&&(d=0,f=l);var p=u-Math.PI/2,g=p-c/2,m=p+c/2,y=u+"_"+c;d=void 0===a[y]?a[y]=0:++a[y],i.ctrlpts=[o.x+1.4*Math.cos(g)*f*(d/3+1),o.y+1.4*Math.sin(g)*f*(d/3+1),o.x+1.4*Math.cos(m)*f*(d/3+1),o.y+1.4*Math.sin(m)*f*(d/3+1)]},qh.findCompoundLoopPoints=function(e,t,r,n){var i=e._private.rscratch;i.edgeType="compound";var a=t.srcPos,o=t.tgtPos,s=t.srcW,l=t.srcH,u=t.tgtW,c=t.tgtH,h=e.pstyle("control-point-step-size").pfValue,d=e.pstyle("control-point-distances"),f=d?d.pfValue[0]:void 0,p=r,g=h;n&&(p=0,g=f);var m={x:a.x-s/2,y:a.y-l/2},y={x:o.x-u/2,y:o.y-c/2},v={x:Math.min(m.x,y.x),y:Math.min(m.y,y.y)},x=Math.max(.5,Math.log(.01*s)),b=Math.max(.5,Math.log(.01*u));i.ctrlpts=[v.x,v.y-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*x,v.x-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*b,v.y]},qh.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},qh.findBezierPoints=function(e,t,r,n,i){var a=e._private.rscratch,o=e.pstyle("control-point-step-size").pfValue,s=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),u=s&&l?Math.min(s.value.length,l.value.length):1,c=s?s.pfValue[0]:void 0,h=l.value[0],d=n;a.edgeType=d?"multibezier":"bezier",a.ctrlpts=[];for(var f=0;f<u;f++){var p=(.5-t.eles.length/2+r)*o*(i?-1:1),g=void 0,m=kr(p);d&&(c=s?s.pfValue[f]:o,h=l.value[f]);var y=void 0!==(g=n?c:void 0!==c?m*c:void 0)?g:p,v=1-h,x=h,b=this.findMidptPtsEtc(e,t),C=b.midptPts,T=b.vectorNormInverse,w={x:C.x1*v+C.x2*x,y:C.y1*v+C.y2*x};a.ctrlpts.push(w.x+T.x*y,w.y+T.y*y)}},qh.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var n="vertical",i="horizontal",a="leftward",o="rightward",l="downward",u="upward",c=t.posPts,h=t.srcW,d=t.srcH,f=t.tgtW,p=t.tgtH,g="node-position"!==e.pstyle("edge-distances").value,m=e.pstyle("taxi-direction").value,y=m,v=e.pstyle("taxi-turn"),x="%"===v.units,b=v.pfValue,C=b<0,T=e.pstyle("taxi-turn-min-distance").pfValue,w=g?(h+f)/2:0,k=g?(d+p)/2:0,_=c.x2-c.x1,E=c.y2-c.y1,S=s((function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)}),"subDWH"),A=S(_,w),N=S(E,k),R=!1;"auto"===y?m=Math.abs(A)>Math.abs(N)?i:n:y===u||y===l?(m=n,R=!0):(y===a||y===o)&&(m=i,R=!0);var L,I=m===n,M=I?N:A,O=I?E:_,D=kr(O),P=!1;((!R||!x&&!C)&&(y===l&&O<0||y===u&&O>0||y===a&&O>0||y===o&&O<0)&&(M=(D*=-1)*Math.abs(M),P=!0),x)?L=(b<0?1+b:b)*M:L=(b<0?M:0)+b*D;var F=s((function(e){return Math.abs(e)<T||Math.abs(e)>=Math.abs(M)}),"getIsTooClose"),B=F(L),$=F(Math.abs(M)-Math.abs(L));if((B||$)&&!P)if(I){var z=Math.abs(O)<=d/2,U=Math.abs(_)<=f/2;if(z){var G=(c.x1+c.x2)/2,j=c.y1,V=c.y2;r.segpts=[G,j,G,V]}else if(U){var W=(c.y1+c.y2)/2,q=c.x1,H=c.x2;r.segpts=[q,W,H,W]}else r.segpts=[c.x1,c.y2]}else{var Y=Math.abs(O)<=h/2,X=Math.abs(E)<=p/2;if(Y){var K=(c.y1+c.y2)/2,Z=c.x1,Q=c.x2;r.segpts=[Z,K,Q,K]}else if(X){var J=(c.x1+c.x2)/2,ee=c.y1,te=c.y2;r.segpts=[J,ee,J,te]}else r.segpts=[c.x2,c.y1]}else if(I){var re=c.y1+L+(g?d/2*D:0),ne=c.x1,ie=c.x2;r.segpts=[ne,re,ie,re]}else{var ae=c.x1+L+(g?h/2*D:0),oe=c.y1,se=c.y2;r.segpts=[ae,oe,ae,se]}if(r.isRound){var le=e.pstyle("taxi-radius").value,ue="arc-radius"===e.pstyle("radius-type").value[0];r.radii=new Array(r.segpts.length/2).fill(le),r.isArcRadius=new Array(r.segpts.length/2).fill(ue)}},qh.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if("bezier"===r.edgeType){var n=t.srcPos,i=t.tgtPos,a=t.srcW,o=t.srcH,s=t.tgtW,l=t.tgtH,u=t.srcShape,c=t.tgtShape,h=t.srcCornerRadius,d=t.tgtCornerRadius,f=t.srcRs,p=t.tgtRs,g=!F(r.startX)||!F(r.startY),m=!F(r.arrowStartX)||!F(r.arrowStartY),y=!F(r.endX)||!F(r.endY),v=!F(r.arrowEndX)||!F(r.arrowEndY),x=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),b=_r({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),C=b<x,T=_r({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),w=T<x,k=!1;if(g||m||C){k=!0;var _={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},E=Math.sqrt(_.x*_.x+_.y*_.y),S={x:_.x/E,y:_.y/E},A=Math.max(a,o),N={x:r.ctrlpts[0]+2*S.x*A,y:r.ctrlpts[1]+2*S.y*A},R=u.intersectLine(n.x,n.y,a,o,N.x,N.y,0,h,f);C?(r.ctrlpts[0]=r.ctrlpts[0]+S.x*(x-b),r.ctrlpts[1]=r.ctrlpts[1]+S.y*(x-b)):(r.ctrlpts[0]=R[0]+S.x*x,r.ctrlpts[1]=R[1]+S.y*x)}if(y||v||w){k=!0;var L={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},I=Math.sqrt(L.x*L.x+L.y*L.y),M={x:L.x/I,y:L.y/I},O=Math.max(a,o),D={x:r.ctrlpts[0]+2*M.x*O,y:r.ctrlpts[1]+2*M.y*O},P=c.intersectLine(i.x,i.y,s,l,D.x,D.y,0,d,p);w?(r.ctrlpts[0]=r.ctrlpts[0]+M.x*(x-T),r.ctrlpts[1]=r.ctrlpts[1]+M.y*(x-T)):(r.ctrlpts[0]=P[0]+M.x*x,r.ctrlpts[1]=P[1]+M.y*x)}k&&this.findEndpoints(e)}},qh.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);var n;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(n=t.allpts.length/2-1,t.midX=t.allpts[n],t.midY=t.allpts[n+1]):(n=t.allpts.length/2-3,.5,t.midX=Ar(t.allpts[n],t.allpts[n+2],t.allpts[n+4],.5),t.midY=Ar(t.allpts[n+1],t.allpts[n+3],t.allpts[n+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var i=2;i+3<t.allpts.length;i+=2){var a=t.radii[i/2-1],o=t.isArcRadius[i/2-1];t.roundCorners.push(Wh({x:t.allpts[i-2],y:t.allpts[i-1]},{x:t.allpts[i],y:t.allpts[i+1],radius:a},{x:t.allpts[i+2],y:t.allpts[i+3]},a,o))}}if(t.segpts.length%4==0){var s=t.segpts.length/2,l=s-2;t.midX=(t.segpts[l]+t.segpts[s])/2,t.midY=(t.segpts[l+1]+t.segpts[s+1])/2}else{var u=t.segpts.length/2-1;if(t.isRound){var c={x:t.segpts[u],y:t.segpts[u+1]},h=t.roundCorners[u/2],d=[c.x-h.cx,c.y-h.cy],f=h.radius/Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2));d=d.map((function(e){return e*f})),t.midX=h.cx+d[0],t.midY=h.cy+d[1],t.midVector=d}else t.midX=t.segpts[u],t.midY=t.segpts[u+1]}}},qh.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||F(t.startX)&&F(t.startY)&&F(t.endX)&&F(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,It("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},qh.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var r=this,n=r.cy.hasCompoundNodes(),i={map:new qt,get:s((function(e){var t=this.map.get(e[0]);return null!=t?t.get(e[1]):null}),"get"),set:s((function(e,t){var r=this.map.get(e[0]);null==r&&(r=new qt,this.map.set(e[0],r)),r.set(e[1],t)}),"set")},a=[],o=[],l=0;l<e.length;l++){var u=e[l],c=u._private,h=u.pstyle("curve-style").value;if(!u.removed()&&u.takesUpSpace()){if("haystack"===h){o.push(u);continue}var d="unbundled-bezier"===h||h.endsWith("segments")||"straight"===h||"straight-triangle"===h||h.endsWith("taxi"),f="unbundled-bezier"===h||"bezier"===h,p=c.source,g=c.target,m=[p.poolIndex(),g.poolIndex()].sort(),y=i.get(m);null==y&&(y={eles:[]},i.set(m,y),a.push(m)),y.eles.push(u),d&&(y.hasUnbundled=!0),f&&(y.hasBezier=!0)}}for(var v=s((function(e){var o=a[e],s=i.get(o),l=void 0;if(!s.hasUnbundled){var u=s.eles[0].parallelEdges().filter((function(e){return e.isBundledBezier()}));Ut(s.eles),u.forEach((function(e){return s.eles.push(e)})),s.eles.sort((function(e,t){return e.poolIndex()-t.poolIndex()}))}var c=s.eles[0],h=c.source(),d=c.target();if(h.poolIndex()>d.poolIndex()){var f=h;h=d,d=f}var p=s.srcPos=h.position(),g=s.tgtPos=d.position(),m=s.srcW=h.outerWidth(),y=s.srcH=h.outerHeight(),v=s.tgtW=d.outerWidth(),x=s.tgtH=d.outerHeight(),b=s.srcShape=r.nodeShapes[t.getNodeShape(h)],C=s.tgtShape=r.nodeShapes[t.getNodeShape(d)],T=s.srcCornerRadius="auto"===h.pstyle("corner-radius").value?"auto":h.pstyle("corner-radius").pfValue,w=s.tgtCornerRadius="auto"===d.pstyle("corner-radius").value?"auto":d.pstyle("corner-radius").pfValue,k=s.tgtRs=d._private.rscratch,_=s.srcRs=h._private.rscratch;s.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var E=0;E<s.eles.length;E++){var S=s.eles[E],A=S[0]._private.rscratch,N=S.pstyle("curve-style").value,R="unbundled-bezier"===N||N.endsWith("segments")||N.endsWith("taxi"),L=!h.same(S.source());if(!s.calculatedIntersection&&h!==d&&(s.hasBezier||s.hasUnbundled)){s.calculatedIntersection=!0;var I=b.intersectLine(p.x,p.y,m,y,g.x,g.y,0,T,_),M=s.srcIntn=I,O=C.intersectLine(g.x,g.y,v,x,p.x,p.y,0,w,k),D=s.tgtIntn=O,P=s.intersectionPts={x1:I[0],x2:O[0],y1:I[1],y2:O[1]},B=s.posPts={x1:p.x,x2:g.x,y1:p.y,y2:g.y},$=O[1]-I[1],z=O[0]-I[0],U=Math.sqrt(z*z+$*$),G=s.vector={x:z,y:$},j=s.vectorNorm={x:G.x/U,y:G.y/U},V={x:-j.y,y:j.x};s.nodesOverlap=!F(U)||C.checkPoint(I[0],I[1],0,v,x,g.x,g.y,w,k)||b.checkPoint(O[0],O[1],0,m,y,p.x,p.y,T,_),s.vectorNormInverse=V,l={nodesOverlap:s.nodesOverlap,dirCounts:s.dirCounts,calculatedIntersection:!0,hasBezier:s.hasBezier,hasUnbundled:s.hasUnbundled,eles:s.eles,srcPos:g,tgtPos:p,srcW:v,srcH:x,tgtW:m,tgtH:y,srcIntn:D,tgtIntn:M,srcShape:C,tgtShape:b,posPts:{x1:B.x2,y1:B.y2,x2:B.x1,y2:B.y1},intersectionPts:{x1:P.x2,y1:P.y2,x2:P.x1,y2:P.y1},vector:{x:-G.x,y:-G.y},vectorNorm:{x:-j.x,y:-j.y},vectorNormInverse:{x:-V.x,y:-V.y}}}var W=L?l:s;A.nodesOverlap=W.nodesOverlap,A.srcIntn=W.srcIntn,A.tgtIntn=W.tgtIntn,A.isRound=N.startsWith("round"),n&&(h.isParent()||h.isChild()||d.isParent()||d.isChild())&&(h.parents().anySame(d)||d.parents().anySame(h)||h.same(d)&&h.isParent())?t.findCompoundLoopPoints(S,W,E,R):h===d?t.findLoopPoints(S,W,E,R):N.endsWith("segments")?t.findSegmentsPoints(S,W):N.endsWith("taxi")?t.findTaxiPoints(S,W):"straight"===N||!R&&s.eles.length%2==1&&E===Math.floor(s.eles.length/2)?t.findStraightEdgePoints(S):t.findBezierPoints(S,W,E,R,L),t.findEndpoints(S),t.tryToCorrectInvalidPoints(S,W),t.checkForInvalidEdgeWarning(S),t.storeAllpts(S),t.storeEdgeProjections(S),t.calculateArrowAngles(S),t.recalculateEdgeLabelProjections(S),t.calculateLabelAngles(S)}}),"_loop"),x=0;x<a.length;x++)v(x);this.findHaystackPoints(o)}},s(Hh,"getPts"),qh.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if("segments"===t.edgeType)return this.recalculateRenderedStyle(e),Hh(t.segpts)},qh.getControlPoints=function(e){var t=e[0]._private.rscratch,r=t.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return this.recalculateRenderedStyle(e),Hh(t.ctrlpts)},qh.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var Yh={manualEndptToPx:function(e,t){var r=e.position(),n=e.outerWidth(),i=e.outerHeight(),a=e._private.rscratch;if(2===t.value.length){var o=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(o[0]=o[0]*n),"%"===t.units[1]&&(o[1]=o[1]*i),o[0]+=r.x,o[1]+=r.y,o}var s=t.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(n,i),u=[r.x+Math.cos(s)*l,r.y+Math.sin(s)*l];return this.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,n,i,u[0],u[1],0,"auto"===e.pstyle("corner-radius").value?"auto":e.pstyle("corner-radius").pfValue,a)},findEndpoints:function(e){var t,r,n,i,a,o=this,s=e.source()[0],l=e.target()[0],u=s.position(),c=l.position(),h=e.pstyle("target-arrow-shape").value,d=e.pstyle("source-arrow-shape").value,f=e.pstyle("target-distance-from-node").pfValue,p=e.pstyle("source-distance-from-node").pfValue,g=s._private.rscratch,m=l._private.rscratch,y=e.pstyle("curve-style").value,v=e._private.rscratch,x=v.edgeType,b="self"===x||"compound"===x,C="bezier"===x||"multibezier"===x||b,T="bezier"!==x,w="straight"===x||"segments"===x,k="segments"===x,_=C||T||w,E=b||"taxi"===y,S=e.pstyle("source-endpoint"),A=E?"outside-to-node":S.value,N="auto"===s.pstyle("corner-radius").value?"auto":s.pstyle("corner-radius").pfValue,R=e.pstyle("target-endpoint"),L=E?"outside-to-node":R.value,I="auto"===l.pstyle("corner-radius").value?"auto":l.pstyle("corner-radius").pfValue;if(v.srcManEndpt=S,v.tgtManEndpt=R,C){var M=[v.ctrlpts[0],v.ctrlpts[1]];r=T?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:M,n=M}else if(w){var O=k?v.segpts.slice(0,2):[c.x,c.y];r=k?v.segpts.slice(v.segpts.length-2):[u.x,u.y],n=O}if("inside-to-node"===L)t=[c.x,c.y];else if(R.units)t=this.manualEndptToPx(l,R);else if("outside-to-line"===L)t=v.tgtIntn;else if("outside-to-node"===L||"outside-to-node-or-label"===L?i=r:("outside-to-line"===L||"outside-to-line-or-label"===L)&&(i=[u.x,u.y]),t=o.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),i[0],i[1],0,I,m),"outside-to-node-or-label"===L||"outside-to-line-or-label"===L){var D=l._private.rscratch,P=D.labelWidth,B=D.labelHeight,$=D.labelX,z=D.labelY,U=P/2,G=B/2,j=l.pstyle("text-valign").value;"top"===j?z-=G:"bottom"===j&&(z+=G);var V=l.pstyle("text-halign").value;"left"===V?$-=U:"right"===V&&($+=U);var W=un(i[0],i[1],[$-U,z-G,$+U,z-G,$+U,z+G,$-U,z+G],c.x,c.y);if(W.length>0){var q=u,H=Er(q,mr(t)),Y=Er(q,mr(W)),X=H;if(Y<H&&(t=W,X=Y),W.length>2)Er(q,{x:W[2],y:W[3]})<X&&(t=[W[2],W[3]])}}var K=hn(t,r,o.arrowShapes[h].spacing(e)+f),Z=hn(t,r,o.arrowShapes[h].gap(e)+f);if(v.endX=Z[0],v.endY=Z[1],v.arrowEndX=K[0],v.arrowEndY=K[1],"inside-to-node"===A)t=[u.x,u.y];else if(S.units)t=this.manualEndptToPx(s,S);else if("outside-to-line"===A)t=v.srcIntn;else if("outside-to-node"===A||"outside-to-node-or-label"===A?a=n:("outside-to-line"===A||"outside-to-line-or-label"===A)&&(a=[c.x,c.y]),t=o.nodeShapes[this.getNodeShape(s)].intersectLine(u.x,u.y,s.outerWidth(),s.outerHeight(),a[0],a[1],0,N,g),"outside-to-node-or-label"===A||"outside-to-line-or-label"===A){var Q=s._private.rscratch,J=Q.labelWidth,ee=Q.labelHeight,te=Q.labelX,re=Q.labelY,ne=J/2,ie=ee/2,ae=s.pstyle("text-valign").value;"top"===ae?re-=ie:"bottom"===ae&&(re+=ie);var oe=s.pstyle("text-halign").value;"left"===oe?te-=ne:"right"===oe&&(te+=ne);var se=un(a[0],a[1],[te-ne,re-ie,te+ne,re-ie,te+ne,re+ie,te-ne,re+ie],u.x,u.y);if(se.length>0){var le=c,ue=Er(le,mr(t)),ce=Er(le,mr(se)),he=ue;if(ce<ue&&(t=[se[0],se[1]],he=ce),se.length>2)Er(le,{x:se[2],y:se[3]})<he&&(t=[se[2],se[3]])}}var de=hn(t,n,o.arrowShapes[d].spacing(e)+p),fe=hn(t,n,o.arrowShapes[d].gap(e)+p);v.startX=fe[0],v.startY=fe[1],v.arrowStartX=de[0],v.arrowStartY=de[1],_&&(F(v.startX)&&F(v.startY)&&F(v.endX)&&F(v.endY)?v.badLine=!1:v.badLine=!0)},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}}},Xh={};function Kh(e,t,r){for(var n=s((function(e,t,r,n){return Ar(e,t,r,n)}),"qbezierAt$1"),i=t._private.rstyle.bezierPts,a=0;a<e.bezierProjPcts.length;a++){var o=e.bezierProjPcts[a];i.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}s(Kh,"pushBezierPts"),Xh.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,n=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===n||"bezier"===n||"self"===n||"compound"===n){t.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)Kh(this,e,r.allpts.slice(i,i+6))}else if("segments"===n){var a=t.rstyle.linePts=[];for(i=0;i+1<r.allpts.length;i+=2)a.push({x:r.allpts[i],y:r.allpts[i+1]})}else if("haystack"===n){var o=r.haystackPts;t.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},Xh.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var Zh={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!q(t)){var r,n,i=e._private,a=e.width(),o=e.height(),s=e.padding(),l=e.position(),u=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,h=i.rscratch,d=i.rstyle;switch(u){case"left":r=l.x-a/2-s;break;case"right":r=l.x+a/2+s;break;default:r=l.x}switch(c){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}h.labelX=r,h.labelY=n,d.labelX=r,d.labelY=n,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},Qh=s((function(e,t){var r=Math.atan(t/e);return 0===e&&r<0&&(r*=-1),r}),"lineAngleFromDelta"),Jh=s((function(e,t){var r=t.x-e.x,n=t.y-e.y;return Qh(r,n)}),"lineAngle"),ed=s((function(e,t,r,n){var i=Lr(0,n-.001,1),a=Lr(0,n+.001,1),o=Nr(e,t,r,i),s=Nr(e,t,r,a);return Jh(o,s)}),"bezierAngle");Zh.recalculateEdgeLabelProjections=function(e){var t,r=e._private,n=r.rscratch,i=this,a={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(a.mid||a.source||a.target){t={x:n.midX,y:n.midY};var o=s((function(e,t,n){Vt(r.rscratch,e,t,n),Vt(r.rstyle,e,t,n)}),"setRs");o("labelX",null,t.x),o("labelY",null,t.y);var l=Qh(n.midDispX,n.midDispY);o("labelAutoAngle",null,l);var u=s((function e(){if(e.cache)return e.cache;for(var t=[],a=0;a+5<n.allpts.length;a+=4){var o={x:n.allpts[a],y:n.allpts[a+1]},l={x:n.allpts[a+2],y:n.allpts[a+3]},u={x:n.allpts[a+4],y:n.allpts[a+5]};t.push({p0:o,p1:l,p2:u,startDist:0,length:0,segments:[]})}var c=r.rstyle.bezierPts,h=i.bezierProjPcts.length;function d(e,t,r,n,i){var a=_r(t,r),o=e.segments[e.segments.length-1],s={p0:t,p1:r,t0:n,t1:i,startDist:o?o.startDist+o.length:0,length:a};e.segments.push(s),e.length+=a}s(d,"addSegment");for(var f=0;f<t.length;f++){var p=t[f],g=t[f-1];g&&(p.startDist=g.startDist+g.length),d(p,p.p0,c[f*h],0,i.bezierProjPcts[0]);for(var m=0;m<h-1;m++)d(p,c[f*h+m],c[f*h+m+1],i.bezierProjPcts[m],i.bezierProjPcts[m+1]);d(p,c[f*h+h-1],p.p2,i.bezierProjPcts[h-1],1)}return e.cache=t}),"createControlPointInfo"),c=s((function(r){var i,s="source"===r;if(a[r]){var l=e.pstyle(r+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,h=u(),d=0,f=0,p=0;p<h.length;p++){for(var g=h[s?p:h.length-1-p],m=0;m<g.segments.length;m++){var y=g.segments[s?m:g.segments.length-1-m],v=p===h.length-1&&m===g.segments.length-1;if(d=f,(f+=y.length)>=l||v){c={cp:g,segment:y};break}}if(c)break}var x=c.cp,b=c.segment,C=(l-d)/b.length,T=b.t1-b.t0,w=s?b.t0+T*C:b.t1-T*C;w=Lr(0,w,1),t=Nr(x.p0,x.p1,x.p2,w),i=ed(x.p0,x.p1,x.p2,w);break;case"straight":case"segments":case"haystack":for(var k,_,E,S,A=0,N=n.allpts.length,R=0;R+3<N&&(s?(E={x:n.allpts[R],y:n.allpts[R+1]},S={x:n.allpts[R+2],y:n.allpts[R+3]}):(E={x:n.allpts[N-2-R],y:n.allpts[N-1-R]},S={x:n.allpts[N-4-R],y:n.allpts[N-3-R]}),_=A,!((A+=k=_r(E,S))>=l));R+=2);var L=(l-_)/k;L=Lr(0,L,1),t=Rr(E,S,L),i=Jh(E,S)}o("labelX",r,t.x),o("labelY",r,t.y),o("labelAutoAngle",r,i)}}),"calculateEndProjection");c("source"),c("target"),this.applyLabelDimensions(e)}},Zh.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},Zh.applyPrefixedLabelDimensions=function(e,t){var r=e._private,n=this.getLabelText(e,t),i=this.calculateLabelDimensions(e,n),a=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,s=jt(r.rscratch,"labelWrapCachedLines",t)||[],l="wrap"!==o?1:Math.max(s.length,1),u=i.height/l,c=u*a,h=i.width,d=i.height+(l-1)*(a-1)*u;Vt(r.rstyle,"labelWidth",t,h),Vt(r.rscratch,"labelWidth",t,h),Vt(r.rstyle,"labelHeight",t,d),Vt(r.rscratch,"labelHeight",t,d),Vt(r.rscratch,"labelLineHeight",t,c)},Zh.getLabelText=function(e,t){var r=e._private,n=t?t+"-":"",i=e.pstyle(n+"label").strValue,a=e.pstyle("text-transform").value,o=s((function(e,n){return n?(Vt(r.rscratch,e,t,n),n):jt(r.rscratch,e,t)}),"rscratch");if(!i)return"";"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var l=e.pstyle("text-wrap").value;if("wrap"===l){var u=o("labelKey");if(null!=u&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var c=i.split("\n"),h=e.pstyle("text-max-width").pfValue,d="anywhere"===e.pstyle("text-overflow-wrap").value,f=[],p=/[\s\u200b]+|$/g,g=0;g<c.length;g++){var m=c[g],y=this.calculateLabelDimensions(e,m).width;if(d){var v=m.split("").join("​");m=v}if(y>h){var x,b="",C=0,T=k(m.matchAll(p));try{for(T.s();!(x=T.n()).done;){var w=x.value,_=w[0],E=m.substring(C,w.index);C=w.index+_.length;var S=0===b.length?E:b+E+_;this.calculateLabelDimensions(e,S).width<=h?b+=E+_:(b&&f.push(b),b=E+_)}}catch(e){T.e(e)}finally{T.f()}b.match(/^[\s\u200b]+$/)||f.push(b)}else f.push(m)}o("labelWrapCachedLines",f),i=o("labelWrapCachedText",f.join("\n")),o("labelWrapKey",u)}else if("ellipsis"===l){var A=e.pstyle("text-max-width").pfValue,N="",R=!1;if(this.calculateLabelDimensions(e,i).width<A)return i;for(var L=0;L<i.length;L++){if(this.calculateLabelDimensions(e,N+i[L]+"…").width>A)break;N+=i[L],L===i.length-1&&(R=!0)}return R||(N+="…"),N}return i},Zh.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},Zh.calculateLabelDimensions=function(e,t){var r=this,n=r.cy.window().document,i=xt(t,e._private.labelDimsKey),a=r.labelDimCache||(r.labelDimCache=[]),o=a[i];if(null!=o)return o;var s=e.pstyle("font-style").strValue,l=e.pstyle("font-size").pfValue,u=e.pstyle("font-family").strValue,c=e.pstyle("font-weight").strValue,h=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!h){h=this.labelCalcCanvas=n.createElement("canvas"),d=this.labelCalcCanvasContext=h.getContext("2d");var f=h.style;f.position="absolute",f.left="-9999px",f.top="-9999px",f.zIndex="-1",f.visibility="hidden",f.pointerEvents="none"}d.font="".concat(s," ").concat(c," ").concat(l,"px ").concat(u);for(var p=0,g=0,m=t.split("\n"),y=0;y<m.length;y++){var v=m[y],x=d.measureText(v),b=Math.ceil(x.width),C=l;p=Math.max(b,p),g+=C}return p+=0,g+=0,a[i]={width:p,height:g}},Zh.calculateLabelAngle=function(e,t){var r=e._private.rscratch,n=e.isEdge(),i=t?t+"-":"",a=e.pstyle(i+"text-rotation"),o=a.strValue;return"none"===o?0:n&&"autorotate"===o?r.labelAutoAngle:"autorotate"===o?0:a.pfValue},Zh.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),n=e._private.rscratch;n.labelAngle=t.calculateLabelAngle(e),r&&(n.sourceLabelAngle=t.calculateLabelAngle(e,"source"),n.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var td={},rd=!1;td.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(e.width()<28||e.height()<28))return rd||(It("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),rd=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"round-rectangle"===t||"cutrectangle"===t||"cut-rectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var r=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(r).name}return t};var nd={registerCalculationListeners:function(){var e=this.cy,t=e.collection(),r=this,n=s((function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(e),r)for(var n=0;n<e.length;n++){var i=e[n]._private.rstyle;i.clean=!1,i.cleanConnected=!1}}),"enqueue");r.binder(e).on("bounds.* dirty.*",s((function(e){var t=e.target;n(t)}),"onDirtyBounds")).on("style.* background.*",s((function(e){var t=e.target;n(t,!1)}),"onDirtyStyle"));var i=s((function(i){if(i){var a=r.onUpdateEleCalcsFns;t.cleanStyle();for(var o=0;o<t.length;o++){var s=t[o],l=s._private.rstyle;s.isNode()&&!l.cleanConnected&&(n(s.connectedEdges()),l.cleanConnected=!0)}if(a)for(var u=0;u<a.length;u++){(0,a[u])(i,t)}r.recalculateRenderedStyle(t),t=e.collection()}}),"updateEleCalcs");r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var r=s((function(e){return e._private.rstyle.cleanConnected}),"isCleanConnected"),n=[],i=[];if(!this.destroyed){void 0===t&&(t=!0);for(var a=0;a<e.length;a++){var o=e[a],l=o._private,u=l.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(u.clean=!1),!(t&&u.clean||o.removed())&&"none"!==o.pstyle("display").value&&("nodes"===l.group?i.push(o):n.push(o),u.clean=!0)}for(var c=0;c<i.length;c++){var h=i[c],d=h._private.rstyle,f=h.position();this.recalculateNodeLabelProjection(h),d.nodeX=f.x,d.nodeY=f.y,d.nodeW=h.pstyle("width").pfValue,d.nodeH=h.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var p=0;p<n.length;p++){var g=n[p]._private,m=g.rstyle,y=g.rscratch;m.srcX=y.arrowStartX,m.srcY=y.arrowStartY,m.tgtX=y.arrowEndX,m.tgtY=y.arrowEndY,m.midX=y.midX,m.midY=y.midY,m.labelAngle=y.labelAngle,m.sourceLabelAngle=y.sourceLabelAngle,m.targetLabelAngle=y.targetLabelAngle}}}},id={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var n=(i=e[r])._private.rscratch;i.grabbed()&&!i.isParent()?t.push(i):n.inDragLayer?e.drag.push(i):e.nondrag.push(i)}for(r=0;r<t.length;r++){var i=t[r];e.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(vu),t.interactive=t.filter((function(e){return e.interactive()})),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},ad={};[bh,Ch,qh,Yh,Xh,Zh,td,nd,id].forEach((function(e){ue(ad,e)}));var od={getCachedImage:function(e,t,r){var n=this.imageCache=this.imageCache||{},i=n[e];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;var a=(i=n[e]=n[e]||{}).image=new Image;a.addEventListener("load",r),a.addEventListener("error",(function(){a.error=!0}));var o="data:";return e.substring(0,5).toLowerCase()===o||(t="null"===t?null:t,a.crossOrigin=t),a.src=e,a}},sd={registerBinding:function(e,t,r,n){var i=Array.prototype.slice.apply(arguments,[1]),a=this.binder(e);return a.on.apply(a,i)},binder:function(e){var t=this,r=t.cy.window(),n=e===r||e===r.document||e===r.document.body||H(e);if(null==t.supportsPassiveEvents){var i=!1;try{var a=Object.defineProperty({},"passive",{get:s((function(){return i=!0,!0}),"get")});r.addEventListener("test",null,a)}catch{}t.supportsPassiveEvents=i}var o=s((function(r,i,a){var o=Array.prototype.slice.call(arguments);return n&&t.supportsPassiveEvents&&(o[2]={capture:a??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:o}),(e.addEventListener||e.on).apply(e,o),this}),"on");return{on:o,addEventListener:o,addListener:o,bind:o}},nodeIsDraggable:function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},nodeIsGrabbable:function(e){return this.nodeIsDraggable(e)&&e.interactive()},load:function(){var e=this,t=e.cy.window(),r=s((function(e){return e.selected()}),"isSelected"),n=s((function(t,r,n,i){null==t&&(t=e.cy);for(var a=0;a<r.length;a++){var o=r[a];t.emit({originalEvent:n,type:o,position:i})}}),"triggerEvents"),i=s((function(e){return e.shiftKey||e.metaKey||e.ctrlKey}),"isMultSelKeyDown"),a=s((function(t,r){var n=!0;if(e.cy.hasCompoundNodes()&&t&&t.pannable())for(var i=0;r&&i<r.length;i++){if((t=r[i]).isNode()&&t.isParent()&&!t.pannable()){n=!1;break}}else n=!0;return n}),"allowPanningPassthrough"),o=s((function(e){e[0]._private.grabbed=!0}),"setGrabbed"),l=s((function(e){e[0]._private.grabbed=!1}),"setFreed"),u=s((function(e){e[0]._private.rscratch.inDragLayer=!0}),"setInDragLayer"),c=s((function(e){e[0]._private.rscratch.inDragLayer=!1}),"setOutDragLayer"),h=s((function(e){e[0]._private.rscratch.isGrabTarget=!0}),"setGrabTarget"),d=s((function(e){e[0]._private.rscratch.isGrabTarget=!1}),"removeGrabTarget"),f=s((function(e,t){var r=t.addToList;!r.has(e)&&e.grabbable()&&!e.locked()&&(r.merge(e),o(e))}),"addToDragList"),p=s((function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var r=e.descendants();t.inDragLayer&&(r.forEach(u),r.connectedEdges().forEach(u)),t.addToList&&f(r,t)}}),"addDescendantsToDrag"),g=s((function(t,r){r=r||{};var n=t.cy().hasCompoundNodes();r.inDragLayer&&(t.forEach(u),t.neighborhood().stdFilter((function(e){return!n||e.isEdge()})).forEach(u)),r.addToList&&t.forEach((function(e){f(e,r)})),p(t,r),v(t,{inDragLayer:r.inDragLayer}),e.updateCachedGrabbedEles()}),"addNodesToDrag"),m=g,y=s((function(t){t&&(e.getCachedZSortedEles().forEach((function(e){l(e),c(e),d(e)})),e.updateCachedGrabbedEles())}),"freeDraggedElements"),v=s((function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var r=e.ancestors().orphans();if(!r.same(e)){var n=r.descendants().spawnSelf().merge(r).unmerge(e).unmerge(e.descendants()),i=n.connectedEdges();t.inDragLayer&&(i.forEach(u),n.forEach(u)),t.addToList&&n.forEach((function(e){f(e,t)}))}}}),"updateAncestorsInDragLayer"),x=s((function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()}),"blurActiveDomElement"),b=typeof MutationObserver<"u",C=typeof ResizeObserver<"u";b?(e.removeObserver=new MutationObserver((function(t){for(var r=0;r<t.length;r++){var n=t[r].removedNodes;if(n)for(var i=0;i<n.length;i++){if(n[i]===e.container){e.destroy();break}}}})),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",(function(t){e.destroy()}));var T=it((function(){e.cy.resize()}),100);b&&(e.styleObserver=new MutationObserver(T),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",T),C&&(e.resizeObserver=new ResizeObserver(T),e.resizeObserver.observe(e.container));var w=s((function(e,t){for(;null!=e;)t(e),e=e.parentNode}),"forEachUp"),k=s((function(){e.invalidateContainerClientCoordsCache()}),"invalidateCoords");w(e.container,(function(t){e.registerBinding(t,"transitionend",k),e.registerBinding(t,"animationend",k),e.registerBinding(t,"scroll",k)})),e.registerBinding(e.container,"contextmenu",(function(e){e.preventDefault()}));var _,E,S,A=s((function(){return 0!==e.selection[4]}),"inBoxSelection"),N=s((function(t){for(var r=e.findContainerClientCoords(),n=r[0],i=r[1],a=r[2],o=r[3],s=t.touches?t.touches:[t],l=!1,u=0;u<s.length;u++){var c=s[u];if(n<=c.clientX&&c.clientX<=n+a&&i<=c.clientY&&c.clientY<=i+o){l=!0;break}}if(!l)return!1;for(var h=e.container,d=t.target.parentNode,f=!1;d;){if(d===h){f=!0;break}d=d.parentNode}return!!f}),"eventInContainer");e.registerBinding(e.container,"mousedown",s((function(t){if(N(t)&&(1!==e.hoverData.which||1===t.which)){t.preventDefault(),x(),e.hoverData.capture=!0,e.hoverData.which=t.which;var r=e.cy,i=[t.clientX,t.clientY],a=e.projectIntoViewport(i[0],i[1]),o=e.selection,l=e.findNearestElements(a[0],a[1],!0,!1),u=l[0],c=e.dragData.possibleDragElements;e.hoverData.mdownPos=a,e.hoverData.mdownGPos=i;var d=s((function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout((function(){if(!e.hoverData.tapholdCancelled){var n=e.hoverData.down;n?n.emit({originalEvent:t,type:"taphold",position:{x:a[0],y:a[1]}}):r.emit({originalEvent:t,type:"taphold",position:{x:a[0],y:a[1]}})}}),e.tapholdDuration)}),"checkForTaphold");if(3==t.which){e.hoverData.cxtStarted=!0;var f={originalEvent:t,type:"cxttapstart",position:{x:a[0],y:a[1]}};u?(u.activate(),u.emit(f),e.hoverData.down=u):r.emit(f),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==t.which){if(u&&u.activate(),null!=u&&e.nodeIsGrabbable(u)){var p=s((function(e){return{originalEvent:t,type:e,position:{x:a[0],y:a[1]}}}),"makeEvent"),y=s((function(e){e.emit(p("grab"))}),"triggerGrab");if(h(u),u.selected()){c=e.dragData.possibleDragElements=r.collection();var v=r.$((function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)}));g(v,{addToList:c}),u.emit(p("grabon")),v.forEach(y)}else c=e.dragData.possibleDragElements=r.collection(),m(u,{addToList:c}),u.emit(p("grabon")).emit(p("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=u,e.hoverData.downs=l,e.hoverData.downTime=(new Date).getTime(),n(u,["mousedown","tapstart","vmousedown"],t,{x:a[0],y:a[1]}),null==u?(o[4]=1,e.data.bgActivePosistion={x:a[0],y:a[1]},e.redrawHint("select",!0),e.redraw()):u.pannable()&&(o[4]=1),d()}o[0]=o[2]=a[0],o[1]=o[3]=a[1]}}),"mousedownHandler"),!1),e.registerBinding(t,"mousemove",s((function(t){if(e.hoverData.capture||N(t)){var r=!1,o=e.cy,l=o.zoom(),u=[t.clientX,t.clientY],c=e.projectIntoViewport(u[0],u[1]),h=e.hoverData.mdownPos,d=e.hoverData.mdownGPos,f=e.selection,p=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(p=e.findNearestElement(c[0],c[1],!0,!1));var m,v=e.hoverData.last,x=e.hoverData.down,b=[c[0]-f[2],c[1]-f[3]],C=e.dragData.possibleDragElements;if(d){var T=u[0]-d[0],w=T*T,k=u[1]-d[1],_=w+k*k;e.hoverData.isOverThresholdDrag=m=_>=e.desktopTapThreshold2}var E=i(t);m&&(e.hoverData.tapholdCancelled=!0);var S=s((function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(b[0]),t.push(b[1])):(t[0]+=b[0],t[1]+=b[1])}),"updateDragDelta");r=!0,n(p,["mousemove","vmousemove","tapdrag"],t,{x:c[0],y:c[1]});var A=s((function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||o.emit({originalEvent:t,type:"boxstart",position:{x:c[0],y:c[1]}}),f[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()}),"goIntoBoxMode");if(3===e.hoverData.which){if(m){var R={originalEvent:t,type:"cxtdrag",position:{x:c[0],y:c[1]}};x?x.emit(R):o.emit(R),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||p!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:c[0],y:c[1]}}),e.hoverData.cxtOver=p,p&&p.emit({originalEvent:t,type:"cxtdragover",position:{x:c[0],y:c[1]}}))}}else if(e.hoverData.dragging){if(r=!0,o.panningEnabled()&&o.userPanningEnabled()){var L;if(e.hoverData.justStartedPan){var I=e.hoverData.mdownPos;L={x:(c[0]-I[0])*l,y:(c[1]-I[1])*l},e.hoverData.justStartedPan=!1}else L={x:b[0]*l,y:b[1]*l};o.panBy(L),o.emit("dragpan"),e.hoverData.dragged=!0}c=e.projectIntoViewport(t.clientX,t.clientY)}else if(1!=f[4]||null!=x&&!x.pannable()){if(x&&x.pannable()&&x.active()&&x.unactivate(),(!x||!x.grabbed())&&p!=v&&(v&&n(v,["mouseout","tapdragout"],t,{x:c[0],y:c[1]}),p&&n(p,["mouseover","tapdragover"],t,{x:c[0],y:c[1]}),e.hoverData.last=p),x)if(m){if(o.boxSelectionEnabled()&&E)x&&x.grabbed()&&(y(C),x.emit("freeon"),C.emit("free"),e.dragData.didDrag&&(x.emit("dragfreeon"),C.emit("dragfree"))),A();else if(x&&x.grabbed()&&e.nodeIsDraggable(x)){var M=!e.dragData.didDrag;M&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||g(C,{inDragLayer:!0});var O={x:0,y:0};if(F(b[0])&&F(b[1])&&(O.x+=b[0],O.y+=b[1],M)){var D=e.hoverData.dragDelta;D&&F(D[0])&&F(D[1])&&(O.x+=D[0],O.y+=D[1])}e.hoverData.draggingEles=!0,C.silentShift(O).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else S();r=!0}else if(m){if(e.hoverData.dragging||!o.boxSelectionEnabled()||!E&&o.panningEnabled()&&o.userPanningEnabled()){if(!e.hoverData.selecting&&o.panningEnabled()&&o.userPanningEnabled()){a(x,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,f[4]=0,e.data.bgActivePosistion=mr(h),e.redrawHint("select",!0),e.redraw())}}else A();x&&x.pannable()&&x.active()&&x.unactivate()}if(f[2]=c[0],f[3]=c[1],r)return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}}),"mousemoveHandler"),!1),e.registerBinding(t,"mouseup",s((function(t){if((1!==e.hoverData.which||1===t.which||!e.hoverData.capture)&&e.hoverData.capture){e.hoverData.capture=!1;var a=e.cy,o=e.projectIntoViewport(t.clientX,t.clientY),l=e.selection,u=e.findNearestElement(o[0],o[1],!0,!1),c=e.dragData.possibleDragElements,h=e.hoverData.down,d=i(t);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,h&&h.unactivate(),3===e.hoverData.which){var f={originalEvent:t,type:"cxttapend",position:{x:o[0],y:o[1]}};if(h?h.emit(f):a.emit(f),!e.hoverData.cxtDragged){var p={originalEvent:t,type:"cxttap",position:{x:o[0],y:o[1]}};h?h.emit(p):a.emit(p)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(n(u,["mouseup","tapend","vmouseup"],t,{x:o[0],y:o[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(n(h,["click","tap","vclick"],t,{x:o[0],y:o[1]}),E=!1,t.timeStamp-S<=a.multiClickDebounceTime()?(_&&clearTimeout(_),E=!0,S=null,n(h,["dblclick","dbltap","vdblclick"],t,{x:o[0],y:o[1]})):(_=setTimeout((function(){E||n(h,["oneclick","onetap","voneclick"],t,{x:o[0],y:o[1]})}),a.multiClickDebounceTime()),S=t.timeStamp)),null==h&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!i(t)&&(a.$(r).unselect(["tapunselect"]),c.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=c=a.collection()),u==h&&!e.dragData.didDrag&&!e.hoverData.selecting&&null!=u&&u._private.selectable&&(e.hoverData.dragging||("additive"===a.selectionType()||d?u.selected()?u.unselect(["tapunselect"]):u.select(["tapselect"]):d||(a.$(r).unmerge(u).unselect(["tapunselect"]),u.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var g=a.collection(e.getAllInBox(l[0],l[1],l[2],l[3]));e.redrawHint("select",!0),g.length>0&&e.redrawHint("eles",!0),a.emit({type:"boxend",originalEvent:t,position:{x:o[0],y:o[1]}});var m=s((function(e){return e.selectable()&&!e.selected()}),"eleWouldBeSelected");"additive"===a.selectionType()||d||a.$(r).unmerge(g).unselect(),g.emit("box").stdFilter(m).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!l[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var v=h&&h.grabbed();y(c),v&&(h.emit("freeon"),c.emit("free"),e.dragData.didDrag&&(h.emit("dragfreeon"),c.emit("dragfree")))}}l[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}}),"mouseupHandler"),!1);var R=s((function(t){if(!e.scrollingPage){var r=e.cy,n=r.zoom(),i=r.pan(),a=e.projectIntoViewport(t.clientX,t.clientY),o=[a[0]*n+i.x,a[1]*n+i.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||A())return void t.preventDefault();if(r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()){var s;t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout((function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()}),150),s=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,s*=e.wheelSensitivity,1===t.deltaMode&&(s*=33);var l=r.zoom()*Math.pow(10,s);"gesturechange"===t.type&&(l=e.gestureStartZoom*t.scale),r.zoom({level:l,renderedPosition:{x:o[0],y:o[1]}}),r.emit("gesturechange"===t.type?"pinchzoom":"scrollzoom")}}}),"wheelHandler");e.registerBinding(e.container,"wheel",R,!0),e.registerBinding(t,"scroll",s((function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout((function(){e.scrollingPage=!1}),250)}),"scrollHandler"),!0),e.registerBinding(e.container,"gesturestart",s((function(t){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||t.preventDefault()}),"gestureStartHandler"),!0),e.registerBinding(e.container,"gesturechange",(function(t){e.hasTouchStarted||R(t)}),!0),e.registerBinding(e.container,"mouseout",s((function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:r[0],y:r[1]}})}),"mouseOutHandler"),!1),e.registerBinding(e.container,"mouseover",s((function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:r[0],y:r[1]}})}),"mouseOverHandler"),!1);var L,I,M,O,D,P,B,$,z,U,G,j,V,W,q,H,Y,X,K,Z,Q=s((function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))}),"distance"),J=s((function(e,t,r,n){return(r-e)*(r-e)+(n-t)*(n-t)}),"distanceSq");if(e.registerBinding(e.container,"touchstart",W=s((function(t){if(e.hasTouchStarted=!0,N(t)){x(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var r=e.cy,i=e.touchData.now,a=e.touchData.earlier;if(t.touches[0]){var o=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);i[0]=o[0],i[1]=o[1]}if(t.touches[1]){o=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);i[2]=o[0],i[3]=o[1]}if(t.touches[2]){o=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);i[4]=o[0],i[5]=o[1]}if(t.touches[1]){e.touchData.singleTouchMoved=!0,y(e.dragData.touchDragEles);var l=e.findContainerClientCoords();z=l[0],U=l[1],G=l[2],j=l[3],L=t.touches[0].clientX-z,I=t.touches[0].clientY-U,M=t.touches[1].clientX-z,O=t.touches[1].clientY-U,V=0<=L&&L<=G&&0<=M&&M<=G&&0<=I&&I<=j&&0<=O&&O<=j;var u=r.pan(),c=r.zoom();D=Q(L,I,M,O),P=J(L,I,M,O),$=[((B=[(L+M)/2,(I+O)/2])[0]-u.x)/c,(B[1]-u.y)/c];if(P<4e4&&!t.touches[2]){var d=e.findNearestElement(i[0],i[1],!0,!0),f=e.findNearestElement(i[2],i[3],!0,!0);return d&&d.isNode()?(d.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=d):f&&f.isNode()?(f.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=f):r.emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(t.touches[2])r.boxSelectionEnabled()&&t.preventDefault();else if(!t.touches[1]&&t.touches[0]){var p=e.findNearestElements(i[0],i[1],!0,!0),v=p[0];if(null!=v&&(v.activate(),e.touchData.start=v,e.touchData.starts=p,e.nodeIsGrabbable(v))){var b=e.dragData.touchDragEles=r.collection(),C=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),v.selected()?(C=r.$((function(t){return t.selected()&&e.nodeIsGrabbable(t)})),g(C,{addToList:b})):m(v,{addToList:b}),h(v);var T=s((function(e){return{originalEvent:t,type:e,position:{x:i[0],y:i[1]}}}),"makeEvent");v.emit(T("grabon")),C?C.forEach((function(e){e.emit(T("grab"))})):v.emit(T("grab"))}n(v,["touchstart","tapstart","vmousedown"],t,{x:i[0],y:i[1]}),null==v&&(e.data.bgActivePosistion={x:o[0],y:o[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout((function(){!1===e.touchData.singleTouchMoved&&!e.pinching&&!e.touchData.selecting&&n(e.touchData.start,["taphold"],t,{x:i[0],y:i[1]})}),e.tapholdDuration)}if(t.touches.length>=1){for(var w=e.touchData.startPosition=[null,null,null,null,null,null],k=0;k<i.length;k++)w[k]=a[k]=i[k];var _=t.touches[0];e.touchData.startGPosition=[_.clientX,_.clientY]}}}),"touchstartHandler"),!1),e.registerBinding(t,"touchmove",q=s((function(t){var r=e.touchData.capture;if(r||N(t)){var i=e.selection,o=e.cy,s=e.touchData.now,l=e.touchData.earlier,u=o.zoom();if(t.touches[0]){var c=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=c[0],s[1]=c[1]}if(t.touches[1]){c=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=c[0],s[3]=c[1]}if(t.touches[2]){c=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=c[0],s[5]=c[1]}var h,d=e.touchData.startGPosition;if(r&&t.touches[0]&&d){for(var f=[],p=0;p<s.length;p++)f[p]=s[p]-l[p];var m=t.touches[0].clientX-d[0],v=m*m,x=t.touches[0].clientY-d[1];h=v+x*x>=e.touchTapThreshold2}if(r&&e.touchData.cxt){t.preventDefault();var b=t.touches[0].clientX-z,C=t.touches[0].clientY-U,T=t.touches[1].clientX-z,w=t.touches[1].clientY-U,k=J(b,C,T,w);if(k/P>=2.25||k>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var _={originalEvent:t,type:"cxttapend",position:{x:s[0],y:s[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(_),e.touchData.start=null):o.emit(_)}}if(r&&e.touchData.cxt){_={originalEvent:t,type:"cxtdrag",position:{x:s[0],y:s[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(_):o.emit(_),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var E=e.findNearestElement(s[0],s[1],!0,!0);(!e.touchData.cxtOver||E!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:s[0],y:s[1]}}),e.touchData.cxtOver=E,E&&E.emit({originalEvent:t,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(r&&t.touches[2]&&o.boxSelectionEnabled())t.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||o.emit({originalEvent:t,type:"boxstart",position:{x:s[0],y:s[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,i[4]=1,i&&0!==i.length&&void 0!==i[0]?(i[2]=(s[0]+s[2]+s[4])/3,i[3]=(s[1]+s[3]+s[5])/3):(i[0]=(s[0]+s[2]+s[4])/3,i[1]=(s[1]+s[3]+s[5])/3,i[2]=(s[0]+s[2]+s[4])/3+1,i[3]=(s[1]+s[3]+s[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(r&&t.touches[1]&&!e.touchData.didSelect&&o.zoomingEnabled()&&o.panningEnabled()&&o.userZoomingEnabled()&&o.userPanningEnabled()){if(t.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),ee=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var S=0;S<ee.length;S++){var A=ee[S]._private;A.grabbed=!1,A.rscratch.inDragLayer=!1}}var R=e.touchData.start,B=(b=t.touches[0].clientX-z,C=t.touches[0].clientY-U,T=t.touches[1].clientX-z,w=t.touches[1].clientY-U,Q(b,C,T,w)),G=B/D;if(V){var j=(b-L+(T-M))/2,W=(C-I+(w-O))/2,q=o.zoom(),H=q*G,Y=o.pan(),X=$[0]*q+Y.x,K=$[1]*q+Y.y,Z={x:-H/q*(X-Y.x-j)+X,y:-H/q*(K-Y.y-W)+K};if(R&&R.active()){var ee=e.dragData.touchDragEles;y(ee),e.redrawHint("drag",!0),e.redrawHint("eles",!0),R.unactivate().emit("freeon"),ee.emit("free"),e.dragData.didDrag&&(R.emit("dragfreeon"),ee.emit("dragfree"))}o.viewport({zoom:H,pan:Z,cancelOnFailedZoom:!0}),o.emit("pinchzoom"),D=B,L=b,I=C,M=T,O=w,e.pinching=!0}if(t.touches[0]){c=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=c[0],s[1]=c[1]}if(t.touches[1]){c=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=c[0],s[3]=c[1]}if(t.touches[2]){c=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=c[0],s[5]=c[1]}}else if(t.touches[0]&&!e.touchData.didSelect){var te=e.touchData.start,re=e.touchData.last;if(!e.hoverData.draggingEles&&!e.swipePanning&&(E=e.findNearestElement(s[0],s[1],!0,!0)),r&&null!=te&&t.preventDefault(),r&&null!=te&&e.nodeIsDraggable(te))if(h){ee=e.dragData.touchDragEles;var ne=!e.dragData.didDrag;ne&&g(ee,{inDragLayer:!0}),e.dragData.didDrag=!0;var ie={x:0,y:0};if(F(f[0])&&F(f[1])&&(ie.x+=f[0],ie.y+=f[1],ne))e.redrawHint("eles",!0),(ae=e.touchData.dragDelta)&&F(ae[0])&&F(ae[1])&&(ie.x+=ae[0],ie.y+=ae[1]);e.hoverData.draggingEles=!0,ee.silentShift(ie).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==l[0]&&e.touchData.startPosition[1]==l[1]&&e.redrawHint("eles",!0),e.redraw()}else{var ae;0===(ae=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(ae.push(f[0]),ae.push(f[1])):(ae[0]+=f[0],ae[1]+=f[1])}if(n(te||E,["touchmove","tapdrag","vmousemove"],t,{x:s[0],y:s[1]}),(!te||!te.grabbed())&&E!=re&&(re&&re.emit({originalEvent:t,type:"tapdragout",position:{x:s[0],y:s[1]}}),E&&E.emit({originalEvent:t,type:"tapdragover",position:{x:s[0],y:s[1]}})),e.touchData.last=E,r)for(S=0;S<s.length;S++)s[S]&&e.touchData.startPosition[S]&&h&&(e.touchData.singleTouchMoved=!0);if(r&&(null==te||te.pannable())&&o.panningEnabled()&&o.userPanningEnabled()){a(te,e.touchData.starts)&&(t.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=mr(e.touchData.startPosition)),e.swipePanning?(o.panBy({x:f[0]*u,y:f[1]*u}),o.emit("dragpan")):h&&(e.swipePanning=!0,o.panBy({x:m*u,y:x*u}),o.emit("dragpan"),te&&(te.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));c=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=c[0],s[1]=c[1]}}for(p=0;p<s.length;p++)l[p]=s[p];r&&t.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}}),"touchmoveHandler"),!1),e.registerBinding(t,"touchcancel",H=s((function(t){var r=e.touchData.start;e.touchData.capture=!1,r&&r.unactivate()}),"touchcancelHandler")),e.registerBinding(t,"touchend",Y=s((function(t){var i=e.touchData.start;if(e.touchData.capture){0===t.touches.length&&(e.touchData.capture=!1),t.preventDefault();var a=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var o,l=e.cy,u=l.zoom(),c=e.touchData.now,h=e.touchData.earlier;if(t.touches[0]){var d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);c[0]=d[0],c[1]=d[1]}if(t.touches[1]){d=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);c[2]=d[0],c[3]=d[1]}if(t.touches[2]){d=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);c[4]=d[0],c[5]=d[1]}if(i&&i.unactivate(),e.touchData.cxt){if(o={originalEvent:t,type:"cxttapend",position:{x:c[0],y:c[1]}},i?i.emit(o):l.emit(o),!e.touchData.cxtDragged){var f={originalEvent:t,type:"cxttap",position:{x:c[0],y:c[1]}};i?i.emit(f):l.emit(f)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!t.touches[2]&&l.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var p=l.collection(e.getAllInBox(a[0],a[1],a[2],a[3]));a[0]=void 0,a[1]=void 0,a[2]=void 0,a[3]=void 0,a[4]=0,e.redrawHint("select",!0),l.emit({type:"boxend",originalEvent:t,position:{x:c[0],y:c[1]}});var g=s((function(e){return e.selectable()&&!e.selected()}),"eleWouldBeSelected");p.emit("box").stdFilter(g).select().emit("boxselect"),p.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(i?.unactivate(),t.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!t.touches[1]&&!t.touches[0]&&!t.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var m=e.dragData.touchDragEles;if(null!=i){var v=i._private.grabbed;y(m),e.redrawHint("drag",!0),e.redrawHint("eles",!0),v&&(i.emit("freeon"),m.emit("free"),e.dragData.didDrag&&(i.emit("dragfreeon"),m.emit("dragfree"))),n(i,["touchend","tapend","vmouseup","tapdragout"],t,{x:c[0],y:c[1]}),i.unactivate(),e.touchData.start=null}else{var x=e.findNearestElement(c[0],c[1],!0,!0);n(x,["touchend","tapend","vmouseup","tapdragout"],t,{x:c[0],y:c[1]})}var b=e.touchData.startPosition[0]-c[0],C=b*b,T=e.touchData.startPosition[1]-c[1],w=(C+T*T)*u*u;e.touchData.singleTouchMoved||(i||l.$(":selected").unselect(["tapunselect"]),n(i,["tap","vclick"],t,{x:c[0],y:c[1]}),X=!1,t.timeStamp-Z<=l.multiClickDebounceTime()?(K&&clearTimeout(K),X=!0,Z=null,n(i,["dbltap","vdblclick"],t,{x:c[0],y:c[1]})):(K=setTimeout((function(){X||n(i,["onetap","voneclick"],t,{x:c[0],y:c[1]})}),l.multiClickDebounceTime()),Z=t.timeStamp)),null!=i&&!e.dragData.didDrag&&i._private.selectable&&w<e.touchTapThreshold2&&!e.pinching&&("single"===l.selectionType()?(l.$(r).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var k=0;k<c.length;k++)h[k]=c[k];e.dragData.didDrag=!1,0===t.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),t.touches.length<2&&(1===t.touches.length&&(e.touchData.startGPosition=[t.touches[0].clientX,t.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}}),"touchendHandler"),!1),typeof TouchEvent>"u"){var ee=[],te=s((function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}}),"makeTouch"),re=s((function(e){return{event:e,touch:te(e)}}),"makePointer"),ne=s((function(e){ee.push(re(e))}),"addPointer"),ie=s((function(e){for(var t=0;t<ee.length;t++){if(ee[t].event.pointerId===e.pointerId)return void ee.splice(t,1)}}),"removePointer"),ae=s((function(e){var t=ee.filter((function(t){return t.event.pointerId===e.pointerId}))[0];t.event=e,t.touch=te(e)}),"updatePointer"),oe=s((function(e){e.touches=ee.map((function(e){return e.touch}))}),"addTouchesToEvent"),se=s((function(e){return"mouse"===e.pointerType||4===e.pointerType}),"pointerIsMouse");e.registerBinding(e.container,"pointerdown",(function(e){se(e)||(e.preventDefault(),ne(e),oe(e),W(e))})),e.registerBinding(e.container,"pointerup",(function(e){se(e)||(ie(e),oe(e),Y(e))})),e.registerBinding(e.container,"pointercancel",(function(e){se(e)||(ie(e),oe(e),H(e))})),e.registerBinding(e.container,"pointermove",(function(e){se(e)||(e.preventDefault(),ae(e),oe(e),q(e))}))}}},ld={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl("polygon",e,t,r,n,i,this.points)}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,s){return un(i,a,this.points,e,t,r/2,n/2,o)}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s){return Jr(e,t,this.points,a,o,n,i,[0,-1],r)}),"checkPoint")}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i)}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,s){return nn(i,a,e,t,r/2+o,n/2+o)}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s){return an(e,t,n,i,a,o,r)}),"checkPoint")}},generateRoundPolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:s((function(e,r,n,i,a,o,s){if(void 0!==o[s]&&o[s+"-cx"]===e&&o[s+"-cy"]===r)return o[s];o[s]=new Array(t.length/2),o[s+"-cx"]=e,o[s+"-cy"]=r;var l=n/2,u=i/2;a="auto"===a?mn(n,i):a;for(var c=new Array(t.length/2),h=0;h<t.length/2;h++)c[h]={x:e+l*t[2*h],y:r+u*t[2*h+1]};var d,f,p,g,m=c.length;for(f=c[m-1],d=0;d<m;d++)p=c[d%m],g=c[(d+1)%m],o[s][d]=Wh(f,p,g,a),f=p,p=g;return o[s]}),"getOrCreateCorners"),draw:s((function(e,t,r,n,i,a,o){this.renderer.nodeShapeImpl("round-polygon",e,t,r,n,i,this.points,this.getOrCreateCorners(t,r,n,i,a,o,"drawCorners"))}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,s,l){return cn(i,a,this.points,e,t,r,n,o,this.getOrCreateCorners(e,t,r,n,s,l,"corners"))}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s,l){return en(e,t,this.points,a,o,n,i,this.getOrCreateCorners(a,o,n,i,s,l,"corners"))}),"checkPoint")}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:dn(4,0),draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i,this.points,a)}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,s){return Wr(i,a,e,t,r,n,o,s)}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s){var l=n/2,u=i/2;s="auto"===s?gn(n,i):s;var c=2*(s=Math.min(l,u,s));return!!(Jr(e,t,this.points,a,o,n,i-c,[0,-1],r)||Jr(e,t,this.points,a,o,n-c,i,[0,-1],r)||an(e,t,c,c,a-l+s,o-u+s,r)||an(e,t,c,c,a+l-s,o-u+s,r)||an(e,t,c,c,a+l-s,o+u-s,r)||an(e,t,c,c,a-l+s,o+u-s,r))}),"checkPoint")}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:yn(),points:dn(4,0),draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i,null,a)}),"draw"),generateCutTrianglePts:s((function(e,t,r,n,i){var a="auto"===i?this.cornerLength:i,o=t/2,s=e/2,l=r-s,u=r+s,c=n-o,h=n+o;return{topLeft:[l,c+a,l+a,c,l+a,c+a],topRight:[u-a,c,u,c+a,u-a,c+a],bottomRight:[u,h-a,u-a,h,u-a,h-a],bottomLeft:[l+a,h,l,h-a,l+a,h-a]}}),"generateCutTrianglePts"),intersectLine:s((function(e,t,r,n,i,a,o,s){var l=this.generateCutTrianglePts(r+2*o,n+2*o,e,t,s),u=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return un(i,a,u,e,t)}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s){var l="auto"===s?this.cornerLength:s;if(Jr(e,t,this.points,a,o,n,i-2*l,[0,-1],r)||Jr(e,t,this.points,a,o,n-2*l,i,[0,-1],r))return!0;var u=this.generateCutTrianglePts(n,i,a,o);return Qr(e,t,u.topLeft)||Qr(e,t,u.topRight)||Qr(e,t,u.bottomRight)||Qr(e,t,u.bottomLeft)}),"checkPoint")}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:dn(4,0),draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i)}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,l){var u=this.generateBarrelBezierPts(r+2*o,n+2*o,e,t),c=s((function(e){var t=Nr({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),r=Nr({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),n=Nr({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,r.x,r.y,n.x,n.y,e[4],e[5]]}),"approximateBarrelCurvePts"),h=[].concat(c(u.topLeft),c(u.topRight),c(u.bottomRight),c(u.bottomLeft));return un(i,a,h,e,t)}),"intersectLine"),generateBarrelBezierPts:s((function(e,t,r,n){var i=t/2,a=e/2,o=r-a,s=r+a,l=n-i,u=n+i,c=xn(e,t),h=c.heightOffset,d=c.widthOffset,f=c.ctrlPtOffsetPct*e,p={topLeft:[o,l+h,o+f,l,o+d,l],topRight:[s-d,l,s-f,l,s,l+h],bottomRight:[s,u-h,s-f,u,s-d,u],bottomLeft:[o+d,u,o+f,u,o,u-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p}),"generateBarrelBezierPts"),checkPoint:s((function(e,t,r,n,i,a,o,l){var u=xn(n,i),c=u.heightOffset,h=u.widthOffset;if(Jr(e,t,this.points,a,o,n,i-2*c,[0,-1],r)||Jr(e,t,this.points,a,o,n-2*h,i,[0,-1],r))return!0;for(var d=this.generateBarrelBezierPts(n,i,a,o),f=s((function(e,t,r){var n=r[4],i=r[2],a=r[0],o=r[5],s=r[1],l=Math.min(n,a),u=Math.max(n,a),c=Math.min(o,s),h=Math.max(o,s);if(l<=e&&e<=u&&c<=t&&t<=h){var d=vn(n,i,a),f=Yr(d[0],d[1],d[2],e).filter((function(e){return 0<=e&&e<=1}));if(f.length>0)return f[0]}return null}),"getCurveT"),p=Object.keys(d),g=0;g<p.length;g++){var m=d[p[g]],y=f(e,t,m);if(null!=y){var v=m[5],x=m[3],b=m[1],C=Ar(v,x,b,y);if(m.isTop&&C<=t||m.isBottom&&t<=C)return!0}}return!1}),"checkPoint")}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:dn(4,0),draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i,this.points,a)}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,s){var l=t-(n/2+o),u=ln(i,a,e,t,e-(r/2+o),l,e+(r/2+o),l,!1);return u.length>0?u:Wr(i,a,e,t,r,n,o,s)}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s){var l=2*(s="auto"===s?gn(n,i):s);if(Jr(e,t,this.points,a,o,n,i-l,[0,-1],r)||Jr(e,t,this.points,a,o,n-l,i,[0,-1],r))return!0;var u=n/2+2*r,c=i/2+2*r;return!!(Qr(e,t,[a-u,o-c,a-u,o,a+u,o,a+u,o-c])||an(e,t,l,l,a+n/2-s,o+i/2-s,r)||an(e,t,l,l,a-n/2+s,o+i/2-s,r))}),"checkPoint")}},registerNodeShapes:function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",dn(3,0)),this.generateRoundPolygon("round-triangle",dn(3,0)),this.generatePolygon("rectangle",dn(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",dn(5,0)),this.generateRoundPolygon("round-pentagon",dn(5,0)),this.generatePolygon("hexagon",dn(6,0)),this.generateRoundPolygon("round-hexagon",dn(6,0)),this.generatePolygon("heptagon",dn(7,0)),this.generateRoundPolygon("round-heptagon",dn(7,0)),this.generatePolygon("octagon",dn(8,0)),this.generateRoundPolygon("round-octagon",dn(8,0));var n=new Array(20),i=pn(5,0),a=pn(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[2*s]*=o,a[2*s+1]*=o;for(s=0;s<5;s++)n[4*s]=i[2*s],n[4*s+1]=i[2*s+1],n[4*s+2]=a[2*s],n[4*s+3]=a[2*s+1];n=fn(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),e.makePolygon=function(e){var r,n="polygon-"+e.join("$");return(r=this[n])?r:t.generatePolygon(n,e)}}},ud={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||Bt();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&Rt("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort((function(e,t){return t.priority-e.priority}))}}},cd=s((function(e,t,r){for(var n=e.beforeRenderCallbacks,i=0;i<n.length;i++)n[i].fn(t,r)}),"beforeRenderCallbacks");ud.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var r=s((function r(n){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){cd(e,!0,n);var i=ut();e.render(e.renderOptions);var a=e.lastDrawTime=ut();void 0===e.averageRedrawTime&&(e.averageRedrawTime=a-i),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=a-i;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else cd(e,!1,n);e.skipFrame=!1,lt(r)}}),"renderFn");lt(r)}};var hd=s((function(e){this.init(e)}),"BaseRenderer"),dd=hd,fd=dd.prototype;fd.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],fd.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container(),n=t.cy.window();if(n){var i=n.document,a=i.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",l=null!=i.getElementById(o);if(r.className.indexOf(s)<0&&(r.className=(r.className||"")+" "+s),!l){var u=i.createElement("style");u.id=o,u.textContent="."+s+" { position: relative; }",a.insertBefore(u,a.children[0])}"static"===n.getComputedStyle(r).getPropertyValue("position")&&It("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=F(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},fd.notify=function(e,t){var r=this,n=r.cy;if(!this.destroyed){if("init"===e)return void r.load();if("destroy"===e)return void r.destroy();("add"===e||"remove"===e||"move"===e&&n.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&r.invalidateCachedZSortedEles(),"viewport"===e&&r.redrawHint("select",!0),("load"===e||"resize"===e||"mount"===e)&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},fd.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],n=r.target;(n.off||n.removeEventListener).apply(n,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}},fd.isHeadless=function(){return!1},[xh,ad,od,sd,ld,ud].forEach((function(e){ue(fd,e)}));var pd=1e3/60,gd={setupDequeueing:s((function(e){return s((function(){var t=this,r=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var n=it((function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()}),e.deqRedrawThreshold),i=s((function(i,a){var o=ut(),s=r.averageRedrawTime,l=r.lastRedrawTime,u=[],c=r.cy.extent(),h=r.getPixelRatio();for(i||r.flushRenderedStyleQueue();;){var d=ut(),f=d-o,p=d-a;if(l<pd){var g=pd-(i?s:0);if(p>=e.deqFastCost*g)break}else if(i){if(f>=e.deqCost*l||f>=e.deqAvgCost*s)break}else if(p>=e.deqNoDrawCost*pd)break;var m=e.deq(t,h,c);if(!(m.length>0))break;for(var y=0;y<m.length;y++)u.push(m[y])}u.length>0&&(e.onDeqd(t,u),!i&&e.shouldRedraw(t,u,h,c)&&n())}),"dequeue"),a=e.priority||Nt;r.beforeRender(i,a(t))}}),"setupDequeueingImpl")}),"setupDequeueing")},md=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St;p(this,e),this.idsByKey=new qt,this.keyForId=new qt,this.cachesByLvl=new qt,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r}return s(e,"ElementTextureCacheLookup"),m(e,[{key:"getIdsFor",value:s((function(e){null==e&&Rt("Can not get id list for null key");var t=this.idsByKey,r=this.idsByKey.get(e);return r||(r=new Yt,t.set(e,r)),r}),"getIdsFor")},{key:"addIdForKey",value:s((function(e,t){null!=e&&this.getIdsFor(e).add(t)}),"addIdForKey")},{key:"deleteIdForKey",value:s((function(e,t){null!=e&&this.getIdsFor(e).delete(t)}),"deleteIdForKey")},{key:"getNumberOfIdsForKey",value:s((function(e){return null==e?0:this.getIdsFor(e).size}),"getNumberOfIdsForKey")},{key:"updateKeyMappingFor",value:s((function(e){var t=e.id(),r=this.keyForId.get(t),n=this.getKey(e);this.deleteIdForKey(r,t),this.addIdForKey(n,t),this.keyForId.set(t,n)}),"updateKeyMappingFor")},{key:"deleteKeyMappingFor",value:s((function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteIdForKey(r,t),this.keyForId.delete(t)}),"deleteKeyMappingFor")},{key:"keyHasChangedFor",value:s((function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}),"keyHasChangedFor")},{key:"isInvalid",value:s((function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}),"isInvalid")},{key:"getCachesAt",value:s((function(e){var t=this.cachesByLvl,r=this.lvls,n=t.get(e);return n||(n=new qt,t.set(e,n),r.push(e)),n}),"getCachesAt")},{key:"getCache",value:s((function(e,t){return this.getCachesAt(t).get(e)}),"getCache")},{key:"get",value:s((function(e,t){var r=this.getKey(e),n=this.getCache(r,t);return null!=n&&this.updateKeyMappingFor(e),n}),"get")},{key:"getForCachedKey",value:s((function(e,t){var r=this.keyForId.get(e.id());return this.getCache(r,t)}),"getForCachedKey")},{key:"hasCache",value:s((function(e,t){return this.getCachesAt(t).has(e)}),"hasCache")},{key:"has",value:s((function(e,t){var r=this.getKey(e);return this.hasCache(r,t)}),"has")},{key:"setCache",value:s((function(e,t,r){r.key=e,this.getCachesAt(t).set(e,r)}),"setCache")},{key:"set",value:s((function(e,t,r){var n=this.getKey(e);this.setCache(n,t,r),this.updateKeyMappingFor(e)}),"set")},{key:"deleteCache",value:s((function(e,t){this.getCachesAt(t).delete(e)}),"deleteCache")},{key:"delete",value:s((function(e,t){var r=this.getKey(e);this.deleteCache(r,t)}),"_delete")},{key:"invalidateKey",value:s((function(e){var t=this;this.lvls.forEach((function(r){return t.deleteCache(e,r)}))}),"invalidateKey")},{key:"invalidate",value:s((function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteKeyMappingFor(e);var n=this.doesEleInvalidateKey(e);return n&&this.invalidateKey(r),n||0===this.getNumberOfIdsForKey(r)}),"invalidate")}]),e}(),yd={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},vd=$t({getKey:null,doesEleInvalidateKey:St,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Et,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),xd=s((function(e,t){var r=this;r.renderer=e,r.onDequeues=[];var n=vd(t);ue(r,n),r.lookup=new md(n.getKey,n.doesEleInvalidateKey),r.setupDequeueing()}),"ElementTextureCache"),bd=xd.prototype;bd.reasons=yd,bd.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},bd.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},bd.getElementQueue=function(){var e=this.eleCacheQueue=this.eleCacheQueue||new Jt((function(e,t){return t.reqs-e.reqs}));return e},bd.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},bd.getElement=function(e,t,r,n,i){var a=this,o=this.renderer,l=o.cy.zoom(),u=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!a.allowEdgeTxrCaching&&e.isEdge()||!a.allowParentTxrCaching&&e.isParent())return null;if(null==n&&(n=Math.ceil(wr(l*r))),n<-4)n=-4;else if(l>=7.99||n>3)return null;var c=Math.pow(2,n),h=t.h*c,d=t.w*c,f=o.eleTextBiggerThanMin(e,c);if(!this.isVisible(e,f))return null;var p,g=u.get(e,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;if(p=h<=25?25:h<=50?50:50*Math.ceil(h/50),h>1024||d>1024)return null;var m=a.getTextureQueue(p),y=m[m.length-2],v=s((function(){return a.recycleTexture(p,d)||a.addTexture(p,d)}),"addNewTxr");y||(y=m[m.length-1]),y||(y=v()),y.width-y.usedWidth<d&&(y=v());for(var x,b=s((function(e){return e&&e.scaledLabelShown===f}),"scalableFrom"),C=i&&i===yd.dequeue,T=i&&i===yd.highQuality,w=i&&i===yd.downscale,k=n+1;k<=3;k++){var _=u.get(e,k);if(_){x=_;break}}var E=x&&x.level===n+1?x:null,S=s((function(){y.context.drawImage(E.texture.canvas,E.x,0,E.width,E.height,y.usedWidth,0,d,h)}),"downscale");if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,d,p),b(E))S();else if(b(x)){if(!T)return a.queueElement(e,x.level-1),x;for(var A=x.level;A>n;A--)E=a.getElement(e,t,r,A,yd.downscale);S()}else{var N;if(!C&&!T&&!w)for(var R=n-1;R>=-4;R--){var L=u.get(e,R);if(L){N=L;break}}if(b(N))return a.queueElement(e,n),N;y.context.translate(y.usedWidth,0),y.context.scale(c,c),this.drawElement(y.context,e,t,f,!1),y.context.scale(1/c,1/c),y.context.translate(-y.usedWidth,0)}return g={x:y.usedWidth,texture:y,level:n,scale:c,width:d,height:h,scaledLabelShown:f},y.usedWidth+=Math.ceil(d+8),y.eleCaches.push(g),u.set(e,n,g),a.checkTextureFullness(y),g},bd.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},bd.invalidateElement=function(e){var t=this,r=t.lookup,n=[];if(r.isInvalid(e)){for(var i=-4;i<=3;i++){var a=r.getForCachedKey(e,i);a&&n.push(a)}if(r.invalidate(e))for(var o=0;o<n.length;o++){var s=n[o],l=s.texture;l.invalidatedWidth+=s.width,s.invalidated=!0,t.checkTextureUtility(l)}t.removeFromQueue(e)}},bd.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},bd.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?zt(t,e):e.fullnessChecks++},bd.retireTexture=function(e){var t=e.height,r=this.getTextureQueue(t),n=this.lookup;zt(r,e),e.retired=!0;for(var i=e.eleCaches,a=0;a<i.length;a++){var o=i[a];n.deleteCache(o.key,o.level)}Ut(i),this.getRetiredTextureQueue(t).push(e)},bd.addTexture=function(e,t){var r={};return this.getTextureQueue(e).push(r),r.eleCaches=[],r.height=e,r.width=Math.max(1024,t),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=this.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r},bd.recycleTexture=function(e,t){for(var r=this.getTextureQueue(e),n=this.getRetiredTextureQueue(e),i=0;i<n.length;i++){var a=n[i];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,Ut(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),zt(n,a),r.push(a),a}},bd.queueElement=function(e,t){var r=this.getElementQueue(),n=this.getElementKeyToQueue(),i=this.getKey(e),a=n[i];if(a)a.level=Math.max(a.level,t),a.eles.merge(e),a.reqs++,r.updateItem(a);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:i};r.push(o),n[i]=o}},bd.dequeue=function(e){for(var t=this,r=t.getElementQueue(),n=t.getElementKeyToQueue(),i=[],a=t.lookup,o=0;o<1&&r.size()>0;o++){var s=r.pop(),l=s.key,u=s.eles[0],c=a.hasCache(u,s.level);if(n[l]=null,!c){i.push(s);var h=t.getBoundingBox(u);t.getElement(u,h,e,s.level,yd.dequeue)}}return i},bd.removeFromQueue=function(e){var t=this.getElementQueue(),r=this.getElementKeyToQueue(),n=this.getKey(e),i=r[n];null!=i&&(1===i.eles.length?(i.reqs=_t,t.updateItem(i),t.pop(),r[n]=null):i.eles.unmerge(e))},bd.onDequeue=function(e){this.onDequeues.push(e)},bd.offDequeue=function(e){zt(this.onDequeues,e)},bd.setupDequeueing=gd.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:s((function(e,t,r){return e.dequeue(t,r)}),"deq"),onDeqd:s((function(e,t){for(var r=0;r<e.onDequeues.length;r++){(0,e.onDequeues[r])(t)}}),"onDeqd"),shouldRedraw:s((function(e,t,r,n){for(var i=0;i<t.length;i++)for(var a=t[i].eles,o=0;o<a.length;o++){var s=a[o].boundingBox();if(Ur(s,n))return!0}return!1}),"shouldRedraw"),priority:s((function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}),"priority")});var Cd=s((function(e){var t=this,r=t.renderer=e,n=r.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=ut()-500,t.skipping=!1,t.eleTxrDeqs=n.collection(),t.scheduleElementRefinement=it((function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)}),50),r.beforeRender((function(e,r){r-t.lastInvalidationTime<=250?t.skipping=!0:t.skipping=!1}),r.beforeRenderPriorities.lyrTxrSkip);var i=s((function(e,t){return t.reqs-e.reqs}),"qSort");t.layersQueue=new Jt(i),t.setupDequeueing()}),"LayeredTextureCache"),Td=Cd.prototype,wd=0,kd=Math.pow(2,53)-1;Td.makeLayer=function(e,t){var r=Math.pow(2,t),n=Math.ceil(e.w*r),i=Math.ceil(e.h*r),a=this.renderer.makeOffscreenCanvas(n,i),o={id:wd=++wd%kd,bb:e,level:t,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(r,r),s.translate(l,u),o},Td.getLayers=function(e,t,r){var n=this,i=n.renderer.cy.zoom(),a=n.firstGet;if(n.firstGet=!1,null==r)if((r=Math.ceil(wr(i*t)))<-4)r=-4;else if(i>=3.99||r>2)return null;n.validateLayersElesOrdering(r,e);var o,l,u=n.layersByLevel,c=Math.pow(2,r),h=u[r]=u[r]||[],d=n.levelIsComplete(r,e),f=s((function(){var t=s((function(t){if(n.validateLayersElesOrdering(t,e),n.levelIsComplete(t,e))return l=u[t],!0}),"canUseAsTmpLvl"),i=s((function(e){if(!l)for(var n=r+e;-4<=n&&n<=2&&!t(n);n+=e);}),"checkLvls");i(1),i(-1);for(var a=h.length-1;a>=0;a--){var o=h[a];o.invalid&&zt(h,o)}}),"checkTempLevels");if(d)return h;f();var p=s((function(){if(!o){o=Ir();for(var t=0;t<e.length;t++)Pr(o,e[t].boundingBox())}return o}),"getBb"),g=s((function(e){var t=(e=e||{}).after;if(p(),o.w*c*(o.h*c)>16e6)return null;var i=n.makeLayer(o,r);if(null!=t){var a=h.indexOf(t)+1;h.splice(a,0,i)}else(void 0===e.insert||e.insert)&&h.unshift(i);return i}),"makeLayer");if(n.skipping&&!a)return null;for(var m=null,y=e.length/1,v=!a,x=0;x<e.length;x++){var b=e[x],C=b._private.rscratch,T=C.imgLayerCaches=C.imgLayerCaches||{},w=T[r];if(w)m=w;else{if((!m||m.eles.length>=y||!Vr(m.bb,b.boundingBox()))&&!(m=g({insert:!0,after:m})))return null;l||v?n.queueLayer(m,b):n.drawEleInLayer(m,b,r,t),m.eles.push(b),T[r]=m}}return l||(v?null:h)},Td.getEleLevelForLayerLevel=function(e,t){return e},Td.drawEleInLayer=function(e,t,r,n){var i=this.renderer,a=e.context,o=t.boundingBox();0===o.w||0===o.h||!t.visible()||(r=this.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(a,!1),i.drawCachedElement(a,t,null,null,r,true),i.setImgSmoothing(a,!0))},Td.levelIsComplete=function(e,t){var r=this.layersByLevel[e];if(!r||0===r.length)return!1;for(var n=0,i=0;i<r.length;i++){var a=r[i];if(a.reqs>0||a.invalid)return!1;n+=a.eles.length}return n===t.length},Td.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var n=0;n<r.length;n++){for(var i=r[n],a=-1,o=0;o<t.length;o++)if(i.eles[0]===t[o]){a=o;break}if(a<0)this.invalidateLayer(i);else{var s=a;for(o=0;o<i.eles.length;o++)if(i.eles[o]!==t[s+o]){this.invalidateLayer(i);break}}}},Td.updateElementsInLayers=function(e,t){for(var r=U(e[0]),n=0;n<e.length;n++)for(var i=r?null:e[n],a=r?e[n]:e[n].ele,o=a._private.rscratch,s=o.imgLayerCaches=o.imgLayerCaches||{},l=-4;l<=2;l++){var u=s[l];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||t(u,a,i))}},Td.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var r=this.layersByLevel[t];if(r&&r.length>0){e=!0;break}}return e},Td.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=ut(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,s((function(e,r,n){t.invalidateLayer(e)}),"invalAssocLayers")))},Td.invalidateLayer=function(e){if(this.lastInvalidationTime=ut(),!e.invalid){var t=e.level,r=e.eles,n=this.layersByLevel[t];zt(n,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<r.length;i++){var a=r[i]._private.rscratch.imgLayerCaches;a&&(a[t]=null)}}},Td.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,s((function(e,r,n){var i=e.replacement;if(i||((i=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,i.eles=e.eles),!i.reqs)for(var a=0;a<i.eles.length;a++)t.queueLayer(i,i.eles[a])}),"refineEachEle"))},Td.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},Td.queueLayer=function(e,t){var r=this.layersQueue,n=e.elesQueue,i=n.hasId=n.hasId||{};if(!e.replacement){if(t){if(i[t.id()])return;n.push(t),i[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}},Td.dequeue=function(e){for(var t=this,r=t.layersQueue,n=[],i=0;i<1&&0!==r.size();){var a=r.peek();if(a.replacement)r.pop();else if(a.replaces&&a!==a.replaces.replacement)r.pop();else if(a.invalid)r.pop();else{var o=a.elesQueue.shift();o&&(t.drawEleInLayer(a,o,a.level,e),i++),0===n.length&&n.push(!0),0===a.elesQueue.length&&(r.pop(),a.reqs=0,a.replaces&&t.applyLayerReplacement(a),t.requestRedraw())}}return n},Td.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],r=e.replaces,n=t.indexOf(r);if(!(n<0||r.invalid)){t[n]=e;for(var i=0;i<e.eles.length;i++){var a=e.eles[i]._private,o=a.imgLayerCaches=a.imgLayerCaches||{};o&&(o[e.level]=e)}this.requestRedraw()}},Td.requestRedraw=it((function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()}),100),Td.setupDequeueing=gd.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:s((function(e,t){return e.dequeue(t)}),"deq"),onDeqd:Nt,shouldRedraw:Et,priority:s((function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}),"priority")});var _d,Ed={};function Sd(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.lineTo(n.x,n.y)}}function Ad(e,t,r){for(var n,i=0;i<t.length;i++){var a=t[i];0===i&&(n=a),e.lineTo(a.x,a.y)}e.quadraticCurveTo(r.x,r.y,n.x,n.y)}function Nd(e,t,r){e.beginPath&&e.beginPath();for(var n=t,i=0;i<n.length;i++){var a=n[i];e.lineTo(a.x,a.y)}var o=r,s=r[0];e.moveTo(s.x,s.y);for(i=1;i<o.length;i++){a=o[i];e.lineTo(a.x,a.y)}e.closePath&&e.closePath()}function Rd(e,t,r,n,i){e.beginPath&&e.beginPath(),e.arc(r,n,i,0,2*Math.PI,!1);var a=t,o=a[0];e.moveTo(o.x,o.y);for(var s=0;s<a.length;s++){var l=a[s];e.lineTo(l.x,l.y)}e.closePath&&e.closePath()}function Ld(e,t,r,n){e.arc(t,r,n,0,2*Math.PI,!1)}s(Sd,"polygon"),s(Ad,"triangleBackcurve"),s(Nd,"triangleTee"),s(Rd,"circleTriangle"),s(Ld,"circle"),Ed.arrowShapeImpl=function(e){return(_d||(_d={polygon:Sd,"triangle-backcurve":Ad,"triangle-tee":Nd,"circle-triangle":Rd,"triangle-cross":Nd,circle:Ld}))[e]};var Id={drawElement:function(e,t,r,n,i,a){t.isNode()?this.drawNode(e,t,r,n,i,a):this.drawEdge(e,t,r,n,i,a)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,r,n,i,a,o,s){var l=this,u=r.getBoundingBox(t);if(0!==u.w&&0!==u.h){var c=r.getElement(t,u,n,i,a);if(null!=c){var h=s(l,t);if(0===h)return;var d,f,p,g,m,y,v=o(l,t),x=u.x1,b=u.y1,C=u.w,T=u.h;if(0!==v){var w=r.getRotationPoint(t);p=w.x,g=w.y,e.translate(p,g),e.rotate(v),(m=l.getImgSmoothing(e))||l.setImgSmoothing(e,!0);var k=r.getRotationOffset(t);d=k.x,f=k.y}else d=x,f=b;1!==h&&(y=e.globalAlpha,e.globalAlpha=y*h),e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,d,f,C,T),1!==h&&(e.globalAlpha=y),0!==v&&(e.rotate(-v),e.translate(-p,-g),m||l.setImgSmoothing(e,!1))}else r.drawElement(e,t)}}},Md=s((function(){return 0}),"getZeroRotation"),Od=s((function(e,t){return e.getTextAngle(t,null)}),"getLabelRotation"),Dd=s((function(e,t){return e.getTextAngle(t,"source")}),"getSourceLabelRotation"),Pd=s((function(e,t){return e.getTextAngle(t,"target")}),"getTargetLabelRotation"),Fd=s((function(e,t){return t.effectiveOpacity()}),"getOpacity"),Bd=s((function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()}),"getTextOpacity");Id.drawCachedElement=function(e,t,r,n,i,a){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,h=s.tlbTxrCache,d=t.boundingBox(),f=!0===a?l.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&t.visible()&&(!n||Ur(d,n))){var p=t.isEdge(),g=t.element()._private.rscratch.badLine;o.drawElementUnderlay(e,t),o.drawCachedElementPortion(e,t,l,r,i,f,Md,Fd),(!p||!g)&&o.drawCachedElementPortion(e,t,u,r,i,f,Od,Bd),p&&!g&&(o.drawCachedElementPortion(e,t,c,r,i,f,Dd,Bd),o.drawCachedElementPortion(e,t,h,r,i,f,Pd,Bd)),o.drawElementOverlay(e,t)}},Id.drawElements=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];this.drawElement(e,n)}},Id.drawCachedElements=function(e,t,r,n){for(var i=0;i<t.length;i++){var a=t[i];this.drawCachedElement(e,a,r,n)}},Id.drawCachedNodes=function(e,t,r,n){for(var i=0;i<t.length;i++){var a=t[i];a.isNode()&&this.drawCachedElement(e,a,r,n)}},Id.drawLayeredElements=function(e,t,r,n){var i=this.data.lyrTxrCache.getLayers(t,r);if(i)for(var a=0;a<i.length;a++){var o=i[a],s=o.bb;0===s.w||0===s.h||e.drawImage(o.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(e,t,r,n)};var $d={drawEdge:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this,l=t._private.rscratch;if((!a||t.visible())&&!l.badLine&&null!=l.allpts&&!isNaN(l.allpts[0])){var u;r&&(u=r,e.translate(-u.x1,-u.y1));var c=a?t.pstyle("opacity").value:1,h=a?t.pstyle("line-opacity").value:1,d=t.pstyle("curve-style").value,f=t.pstyle("line-style").value,p=t.pstyle("width").pfValue,g=t.pstyle("line-cap").value,m=t.pstyle("line-outline-width").value,y=t.pstyle("line-outline-color").value,v=c*h,x=c*h,b=s((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;"straight-triangle"===d?(o.eleStrokeStyle(e,t,r),o.drawEdgeTrianglePath(t,e,l.allpts)):(e.lineWidth=p,e.lineCap=g,o.eleStrokeStyle(e,t,r),o.drawEdgePath(t,e,l.allpts,f),e.lineCap="butt")}),"drawLine"),C=s((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;e.lineWidth=p+m,e.lineCap=g,m>0?(o.colorStrokeStyle(e,y[0],y[1],y[2],r),"straight-triangle"===d?o.drawEdgeTrianglePath(t,e,l.allpts):(o.drawEdgePath(t,e,l.allpts,f),e.lineCap="butt")):e.lineCap="butt"}),"drawLineOutline"),T=s((function(){i&&o.drawEdgeOverlay(e,t)}),"drawOverlay"),w=s((function(){i&&o.drawEdgeUnderlay(e,t)}),"drawUnderlay"),k=s((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;o.drawArrowheads(e,t,r)}),"drawArrows"),_=s((function(){o.drawElementText(e,t,null,n)}),"drawText");if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var E=t.pstyle("ghost-offset-x").pfValue,S=t.pstyle("ghost-offset-y").pfValue,A=t.pstyle("ghost-opacity").value,N=v*A;e.translate(E,S),b(N),k(N),e.translate(-E,-S)}else C();w(),b(),k(),T(),_(),r&&e.translate(u.x1,u.y1)}}},zd=s((function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r){if(r.visible()){var n=r.pstyle("".concat(e,"-opacity")).value;if(0!==n){var i=this,a=i.usePaths(),o=r._private.rscratch,s=2*r.pstyle("".concat(e,"-padding")).pfValue,l=r.pstyle("".concat(e,"-color")).value;t.lineWidth=s,"self"!==o.edgeType||a?t.lineCap="round":t.lineCap="butt",i.colorStrokeStyle(t,l[0],l[1],l[2],n),i.drawEdgePath(r,t,o.allpts,"solid")}}}}),"drawEdgeOverlayUnderlay");$d.drawEdgeOverlay=zd("overlay"),$d.drawEdgeUnderlay=zd("underlay"),$d.drawEdgePath=function(e,t,r,n){var i,a=e._private.rscratch,o=t,s=!1,l=this.usePaths(),u=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(l){var h=r.join("$");a.pathCacheKey&&a.pathCacheKey===h?(i=t=a.pathCache,s=!0):(i=t=new Path2D,a.pathCacheKey=h,a.pathCache=i)}if(o.setLineDash)switch(n){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(u),o.lineDashOffset=c;break;case"solid":o.setLineDash([])}if(!s&&!a.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<r.length;d+=4)t.quadraticCurveTo(r[d],r[d+1],r[d+2],r[d+3]);break;case"straight":case"haystack":for(var f=2;f+1<r.length;f+=2)t.lineTo(r[f],r[f+1]);break;case"segments":if(a.isRound){var p,g=k(a.roundCorners);try{for(g.s();!(p=g.n()).done;){Vh(t,p.value)}}catch(e){g.e(e)}finally{g.f()}t.lineTo(r[r.length-2],r[r.length-1])}else for(var m=2;m+1<r.length;m+=2)t.lineTo(r[m],r[m+1])}t=o,l?t.stroke(i):t.stroke(),t.setLineDash&&t.setLineDash([])},$d.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var n=e.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var a=[r[i+2]-r[i],r[i+3]-r[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],l=[s[0]*n/2,s[1]*n/2];t.beginPath(),t.moveTo(r[i]-l[0],r[i+1]-l[1]),t.lineTo(r[i]+l[0],r[i+1]+l[1]),t.lineTo(r[i+2],r[i+3]),t.closePath(),t.fill()}},$d.drawArrowheads=function(e,t,r){var n=t._private.rscratch,i="haystack"===n.edgeType;i||this.drawArrowhead(e,t,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),i||this.drawArrowhead(e,t,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)},$d.drawArrowhead=function(e,t,r,n,i,a,o){if(!(isNaN(n)||null==n||isNaN(i)||null==i||isNaN(a)||null==a)){var s=this,l=t.pstyle(r+"-arrow-shape").value;if("none"!==l){var u="hollow"===t.pstyle(r+"-arrow-fill").value?"both":"filled",c=t.pstyle(r+"-arrow-fill").value,h=t.pstyle("width").pfValue,d=t.pstyle(r+"-arrow-width"),f="match-line"===d.value?h:d.pfValue;"%"===d.units&&(f*=h);var p=t.pstyle("opacity").value;void 0===o&&(o=p);var g=e.globalCompositeOperation;(1!==o||"hollow"===c)&&(e.globalCompositeOperation="destination-out",s.colorFillStyle(e,255,255,255,1),s.colorStrokeStyle(e,255,255,255,1),s.drawArrowShape(t,e,u,h,l,f,n,i,a),e.globalCompositeOperation=g);var m=t.pstyle(r+"-arrow-color").value;s.colorFillStyle(e,m[0],m[1],m[2],o),s.colorStrokeStyle(e,m[0],m[1],m[2],o),s.drawArrowShape(t,e,c,h,l,f,n,i,a)}}},$d.drawArrowShape=function(e,t,r,n,i,a,o,s,l){var u,c=this,h=this.usePaths()&&"triangle-cross"!==i,d=!1,f=t,p={x:o,y:s},g=e.pstyle("arrow-scale").value,m=this.getArrowWidth(n,g),y=c.arrowShapes[i];if(h){var v=c.arrowPathCache=c.arrowPathCache||[],x=xt(i),b=v[x];null!=b?(u=t=b,d=!0):(u=t=new Path2D,v[x]=u)}d||(t.beginPath&&t.beginPath(),h?y.draw(t,1,0,{x:0,y:0},1):y.draw(t,m,l,p,n),t.closePath&&t.closePath()),t=f,h&&(t.translate(o,s),t.rotate(l),t.scale(m,m)),("filled"===r||"both"===r)&&(h?t.fill(u):t.fill()),("hollow"===r||"both"===r)&&(t.lineWidth=a/(h?m:1),t.lineJoin="miter",h?t.stroke(u):t.stroke()),h&&(t.scale(1/m,1/m),t.rotate(-l),t.translate(-o,-s))};var Ud={safeDrawImage:function(e,t,r,n,i,a,o,s,l,u){if(!(i<=0||a<=0||l<=0||u<=0))try{e.drawImage(t,r,n,i,a,o,s,l,u)}catch(e){It(e)}},drawInscribedImage:function(e,t,r,n,i){var a=this,o=r.position(),s=o.x,l=o.y,u=r.cy().style(),c=u.getIndexedStyle.bind(u),h=c(r,"background-fit","value",n),d=c(r,"background-repeat","value",n),f=r.width(),p=r.height(),g=2*r.padding(),m=f+("inner"===c(r,"background-width-relative-to","value",n)?0:g),y=p+("inner"===c(r,"background-height-relative-to","value",n)?0:g),v=r._private.rscratch,x="node"===c(r,"background-clip","value",n),b=c(r,"background-image-opacity","value",n)*i,C=c(r,"background-image-smoothing","value",n),T=r.pstyle("corner-radius").value;"auto"!==T&&(T=r.pstyle("corner-radius").pfValue);var w=t.width||t.cachedW,k=t.height||t.cachedH;(null==w||null==k)&&(document.body.appendChild(t),w=t.cachedW=t.width||t.offsetWidth,k=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var _=w,E=k;if("auto"!==c(r,"background-width","value",n)&&(_="%"===c(r,"background-width","units",n)?c(r,"background-width","pfValue",n)*m:c(r,"background-width","pfValue",n)),"auto"!==c(r,"background-height","value",n)&&(E="%"===c(r,"background-height","units",n)?c(r,"background-height","pfValue",n)*y:c(r,"background-height","pfValue",n)),0!==_&&0!==E){if("contain"===h)_*=S=Math.min(m/_,y/E),E*=S;else if("cover"===h){var S;_*=S=Math.max(m/_,y/E),E*=S}var A=s-m/2,N=c(r,"background-position-x","units",n),R=c(r,"background-position-x","pfValue",n);A+="%"===N?(m-_)*R:R;var L=c(r,"background-offset-x","units",n),I=c(r,"background-offset-x","pfValue",n);A+="%"===L?(m-_)*I:I;var M=l-y/2,O=c(r,"background-position-y","units",n),D=c(r,"background-position-y","pfValue",n);M+="%"===O?(y-E)*D:D;var P=c(r,"background-offset-y","units",n),F=c(r,"background-offset-y","pfValue",n);M+="%"===P?(y-E)*F:F,v.pathCache&&(A-=s,M-=l,s=0,l=0);var B=e.globalAlpha;e.globalAlpha=b;var $=a.getImgSmoothing(e),z=!1;if("no"===C&&$?(a.setImgSmoothing(e,!1),z=!0):"yes"===C&&!$&&(a.setImgSmoothing(e,!0),z=!0),"no-repeat"===d)x&&(e.save(),v.pathCache?e.clip(v.pathCache):(a.nodeShapes[a.getNodeShape(r)].draw(e,s,l,m,y,T,v),e.clip())),a.safeDrawImage(e,t,0,0,w,k,A,M,_,E),x&&e.restore();else{var U=e.createPattern(t,d);e.fillStyle=U,a.nodeShapes[a.getNodeShape(r)].draw(e,s,l,m,y,T,v),e.translate(A,M),e.fill(),e.translate(-A,-M)}e.globalAlpha=B,z&&a.setImgSmoothing(e,$)}}},Gd={};function jd(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+n-a,r),e.quadraticCurveTo(t+n,r,t+n,r+a),e.lineTo(t+n,r+i-a),e.quadraticCurveTo(t+n,r+i,t+n-a,r+i),e.lineTo(t+a,r+i),e.quadraticCurveTo(t,r+i,t,r+i-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),o?e.stroke():e.fill()}Gd.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(wr(r*n));t=Math.pow(2,i)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},Gd.drawElementText=function(e,t,r,n,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this;if(null==n){if(a&&!o.eleTextBiggerThanMin(t))return}else if(!1===n)return;if(t.isNode()){var s=t.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var u=t.element()._private.rscratch.badLine,c=t.pstyle("label"),h=t.pstyle("source-label"),d=t.pstyle("target-label");if(u||(!c||!c.value)&&(!h||!h.value)&&(!d||!d.value))return;e.textAlign="center",e.textBaseline="bottom"}var f,p=!r;r&&(f=r,e.translate(-f.x1,-f.y1)),null==i?(o.drawText(e,t,null,p,a),t.isEdge()&&(o.drawText(e,t,"source",p,a),o.drawText(e,t,"target",p,a))):o.drawText(e,t,i,p,a),r&&e.translate(f.x1,f.y1)},Gd.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((t=this.fontCaches[r]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},Gd.setupTextStyle=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",a=t.pstyle("font-family").strValue,o=t.pstyle("font-weight").strValue,s=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*s,u=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=n+" "+o+" "+i+" "+a,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],s),this.colorStrokeStyle(e,c[0],c[1],c[2],l)},s(jd,"roundRect"),Gd.getTextAngle=function(e,t){var r=e._private.rscratch,n=t?t+"-":"",i=e.pstyle(n+"text-rotation"),a=jt(r,"labelAngle",t);return"autorotate"===i.strValue?e.isEdge()?a:0:"none"===i.strValue?0:i.pfValue},Gd.drawText=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=t._private.rscratch,o=i?t.effectiveOpacity():1;if(!i||0!==o&&0!==t.pstyle("text-opacity").value){"main"===r&&(r=null);var s,l,u=jt(a,"labelX",r),c=jt(a,"labelY",r),h=this.getLabelText(t,r);if(null!=h&&""!==h&&!isNaN(u)&&!isNaN(c)){this.setupTextStyle(e,t,i);var d,f=r?r+"-":"",p=jt(a,"labelWidth",r),g=jt(a,"labelHeight",r),m=t.pstyle(f+"text-margin-x").pfValue,y=t.pstyle(f+"text-margin-y").pfValue,v=t.isEdge(),x=t.pstyle("text-halign").value,b=t.pstyle("text-valign").value;switch(v&&(x="center",b="center"),u+=m,c+=y,0!==(d=n?this.getTextAngle(t,r):0)&&(s=u,l=c,e.translate(s,l),e.rotate(d),u=0,c=0),b){case"top":break;case"center":c+=g/2;break;case"bottom":c+=g}var C=t.pstyle("text-background-opacity").value,T=t.pstyle("text-border-opacity").value,w=t.pstyle("text-border-width").pfValue,k=t.pstyle("text-background-padding").pfValue,_=0===t.pstyle("text-background-shape").strValue.indexOf("round");if(C>0||w>0&&T>0){var E=u-k;switch(x){case"left":E-=p;break;case"center":E-=p/2}var S=c-g-k,A=p+2*k,N=g+2*k;if(C>0){var R=e.fillStyle,L=t.pstyle("text-background-color").value;e.fillStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+C*o+")",_?jd(e,E,S,A,N,2):e.fillRect(E,S,A,N),e.fillStyle=R}if(w>0&&T>0){var I=e.strokeStyle,M=e.lineWidth,O=t.pstyle("text-border-color").value,D=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+T*o+")",e.lineWidth=w,e.setLineDash)switch(D){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=w/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(_?jd(e,E,S,A,N,2,"stroke"):e.strokeRect(E,S,A,N),"double"===D){var P=w/2;_?jd(e,E+P,S+P,A-2*P,N-2*P,2,"stroke"):e.strokeRect(E+P,S+P,A-2*P,N-2*P)}e.setLineDash&&e.setLineDash([]),e.lineWidth=M,e.strokeStyle=I}}var F=2*t.pstyle("text-outline-width").pfValue;if(F>0&&(e.lineWidth=F),"wrap"===t.pstyle("text-wrap").value){var B=jt(a,"labelWrapCachedLines",r),$=jt(a,"labelLineHeight",r),z=p/2,U=this.getLabelJustification(t);switch("auto"===U||("left"===x?"left"===U?u+=-p:"center"===U&&(u+=-z):"center"===x?"left"===U?u+=-z:"right"===U&&(u+=z):"right"===x&&("center"===U?u+=z:"right"===U&&(u+=p))),b){case"top":case"center":case"bottom":c-=(B.length-1)*$}for(var G=0;G<B.length;G++)F>0&&e.strokeText(B[G],u,c),e.fillText(B[G],u,c),c+=$}else F>0&&e.strokeText(h,u,c),e.fillText(h,u,c);0!==d&&(e.rotate(-d),e.translate(-s,-l))}}};var Vd={drawNode:function(e,t,r){var n,i,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=this,c=t._private,h=c.rscratch,d=t.position();if(F(d.x)&&F(d.y)&&(!l||t.visible())){var f,p,g=l?t.effectiveOpacity():1,m=u.usePaths(),y=!1,v=t.padding();n=t.width()+2*v,i=t.height()+2*v,r&&(p=r,e.translate(-p.x1,-p.y1));for(var x=t.pstyle("background-image").value,b=new Array(x.length),C=new Array(x.length),T=0,w=0;w<x.length;w++){var k=x[w];if(b[w]=null!=k&&"none"!==k){var _=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",w);T++,C[w]=u.getCachedImage(k,_,(function(){c.backgroundTimestamp=Date.now(),t.emitAndNotify("background")}))}}var E=t.pstyle("background-blacken").value,S=t.pstyle("border-width").pfValue,A=t.pstyle("background-opacity").value*g,N=t.pstyle("border-color").value,R=t.pstyle("border-style").value,L=t.pstyle("border-join").value,I=t.pstyle("border-cap").value,M=t.pstyle("border-position").value,O=t.pstyle("border-dash-pattern").pfValue,D=t.pstyle("border-dash-offset").pfValue,P=t.pstyle("border-opacity").value*g,B=t.pstyle("outline-width").pfValue,$=t.pstyle("outline-color").value,z=t.pstyle("outline-style").value,U=t.pstyle("outline-opacity").value*g,G=t.pstyle("outline-offset").value,j=t.pstyle("corner-radius").value;"auto"!==j&&(j=t.pstyle("corner-radius").pfValue);var V=s((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;u.eleFillStyle(e,t,r)}),"setupShapeColor"),W=s((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;u.colorStrokeStyle(e,N[0],N[1],N[2],t)}),"setupBorderColor"),q=s((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;u.colorStrokeStyle(e,$[0],$[1],$[2],t)}),"setupOutlineColor"),H=s((function(e,t,r,n){var i,a=u.nodePathCache=u.nodePathCache||[],o=bt("polygon"===r?r+","+n.join(","):r,""+t,""+e,""+j),s=a[o],l=!1;return null!=s?(i=s,l=!0,h.pathCache=i):(i=new Path2D,a[o]=h.pathCache=i),{path:i,cacheHit:l}}),"getPath"),Y=t.pstyle("shape").strValue,X=t.pstyle("shape-polygon-points").pfValue;if(m){e.translate(d.x,d.y);var K=H(n,i,Y,X);f=K.path,y=K.cacheHit}var Z=s((function(){if(!y){var r=d;m&&(r={x:0,y:0}),u.nodeShapes[u.getNodeShape(t)].draw(f||e,r.x,r.y,n,i,j,h)}m?e.fill(f):e.fill()}),"drawShape"),Q=s((function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=c.backgrounding,a=0,o=0;o<C.length;o++){var s=t.cy().style().getIndexedStyle(t,"background-image-containment","value",o);n&&"over"===s||!n&&"inside"===s?a++:b[o]&&C[o].complete&&!C[o].error&&(a++,u.drawInscribedImage(e,C[o],t,o,r))}c.backgrounding=a!==T,i!==c.backgrounding&&t.updateStyle(!1)}),"drawImages"),J=s((function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;u.hasPie(t)&&(u.drawPie(e,t,a),r&&(m||u.nodeShapes[u.getNodeShape(t)].draw(e,d.x,d.y,n,i,j,h)))}),"drawPie"),ee=s((function(){var t=(E>0?E:-E)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g),r=E>0?0:255;0!==E&&(u.colorFillStyle(e,r,r,r,t),m?e.fill(f):e.fill())}),"darken"),te=s((function(){if(S>0){if(e.lineWidth=S,e.lineCap=I,e.lineJoin=L,e.setLineDash)switch(R){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(O),e.lineDashOffset=D;break;case"solid":case"double":e.setLineDash([])}if("center"!==M){if(e.save(),e.lineWidth*=2,"inside"===M)m?e.clip(f):e.clip();else{var t=new Path2D;t.rect(-n/2-S,-i/2-S,n+2*S,i+2*S),t.addPath(f),e.clip(t,"evenodd")}m?e.stroke(f):e.stroke(),e.restore()}else m?e.stroke(f):e.stroke();if("double"===R){e.lineWidth=S/3;var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",m?e.stroke(f):e.stroke(),e.globalCompositeOperation=r}e.setLineDash&&e.setLineDash([])}}),"drawBorder"),re=s((function(){if(B>0){if(e.lineWidth=B,e.lineCap="butt",e.setLineDash)switch(z){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var r=d;m&&(r={x:0,y:0});var a=u.getNodeShape(t),o=S;"inside"===M&&(o=0),"outside"===M&&(o*=2);var s,l=(n+o+(B+G))/n,c=(i+o+(B+G))/i,h=n*l,f=i*c,p=u.nodeShapes[a].points;if(m)s=H(h,f,a,p).path;if("ellipse"===a)u.drawEllipsePath(s||e,r.x,r.y,h,f);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(a)){var g=0,y=0,v=0;"round-diamond"===a?g=1.4*(o+G+B):"round-heptagon"===a?(g=1.075*(o+G+B),v=-(o/2+G+B)/35):"round-hexagon"===a?g=1.12*(o+G+B):"round-pentagon"===a?(g=1.13*(o+G+B),v=-(o/2+G+B)/15):"round-tag"===a?(g=1.12*(o+G+B),y=.07*(o/2+B+G)):"round-triangle"===a&&(g=(o+G+B)*(Math.PI/2),v=-(o+G/2+B)/Math.PI),0!==g&&(h=n*(l=(n+g)/n),["round-hexagon","round-tag"].includes(a)||(f=i*(c=(i+g)/i)));for(var x=h/2,b=f/2,C=(j="auto"===j?mn(h,f):j)+(o+B+G)/2,T=new Array(p.length/2),w=new Array(p.length/2),k=0;k<p.length/2;k++)T[k]={x:r.x+y+x*p[2*k],y:r.y+v+b*p[2*k+1]};var _,E,A,N,R=T.length;for(E=T[R-1],_=0;_<R;_++)A=T[_%R],N=T[(_+1)%R],w[_]=Wh(E,A,N,C),E=A,A=N;u.drawRoundPolygonPath(s||e,r.x+y,r.y+v,n*l,i*c,p,w)}else if(["roundrectangle","round-rectangle"].includes(a))j="auto"===j?gn(h,f):j,u.drawRoundRectanglePath(s||e,r.x,r.y,h,f,j+(o+B+G)/2);else if(["cutrectangle","cut-rectangle"].includes(a))j="auto"===j?yn():j,u.drawCutRectanglePath(s||e,r.x,r.y,h,f,null,j+(o+B+G)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(a))j="auto"===j?gn(h,f):j,u.drawBottomRoundRectanglePath(s||e,r.x,r.y,h,f,j+(o+B+G)/2);else if("barrel"===a)u.drawBarrelPath(s||e,r.x,r.y,h,f);else if(a.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(a)){p=tn(rn(p,(o+B+G)/n)),u.drawPolygonPath(s||e,r.x,r.y,n,i,p)}else{p=tn(rn(p,-((o+B+G)/n))),u.drawPolygonPath(s||e,r.x,r.y,n,i,p)}if(m?e.stroke(s):e.stroke(),"double"===z){e.lineWidth=o/3;var L=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",m?e.stroke(s):e.stroke(),e.globalCompositeOperation=L}e.setLineDash&&e.setLineDash([])}}),"drawOutline"),ne=s((function(){o&&u.drawNodeOverlay(e,t,d,n,i)}),"drawOverlay"),ie=s((function(){o&&u.drawNodeUnderlay(e,t,d,n,i)}),"drawUnderlay"),ae=s((function(){u.drawElementText(e,t,null,a)}),"drawText");if("yes"===t.pstyle("ghost").value){var oe=t.pstyle("ghost-offset-x").pfValue,se=t.pstyle("ghost-offset-y").pfValue,le=t.pstyle("ghost-opacity").value,ue=le*g;e.translate(oe,se),q(),re(),V(le*A),Z(),Q(ue,!0),W(le*P),te(),J(0!==E||0!==S),Q(ue,!1),ee(ue),e.translate(-oe,-se)}m&&e.translate(-d.x,-d.y),ie(),m&&e.translate(d.x,d.y),q(),re(),V(),Z(),Q(g,!0),W(),te(),J(0!==E||0!==S),Q(g,!1),ee(),m&&e.translate(-d.x,-d.y),ae(),ne(),r&&e.translate(p.x1,p.y1)}}},Wd=s((function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r,n,i,a){if(r.visible()){var o=r.pstyle("".concat(e,"-padding")).pfValue,s=r.pstyle("".concat(e,"-opacity")).value,l=r.pstyle("".concat(e,"-color")).value,u=r.pstyle("".concat(e,"-shape")).value,c=r.pstyle("".concat(e,"-corner-radius")).value;if(s>0){if(n=n||r.position(),null==i||null==a){var h=r.padding();i=r.width()+2*h,a=r.height()+2*h}this.colorFillStyle(t,l[0],l[1],l[2],s),this.nodeShapes[u].draw(t,n.x,n.y,i+2*o,a+2*o,c),t.fill()}}}}),"drawNodeOverlayUnderlay");Vd.drawNodeOverlay=Wd("overlay"),Vd.drawNodeUnderlay=Wd("underlay"),Vd.hasPie=function(e){return(e=e[0])._private.hasPie},Vd.drawPie=function(e,t,r,n){t=t[0],n=n||t.position();var i=t.cy().style(),a=t.pstyle("pie-size"),o=n.x,s=n.y,l=t.width(),u=t.height(),c=Math.min(l,u)/2,h=0;this.usePaths()&&(o=0,s=0),"%"===a.units?c*=a.pfValue:void 0!==a.pfValue&&(c=a.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var f=t.pstyle("pie-"+d+"-background-size").value,p=t.pstyle("pie-"+d+"-background-color").value,g=t.pstyle("pie-"+d+"-background-opacity").value*r,m=f/100;m+h>1&&(m=1-h);var y=1.5*Math.PI+2*Math.PI*h,v=y+2*Math.PI*m;0===f||h>=1||h+m>1||(e.beginPath(),e.moveTo(o,s),e.arc(o,s,c,y,v),e.closePath(),this.colorFillStyle(e,p[0],p[1],p[2],g),e.fill(),h+=m)}};var qd={};qd.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=this.cy.window(),r=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/r},qd.paintCache=function(e){for(var t,r=this.paintCaches=this.paintCaches||[],n=!0,i=0;i<r.length;i++)if((t=r[i]).context===e){n=!1;break}return n&&(t={context:e},r.push(t)),t},qd.createGradientStyleFor=function(e,t,r,n,i){var a,o=this.usePaths(),s=r.pstyle(t+"-gradient-stop-colors").value,l=r.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===n)if(r.isEdge()){var u=r.sourceEndpoint(),c=r.targetEndpoint(),h=r.midpoint(),d=_r(u,h),f=_r(c,h);a=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,f))}else{var p=o?{x:0,y:0}:r.position(),g=r.paddedWidth(),m=r.paddedHeight();a=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(g,m))}else if(r.isEdge()){var y=r.sourceEndpoint(),v=r.targetEndpoint();a=e.createLinearGradient(y.x,y.y,v.x,v.y)}else{var x=o?{x:0,y:0}:r.position(),b=r.paddedWidth()/2,C=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":a=e.createLinearGradient(x.x,x.y-C,x.x,x.y+C);break;case"to-top":a=e.createLinearGradient(x.x,x.y+C,x.x,x.y-C);break;case"to-left":a=e.createLinearGradient(x.x+b,x.y,x.x-b,x.y);break;case"to-right":a=e.createLinearGradient(x.x-b,x.y,x.x+b,x.y);break;case"to-bottom-right":case"to-right-bottom":a=e.createLinearGradient(x.x-b,x.y-C,x.x+b,x.y+C);break;case"to-top-right":case"to-right-top":a=e.createLinearGradient(x.x-b,x.y+C,x.x+b,x.y-C);break;case"to-bottom-left":case"to-left-bottom":a=e.createLinearGradient(x.x+b,x.y-C,x.x-b,x.y+C);break;case"to-top-left":case"to-left-top":a=e.createLinearGradient(x.x+b,x.y+C,x.x-b,x.y-C)}}if(!a)return null;for(var T=l.length===s.length,w=s.length,k=0;k<w;k++)a.addColorStop(T?l[k]:k/(w-1),"rgba("+s[k][0]+","+s[k][1]+","+s[k][2]+","+i+")");return a},qd.gradientFillStyle=function(e,t,r,n){var i=this.createGradientStyleFor(e,"background",t,r,n);if(!i)return null;e.fillStyle=i},qd.colorFillStyle=function(e,t,r,n,i){e.fillStyle="rgba("+t+","+r+","+n+","+i+")"},qd.eleFillStyle=function(e,t,r){var n=t.pstyle("background-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientFillStyle(e,t,n,r);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],r)}},qd.gradientStrokeStyle=function(e,t,r,n){var i=this.createGradientStyleFor(e,"line",t,r,n);if(!i)return null;e.strokeStyle=i},qd.colorStrokeStyle=function(e,t,r,n,i){e.strokeStyle="rgba("+t+","+r+","+n+","+i+")"},qd.eleStrokeStyle=function(e,t,r){var n=t.pstyle("line-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientStrokeStyle(e,t,n,r);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],r)}},qd.matchCanvasSize=function(e){var t=this,r=t.data,n=t.findContainerClientCoords(),i=n[2],a=n[3],o=t.getPixelRatio(),s=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l,u=i*o,c=a*o;if(u!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var h=r.canvasContainer;h.style.width=i+"px",h.style.height=a+"px";for(var d=0;d<t.CANVAS_LAYERS;d++)(l=r.canvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=a+"px";for(d=0;d<t.BUFFER_COUNT;d++)(l=r.bufferCanvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=a+"px";t.textureMult=1,o<=1&&(l=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,l.width=u*t.textureMult,l.height=c*t.textureMult),t.canvasWidth=u,t.canvasHeight=c}},qd.renderTo=function(e,t,r,n){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})},qd.render=function(e){var t=(e=e||Bt()).forcedContext,r=e.drawAllLayers,n=e.drawOnlyNodeLayer,i=e.forcedZoom,a=e.forcedPan,o=this,l=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,u=o.cy,c=o.data,h=c.canvasNeedsRedraw,d=o.textureOnViewport&&!t&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),f=void 0!==e.motionBlur?e.motionBlur:o.motionBlur,p=o.motionBlurPxRatio,g=u.hasCompoundNodes(),m=o.hoverData.draggingEles,y=!(!o.hoverData.selecting&&!o.touchData.selecting),v=f=f&&!t&&o.motionBlurEnabled&&!y;t||(o.prevPxRatio!==l&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=l),!t&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),f&&(null==o.mbFrames&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(v=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!d&&(h[o.NODE]=!0,h[o.SELECT_BOX]=!0);var x=u.style(),b=u.zoom(),C=void 0!==i?i:b,T=u.pan(),w={x:T.x,y:T.y},k={zoom:b,pan:{x:T.x,y:T.y}},_=o.prevViewport;!(void 0===_||k.zoom!==_.zoom||k.pan.x!==_.pan.x||k.pan.y!==_.pan.y)&&!(m&&!g)&&(o.motionBlurPxRatio=1),a&&(w=a),C*=l,w.x*=l,w.y*=l;var E=o.getCachedZSortedEles();function S(e,t,r,n,i){var a=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",o.colorFillStyle(e,255,255,255,o.motionBlurTransparency),e.fillRect(t,r,n,i),e.globalCompositeOperation=a}function A(e,n){var s,l,u,h;o.clearingMotionBlur||e!==c.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]&&e!==c.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]?(s=w,l=C,u=o.canvasWidth,h=o.canvasHeight):(s={x:T.x*p,y:T.y*p},l=b*p,u=o.canvasWidth*p,h=o.canvasHeight*p),e.setTransform(1,0,0,1,0,0),"motionBlur"===n?S(e,0,0,u,h):!t&&(void 0===n||n)&&e.clearRect(0,0,u,h),r||(e.translate(s.x,s.y),e.scale(l,l)),a&&e.translate(a.x,a.y),i&&e.scale(i,i)}if(s(S,"mbclear"),s(A,"setContextTransform"),d||(o.textureDrawLastFrame=!1),d){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=u.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var N=o.data.bufferContexts[o.TEXTURE_BUFFER];N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:N,drawOnlyNodeLayer:!0,forcedPxRatio:l*o.textureMult}),(k=o.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:o.canvasWidth,height:o.canvasHeight}).mpan={x:(0-k.pan.x)/k.zoom,y:(0-k.pan.y)/k.zoom}}h[o.DRAG]=!1,h[o.NODE]=!1;var R=c.contexts[o.NODE],L=o.textureCache.texture;k=o.textureCache.viewport;R.setTransform(1,0,0,1,0,0),f?S(R,0,0,k.width,k.height):R.clearRect(0,0,k.width,k.height);var I=x.core("outside-texture-bg-color").value,M=x.core("outside-texture-bg-opacity").value;o.colorFillStyle(R,I[0],I[1],I[2],M),R.fillRect(0,0,k.width,k.height);b=u.zoom();A(R,!1),R.clearRect(k.mpan.x,k.mpan.y,k.width/k.zoom/l,k.height/k.zoom/l),R.drawImage(L,k.mpan.x,k.mpan.y,k.width/k.zoom/l,k.height/k.zoom/l)}else o.textureOnViewport&&!t&&(o.textureCache=null);var O=u.extent(),D=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),P=o.hideEdgesOnViewport&&D,F=[];if(F[o.NODE]=!h[o.NODE]&&f&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,F[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),F[o.DRAG]=!h[o.DRAG]&&f&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,F[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),h[o.NODE]||r||n||F[o.NODE]){var B=f&&!F[o.NODE]&&1!==p;A(R=t||(B?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:c.contexts[o.NODE]),f&&!B?"motionBlur":void 0),P?o.drawCachedNodes(R,E.nondrag,l,O):o.drawLayeredElements(R,E.nondrag,l,O),o.debug&&o.drawDebugPoints(R,E.nondrag),!r&&!f&&(h[o.NODE]=!1)}if(!n&&(h[o.DRAG]||r||F[o.DRAG])){B=f&&!F[o.DRAG]&&1!==p;A(R=t||(B?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:c.contexts[o.DRAG]),f&&!B?"motionBlur":void 0),P?o.drawCachedNodes(R,E.drag,l,O):o.drawCachedElements(R,E.drag,l,O),o.debug&&o.drawDebugPoints(R,E.drag),!r&&!f&&(h[o.DRAG]=!1)}if(o.showFps||!n&&h[o.SELECT_BOX]&&!r){if(A(R=t||c.contexts[o.SELECT_BOX]),1==o.selection[4]&&(o.hoverData.selecting||o.touchData.selecting)){b=o.cy.zoom();var $=x.core("selection-box-border-width").value/b;R.lineWidth=$,R.fillStyle="rgba("+x.core("selection-box-color").value[0]+","+x.core("selection-box-color").value[1]+","+x.core("selection-box-color").value[2]+","+x.core("selection-box-opacity").value+")",R.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),$>0&&(R.strokeStyle="rgba("+x.core("selection-box-border-color").value[0]+","+x.core("selection-box-border-color").value[1]+","+x.core("selection-box-border-color").value[2]+","+x.core("selection-box-opacity").value+")",R.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(c.bgActivePosistion&&!o.hoverData.selecting){b=o.cy.zoom();var z=c.bgActivePosistion;R.fillStyle="rgba("+x.core("active-bg-color").value[0]+","+x.core("active-bg-color").value[1]+","+x.core("active-bg-color").value[2]+","+x.core("active-bg-opacity").value+")",R.beginPath(),R.arc(z.x,z.y,x.core("active-bg-size").pfValue/b,0,2*Math.PI),R.fill()}var U=o.lastRedrawTime;if(o.showFps&&U){U=Math.round(U);var G=Math.round(1e3/U);R.setTransform(1,0,0,1,0,0),R.fillStyle="rgba(255, 0, 0, 0.75)",R.strokeStyle="rgba(255, 0, 0, 0.75)",R.lineWidth=1,R.fillText("1 frame = "+U+" ms = "+G+" fps",0,20);R.strokeRect(0,30,250,20),R.fillRect(0,30,250*Math.min(G/60,1),20)}r||(h[o.SELECT_BOX]=!1)}if(f&&1!==p){var j=c.contexts[o.NODE],V=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],W=c.contexts[o.DRAG],q=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],H=s((function(e,t,r){e.setTransform(1,0,0,1,0,0),r||!v?e.clearRect(0,0,o.canvasWidth,o.canvasHeight):S(e,0,0,o.canvasWidth,o.canvasHeight);var n=p;e.drawImage(t,0,0,o.canvasWidth*n,o.canvasHeight*n,0,0,o.canvasWidth,o.canvasHeight)}),"drawMotionBlur");(h[o.NODE]||F[o.NODE])&&(H(j,V,F[o.NODE]),h[o.NODE]=!1),(h[o.DRAG]||F[o.DRAG])&&(H(W,q,F[o.DRAG]),h[o.DRAG]=!1)}o.prevViewport=k,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),f&&(o.motionBlurTimeout=setTimeout((function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!d,o.mbFrames=0,h[o.NODE]=!0,h[o.DRAG]=!0,o.redraw()}),100)),t||u.emit("render")};var Hd,Yd={drawPolygonPath:function(e,t,r,n,i,a){var o=n/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*a[0],r+s*a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(t+o*a[2*l],r+s*a[2*l+1]);e.closePath()},drawRoundPolygonPath:function(e,t,r,n,i,a,o){o.forEach((function(t){return Vh(e,t)})),e.closePath()},drawRoundRectanglePath:function(e,t,r,n,i,a){var o=n/2,s=i/2,l="auto"===a?gn(n,i):Math.min(a,s,o);e.beginPath&&e.beginPath(),e.moveTo(t,r-s),e.arcTo(t+o,r-s,t+o,r,l),e.arcTo(t+o,r+s,t,r+s,l),e.arcTo(t-o,r+s,t-o,r,l),e.arcTo(t-o,r-s,t,r-s,l),e.lineTo(t,r-s),e.closePath()},drawBottomRoundRectanglePath:function(e,t,r,n,i,a){var o=n/2,s=i/2,l="auto"===a?gn(n,i):a;e.beginPath&&e.beginPath(),e.moveTo(t,r-s),e.lineTo(t+o,r-s),e.lineTo(t+o,r),e.arcTo(t+o,r+s,t,r+s,l),e.arcTo(t-o,r+s,t-o,r,l),e.lineTo(t-o,r-s),e.lineTo(t,r-s),e.closePath()},drawCutRectanglePath:function(e,t,r,n,i,a,o){var s=n/2,l=i/2,u="auto"===o?yn():o;e.beginPath&&e.beginPath(),e.moveTo(t-s+u,r-l),e.lineTo(t+s-u,r-l),e.lineTo(t+s,r-l+u),e.lineTo(t+s,r+l-u),e.lineTo(t+s-u,r+l),e.lineTo(t-s+u,r+l),e.lineTo(t-s,r+l-u),e.lineTo(t-s,r-l+u),e.closePath()},drawBarrelPath:function(e,t,r,n,i){var a=n/2,o=i/2,s=t-a,l=t+a,u=r-o,c=r+o,h=xn(n,i),d=h.widthOffset,f=h.heightOffset,p=h.ctrlPtOffsetPct*d;e.beginPath&&e.beginPath(),e.moveTo(s,u+f),e.lineTo(s,c-f),e.quadraticCurveTo(s+p,c,s+d,c),e.lineTo(l-d,c),e.quadraticCurveTo(l-p,c,l,c-f),e.lineTo(l,u+f),e.quadraticCurveTo(l-p,u,l-d,u),e.lineTo(s+d,u),e.quadraticCurveTo(s+p,u,s,u+f),e.closePath()}},Xd=Math.sin(0),Kd=Math.cos(0),Zd={},Qd={},Jd=Math.PI/40;for(Hd=0*Math.PI;Hd<2*Math.PI;Hd+=Jd)Zd[Hd]=Math.sin(Hd),Qd[Hd]=Math.cos(Hd);Yd.drawEllipsePath=function(e,t,r,n,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,n/2,i/2,0,0,2*Math.PI);else for(var a,o,s=n/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=Jd)a=t-s*Zd[u]*Xd+s*Qd[u]*Kd,o=r+l*Qd[u]*Xd+l*Zd[u]*Kd,0===u?e.moveTo(a,o):e.lineTo(a,o);e.closePath()};var ef={};function tf(e,t){for(var r=atob(e),n=new ArrayBuffer(r.length),i=new Uint8Array(n),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return new Blob([n],{type:t})}function rf(e){var t=e.indexOf(",");return e.substr(t+1)}function nf(e,t,r){var n=s((function(){return t.toDataURL(r,e.quality)}),"getB64Uri");switch(e.output){case"blob-promise":return new Wi((function(n,i){try{t.toBlob((function(e){null!=e?n(e):i(new Error("`canvas.toBlob()` sent a null value in its callback"))}),r,e.quality)}catch(e){i(e)}}));case"blob":return tf(rf(n()),r);case"base64":return rf(n());default:return n()}}ef.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},ef.bufferCanvasImage=function(e){var t=this.cy,r=t.mutableElements().boundingBox(),n=this.findContainerClientCoords(),i=e.full?Math.ceil(r.w):n[2],a=e.full?Math.ceil(r.h):n[3],o=F(e.maxWidth)||F(e.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==e.scale)i*=e.scale,a*=e.scale,l=e.scale;else if(o){var u=1/0,c=1/0;F(e.maxWidth)&&(u=l*e.maxWidth/i),F(e.maxHeight)&&(c=l*e.maxHeight/a),i*=l=Math.min(u,c),a*=l}o||(i*=s,a*=s,l*=s);var h=document.createElement("canvas");h.width=i,h.height=a,h.style.width=i+"px",h.style.height=a+"px";var d=h.getContext("2d");if(i>0&&a>0){d.clearRect(0,0,i,a),d.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(e.full)d.translate(-r.x1*l,-r.y1*l),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(r.x1*l,r.y1*l);else{var p=t.pan(),g={x:p.x*l,y:p.y*l};l*=t.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}e.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=e.bg,d.rect(0,0,i,a),d.fill())}return h},s(tf,"b64ToBlob"),s(rf,"b64UriToB64"),s(nf,"output"),ef.png=function(e){return nf(e,this.bufferCanvasImage(e),"image/png")},ef.jpg=function(e){return nf(e,this.bufferCanvasImage(e),"image/jpeg")};var af={nodeShapeImpl:function(e,t,r,n,i,a,o,s){switch(e){case"ellipse":return this.drawEllipsePath(t,r,n,i,a);case"polygon":return this.drawPolygonPath(t,r,n,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(t,r,n,i,a,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,n,i,a,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,n,i,a,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,n,i,a,s);case"barrel":return this.drawBarrelPath(t,r,n,i,a)}}},of=lf,sf=lf.prototype;function lf(e){var t=this,r=t.cy.window().document;t.data={canvases:new Array(sf.CANVAS_LAYERS),contexts:new Array(sf.CANVAS_LAYERS),canvasNeedsRedraw:new Array(sf.CANVAS_LAYERS),bufferCanvases:new Array(sf.BUFFER_COUNT),bufferContexts:new Array(sf.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";t.data.canvasContainer=r.createElement("div");var a=t.data.canvasContainer.style;t.data.canvasContainer.style[n]=i,a.position="relative",a.zIndex="0",a.overflow="hidden";var o=e.cy.container();o.appendChild(t.data.canvasContainer),o.style[n]=i;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};K()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var u=0;u<sf.CANVAS_LAYERS;u++){var c=t.data.canvases[u]=r.createElement("canvas");t.data.contexts[u]=c.getContext("2d"),Object.keys(l).forEach((function(e){c.style[e]=l[e]})),c.style.position="absolute",c.setAttribute("data-id","layer"+u),c.style.zIndex=String(sf.CANVAS_LAYERS-u),t.data.canvasContainer.appendChild(c),t.data.canvasNeedsRedraw[u]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[sf.NODE].setAttribute("data-id","layer"+sf.NODE+"-node"),t.data.canvases[sf.SELECT_BOX].setAttribute("data-id","layer"+sf.SELECT_BOX+"-selectbox"),t.data.canvases[sf.DRAG].setAttribute("data-id","layer"+sf.DRAG+"-drag");for(u=0;u<sf.BUFFER_COUNT;u++)t.data.bufferCanvases[u]=r.createElement("canvas"),t.data.bufferContexts[u]=t.data.bufferCanvases[u].getContext("2d"),t.data.bufferCanvases[u].style.position="absolute",t.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),t.data.bufferCanvases[u].style.zIndex=String(-u-1),t.data.bufferCanvases[u].style.visibility="hidden";t.pathsEnabled=!0;var h=Ir(),d=s((function(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}),"getBoxCenter"),f=s((function(e){return{x:-e.w/2,y:-e.h/2}}),"getCenterOffset"),p=s((function(e){var t=e[0]._private;return!(t.oldBackgroundTimestamp===t.backgroundTimestamp)}),"backgroundTimestampHasChanged"),g=s((function(e){return e[0]._private.nodeKey}),"getStyleKey"),m=s((function(e){return e[0]._private.labelStyleKey}),"getLabelKey"),y=s((function(e){return e[0]._private.sourceLabelStyleKey}),"getSourceLabelKey"),v=s((function(e){return e[0]._private.targetLabelStyleKey}),"getTargetLabelKey"),x=s((function(e,r,n,i,a){return t.drawElement(e,r,n,!1,!1,a)}),"drawElement"),b=s((function(e,r,n,i,a){return t.drawElementText(e,r,n,i,"main",a)}),"drawLabel"),C=s((function(e,r,n,i,a){return t.drawElementText(e,r,n,i,"source",a)}),"drawSourceLabel"),T=s((function(e,r,n,i,a){return t.drawElementText(e,r,n,i,"target",a)}),"drawTargetLabel"),w=s((function(e){return e.boundingBox(),e[0]._private.bodyBounds}),"getElementBox"),k=s((function(e){return e.boundingBox(),e[0]._private.labelBounds.main||h}),"getLabelBox"),_=s((function(e){return e.boundingBox(),e[0]._private.labelBounds.source||h}),"getSourceLabelBox"),E=s((function(e){return e.boundingBox(),e[0]._private.labelBounds.target||h}),"getTargetLabelBox"),S=s((function(e,t){return t}),"isLabelVisibleAtScale"),A=s((function(e){return d(w(e))}),"getElementRotationPoint"),N=s((function(e,t,r){var n=e?e+"-":"";return{x:t.x+r.pstyle(n+"text-margin-x").pfValue,y:t.y+r.pstyle(n+"text-margin-y").pfValue}}),"addTextMargin"),R=s((function(e,t,r){var n=e[0]._private.rscratch;return{x:n[t],y:n[r]}}),"getRsPt"),L=s((function(e){return N("",R(e,"labelX","labelY"),e)}),"getLabelRotationPoint"),I=s((function(e){return N("source",R(e,"sourceLabelX","sourceLabelY"),e)}),"getSourceLabelRotationPoint"),M=s((function(e){return N("target",R(e,"targetLabelX","targetLabelY"),e)}),"getTargetLabelRotationPoint"),O=s((function(e){return f(w(e))}),"getElementRotationOffset"),D=s((function(e){return f(_(e))}),"getSourceLabelRotationOffset"),P=s((function(e){return f(E(e))}),"getTargetLabelRotationOffset"),F=s((function(e){var t=k(e),r=f(k(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":r.x=-t.w;break;case"right":r.x=0}switch(e.pstyle("text-valign").value){case"top":r.y=-t.h;break;case"bottom":r.y=0}}return r}),"getLabelRotationOffset"),B=t.data.eleTxrCache=new xd(t,{getKey:g,doesEleInvalidateKey:p,drawElement:x,getBoundingBox:w,getRotationPoint:A,getRotationOffset:O,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),$=t.data.lblTxrCache=new xd(t,{getKey:m,drawElement:b,getBoundingBox:k,getRotationPoint:L,getRotationOffset:F,isVisible:S}),z=t.data.slbTxrCache=new xd(t,{getKey:y,drawElement:C,getBoundingBox:_,getRotationPoint:I,getRotationOffset:D,isVisible:S}),U=t.data.tlbTxrCache=new xd(t,{getKey:v,drawElement:T,getBoundingBox:E,getRotationPoint:M,getRotationOffset:P,isVisible:S}),G=t.data.lyrTxrCache=new Cd(t);t.onUpdateEleCalcs(s((function(e,t){B.invalidateElements(t),$.invalidateElements(t),z.invalidateElements(t),U.invalidateElements(t),G.invalidateElements(t);for(var r=0;r<t.length;r++){var n=t[r]._private;n.oldBackgroundTimestamp=n.backgroundTimestamp}}),"invalidateTextureCaches"));var j=s((function(e){for(var t=0;t<e.length;t++)G.enqueueElementRefinement(e[t].ele)}),"refineInLayers");B.onDequeue(j),$.onDequeue(j),z.onDequeue(j),U.onDequeue(j)}sf.CANVAS_LAYERS=3,sf.SELECT_BOX=0,sf.DRAG=1,sf.NODE=2,sf.BUFFER_COUNT=3,sf.TEXTURE_BUFFER=0,sf.MOTIONBLUR_BUFFER_NODE=1,sf.MOTIONBLUR_BUFFER_DRAG=2,s(lf,"CanvasRenderer"),sf.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[sf.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[sf.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[sf.SELECT_BOX]=t}};var uf=typeof Path2D<"u";sf.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},sf.usePaths=function(){return uf&&this.pathsEnabled},sf.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},sf.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},sf.makeOffscreenCanvas=function(e,t){var r;"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":f(OffscreenCanvas))?r=new OffscreenCanvas(e,t):((r=this.cy.window().document.createElement("canvas")).width=e,r.height=t);return r},[Ed,Id,$d,Ud,Gd,Vd,qd,Yd,ef,af].forEach((function(e){ue(sf,e)}));var cf=[{type:"layout",extensions:gh},{type:"renderer",extensions:[{name:"null",impl:mh},{name:"base",impl:dd},{name:"canvas",impl:of}]}],hf={},df={};function ff(e,t,r){var n=r,i=s((function(r){It("Can not register `"+t+"` for `"+e+"` since `"+r+"` already exists in the prototype and can not be overridden")}),"overrideErr");if("core"===e){if(Ac.prototype[t])return i(t);Ac.prototype[t]=r}else if("collection"===e){if(Vu.prototype[t])return i(t);Vu.prototype[t]=r}else if("layout"===e){for(var a=s((function(e){this.options=e,r.call(this,e),D(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()}),"Layout"),o=a.prototype=Object.create(r.prototype),l=[],u=0;u<l.length;u++){var c=l[u];o[c]=o[c]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var h=r.prototype.stop;o.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var r=0;r<t.length;r++)t[r].stop()}return h?h.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var d=s((function(e){return e._private.cy}),"getCy"),f={addEventFields:s((function(e,t){t.layout=e,t.cy=d(e),t.target=e}),"addEventFields"),bubble:s((function(){return!0}),"bubble"),parent:s((function(e){return d(e)}),"parent")};ue(o,{createEmitter:s((function(){return this._private.emitter=new su(f,this),this}),"createEmitter"),emitter:s((function(){return this._private.emitter}),"emitter"),on:s((function(e,t){return this.emitter().on(e,t),this}),"on"),one:s((function(e,t){return this.emitter().one(e,t),this}),"one"),once:s((function(e,t){return this.emitter().one(e,t),this}),"once"),removeListener:s((function(e,t){return this.emitter().removeListener(e,t),this}),"removeListener"),removeAllListeners:s((function(){return this.emitter().removeAllListeners(),this}),"removeAllListeners"),emit:s((function(e,t){return this.emitter().emit(e,t),this}),"emit")}),ss.eventAliasesOn(o),n=a}else if("renderer"===e&&"null"!==t&&"base"!==t){var p=pf("renderer","base"),g=p.prototype,m=r,y=r.prototype,v=s((function(){p.apply(this,arguments),m.apply(this,arguments)}),"Renderer"),x=v.prototype;for(var b in g){var C=g[b];if(null!=y[b])return i(b);x[b]=C}for(var T in y)x[T]=y[T];g.clientFunctions.forEach((function(e){x[e]=x[e]||function(){Rt("Renderer does not implement `renderer."+e+"()` on its prototype")}})),n=v}else if("__proto__"===e||"constructor"===e||"prototype"===e)return Rt(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return me({map:hf,keys:[e,t],value:n})}function pf(e,t){return ye({map:hf,keys:[e,t]})}function gf(e,t,r,n,i){return me({map:df,keys:[e,t,r,n],value:i})}function mf(e,t,r,n){return ye({map:df,keys:[e,t,r,n]})}s(ff,"setExtension"),s(pf,"getExtension"),s(gf,"setModule"),s(mf,"getModule");var yf=s((function(){return 2===arguments.length?pf.apply(null,arguments):3===arguments.length?ff.apply(null,arguments):4===arguments.length?mf.apply(null,arguments):5===arguments.length?gf.apply(null,arguments):void Rt("Invalid extension access syntax")}),"extension");Ac.prototype.extension=yf,cf.forEach((function(e){e.extensions.forEach((function(t){ff(e.type,t.name,t.impl)}))}));var vf=s((function e(){if(!(this instanceof e))return new e;this.length=0}),"Stylesheet"),xf=vf.prototype;xf.instanceString=function(){return"stylesheet"},xf.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},xf.css=function(e,t){var r=this.length-1;if(I(e))this[r].properties.push({name:e,value:t});else if(D(e))for(var n=e,i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],s=n[o];if(null!=s){var l=wc.properties[o]||wc.properties[J(o)];if(null!=l){var u=l.name,c=s;this[r].properties.push({name:u,value:c})}}}return this},xf.style=xf.css,xf.generateStyle=function(e){var t=new wc(e);return this.appendToStyle(t)},xf.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],n=r.selector,i=r.properties;e.selector(n);for(var a=0;a<i.length;a++){var o=i[a];e.css(o.name,o.value)}}return e};var bf=s((function(e){return void 0===e&&(e={}),D(e)?new Ac(e):I(e)?yf.apply(yf,arguments):void 0}),"cytoscape");bf.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(bf),e.apply(null,t),this},bf.warnings=function(e){return Lt(e)},bf.version="3.30.2",bf.stylesheet=bf.Stylesheet=vf;
/*! Bundled license information:

cytoscape/dist/cytoscape.esm.mjs:
  (*!
  Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
  Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
  Licensed under The MIT License (http://opensource.org/licenses/MIT)
  *)
  (*!
  Event object based on jQuery events, MIT license
  
  https://jquery.org/license/
  https://tldrlegal.com/license/mit-license
  https://github.com/jquery/jquery/blob/master/src/event.js
  *)
  (*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
  (*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
*/
var Cf=class{constructor(e){this.init=e,this.records=this.init()}static{s(this,"ImperativeState")}reset(){this.records=this.init()}};function Tf(e,t){e.accDescr&&t.setAccDescription?.(e.accDescr),e.accTitle&&t.setAccTitle?.(e.accTitle),e.title&&t.setDiagramTitle?.(e.title)}function wf(){throw new Error("setTimeout has not been defined")}function kf(){throw new Error("clearTimeout has not been defined")}s(Tf,"populateCommonDb");var _f=wf,Ef=kf;function Sf(e){if(_f===setTimeout)return setTimeout(e,0);if((_f===wf||!_f)&&setTimeout)return _f=setTimeout,setTimeout(e,0);try{return _f(e,0)}catch(t){try{return _f.call(null,e,0)}catch(t){return _f.call(this,e,0)}}}"function"==typeof e.setTimeout&&(_f=setTimeout),"function"==typeof e.clearTimeout&&(Ef=clearTimeout);var Af,Nf=[],Rf=!1,Lf=-1;function If(){Rf&&Af&&(Rf=!1,Af.length?Nf=Af.concat(Nf):Lf=-1,Nf.length&&Mf())}function Mf(){if(!Rf){var e=Sf(If);Rf=!0;for(var t=Nf.length;t;){for(Af=Nf,Nf=[];++Lf<t;)Af&&Af[Lf].run();Lf=-1,t=Nf.length}Af=null,Rf=!1,function(e){if(Ef===clearTimeout)return clearTimeout(e);if((Ef===kf||!Ef)&&clearTimeout)return Ef=clearTimeout,clearTimeout(e);try{return Ef(e)}catch(t){try{return Ef.call(null,e)}catch(t){return Ef.call(this,e)}}}(e)}}function Of(e,t){this.fun=e,this.array=t}Of.prototype.run=function(){this.fun.apply(null,this.array)};function Df(){}var Pf=Df,Ff=Df,Bf=Df,$f=Df,zf=Df,Uf=Df,Gf=Df;var jf=e.performance||{},Vf=jf.now||jf.mozNow||jf.msNow||jf.oNow||jf.webkitNow||function(){return(new Date).getTime()};var Wf=new Date;var qf={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Nf.push(new Of(e,t)),1!==Nf.length||Rf||Sf(Mf)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Pf,addListener:Ff,once:Bf,off:$f,removeListener:zf,removeAllListeners:Uf,emit:Gf,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Vf.call(jf),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Wf)/1e3}},Hf="object"==typeof e&&e&&e.Object===Object&&e,Yf="object"==typeof self&&self&&self.Object===Object&&self,Xf=Hf||Yf||Function("return this")(),Kf=Xf.Symbol,Zf=Object.prototype,Qf=Zf.hasOwnProperty,Jf=Zf.toString,ep=Kf?Kf.toStringTag:void 0;function tp(e){var t=Qf.call(e,ep),r=e[ep];try{e[ep]=void 0;var n=!0}catch{}var i=Jf.call(e);return n&&(t?e[ep]=r:delete e[ep]),i}s(tp,"getRawTag");var rp=tp,np=Object.prototype.toString;function ip(e){return np.call(e)}s(ip,"objectToString");var ap=ip,op=Kf?Kf.toStringTag:void 0;function sp(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":op&&op in Object(e)?rp(e):ap(e)}s(sp,"baseGetTag");var lp=sp;function up(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}s(up,"isObject");var cp=up;function hp(e){if(!cp(e))return!1;var t=lp(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}s(hp,"isFunction");var dp,fp=hp,pp=Xf["__core-js_shared__"],gp=(dp=/[^.]+$/.exec(pp&&pp.keys&&pp.keys.IE_PROTO||""))?"Symbol(src)_1."+dp:"";function mp(e){return!!gp&&gp in e}s(mp,"isMasked");var yp=mp,vp=Function.prototype.toString;function xp(e){if(null!=e){try{return vp.call(e)}catch{}try{return e+""}catch{}}return""}s(xp,"toSource");var bp=xp,Cp=/^\[object .+?Constructor\]$/,Tp=Function.prototype,wp=Object.prototype,kp=Tp.toString,_p=wp.hasOwnProperty,Ep=RegExp("^"+kp.call(_p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Sp(e){return!(!cp(e)||yp(e))&&(fp(e)?Ep:Cp).test(bp(e))}s(Sp,"baseIsNative");var Ap=Sp;function Np(e,t){return e?.[t]}s(Np,"getValue");var Rp=Np;function Lp(e,t){var r=Rp(e,t);return Ap(r)?r:void 0}s(Lp,"getNative");var Ip=Lp,Mp=Ip(Object,"create");function Op(){this.__data__=Mp?Mp(null):{},this.size=0}s(Op,"hashClear");var Dp=Op;function Pp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}s(Pp,"hashDelete");var Fp=Pp,Bp=Object.prototype.hasOwnProperty;function $p(e){var t=this.__data__;if(Mp){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Bp.call(t,e)?t[e]:void 0}s($p,"hashGet");var zp=$p,Up=Object.prototype.hasOwnProperty;function Gp(e){var t=this.__data__;return Mp?void 0!==t[e]:Up.call(t,e)}s(Gp,"hashHas");var jp=Gp;function Vp(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Mp&&void 0===t?"__lodash_hash_undefined__":t,this}s(Vp,"hashSet");var Wp=Vp;function qp(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(qp,"Hash"),qp.prototype.clear=Dp,qp.prototype.delete=Fp,qp.prototype.get=zp,qp.prototype.has=jp,qp.prototype.set=Wp;var Hp=qp;function Yp(){this.__data__=[],this.size=0}s(Yp,"listCacheClear");var Xp=Yp;function Kp(e,t){return e===t||e!=e&&t!=t}s(Kp,"eq");var Zp=Kp;function Qp(e,t){for(var r=e.length;r--;)if(Zp(e[r][0],t))return r;return-1}s(Qp,"assocIndexOf");var Jp=Qp,eg=Array.prototype.splice;function tg(e){var t=this.__data__,r=Jp(t,e);return!(r<0)&&(r==t.length-1?t.pop():eg.call(t,r,1),--this.size,!0)}s(tg,"listCacheDelete");var rg=tg;function ng(e){var t=this.__data__,r=Jp(t,e);return r<0?void 0:t[r][1]}s(ng,"listCacheGet");var ig=ng;function ag(e){return Jp(this.__data__,e)>-1}s(ag,"listCacheHas");var og=ag;function sg(e,t){var r=this.__data__,n=Jp(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}s(sg,"listCacheSet");var lg=sg;function ug(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(ug,"ListCache"),ug.prototype.clear=Xp,ug.prototype.delete=rg,ug.prototype.get=ig,ug.prototype.has=og,ug.prototype.set=lg;var cg=ug,hg=Ip(Xf,"Map");function dg(){this.size=0,this.__data__={hash:new Hp,map:new(hg||cg),string:new Hp}}s(dg,"mapCacheClear");var fg=dg;function pg(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}s(pg,"isKeyable");var gg=pg;function mg(e,t){var r=e.__data__;return gg(t)?r["string"==typeof t?"string":"hash"]:r.map}s(mg,"getMapData");var yg=mg;function vg(e){var t=yg(this,e).delete(e);return this.size-=t?1:0,t}s(vg,"mapCacheDelete");var xg=vg;function bg(e){return yg(this,e).get(e)}s(bg,"mapCacheGet");var Cg=bg;function Tg(e){return yg(this,e).has(e)}s(Tg,"mapCacheHas");var wg=Tg;function kg(e,t){var r=yg(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}s(kg,"mapCacheSet");var _g=kg;function Eg(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(Eg,"MapCache"),Eg.prototype.clear=fg,Eg.prototype.delete=xg,Eg.prototype.get=Cg,Eg.prototype.has=wg,Eg.prototype.set=_g;var Sg=Eg;function Ag(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=s((function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o}),"memoized");return r.cache=new(Ag.Cache||Sg),r}s(Ag,"memoize"),Ag.Cache=Sg;var Ng=Ag;function Rg(e){return function(){return e}}s(Rg,"constant");var Lg=Rg;function Ig(){this.__data__=new cg,this.size=0}s(Ig,"stackClear");var Mg=Ig;function Og(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}s(Og,"stackDelete");var Dg=Og;function Pg(e){return this.__data__.get(e)}s(Pg,"stackGet");var Fg=Pg;function Bg(e){return this.__data__.has(e)}s(Bg,"stackHas");var $g=Bg;function zg(e,t){var r=this.__data__;if(r instanceof cg){var n=r.__data__;if(!hg||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Sg(n)}return r.set(e,t),this.size=r.size,this}s(zg,"stackSet");var Ug=zg;function Gg(e){var t=this.__data__=new cg(e);this.size=t.size}s(Gg,"Stack"),Gg.prototype.clear=Mg,Gg.prototype.delete=Dg,Gg.prototype.get=Fg,Gg.prototype.has=$g,Gg.prototype.set=Ug;var jg=Gg,Vg=function(){try{var e=Ip(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Wg=Vg;function qg(e,t,r){"__proto__"==t&&Wg?Wg(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}s(qg,"baseAssignValue");var Hg=qg;function Yg(e,t,r){(void 0!==r&&!Zp(e[t],r)||void 0===r&&!(t in e))&&Hg(e,t,r)}s(Yg,"assignMergeValue");var Xg=Yg;function Kg(e){return function(t,r,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===r(a[l],l,a))break}return t}}s(Kg,"createBaseFor");var Zg=Kg(),Qg="object"==typeof exports&&exports&&!exports.nodeType&&exports,Jg=Qg&&"object"==typeof module&&module&&!module.nodeType&&module,em=Jg&&Jg.exports===Qg?Xf.Buffer:void 0,tm=em?em.allocUnsafe:void 0;function rm(e,t){if(t)return e.slice();var r=e.length,n=tm?tm(r):new e.constructor(r);return e.copy(n),n}s(rm,"cloneBuffer");var nm=rm,im=Xf.Uint8Array;function am(e){var t=new e.constructor(e.byteLength);return new im(t).set(new im(e)),t}s(am,"cloneArrayBuffer");var om=am;function sm(e,t){var r=t?om(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}s(sm,"cloneTypedArray");var lm=sm;function um(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}s(um,"copyArray");var cm=um,hm=Object.create,dm=function(){function e(){}return s(e,"object"),function(t){if(!cp(t))return{};if(hm)return hm(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),fm=dm;function pm(e,t){return function(r){return e(t(r))}}s(pm,"overArg");var gm=pm,mm=gm(Object.getPrototypeOf,Object),ym=Object.prototype;function vm(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ym)}s(vm,"isPrototype");var xm=vm;function bm(e){return"function"!=typeof e.constructor||xm(e)?{}:fm(mm(e))}s(bm,"initCloneObject");var Cm=bm;function Tm(e){return null!=e&&"object"==typeof e}s(Tm,"isObjectLike");var wm=Tm;function km(e){return wm(e)&&"[object Arguments]"==lp(e)}s(km,"baseIsArguments");var _m=km,Em=Object.prototype,Sm=Em.hasOwnProperty,Am=Em.propertyIsEnumerable,Nm=_m(function(){return arguments}())?_m:function(e){return wm(e)&&Sm.call(e,"callee")&&!Am.call(e,"callee")},Rm=Nm,Lm=Array.isArray;function Im(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}s(Im,"isLength");var Mm=Im;function Om(e){return null!=e&&Mm(e.length)&&!fp(e)}s(Om,"isArrayLike");var Dm=Om;function Pm(e){return wm(e)&&Dm(e)}s(Pm,"isArrayLikeObject");var Fm=Pm;function Bm(){return!1}s(Bm,"stubFalse");var $m=Bm,zm="object"==typeof exports&&exports&&!exports.nodeType&&exports,Um=zm&&"object"==typeof module&&module&&!module.nodeType&&module,Gm=Um&&Um.exports===zm?Xf.Buffer:void 0,jm=(Gm?Gm.isBuffer:void 0)||$m,Vm=Function.prototype,Wm=Object.prototype,qm=Vm.toString,Hm=Wm.hasOwnProperty,Ym=qm.call(Object);function Xm(e){if(!wm(e)||"[object Object]"!=lp(e))return!1;var t=mm(e);if(null===t)return!0;var r=Hm.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&qm.call(r)==Ym}s(Xm,"isPlainObject");var Km=Xm,Zm={};function Qm(e){return wm(e)&&Mm(e.length)&&!!Zm[lp(e)]}Zm["[object Float32Array]"]=Zm["[object Float64Array]"]=Zm["[object Int8Array]"]=Zm["[object Int16Array]"]=Zm["[object Int32Array]"]=Zm["[object Uint8Array]"]=Zm["[object Uint8ClampedArray]"]=Zm["[object Uint16Array]"]=Zm["[object Uint32Array]"]=!0,Zm["[object Arguments]"]=Zm["[object Array]"]=Zm["[object ArrayBuffer]"]=Zm["[object Boolean]"]=Zm["[object DataView]"]=Zm["[object Date]"]=Zm["[object Error]"]=Zm["[object Function]"]=Zm["[object Map]"]=Zm["[object Number]"]=Zm["[object Object]"]=Zm["[object RegExp]"]=Zm["[object Set]"]=Zm["[object String]"]=Zm["[object WeakMap]"]=!1,s(Qm,"baseIsTypedArray");var Jm=Qm;function ey(e){return function(t){return e(t)}}s(ey,"baseUnary");var ty=ey,ry="object"==typeof exports&&exports&&!exports.nodeType&&exports,ny=ry&&"object"==typeof module&&module&&!module.nodeType&&module,iy=ny&&ny.exports===ry&&Hf.process,ay=function(){try{return ny&&ny.require&&ny.require("util").types||iy&&iy.binding&&iy.binding("util")}catch{}}(),oy=ay&&ay.isTypedArray,sy=oy?ty(oy):Jm;function ly(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}s(ly,"safeGet");var uy=ly,cy=Object.prototype.hasOwnProperty;function hy(e,t,r){var n=e[t];(!cy.call(e,t)||!Zp(n,r)||void 0===r&&!(t in e))&&Hg(e,t,r)}s(hy,"assignValue");var dy=hy;function fy(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),i?Hg(r,s,l):dy(r,s,l)}return r}s(fy,"copyObject");var py=fy;function gy(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}s(gy,"baseTimes");var my=gy,yy=/^(?:0|[1-9]\d*)$/;function vy(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&yy.test(e))&&e>-1&&e%1==0&&e<t}s(vy,"isIndex");var xy=vy,by=Object.prototype.hasOwnProperty;function Cy(e,t){var r=Lm(e),n=!r&&Rm(e),i=!r&&!n&&jm(e),a=!r&&!n&&!i&&sy(e),o=r||n||i||a,s=o?my(e.length,String):[],l=s.length;for(var u in e)(t||by.call(e,u))&&(!o||!("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||xy(u,l)))&&s.push(u);return s}s(Cy,"arrayLikeKeys");var Ty=Cy;function wy(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}s(wy,"nativeKeysIn");var ky=wy,_y=Object.prototype.hasOwnProperty;function Ey(e){if(!cp(e))return ky(e);var t=xm(e),r=[];for(var n in e)"constructor"==n&&(t||!_y.call(e,n))||r.push(n);return r}s(Ey,"baseKeysIn");var Sy=Ey;function Ay(e){return Dm(e)?Ty(e,!0):Sy(e)}s(Ay,"keysIn");var Ny=Ay;function Ry(e){return py(e,Ny(e))}s(Ry,"toPlainObject");var Ly=Ry;function Iy(e,t,r,n,i,a,o){var s=uy(e,r),l=uy(t,r),u=o.get(l);if(u)Xg(e,r,u);else{var c=a?a(s,l,r+"",e,t,o):void 0,h=void 0===c;if(h){var d=Lm(l),f=!d&&jm(l),p=!d&&!f&&sy(l);c=l,d||f||p?Lm(s)?c=s:Fm(s)?c=cm(s):f?(h=!1,c=nm(l,!0)):p?(h=!1,c=lm(l,!0)):c=[]:Km(l)||Rm(l)?(c=s,Rm(s)?c=Ly(s):(!cp(s)||fp(s))&&(c=Cm(l))):h=!1}h&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),Xg(e,r,c)}}s(Iy,"baseMergeDeep");var My=Iy;function Oy(e,t,r,n,i){e!==t&&Zg(t,(function(a,o){if(i||(i=new jg),cp(a))My(e,t,o,r,Oy,n,i);else{var s=n?n(uy(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),Xg(e,o,s)}}),Ny)}s(Oy,"baseMerge");var Dy=Oy;function Py(e){return e}s(Py,"identity");var Fy=Py;function By(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}s(By,"apply");var $y=By,zy=Math.max;function Uy(e,t,r){return t=zy(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=zy(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),$y(e,this,s)}}s(Uy,"overRest");var Gy=Uy,jy=Wg?function(e,t){return Wg(e,"toString",{configurable:!0,enumerable:!1,value:Lg(t),writable:!0})}:Fy,Vy=jy,Wy=Date.now;function qy(e){var t=0,r=0;return function(){var n=Wy(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}s(qy,"shortOut");var Hy=qy(Vy);function Yy(e,t){return Hy(Gy(e,t,Fy),e+"")}s(Yy,"baseRest");var Xy=Yy;function Ky(e,t,r){if(!cp(r))return!1;var n=typeof t;return!!("number"==n?Dm(r)&&xy(t,r.length):"string"==n&&t in r)&&Zp(r[t],e)}s(Ky,"isIterateeCall");var Zy=Ky;function Qy(e){return Xy((function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&Zy(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t}))}s(Qy,"createAssigner");var Jy=Qy,ev=Jy((function(e,t,r){Dy(e,t,r)})),tv=ev,rv=gm(Object.keys,Object),nv=Object.prototype.hasOwnProperty;function iv(e){if(!xm(e))return rv(e);var t=[];for(var r in Object(e))nv.call(e,r)&&"constructor"!=r&&t.push(r);return t}s(iv,"baseKeys");var av=iv,ov=Ip(Xf,"DataView"),sv=Ip(Xf,"Promise"),lv=Ip(Xf,"Set"),uv=Ip(Xf,"WeakMap"),cv="[object Map]",hv="[object Promise]",dv="[object Set]",fv="[object WeakMap]",pv="[object DataView]",gv=bp(ov),mv=bp(hg),yv=bp(sv),vv=bp(lv),xv=bp(uv),bv=lp;(ov&&bv(new ov(new ArrayBuffer(1)))!=pv||hg&&bv(new hg)!=cv||sv&&bv(sv.resolve())!=hv||lv&&bv(new lv)!=dv||uv&&bv(new uv)!=fv)&&(bv=s((function(e){var t=lp(e),r="[object Object]"==t?e.constructor:void 0,n=r?bp(r):"";if(n)switch(n){case gv:return pv;case mv:return cv;case yv:return hv;case vv:return dv;case xv:return fv}return t}),"getTag"));var Cv=bv,Tv=Object.prototype.hasOwnProperty;function wv(e){if(null==e)return!0;if(Dm(e)&&(Lm(e)||"string"==typeof e||"function"==typeof e.splice||jm(e)||sy(e)||Rm(e)))return!e.length;var t=Cv(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(xm(e))return!av(e).length;for(var r in e)if(Tv.call(e,r))return!1;return!0}s(wv,"isEmpty");var kv=wv;function _v(e){return Dm(e)?Ty(e):av(e)}s(_v,"keys");var Ev=_v;function Sv(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}s(Sv,"arrayEach");var Av=Sv;function Nv(e,t){return e&&py(t,Ev(t),e)}s(Nv,"baseAssign");var Rv=Nv;function Lv(e,t){return e&&py(t,Ny(t),e)}s(Lv,"baseAssignIn");var Iv=Lv;function Mv(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}s(Mv,"arrayFilter");var Ov=Mv;function Dv(){return[]}s(Dv,"stubArray");var Pv=Dv,Fv=Object.prototype.propertyIsEnumerable,Bv=Object.getOwnPropertySymbols,$v=Bv?function(e){return null==e?[]:(e=Object(e),Ov(Bv(e),(function(t){return Fv.call(e,t)})))}:Pv,zv=$v;function Uv(e,t){return py(e,zv(e),t)}s(Uv,"copySymbols");var Gv=Uv;function jv(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}s(jv,"arrayPush");var Vv=jv,Wv=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Vv(t,zv(e)),e=mm(e);return t}:Pv,qv=Wv;function Hv(e,t){return py(e,qv(e),t)}s(Hv,"copySymbolsIn");var Yv=Hv;function Xv(e,t,r){var n=t(e);return Lm(e)?n:Vv(n,r(e))}s(Xv,"baseGetAllKeys");var Kv=Xv;function Zv(e){return Kv(e,Ev,zv)}s(Zv,"getAllKeys");var Qv=Zv;function Jv(e){return Kv(e,Ny,qv)}s(Jv,"getAllKeysIn");var ex=Jv,tx=Object.prototype.hasOwnProperty;function rx(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&tx.call(e,"index")&&(r.index=e.index,r.input=e.input),r}s(rx,"initCloneArray");var nx=rx;function ix(e,t){var r=t?om(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}s(ix,"cloneDataView");var ax=ix,ox=/\w*$/;function sx(e){var t=new e.constructor(e.source,ox.exec(e));return t.lastIndex=e.lastIndex,t}s(sx,"cloneRegExp");var lx=sx,ux=Kf?Kf.prototype:void 0,cx=ux?ux.valueOf:void 0;function hx(e){return cx?Object(cx.call(e)):{}}s(hx,"cloneSymbol");var dx=hx;function fx(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return om(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return ax(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return lm(e,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return lx(e);case"[object Symbol]":return dx(e)}}s(fx,"initCloneByTag");var px=fx;function gx(e){return wm(e)&&"[object Map]"==Cv(e)}s(gx,"baseIsMap");var mx=gx,yx=ay&&ay.isMap,vx=yx?ty(yx):mx;function xx(e){return wm(e)&&"[object Set]"==Cv(e)}s(xx,"baseIsSet");var bx=xx,Cx=ay&&ay.isSet,Tx=Cx?ty(Cx):bx,wx="[object Arguments]",kx="[object Function]",_x="[object Object]",Ex={};function Sx(e,t,r,n,i,a){var o,s=1&t,l=2&t,u=4&t;if(r&&(o=i?r(e,n,i,a):r(e)),void 0!==o)return o;if(!cp(e))return e;var c=Lm(e);if(c){if(o=nx(e),!s)return cm(e,o)}else{var h=Cv(e),d=h==kx||"[object GeneratorFunction]"==h;if(jm(e))return nm(e,s);if(h==_x||h==wx||d&&!i){if(o=l||d?{}:Cm(e),!s)return l?Yv(e,Iv(o,e)):Gv(e,Rv(o,e))}else{if(!Ex[h])return i?e:{};o=px(e,h,s)}}a||(a=new jg);var f=a.get(e);if(f)return f;a.set(e,o),Tx(e)?e.forEach((function(n){o.add(Sx(n,t,r,n,e,a))})):vx(e)&&e.forEach((function(n,i){o.set(i,Sx(n,t,r,i,e,a))}));var p=c?void 0:(u?l?ex:Qv:l?Ny:Ev)(e);return Av(p||e,(function(n,i){p&&(n=e[i=n]),dy(o,i,Sx(n,t,r,i,e,a))})),o}Ex[wx]=Ex["[object Array]"]=Ex["[object ArrayBuffer]"]=Ex["[object DataView]"]=Ex["[object Boolean]"]=Ex["[object Date]"]=Ex["[object Float32Array]"]=Ex["[object Float64Array]"]=Ex["[object Int8Array]"]=Ex["[object Int16Array]"]=Ex["[object Int32Array]"]=Ex["[object Map]"]=Ex["[object Number]"]=Ex[_x]=Ex["[object RegExp]"]=Ex["[object Set]"]=Ex["[object String]"]=Ex["[object Symbol]"]=Ex["[object Uint8Array]"]=Ex["[object Uint8ClampedArray]"]=Ex["[object Uint16Array]"]=Ex["[object Uint32Array]"]=!0,Ex["[object Error]"]=Ex[kx]=Ex["[object WeakMap]"]=!1,s(Sx,"baseClone");var Ax=Sx;function Nx(e){return Ax(e,4)}s(Nx,"clone");var Rx=Nx,Lx=Object.prototype,Ix=Lx.hasOwnProperty,Mx=Xy((function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&Zy(t[0],t[1],i)&&(n=1);++r<n;)for(var a=t[r],o=Ny(a),s=-1,l=o.length;++s<l;){var u=o[s],c=e[u];(void 0===c||Zp(c,Lx[u])&&!Ix.call(e,u))&&(e[u]=a[u])}return e})),Ox=Mx;function Dx(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}s(Dx,"last");var Px=Dx;function Fx(e,t){return e&&Zg(e,t,Ev)}s(Fx,"baseForOwn");var Bx=Fx;function $x(e,t){return function(r,n){if(null==r)return r;if(!Dm(r))return e(r,n);for(var i=r.length,a=t?i:-1,o=Object(r);(t?a--:++a<i)&&!1!==n(o[a],a,o););return r}}s($x,"createBaseEach");var zx=$x(Bx);function Ux(e){return"function"==typeof e?e:Fy}s(Ux,"castFunction");var Gx=Ux;function jx(e,t){return(Lm(e)?Av:zx)(e,Gx(t))}s(jx,"forEach");var Vx=jx;function Wx(e,t){var r=[];return zx(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}s(Wx,"baseFilter");var qx=Wx;function Hx(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}s(Hx,"setCacheAdd");var Yx=Hx;function Xx(e){return this.__data__.has(e)}s(Xx,"setCacheHas");var Kx=Xx;function Zx(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Sg;++t<r;)this.add(e[t])}s(Zx,"SetCache"),Zx.prototype.add=Zx.prototype.push=Yx,Zx.prototype.has=Kx;var Qx=Zx;function Jx(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}s(Jx,"arraySome");var eb=Jx;function tb(e,t){return e.has(t)}s(tb,"cacheHas");var rb=tb;function nb(e,t,r,n,i,a){var o=1&r,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e),c=a.get(t);if(u&&c)return u==t&&c==e;var h=-1,d=!0,f=2&r?new Qx:void 0;for(a.set(e,t),a.set(t,e);++h<s;){var p=e[h],g=t[h];if(n)var m=o?n(g,p,h,t,e,a):n(p,g,h,e,t,a);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!eb(t,(function(e,t){if(!rb(f,t)&&(p===e||i(p,e,r,n,a)))return f.push(t)}))){d=!1;break}}else if(p!==g&&!i(p,g,r,n,a)){d=!1;break}}return a.delete(e),a.delete(t),d}s(nb,"equalArrays");var ib=nb;function ab(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}s(ab,"mapToArray");var ob=ab;function sb(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}s(sb,"setToArray");var lb=sb,ub=Kf?Kf.prototype:void 0,cb=ub?ub.valueOf:void 0;function hb(e,t,r,n,i,a,o){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new im(e),new im(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Zp(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=ob;case"[object Set]":var l=1&n;if(s||(s=lb),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=2,o.set(e,t);var c=ib(s(e),s(t),n,i,a,o);return o.delete(e),c;case"[object Symbol]":if(cb)return cb.call(e)==cb.call(t)}return!1}s(hb,"equalByTag");var db=hb,fb=Object.prototype.hasOwnProperty;function pb(e,t,r,n,i,a){var o=1&r,s=Qv(e),l=s.length;if(l!=Qv(t).length&&!o)return!1;for(var u=l;u--;){var c=s[u];if(!(o?c in t:fb.call(t,c)))return!1}var h=a.get(e),d=a.get(t);if(h&&d)return h==t&&d==e;var f=!0;a.set(e,t),a.set(t,e);for(var p=o;++u<l;){var g=e[c=s[u]],m=t[c];if(n)var y=o?n(m,g,c,t,e,a):n(g,m,c,e,t,a);if(!(void 0===y?g===m||i(g,m,r,n,a):y)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var v=e.constructor,x=t.constructor;v!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof x&&x instanceof x)&&(f=!1)}return a.delete(e),a.delete(t),f}s(pb,"equalObjects");var gb=pb,mb="[object Arguments]",yb="[object Array]",vb="[object Object]",xb=Object.prototype.hasOwnProperty;function bb(e,t,r,n,i,a){var o=Lm(e),s=Lm(t),l=o?yb:Cv(e),u=s?yb:Cv(t),c=(l=l==mb?vb:l)==vb,h=(u=u==mb?vb:u)==vb,d=l==u;if(d&&jm(e)){if(!jm(t))return!1;o=!0,c=!1}if(d&&!c)return a||(a=new jg),o||sy(e)?ib(e,t,r,n,i,a):db(e,t,l,r,n,i,a);if(!(1&r)){var f=c&&xb.call(e,"__wrapped__"),p=h&&xb.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,m=p?t.value():t;return a||(a=new jg),i(g,m,r,n,a)}}return!!d&&(a||(a=new jg),gb(e,t,r,n,i,a))}s(bb,"baseIsEqualDeep");var Cb=bb;function Tb(e,t,r,n,i){return e===t||(null==e||null==t||!wm(e)&&!wm(t)?e!=e&&t!=t:Cb(e,t,r,n,Tb,i))}s(Tb,"baseIsEqual");var wb=Tb;function kb(e,t,r,n){var i=r.length,a=i,o=!n;if(null==e)return!a;for(e=Object(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=r[i])[0],u=e[l],c=s[1];if(o&&s[2]){if(void 0===u&&!(l in e))return!1}else{var h=new jg;if(n)var d=n(u,c,l,e,t,h);if(!(void 0===d?wb(c,u,3,n,h):d))return!1}}return!0}s(kb,"baseIsMatch");var _b=kb;function Eb(e){return e==e&&!cp(e)}s(Eb,"isStrictComparable");var Sb=Eb;function Ab(e){for(var t=Ev(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Sb(i)]}return t}s(Ab,"getMatchData");var Nb=Ab;function Rb(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}s(Rb,"matchesStrictComparable");var Lb=Rb;function Ib(e){var t=Nb(e);return 1==t.length&&t[0][2]?Lb(t[0][0],t[0][1]):function(r){return r===e||_b(r,e,t)}}s(Ib,"baseMatches");var Mb=Ib;function Ob(e){return"symbol"==typeof e||wm(e)&&"[object Symbol]"==lp(e)}s(Ob,"isSymbol");var Db=Ob,Pb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fb=/^\w*$/;function Bb(e,t){if(Lm(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Db(e))||(Fb.test(e)||!Pb.test(e)||null!=t&&e in Object(t))}s(Bb,"isKey");var $b=Bb;function zb(e){var t=Ng(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}s(zb,"memoizeCapped");var Ub=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gb=/\\(\\)?/g,jb=zb((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ub,(function(e,r,n,i){t.push(n?i.replace(Gb,"$1"):r||e)})),t})),Vb=jb;function Wb(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}s(Wb,"arrayMap");var qb=Wb,Hb=Kf?Kf.prototype:void 0,Yb=Hb?Hb.toString:void 0;function Xb(e){if("string"==typeof e)return e;if(Lm(e))return qb(e,Xb)+"";if(Db(e))return Yb?Yb.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}s(Xb,"baseToString");var Kb=Xb;function Zb(e){return null==e?"":Kb(e)}s(Zb,"toString");var Qb=Zb;function Jb(e,t){return Lm(e)?e:$b(e,t)?[e]:Vb(Qb(e))}s(Jb,"castPath");var eC=Jb;function tC(e){if("string"==typeof e||Db(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}s(tC,"toKey");var rC=tC;function nC(e,t){for(var r=0,n=(t=eC(t,e)).length;null!=e&&r<n;)e=e[rC(t[r++])];return r&&r==n?e:void 0}s(nC,"baseGet");var iC=nC;function aC(e,t,r){var n=null==e?void 0:iC(e,t);return void 0===n?r:n}s(aC,"get");var oC=aC;function sC(e,t){return null!=e&&t in Object(e)}s(sC,"baseHasIn");var lC=sC;function uC(e,t,r){for(var n=-1,i=(t=eC(t,e)).length,a=!1;++n<i;){var o=rC(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&Mm(i)&&xy(o,i)&&(Lm(e)||Rm(e))}s(uC,"hasPath");var cC=uC;function hC(e,t){return null!=e&&cC(e,t,lC)}s(hC,"hasIn");var dC=hC;function fC(e,t){return $b(e)&&Sb(t)?Lb(rC(e),t):function(r){var n=oC(r,e);return void 0===n&&n===t?dC(r,e):wb(t,n,3)}}s(fC,"baseMatchesProperty");var pC=fC;function gC(e){return function(t){return t?.[e]}}s(gC,"baseProperty");var mC=gC;function yC(e){return function(t){return iC(t,e)}}s(yC,"basePropertyDeep");var vC=yC;function xC(e){return $b(e)?mC(rC(e)):vC(e)}s(xC,"property");var bC=xC;function CC(e){return"function"==typeof e?e:null==e?Fy:"object"==typeof e?Lm(e)?pC(e[0],e[1]):Mb(e):bC(e)}s(CC,"baseIteratee");var TC=CC;function wC(e,t){return(Lm(e)?Ov:qx)(e,TC(t))}s(wC,"filter");var kC=wC;function _C(e,t){var r=-1,n=Dm(e)?Array(e.length):[];return zx(e,(function(e,i,a){n[++r]=t(e,i,a)})),n}s(_C,"baseMap");var EC=_C;function SC(e,t){return(Lm(e)?qb:EC)(e,TC(t))}s(SC,"map");var AC=SC;function NC(e,t){return qb(t,(function(t){return e[t]}))}s(NC,"baseValues");var RC=NC;function LC(e){return null==e?[]:RC(e,Ev(e))}s(LC,"values");var IC=LC;function MC(e){return void 0===e}s(MC,"isUndefined");var OC=MC;function DC(e,t,r){for(var n=-1,i=e.length;++n<i;){var a=e[n],o=t(a);if(null!=o&&(void 0===s?o==o&&!Db(o):r(o,s)))var s=o,l=a}return l}s((function(e,t){var r={};return t=TC(t),Bx(e,(function(e,n,i){Hg(r,n,t(e,n,i))})),r}),"mapValues"),s(DC,"baseExtremum");var PC=DC;function FC(e,t){return e>t}s(FC,"baseGt");var BC=FC;function $C(e,t,r,n){if(!cp(e))return e;for(var i=-1,a=(t=eC(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var l=rC(t[i]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=o){var c=s[l];void 0===(u=n?n(c,l,s):void 0)&&(u=cp(c)?c:xy(t[i+1])?[]:{})}dy(s,l,u),s=s[l]}return e}s((function(e){return e&&e.length?PC(e,Fy,BC):void 0}),"max"),s($C,"baseSet");var zC=$C;function UC(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=iC(e,o);r(s,o)&&zC(a,eC(o,e),s)}return a}s(UC,"basePickBy");var GC=UC;function jC(e,t){return GC(e,t,(function(t,r){return dC(e,r)}))}s(jC,"basePick");var VC=jC,WC=Kf?Kf.isConcatSpreadable:void 0;function qC(e){return Lm(e)||Rm(e)||!!(WC&&e&&e[WC])}s(qC,"isFlattenable");var HC=qC;function YC(e,t,r,n,i){var a=-1,o=e.length;for(r||(r=HC),i||(i=[]);++a<o;){var s=e[a];t>0&&r(s)?t>1?YC(s,t-1,r,n,i):Vv(i,s):n||(i[i.length]=s)}return i}s(YC,"baseFlatten");var XC=YC;function KC(e){return(null==e?0:e.length)?XC(e,1):[]}s(KC,"flatten");var ZC=KC;function QC(e){return Hy(Gy(e,void 0,ZC),e+"")}function JC(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}s(QC,"flatRest"),QC((function(e,t){return null==e?{}:VC(e,t)})),s(JC,"arrayReduce");var eT=JC;function tT(e,t,r,n,i){return i(e,(function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)})),r}s(tT,"baseReduce");var rT=tT;function nT(e,t,r){var n=Lm(e)?eT:rT,i=arguments.length<3;return n(e,TC(t),r,i,zx)}s(nT,"reduce");var iT=nT;function aT(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}s(aT,"baseFindIndex");var oT=aT;function sT(e){return e!=e}s(sT,"baseIsNaN");var lT=sT;function uT(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}s(uT,"strictIndexOf");var cT=uT;function hT(e,t,r){return t==t?cT(e,t,r):oT(e,lT,r)}s(hT,"baseIndexOf");var dT=hT;function fT(e,t){return!!(null==e?0:e.length)&&dT(e,t,0)>-1}s(fT,"arrayIncludes");var pT=fT;function gT(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}s(gT,"arrayIncludesWith");var mT=gT;function yT(){}s(yT,"noop");var vT=yT,xT=lv&&1/lb(new lv([,-0]))[1]==1/0?function(e){return new lv(e)}:vT,bT=xT;function CT(e,t,r){var n=-1,i=pT,a=e.length,o=!0,s=[],l=s;if(r)o=!1,i=mT;else if(a>=200){var u=t?null:bT(e);if(u)return lb(u);o=!1,i=rb,l=new Qx}else l=t?[]:s;e:for(;++n<a;){var c=e[n],h=t?t(c):c;if(c=r||0!==c?c:0,o&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(c)}else i(l,h,r)||(l!==s&&l.push(h),s.push(c))}return s}s(CT,"baseUniq");var TT=CT;Xy((function(e){return TT(XC(e,1,Fm,!0))}));var wT=/\s/;function kT(e){for(var t=e.length;t--&&wT.test(e.charAt(t)););return t}s(kT,"trimmedEndIndex");var _T=kT,ET=/^\s+/;function ST(e){return e&&e.slice(0,_T(e)+1).replace(ET,"")}s(ST,"baseTrim");var AT=ST,NT=/^[-+]0x[0-9a-f]+$/i,RT=/^0b[01]+$/i,LT=/^0o[0-7]+$/i,IT=parseInt;function MT(e){if("number"==typeof e)return e;if(Db(e))return NaN;if(cp(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=cp(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=AT(e);var r=RT.test(e);return r||LT.test(e)?IT(e.slice(2),r?2:8):NT.test(e)?NaN:+e}s(MT,"toNumber");var OT=MT,DT=1/0;function PT(e){return e?(e=OT(e))===DT||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}s(PT,"toFinite");var FT=PT;function BT(e){var t=FT(e),r=t%1;return t==t?r?t-r:t:0}s(BT,"toInteger");var $T=BT,zT=Object.prototype.hasOwnProperty,UT=Jy((function(e,t){if(xm(t)||Dm(t))py(t,Ev(t),e);else for(var r in t)zT.call(t,r)&&dy(e,r,t[r])})),GT=UT;function jT(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}s(jT,"baseSlice");var VT=jT,WT=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function qT(e){return WT.test(e)}s(qT,"hasUnicode");var HT=qT;function YT(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i}s((function(e){return Ax(e,5)}),"cloneDeep"),s(YT,"compact");var XT=YT;function KT(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(n,o,r(o),e)}return n}s(KT,"arrayAggregator");var ZT=KT;function QT(e,t,r,n){return zx(e,(function(e,i,a){t(n,e,r(e),a)})),n}s(QT,"baseAggregator");var JT=QT;function ew(e,t){return function(r,n){var i=Lm(r)?ZT:JT,a=t?t():{};return i(r,e,TC(n),a)}}s(ew,"createAggregator");var tw=ew;s((function(){return Xf.Date.now()}),"now");function rw(e,t,r,n){var i=-1,a=pT,o=!0,s=e.length,l=[],u=t.length;if(!s)return l;r&&(t=qb(t,ty(r))),n?(a=mT,o=!1):t.length>=200&&(a=rb,o=!1,t=new Qx(t));e:for(;++i<s;){var c=e[i],h=null==r?c:r(c);if(c=n||0!==c?c:0,o&&h==h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else a(t,h,n)||l.push(c)}return l}s(rw,"baseDifference");var nw=rw,iw=Xy((function(e,t){return Fm(e)?nw(e,XC(t,1,Fm,!0)):[]})),aw=iw;function ow(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:$T(t),VT(e,t<0?0:t,n)):[]}s(ow,"drop");var sw=ow;function lw(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:$T(t),VT(e,0,(t=n-t)<0?0:t)):[]}s(lw,"dropRight");var uw=lw;function cw(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}s(cw,"arrayEvery");var hw=cw;function dw(e,t){var r=!0;return zx(e,(function(e,n,i){return r=!!t(e,n,i)})),r}s(dw,"baseEvery");var fw=dw;function pw(e,t,r){var n=Lm(e)?hw:fw;return r&&Zy(e,t,r)&&(t=void 0),n(e,TC(t))}s(pw,"every");var gw=pw;function mw(e){return function(t,r,n){var i=Object(t);if(!Dm(t)){var a=TC(r);t=Ev(t),r=s((function(e){return a(i[e],e,i)}),"predicate")}var o=e(t,r,n);return o>-1?i[a?t[o]:o]:void 0}}s(mw,"createFind");var yw=mw,vw=Math.max;function xw(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:$T(r);return i<0&&(i=vw(n+i,0)),oT(e,TC(t),i)}s(xw,"findIndex");var bw=yw(xw);function Cw(e){return e&&e.length?e[0]:void 0}s(Cw,"head");var Tw=Cw;function ww(e,t){return XC(AC(e,t),1)}s(ww,"flatMap");var kw=ww;s((function(e,t){return null==e?e:Zg(e,Gx(t),Ny)}),"forIn"),s((function(e,t){return e&&Bx(e,Gx(t))}),"forOwn");var _w=Object.prototype.hasOwnProperty,Ew=tw((function(e,t,r){_w.call(e,r)?e[r].push(t):Hg(e,r,[t])})),Sw=Ew,Aw=Object.prototype.hasOwnProperty;function Nw(e,t){return null!=e&&Aw.call(e,t)}s(Nw,"baseHas");var Rw=Nw;function Lw(e,t){return null!=e&&cC(e,t,Rw)}s(Lw,"has");var Iw=Lw;function Mw(e){return"string"==typeof e||!Lm(e)&&wm(e)&&"[object String]"==lp(e)}s(Mw,"isString");var Ow=Mw,Dw=Math.max;function Pw(e,t,r,n){e=Dm(e)?e:IC(e),r=r&&!n?$T(r):0;var i=e.length;return r<0&&(r=Dw(i+r,0)),Ow(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&dT(e,t,r)>-1}s(Pw,"includes");var Fw=Pw,Bw=Math.max;function $w(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:$T(r);return i<0&&(i=Bw(n+i,0)),dT(e,t,i)}s($w,"indexOf");var zw=$w;function Uw(e){return wm(e)&&"[object RegExp]"==lp(e)}s(Uw,"baseIsRegExp");var Gw=Uw,jw=ay&&ay.isRegExp,Vw=jw?ty(jw):Gw;function Ww(e,t){return e<t}s(Ww,"baseLt");var qw=Ww;function Hw(e){return e&&e.length?PC(e,Fy,qw):void 0}s(Hw,"min");var Yw=Hw;s((function(e,t){return e&&e.length?PC(e,TC(t),qw):void 0}),"minBy");function Xw(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}s(Xw,"negate");var Kw=Xw;function Zw(e,t){if(null==e)return{};var r=qb(ex(e),(function(e){return[e]}));return t=TC(t),GC(e,r,(function(e,r){return t(e,r[0])}))}s(Zw,"pickBy");var Qw=Zw;function Jw(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}s(Jw,"baseSortBy");var ek=Jw;function tk(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,a=Db(e),o=void 0!==t,s=null===t,l=t==t,u=Db(t);if(!s&&!u&&!a&&e>t||a&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!i)return 1;if(!n&&!a&&!u&&e<t||u&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!l)return-1}return 0}s(tk,"compareAscending");var rk=tk;function nk(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,o=i.length,s=r.length;++n<o;){var l=rk(i[n],a[n]);if(l)return n>=s?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}s(nk,"compareMultiple");var ik=nk;function ak(e,t,r){t=t.length?qb(t,(function(e){return Lm(e)?function(t){return iC(t,1===e.length?e[0]:e)}:e})):[Fy];var n=-1;t=qb(t,ty(TC));var i=EC(e,(function(e,r,i){var a=qb(t,(function(t){return t(e)}));return{criteria:a,index:++n,value:e}}));return ek(i,(function(e,t){return ik(e,t,r)}))}s(ak,"baseOrderBy");var ok=ak,sk=mC("length"),lk="\\ud800-\\udfff",uk="["+lk+"]",ck="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",hk="\\ud83c[\\udffb-\\udfff]",dk="[^"+lk+"]",fk="(?:\\ud83c[\\udde6-\\uddff]){2}",pk="[\\ud800-\\udbff][\\udc00-\\udfff]",gk="(?:"+ck+"|"+hk+")"+"?",mk="[\\ufe0e\\ufe0f]?",yk=mk+gk+("(?:\\u200d(?:"+[dk,fk,pk].join("|")+")"+mk+gk+")*"),vk="(?:"+[dk+ck+"?",ck,fk,pk,uk].join("|")+")",xk=RegExp(hk+"(?="+hk+")|"+vk+yk,"g");function bk(e){for(var t=xk.lastIndex=0;xk.test(e);)++t;return t}s(bk,"unicodeSize");var Ck=bk;function Tk(e){return HT(e)?Ck(e):sk(e)}s(Tk,"stringSize");var wk=Tk,kk=Math.ceil,_k=Math.max;function Ek(e,t,r,n){for(var i=-1,a=_k(kk((t-e)/(r||1)),0),o=Array(a);a--;)o[n?a:++i]=e,e+=r;return o}s(Ek,"baseRange");var Sk=Ek;function Ak(e,t){return(Lm(e)?Ov:qx)(e,Kw(TC(t)))}s((function(e){return function(t,r,n){return n&&"number"!=typeof n&&Zy(t,r,n)&&(r=n=void 0),t=FT(t),void 0===r?(r=t,t=0):r=FT(r),n=void 0===n?t<r?1:-1:FT(n),Sk(t,r,n,e)}}),"createRange"),s(Ak,"reject");var Nk=Ak;function Rk(e,t){var r;return zx(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}s((function(e){if(null==e)return 0;if(Dm(e))return Ow(e)?wk(e):e.length;var t=Cv(e);return"[object Map]"==t||"[object Set]"==t?e.size:av(e).length}),"size"),s(Rk,"baseSome");var Lk=Rk;function Ik(e,t,r){var n=Lm(e)?eb:Lk;return r&&Zy(e,t,r)&&(t=void 0),n(e,TC(t))}s(Ik,"some");var Mk=Ik;function Ok(e){return e&&e.length?TT(e):[]}Xy((function(e,t){if(null==e)return[];var r=t.length;return r>1&&Zy(e,t[0],t[1])?t=[]:r>2&&Zy(t[0],t[1],t[2])&&(t=[t[0]]),ok(e,XC(t,1),[])})),s(Ok,"uniq");var Dk=Ok;function Pk(e,t){return e&&e.length?TT(e,TC(t)):[]}s(Pk,"uniqBy");var Fk=Pk,Bk=0;function $k(e,t,r){for(var n=-1,i=e.length,a=t.length,o={};++n<i;){var s=n<a?t[n]:void 0;r(o,e[n],s)}return o}s((function(e){var t=++Bk;return Qb(e)+t}),"uniqueId"),s($k,"baseZipObject");var zk=$k;s((function(e,t){return zk(e||[],t||[],dy)}),"zipObject");
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
var Uk=l((e=>{var t;function r(){if(void 0===t)throw new Error("No runtime abstraction layer installed");return t}Object.defineProperty(e,"__esModule",{value:!0}),s(r,"RAL"),function(e){function r(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");t=e}s(r,"install"),e.install=r}(r||(r={})),e.default=r})),Gk=l((e=>{function t(e){return!0===e||!1===e}function r(e){return"string"==typeof e||e instanceof String}function n(e){return"number"==typeof e||e instanceof Number}function i(e){return e instanceof Error}function a(e){return"function"==typeof e}function o(e){return Array.isArray(e)}function l(e){return o(e)&&e.every((e=>r(e)))}Object.defineProperty(e,"__esModule",{value:!0}),e.stringArray=e.array=e.func=e.error=e.number=e.string=e.boolean=void 0,s(t,"boolean"),e.boolean=t,s(r,"string"),e.string=r,s(n,"number"),e.number=n,s(i,"error"),e.error=i,s(a,"func"),e.func=a,s(o,"array"),e.array=o,s(l,"stringArray"),e.stringArray=l})),jk=l((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=e.Event=void 0;var t,r=Uk();!function(e){let t={dispose(){}};e.None=function(){return t}}(t||(e.Event=t={}));var n=class{static{s(this,"CallbackList")}add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:s((()=>this.remove(e,t)),"dispose")})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let n=0,i=this._callbacks.length;n<i;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let a=0,o=n.length;a<o;a++)try{t.push(n[a].apply(i[a],e))}catch(e){(0,r.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}},i=class e{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(t,r,i)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,r);let a={dispose:s((()=>{this._callbacks&&(this._callbacks.remove(t,r),a.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}),"dispose")};return Array.isArray(i)&&i.push(a),a}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};e.Emitter=i,i._noop=function(){}})),Vk=l((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;var t,r=Uk(),n=Gk(),i=jk();!function(e){function t(t){let r=t;return r&&(r===e.None||r===e.Cancelled||n.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None}),s(t,"is"),e.is=t}(t||(e.CancellationToken=t={}));var a=Object.freeze((function(e,t){let n=(0,r.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}})),o=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},l=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new o),this._token}cancel(){this._token?this._token.cancel():this._token=t.Cancelled}dispose(){this._token?this._token instanceof o&&this._token.dispose():this._token=t.None}};e.CancellationTokenSource=l})),Wk={};u(Wk,{AbstractAstReflection:()=>Zk,AbstractCstNode:()=>rP,AbstractLangiumParser:()=>cP,AbstractParserErrorMessageProvider:()=>dP,AbstractThreadedAsyncParser:()=>SB,AstUtils:()=>wS,BiMap:()=>gF,Cancellation:()=>zP,CompositeCstNodeImpl:()=>iP,ContextCache:()=>TF,CstNodeBuilder:()=>tP,CstUtils:()=>qk,DONE_RESULT:()=>a_,DatatypeSymbol:()=>sP,DefaultAstNodeDescriptionProvider:()=>BF,DefaultAstNodeLocator:()=>zF,DefaultAsyncParser:()=>EB,DefaultCommentProvider:()=>wB,DefaultConfigurationProvider:()=>UF,DefaultDocumentBuilder:()=>GF,DefaultDocumentValidator:()=>OF,DefaultHydrator:()=>RB,DefaultIndexManager:()=>jF,DefaultJsonSerializer:()=>NF,DefaultLangiumDocumentFactory:()=>lF,DefaultLangiumDocuments:()=>uF,DefaultLexer:()=>WF,DefaultLinker:()=>cF,DefaultNameProvider:()=>dF,DefaultReferenceDescriptionProvider:()=>$F,DefaultReferences:()=>fF,DefaultScopeComputation:()=>mF,DefaultScopeProvider:()=>_F,DefaultServiceRegistry:()=>RF,DefaultTokenBuilder:()=>BP,DefaultValueConverter:()=>$P,DefaultWorkspaceLock:()=>NB,DefaultWorkspaceManager:()=>VF,Deferred:()=>ZP,Disposable:()=>FF,DisposableCache:()=>bF,DocumentCache:()=>wF,DocumentState:()=>aF,DocumentValidator:()=>IF,EMPTY_SCOPE:()=>xF,EMPTY_STREAM:()=>i_,EmptyFileSystem:()=>GB,EmptyFileSystemProvider:()=>UB,ErrorWithLocation:()=>L_,GrammarAST:()=>M_,GrammarUtils:()=>R_,JSDocDocumentationProvider:()=>TB,LangiumCompletionParser:()=>pP,LangiumParser:()=>hP,LangiumParserErrorMessageProvider:()=>fP,LeafCstNodeImpl:()=>nP,MapScope:()=>vF,Module:()=>_B,MultiMap:()=>pF,OperationCancelled:()=>qP,ParserWorker:()=>AB,Reduction:()=>s_,RegExpUtils:()=>BS,RootCstNodeImpl:()=>oP,SimpleCache:()=>CF,StreamImpl:()=>t_,StreamScope:()=>yF,TextDocument:()=>XP,TreeStreamImpl:()=>u_,URI:()=>oF,UriUtils:()=>iF,ValidationCategory:()=>AF,ValidationRegistry:()=>MF,ValueConverter:()=>FP,WorkspaceCache:()=>kF,assertUnreachable:()=>I_,createCompletionParser:()=>OP,createDefaultCoreModule:()=>LB,createDefaultSharedCoreModule:()=>IB,createGrammarConfig:()=>HA,createLangiumParser:()=>DP,delayNextTick:()=>UP,diagnosticData:()=>LF,eagerLoad:()=>DB,getDiagnosticRange:()=>DF,inject:()=>MB,interruptAndCheck:()=>YP,isAstNode:()=>Hk,isAstNodeDescription:()=>Xk,isAstNodeWithComment:()=>EF,isCompositeCstNode:()=>Qk,isIMultiModeLexerDefinition:()=>HF,isJSDoc:()=>KF,isLeafCstNode:()=>Jk,isLinkingError:()=>Kk,isNamed:()=>hF,isOperationCancelled:()=>HP,isReference:()=>Yk,isRootCstNode:()=>e_,isTokenTypeArray:()=>qF,isTokenTypeDictionary:()=>YF,loadGrammarFromJson:()=>qB,parseJSDoc:()=>XF,prepareLangiumParser:()=>PP,setInterruptionPeriod:()=>WP,startCancelableOperation:()=>VP,stream:()=>o_,toDiagnosticSeverity:()=>PF});var qk={};function Hk(e){return"object"==typeof e&&null!==e&&"string"==typeof e.$type}function Yk(e){return"object"==typeof e&&null!==e&&"string"==typeof e.$refText}function Xk(e){return"object"==typeof e&&null!==e&&"string"==typeof e.name&&"string"==typeof e.type&&"string"==typeof e.path}function Kk(e){return"object"==typeof e&&null!==e&&Hk(e.container)&&Yk(e.reference)&&"string"==typeof e.message}u(qk,{DefaultNameRegexp:()=>y_,RangeComparison:()=>l_,compareRange:()=>g_,findCommentNode:()=>x_,findDeclarationNodeAtOffset:()=>v_,findLeafNodeAtOffset:()=>C_,findLeafNodeBeforeOffset:()=>T_,flattenCst:()=>h_,getInteriorNodes:()=>S_,getNextNode:()=>__,getPreviousNode:()=>k_,getStartlineNode:()=>E_,inRange:()=>m_,isChildNode:()=>d_,isCommentNode:()=>b_,streamCst:()=>c_,toDocumentSegment:()=>p_,tokenToRange:()=>f_}),s(Hk,"isAstNode"),s(Yk,"isReference"),s(Xk,"isAstNodeDescription"),s(Kk,"isLinkingError");var Zk=class{static{s(this,"AbstractAstReflection")}constructor(){this.subtypes={},this.allSubtypes={}}isInstance(e,t){return Hk(e)&&this.isSubtype(e.$type,t)}isSubtype(e,t){if(e===t)return!0;let r=this.subtypes[e];r||(r=this.subtypes[e]={});let n=r[t];if(void 0!==n)return n;{let n=this.computeIsSubtype(e,t);return r[t]=n,n}}getAllSubTypes(e){let t=this.allSubtypes[e];if(t)return t;{let t=this.getAllTypes(),r=[];for(let n of t)this.isSubtype(n,e)&&r.push(n);return this.allSubtypes[e]=r,r}}};function Qk(e){return"object"==typeof e&&null!==e&&Array.isArray(e.content)}function Jk(e){return"object"==typeof e&&null!==e&&"object"==typeof e.tokenType}function e_(e){return Qk(e)&&"string"==typeof e.fullText}s(Qk,"isCompositeCstNode"),s(Jk,"isLeafCstNode"),s(e_,"isRootCstNode");var t_=class e{static{s(this,"StreamImpl")}constructor(e,t){this.startFn=e,this.nextFn=t}iterator(){let e={state:this.startFn(),next:s((()=>this.nextFn(e.state)),"next"),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){let e=this.iterator(),t=0,r=e.next();for(;!r.done;)t++,r=e.next();return t}toArray(){let e,t=[],r=this.iterator();do{e=r.next(),void 0!==e.value&&t.push(e.value)}while(!e.done);return t}toSet(){return new Set(this)}toMap(e,t){let r=this.map((r=>[e?e(r):r,t?t(r):r]));return new Map(r)}toString(){return this.join()}concat(t){let r=t[Symbol.iterator]();return new e((()=>({first:this.startFn(),firstDone:!1})),(e=>{let t;if(!e.firstDone){do{if(t=this.nextFn(e.first),!t.done)return t}while(!t.done);e.firstDone=!0}do{if(t=r.next(),!t.done)return t}while(!t.done);return a_}))}join(e=","){let t,r=this.iterator(),n="",i=!1;do{t=r.next(),t.done||(i&&(n+=e),n+=r_(t.value)),i=!0}while(!t.done);return n}indexOf(e,t=0){let r=this.iterator(),n=0,i=r.next();for(;!i.done;){if(n>=t&&i.value===e)return n;i=r.next(),n++}return-1}every(e){let t=this.iterator(),r=t.next();for(;!r.done;){if(!e(r.value))return!1;r=t.next()}return!0}some(e){let t=this.iterator(),r=t.next();for(;!r.done;){if(e(r.value))return!0;r=t.next()}return!1}forEach(e){let t=this.iterator(),r=0,n=t.next();for(;!n.done;)e(n.value,r),n=t.next(),r++}map(t){return new e(this.startFn,(e=>{let{done:r,value:n}=this.nextFn(e);return r?a_:{done:!1,value:t(n)}}))}filter(t){return new e(this.startFn,(e=>{let r;do{if(r=this.nextFn(e),!r.done&&t(r.value))return r}while(!r.done);return a_}))}nonNullable(){return this.filter((e=>null!=e))}reduce(e,t){let r=this.iterator(),n=t,i=r.next();for(;!i.done;)n=void 0===n?i.value:e(n,i.value),i=r.next();return n}reduceRight(e,t){return this.recursiveReduce(this.iterator(),e,t)}recursiveReduce(e,t,r){let n=e.next();if(n.done)return r;let i=this.recursiveReduce(e,t,r);return void 0===i?n.value:t(i,n.value)}find(e){let t=this.iterator(),r=t.next();for(;!r.done;){if(e(r.value))return r.value;r=t.next()}}findIndex(e){let t=this.iterator(),r=0,n=t.next();for(;!n.done;){if(e(n.value))return r;n=t.next(),r++}return-1}includes(e){let t=this.iterator(),r=t.next();for(;!r.done;){if(r.value===e)return!0;r=t.next()}return!1}flatMap(t){return new e((()=>({this:this.startFn()})),(e=>{do{if(e.iterator){let t=e.iterator.next();if(!t.done)return t;e.iterator=void 0}let{done:r,value:n}=this.nextFn(e.this);if(!r){let r=t(n);if(!n_(r))return{done:!1,value:r};e.iterator=r[Symbol.iterator]()}}while(e.iterator);return a_}))}flat(t){if(void 0===t&&(t=1),t<=0)return this;let r=t>1?this.flat(t-1):this;return new e((()=>({this:r.startFn()})),(e=>{do{if(e.iterator){let t=e.iterator.next();if(!t.done)return t;e.iterator=void 0}let{done:t,value:n}=r.nextFn(e.this);if(!t){if(!n_(n))return{done:!1,value:n};e.iterator=n[Symbol.iterator]()}}while(e.iterator);return a_}))}head(){let e=this.iterator().next();if(!e.done)return e.value}tail(t=1){return new e((()=>{let e=this.startFn();for(let r=0;r<t;r++)if(this.nextFn(e).done)return e;return e}),this.nextFn)}limit(t){return new e((()=>({size:0,state:this.startFn()})),(e=>(e.size++,e.size>t?a_:this.nextFn(e.state))))}distinct(e){let t=new Set;return this.filter((r=>{let n=e?e(r):r;return!t.has(n)&&(t.add(n),!0)}))}exclude(e,t){let r=new Set;for(let n of e){let e=t?t(n):n;r.add(e)}return this.filter((e=>{let n=t?t(e):e;return!r.has(n)}))}};function r_(e){return"string"==typeof e?e:typeof e>"u"?"undefined":"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}function n_(e){return!!e&&"function"==typeof e[Symbol.iterator]}s(r_,"toString"),s(n_,"isIterable");var i_=new t_((()=>{}),(()=>a_)),a_=Object.freeze({done:!0,value:void 0});function o_(...e){if(1===e.length){let t=e[0];if(t instanceof t_)return t;if(n_(t))return new t_((()=>t[Symbol.iterator]()),(e=>e.next()));if("number"==typeof t.length)return new t_((()=>({index:0})),(e=>e.index<t.length?{done:!1,value:t[e.index++]}:a_))}return e.length>1?new t_((()=>({collIndex:0,arrIndex:0})),(t=>{do{if(t.iterator){let e=t.iterator.next();if(!e.done)return e;t.iterator=void 0}if(t.array){if(t.arrIndex<t.array.length)return{done:!1,value:t.array[t.arrIndex++]};t.array=void 0,t.arrIndex=0}if(t.collIndex<e.length){let r=e[t.collIndex++];n_(r)?t.iterator=r[Symbol.iterator]():r&&"number"==typeof r.length&&(t.array=r)}}while(t.iterator||t.array||t.collIndex<e.length);return a_})):i_}s(o_,"stream");var s_,l_,u_=class extends t_{static{s(this,"TreeStreamImpl")}constructor(e,t,r){super((()=>({iterators:r?.includeRoot?[[e][Symbol.iterator]()]:[t(e)[Symbol.iterator]()],pruned:!1})),(e=>{for(e.pruned&&(e.iterators.pop(),e.pruned=!1);e.iterators.length>0;){let r=e.iterators[e.iterators.length-1].next();if(!r.done)return e.iterators.push(t(r.value)[Symbol.iterator]()),r;e.iterators.pop()}return a_}))}iterator(){let e={state:this.startFn(),next:s((()=>this.nextFn(e.state)),"next"),prune:s((()=>{e.state.pruned=!0}),"prune"),[Symbol.iterator]:()=>e};return e}};function c_(e){return new u_(e,(e=>Qk(e)?e.content:[]),{includeRoot:!0})}function h_(e){return c_(e).filter(Jk)}function d_(e,t){for(;e.container;)if((e=e.container)===t)return!0;return!1}function f_(e){return{start:{character:e.startColumn-1,line:e.startLine-1},end:{character:e.endColumn,line:e.endLine-1}}}function p_(e){if(!e)return;let{offset:t,end:r,range:n}=e;return{range:n,offset:t,end:r,length:r-t}}function g_(e,t){if(e.end.line<t.start.line||e.end.line===t.start.line&&e.end.character<e.start.character)return l_.Before;if(e.start.line>t.end.line||e.start.line===t.end.line&&e.start.character>t.end.character)return l_.After;let r=e.start.line>t.start.line||e.start.line===t.start.line&&e.start.character>=t.start.character,n=e.end.line<t.end.line||e.end.line===t.end.line&&e.end.character<=t.end.character;return r&&n?l_.Inside:r?l_.OverlapBack:l_.OverlapFront}function m_(e,t){return g_(e,t)>l_.After}!function(e){function t(e){return e.reduce(((e,t)=>e+t),0)}function r(e){return e.reduce(((e,t)=>e*t),0)}function n(e){return e.reduce(((e,t)=>Math.min(e,t)))}function i(e){return e.reduce(((e,t)=>Math.max(e,t)))}s(t,"sum"),e.sum=t,s(r,"product"),e.product=r,s(n,"min"),e.min=n,s(i,"max"),e.max=i}(s_||(s_={})),s(c_,"streamCst"),s(h_,"flattenCst"),s(d_,"isChildNode"),s(f_,"tokenToRange"),s(p_,"toDocumentSegment"),function(e){e[e.Before=0]="Before",e[e.After=1]="After",e[e.OverlapFront=2]="OverlapFront",e[e.OverlapBack=3]="OverlapBack",e[e.Inside=4]="Inside"}(l_||(l_={})),s(g_,"compareRange"),s(m_,"inRange");var y_=/^[\w\p{L}]$/u;function v_(e,t,r=y_){if(e){if(t>0){let n=t-e.offset,i=e.text.charAt(n);r.test(i)||t--}return C_(e,t)}}function x_(e,t){if(e){let r=k_(e,!0);if(r&&b_(r,t))return r;if(e_(e)){let r=e.content.findIndex((e=>!e.hidden));for(let n=r-1;n>=0;n--){let r=e.content[n];if(b_(r,t))return r}}}}function b_(e,t){return Jk(e)&&t.includes(e.tokenType.name)}function C_(e,t){if(Jk(e))return e;if(Qk(e)){let r=w_(e,t,!1);if(r)return C_(r,t)}}function T_(e,t){if(Jk(e))return e;if(Qk(e)){let r=w_(e,t,!0);if(r)return T_(r,t)}}function w_(e,t,r){let n,i=0,a=e.content.length-1;for(;i<=a;){let o=Math.floor((i+a)/2),s=e.content[o];if(s.offset<=t&&s.end>t)return s;s.end<=t?(n=r?s:void 0,i=o+1):a=o-1}return n}function k_(e,t=!0){for(;e.container;){let r=e.container,n=r.content.indexOf(e);for(;n>0;){n--;let e=r.content[n];if(t||!e.hidden)return e}e=r}}function __(e,t=!0){for(;e.container;){let r=e.container,n=r.content.indexOf(e),i=r.content.length-1;for(;n<i;){n++;let e=r.content[n];if(t||!e.hidden)return e}e=r}}function E_(e){if(0===e.range.start.character)return e;let t,r=e.range.start.line,n=e;for(;e.container;){let i=e.container,a=t??i.content.indexOf(e);if(0===a?(e=i,t=void 0):(t=a-1,e=i.content[t]),e.range.start.line!==r)break;n=e}return n}function S_(e,t){let r=A_(e,t);return r?r.parent.content.slice(r.a+1,r.b):[]}function A_(e,t){let r,n=N_(e),i=N_(t);for(let e=0;e<n.length&&e<i.length;e++){let t=n[e],a=i[e];if(t.parent!==a.parent)break;r={parent:t.parent,a:t.index,b:a.index}}return r}function N_(e){let t=[];for(;e.container;){let r=e.container,n=r.content.indexOf(e);t.push({parent:r,index:n}),e=r}return t.reverse()}s(v_,"findDeclarationNodeAtOffset"),s(x_,"findCommentNode"),s(b_,"isCommentNode"),s(C_,"findLeafNodeAtOffset"),s(T_,"findLeafNodeBeforeOffset"),s(w_,"binarySearch"),s(k_,"getPreviousNode"),s(__,"getNextNode"),s(E_,"getStartlineNode"),s(S_,"getInteriorNodes"),s(A_,"getCommonParent"),s(N_,"getParentChain");var R_={};u(R_,{findAssignment:()=>TA,findNameAssignment:()=>wA,findNodeForKeyword:()=>bA,findNodeForProperty:()=>yA,findNodesForKeyword:()=>xA,findNodesForKeywordInternal:()=>CA,findNodesForProperty:()=>mA,getActionAtElement:()=>_A,getActionType:()=>DA,getAllReachableRules:()=>dA,getCrossReferenceTerminal:()=>pA,getEntryRule:()=>cA,getExplicitRuleType:()=>MA,getHiddenRules:()=>hA,getRuleType:()=>PA,getTypeName:()=>OA,isArrayCardinality:()=>SA,isArrayOperator:()=>AA,isCommentTerminal:()=>gA,isDataType:()=>LA,isDataTypeRule:()=>NA,isOptionalCardinality:()=>EA,terminalRegex:()=>FA});var L_=class extends Error{static{s(this,"ErrorWithLocation")}constructor(e,t){super(e?`${t} at ${e.range.start.line}:${e.range.start.character}`:t)}};function I_(e){throw new Error("Error! The input value was not handled.")}s(I_,"assertUnreachable");var M_={};u(M_,{AbstractElement:()=>H_,AbstractRule:()=>D_,AbstractType:()=>F_,Action:()=>UE,Alternatives:()=>jE,ArrayLiteral:()=>X_,ArrayType:()=>Z_,Assignment:()=>WE,BooleanLiteral:()=>J_,CharacterRange:()=>HE,Condition:()=>$_,Conjunction:()=>tE,CrossReference:()=>XE,Disjunction:()=>nE,EndOfFile:()=>ZE,Grammar:()=>aE,GrammarImport:()=>sE,Group:()=>JE,InferredType:()=>uE,Interface:()=>hE,Keyword:()=>tS,LangiumGrammarAstReflection:()=>CS,LangiumGrammarTerminals:()=>O_,NamedArgument:()=>fE,NegatedToken:()=>nS,Negation:()=>gE,NumberLiteral:()=>yE,Parameter:()=>xE,ParameterReference:()=>CE,ParserRule:()=>wE,ReferenceType:()=>_E,RegexToken:()=>aS,ReturnType:()=>SE,RuleCall:()=>sS,SimpleType:()=>NE,StringLiteral:()=>LE,TerminalAlternatives:()=>uS,TerminalGroup:()=>hS,TerminalRule:()=>ME,TerminalRuleCall:()=>fS,Type:()=>DE,TypeAttribute:()=>FE,TypeDefinition:()=>j_,UnionType:()=>$E,UnorderedGroup:()=>gS,UntilToken:()=>yS,ValueLiteral:()=>W_,Wildcard:()=>xS,isAbstractElement:()=>Y_,isAbstractRule:()=>P_,isAbstractType:()=>B_,isAction:()=>GE,isAlternatives:()=>VE,isArrayLiteral:()=>K_,isArrayType:()=>Q_,isAssignment:()=>qE,isBooleanLiteral:()=>eE,isCharacterRange:()=>YE,isCondition:()=>z_,isConjunction:()=>rE,isCrossReference:()=>KE,isDisjunction:()=>iE,isEndOfFile:()=>QE,isFeatureName:()=>U_,isGrammar:()=>oE,isGrammarImport:()=>lE,isGroup:()=>eS,isInferredType:()=>cE,isInterface:()=>dE,isKeyword:()=>rS,isNamedArgument:()=>pE,isNegatedToken:()=>iS,isNegation:()=>mE,isNumberLiteral:()=>vE,isParameter:()=>bE,isParameterReference:()=>TE,isParserRule:()=>kE,isPrimitiveType:()=>G_,isReferenceType:()=>EE,isRegexToken:()=>oS,isReturnType:()=>AE,isRuleCall:()=>lS,isSimpleType:()=>RE,isStringLiteral:()=>IE,isTerminalAlternatives:()=>cS,isTerminalGroup:()=>dS,isTerminalRule:()=>OE,isTerminalRuleCall:()=>pS,isType:()=>PE,isTypeAttribute:()=>BE,isTypeDefinition:()=>V_,isUnionType:()=>zE,isUnorderedGroup:()=>mS,isUntilToken:()=>vS,isValueLiteral:()=>q_,isWildcard:()=>bS,reflection:()=>TS});var O_={ID:/\^?[_a-zA-Z][\w_]*/,STRING:/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'/,NUMBER:/NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity)/,RegexLiteral:/\/(?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+\/[a-z]*/,WS:/\s+/,ML_COMMENT:/\/\*[\s\S]*?\*\//,SL_COMMENT:/\/\/[^\n\r]*/},D_="AbstractRule";function P_(e){return TS.isInstance(e,D_)}s(P_,"isAbstractRule");var F_="AbstractType";function B_(e){return TS.isInstance(e,F_)}s(B_,"isAbstractType");var $_="Condition";function z_(e){return TS.isInstance(e,$_)}function U_(e){return G_(e)||"current"===e||"entry"===e||"extends"===e||"false"===e||"fragment"===e||"grammar"===e||"hidden"===e||"import"===e||"interface"===e||"returns"===e||"terminal"===e||"true"===e||"type"===e||"infer"===e||"infers"===e||"with"===e||"string"==typeof e&&/\^?[_a-zA-Z][\w_]*/.test(e)}function G_(e){return"string"===e||"number"===e||"boolean"===e||"Date"===e||"bigint"===e}s(z_,"isCondition"),s(U_,"isFeatureName"),s(G_,"isPrimitiveType");var j_="TypeDefinition";function V_(e){return TS.isInstance(e,j_)}s(V_,"isTypeDefinition");var W_="ValueLiteral";function q_(e){return TS.isInstance(e,W_)}s(q_,"isValueLiteral");var H_="AbstractElement";function Y_(e){return TS.isInstance(e,H_)}s(Y_,"isAbstractElement");var X_="ArrayLiteral";function K_(e){return TS.isInstance(e,X_)}s(K_,"isArrayLiteral");var Z_="ArrayType";function Q_(e){return TS.isInstance(e,Z_)}s(Q_,"isArrayType");var J_="BooleanLiteral";function eE(e){return TS.isInstance(e,J_)}s(eE,"isBooleanLiteral");var tE="Conjunction";function rE(e){return TS.isInstance(e,tE)}s(rE,"isConjunction");var nE="Disjunction";function iE(e){return TS.isInstance(e,nE)}s(iE,"isDisjunction");var aE="Grammar";function oE(e){return TS.isInstance(e,aE)}s(oE,"isGrammar");var sE="GrammarImport";function lE(e){return TS.isInstance(e,sE)}s(lE,"isGrammarImport");var uE="InferredType";function cE(e){return TS.isInstance(e,uE)}s(cE,"isInferredType");var hE="Interface";function dE(e){return TS.isInstance(e,hE)}s(dE,"isInterface");var fE="NamedArgument";function pE(e){return TS.isInstance(e,fE)}s(pE,"isNamedArgument");var gE="Negation";function mE(e){return TS.isInstance(e,gE)}s(mE,"isNegation");var yE="NumberLiteral";function vE(e){return TS.isInstance(e,yE)}s(vE,"isNumberLiteral");var xE="Parameter";function bE(e){return TS.isInstance(e,xE)}s(bE,"isParameter");var CE="ParameterReference";function TE(e){return TS.isInstance(e,CE)}s(TE,"isParameterReference");var wE="ParserRule";function kE(e){return TS.isInstance(e,wE)}s(kE,"isParserRule");var _E="ReferenceType";function EE(e){return TS.isInstance(e,_E)}s(EE,"isReferenceType");var SE="ReturnType";function AE(e){return TS.isInstance(e,SE)}s(AE,"isReturnType");var NE="SimpleType";function RE(e){return TS.isInstance(e,NE)}s(RE,"isSimpleType");var LE="StringLiteral";function IE(e){return TS.isInstance(e,LE)}s(IE,"isStringLiteral");var ME="TerminalRule";function OE(e){return TS.isInstance(e,ME)}s(OE,"isTerminalRule");var DE="Type";function PE(e){return TS.isInstance(e,DE)}s(PE,"isType");var FE="TypeAttribute";function BE(e){return TS.isInstance(e,FE)}s(BE,"isTypeAttribute");var $E="UnionType";function zE(e){return TS.isInstance(e,$E)}s(zE,"isUnionType");var UE="Action";function GE(e){return TS.isInstance(e,UE)}s(GE,"isAction");var jE="Alternatives";function VE(e){return TS.isInstance(e,jE)}s(VE,"isAlternatives");var WE="Assignment";function qE(e){return TS.isInstance(e,WE)}s(qE,"isAssignment");var HE="CharacterRange";function YE(e){return TS.isInstance(e,HE)}s(YE,"isCharacterRange");var XE="CrossReference";function KE(e){return TS.isInstance(e,XE)}s(KE,"isCrossReference");var ZE="EndOfFile";function QE(e){return TS.isInstance(e,ZE)}s(QE,"isEndOfFile");var JE="Group";function eS(e){return TS.isInstance(e,JE)}s(eS,"isGroup");var tS="Keyword";function rS(e){return TS.isInstance(e,tS)}s(rS,"isKeyword");var nS="NegatedToken";function iS(e){return TS.isInstance(e,nS)}s(iS,"isNegatedToken");var aS="RegexToken";function oS(e){return TS.isInstance(e,aS)}s(oS,"isRegexToken");var sS="RuleCall";function lS(e){return TS.isInstance(e,sS)}s(lS,"isRuleCall");var uS="TerminalAlternatives";function cS(e){return TS.isInstance(e,uS)}s(cS,"isTerminalAlternatives");var hS="TerminalGroup";function dS(e){return TS.isInstance(e,hS)}s(dS,"isTerminalGroup");var fS="TerminalRuleCall";function pS(e){return TS.isInstance(e,fS)}s(pS,"isTerminalRuleCall");var gS="UnorderedGroup";function mS(e){return TS.isInstance(e,gS)}s(mS,"isUnorderedGroup");var yS="UntilToken";function vS(e){return TS.isInstance(e,yS)}s(vS,"isUntilToken");var xS="Wildcard";function bS(e){return TS.isInstance(e,xS)}s(bS,"isWildcard");var CS=class extends Zk{static{s(this,"LangiumGrammarAstReflection")}getAllTypes(){return["AbstractElement","AbstractRule","AbstractType","Action","Alternatives","ArrayLiteral","ArrayType","Assignment","BooleanLiteral","CharacterRange","Condition","Conjunction","CrossReference","Disjunction","EndOfFile","Grammar","GrammarImport","Group","InferredType","Interface","Keyword","NamedArgument","NegatedToken","Negation","NumberLiteral","Parameter","ParameterReference","ParserRule","ReferenceType","RegexToken","ReturnType","RuleCall","SimpleType","StringLiteral","TerminalAlternatives","TerminalGroup","TerminalRule","TerminalRuleCall","Type","TypeAttribute","TypeDefinition","UnionType","UnorderedGroup","UntilToken","ValueLiteral","Wildcard"]}computeIsSubtype(e,t){switch(e){case UE:case jE:case WE:case HE:case XE:case ZE:case JE:case tS:case nS:case aS:case sS:case uS:case hS:case fS:case gS:case yS:case xS:return this.isSubtype(H_,t);case X_:case yE:case LE:return this.isSubtype(W_,t);case Z_:case _E:case NE:case $E:return this.isSubtype(j_,t);case J_:return this.isSubtype($_,t)||this.isSubtype(W_,t);case tE:case nE:case gE:case CE:return this.isSubtype($_,t);case uE:case hE:case DE:return this.isSubtype(F_,t);case wE:return this.isSubtype(D_,t)||this.isSubtype(F_,t);case ME:return this.isSubtype(D_,t);default:return!1}}getReferenceType(e){let t=`${e.container.$type}:${e.property}`;switch(t){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return F_;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return D_;case"Grammar:usedGrammars":return aE;case"NamedArgument:parameter":case"ParameterReference:parameter":return xE;case"TerminalRuleCall:rule":return ME;default:throw new Error(`${t} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case"AbstractElement":return{name:"AbstractElement",properties:[{name:"cardinality"},{name:"lookahead"}]};case"ArrayLiteral":return{name:"ArrayLiteral",properties:[{name:"elements",defaultValue:[]}]};case"ArrayType":return{name:"ArrayType",properties:[{name:"elementType"}]};case"BooleanLiteral":return{name:"BooleanLiteral",properties:[{name:"true",defaultValue:!1}]};case"Conjunction":return{name:"Conjunction",properties:[{name:"left"},{name:"right"}]};case"Disjunction":return{name:"Disjunction",properties:[{name:"left"},{name:"right"}]};case"Grammar":return{name:"Grammar",properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case"GrammarImport":return{name:"GrammarImport",properties:[{name:"path"}]};case"InferredType":return{name:"InferredType",properties:[{name:"name"}]};case"Interface":return{name:"Interface",properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case"NamedArgument":return{name:"NamedArgument",properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case"Negation":return{name:"Negation",properties:[{name:"value"}]};case"NumberLiteral":return{name:"NumberLiteral",properties:[{name:"value"}]};case"Parameter":return{name:"Parameter",properties:[{name:"name"}]};case"ParameterReference":return{name:"ParameterReference",properties:[{name:"parameter"}]};case"ParserRule":return{name:"ParserRule",properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case"ReferenceType":return{name:"ReferenceType",properties:[{name:"referenceType"}]};case"ReturnType":return{name:"ReturnType",properties:[{name:"name"}]};case"SimpleType":return{name:"SimpleType",properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case"StringLiteral":return{name:"StringLiteral",properties:[{name:"value"}]};case"TerminalRule":return{name:"TerminalRule",properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case"Type":return{name:"Type",properties:[{name:"name"},{name:"type"}]};case"TypeAttribute":return{name:"TypeAttribute",properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case"UnionType":return{name:"UnionType",properties:[{name:"types",defaultValue:[]}]};case"Action":return{name:"Action",properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case"Alternatives":return{name:"Alternatives",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"Assignment":return{name:"Assignment",properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case"CharacterRange":return{name:"CharacterRange",properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case"CrossReference":return{name:"CrossReference",properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case"EndOfFile":return{name:"EndOfFile",properties:[{name:"cardinality"},{name:"lookahead"}]};case"Group":return{name:"Group",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case"Keyword":return{name:"Keyword",properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case"NegatedToken":return{name:"NegatedToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case"RegexToken":return{name:"RegexToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case"RuleCall":return{name:"RuleCall",properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case"TerminalAlternatives":return{name:"TerminalAlternatives",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"TerminalGroup":return{name:"TerminalGroup",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"TerminalRuleCall":return{name:"TerminalRuleCall",properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case"UnorderedGroup":return{name:"UnorderedGroup",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"UntilToken":return{name:"UntilToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case"Wildcard":return{name:"Wildcard",properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:e,properties:[]}}}},TS=new CS,wS={};function kS(e){for(let[t,r]of Object.entries(e))t.startsWith("$")||(Array.isArray(r)?r.forEach(((r,n)=>{Hk(r)&&(r.$container=e,r.$containerProperty=t,r.$containerIndex=n)})):Hk(r)&&(r.$container=e,r.$containerProperty=t))}function _S(e,t){let r=e;for(;r;){if(t(r))return r;r=r.$container}}function ES(e,t){let r=e;for(;r;){if(t(r))return!0;r=r.$container}return!1}function SS(e){let t=AS(e).$document;if(!t)throw new Error("AST node has no document.");return t}function AS(e){for(;e.$container;)e=e.$container;return e}function NS(e,t){if(!e)throw new Error("Node must be an AstNode.");let r=t?.range;return new t_((()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0})),(t=>{for(;t.keyIndex<t.keys.length;){let n=t.keys[t.keyIndex];if(!n.startsWith("$")){let i=e[n];if(Hk(i)){if(t.keyIndex++,IS(i,r))return{done:!1,value:i}}else if(Array.isArray(i)){for(;t.arrayIndex<i.length;){let e=i[t.arrayIndex++];if(Hk(e)&&IS(e,r))return{done:!1,value:e}}t.arrayIndex=0}}t.keyIndex++}return a_}))}function RS(e,t){if(!e)throw new Error("Root node must be an AstNode.");return new u_(e,(e=>NS(e,t)))}function LS(e,t){if(!e)throw new Error("Root node must be an AstNode.");return t?.range&&!IS(e,t.range)?new u_(e,(()=>[])):new u_(e,(e=>NS(e,t)),{includeRoot:!0})}function IS(e,t){var r;if(!t)return!0;let n=null===(r=e.$cstNode)||void 0===r?void 0:r.range;return!!n&&m_(n,t)}function MS(e){return new t_((()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0})),(t=>{for(;t.keyIndex<t.keys.length;){let r=t.keys[t.keyIndex];if(!r.startsWith("$")){let n=e[r];if(Yk(n))return t.keyIndex++,{done:!1,value:{reference:n,container:e,property:r}};if(Array.isArray(n)){for(;t.arrayIndex<n.length;){let i=t.arrayIndex++,a=n[i];if(Yk(a))return{done:!1,value:{reference:a,container:e,property:r,index:i}}}t.arrayIndex=0}}t.keyIndex++}return a_}))}function OS(e,t=SS(e).parseResult.value){let r=[];return LS(t).forEach((t=>{MS(t).forEach((t=>{t.reference.ref===e&&r.push(t.reference)}))})),o_(r)}function DS(e,t){let r=e.getTypeMetaData(t.$type),n=t;for(let e of r.properties)void 0!==e.defaultValue&&void 0===n[e.name]&&(n[e.name]=PS(e.defaultValue))}function PS(e){return Array.isArray(e)?[...e.map(PS)]:e}function FS(e,t){let r={$type:e.$type};for(let[n,i]of Object.entries(e))if(!n.startsWith("$"))if(Hk(i))r[n]=FS(i,t);else if(Yk(i))r[n]=t(r,n,i.$refNode,i.$refText);else if(Array.isArray(i)){let e=[];for(let a of i)Hk(a)?e.push(FS(a,t)):Yk(a)?e.push(t(r,n,a.$refNode,a.$refText)):e.push(a);r[n]=e}else r[n]=i;return kS(r),r}u(wS,{assignMandatoryProperties:()=>DS,copyAstNode:()=>FS,findLocalReferences:()=>OS,findRootNode:()=>AS,getContainerOfType:()=>_S,getDocument:()=>SS,hasContainerOfType:()=>ES,linkContentToContainer:()=>kS,streamAllContents:()=>RS,streamAst:()=>LS,streamContents:()=>NS,streamReferences:()=>MS}),s(kS,"linkContentToContainer"),s(_S,"getContainerOfType"),s(ES,"hasContainerOfType"),s(SS,"getDocument"),s(AS,"findRootNode"),s(NS,"streamContents"),s(RS,"streamAllContents"),s(LS,"streamAst"),s(IS,"isAstNodeInRange"),s(MS,"streamReferences"),s(OS,"findLocalReferences"),s(DS,"assignMandatoryProperties"),s(PS,"copyDefaultValue"),s(FS,"copyAstNode");var BS={};function $S(e){return e.charCodeAt(0)}function zS(e,t){Array.isArray(e)?e.forEach((function(e){t.push(e)})):t.push(e)}function US(e,t){if(!0===e[t])throw"duplicate flag "+t;e[t],e[t]=!0}function GS(e){if(void 0===e)throw Error("Internal Error - Should never get here!");return!0}function jS(){throw Error("Internal Error - Should never get here!")}function VS(e){return"Character"===e.type}u(BS,{NEWLINE_REGEXP:()=>JS,escapeRegExp:()=>oA,getCaseInsensitivePattern:()=>sA,getTerminalParts:()=>nA,isMultilineComment:()=>iA,isWhitespace:()=>aA,partialMatches:()=>lA,partialRegExp:()=>uA}),s($S,"cc"),s(zS,"insertToSet"),s(US,"addFlag"),s(GS,"ASSERT_EXISTS"),s(jS,"ASSERT_NEVER_REACH_HERE"),s(VS,"isCharacter");var WS=[];for(let e=$S("0");e<=$S("9");e++)WS.push(e);var qS=[$S("_")].concat(WS);for(let e=$S("a");e<=$S("z");e++)qS.push(e);for(let e=$S("A");e<=$S("Z");e++)qS.push(e);var HS=[$S(" "),$S("\f"),$S("\n"),$S("\r"),$S("\t"),$S("\v"),$S("\t"),$S(" "),$S(" "),$S(" "),$S(" "),$S(" "),$S(" "),$S(" "),$S(" "),$S(" "),$S(" "),$S(" "),$S(" "),$S(" "),$S("\u2028"),$S("\u2029"),$S(" "),$S(" "),$S("　"),$S("\ufeff")],YS=/[0-9a-fA-F]/,XS=/[0-9]/,KS=/[1-9]/,ZS=class{static{s(this,"RegExpParser")}constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let t=this.disjunction();this.consumeChar("/");let r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":US(r,"global");break;case"i":US(r,"ignoreCase");break;case"m":US(r,"multiLine");break;case"u":US(r,"unicode");break;case"y":US(r,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:t,loc:this.loc(0)}}disjunction(){let e=[],t=this.idx;for(e.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){let e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":let t;switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}GS(t);let r=this.disjunction();return this.consumeChar(")"),{type:t,value:r,loc:this.loc(e)}}return jS()}quantifier(e=!1){let t,r=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":let r=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:r,atMost:r};break;case",":let e;this.isDigit()?(e=this.integerIncludingZero(),t={atLeast:r,atMost:e}):t={atLeast:r,atMost:1/0},this.consumeChar("}")}if(!0===e&&void 0===t)return;GS(t)}if((!0!==e||void 0!==t)&&GS(t))return"?"===this.peekChar(0)?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(r),t}atom(){let e,t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group()}return void 0===e&&this.isPatternCharacter()&&(e=this.patternCharacter()),GS(e)?(e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):jS()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[$S("\n"),$S("\r"),$S("\u2028"),$S("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=WS;break;case"D":e=WS,t=!0;break;case"s":e=HS;break;case"S":e=HS,t=!0;break;case"w":e=qS;break;case"W":e=qS,t=!0}return GS(e)?{type:"Set",value:e,complement:t}:jS()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=$S("\f");break;case"n":e=$S("\n");break;case"r":e=$S("\r");break;case"t":e=$S("\t");break;case"v":e=$S("\v")}return GS(e)?{type:"Character",value:e}:jS()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(!1===/[a-zA-Z]/.test(e))throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:$S("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){return{type:"Character",value:$S(this.popChar())}}classPatternCharacterAtom(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:$S(this.popChar())}}}characterClass(){let e=[],t=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),t=!0);this.isClassAtom();){let t=this.classAtom();if(t.type,VS(t)&&this.isRangeDash()){this.consumeChar("-");let r=this.classAtom();if(r.type,VS(r)){if(r.value<t.value)throw Error("Range out of order in character class");e.push({from:t.value,to:r.value})}else zS(t.value,e),e.push($S("-")),zS(r.value,e)}else zS(t.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:$S("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;if("?"===(this.consumeChar("("),this.peekChar(0)))this.consumeChar("?"),this.consumeChar(":"),e=!1;else this.groupIdx++;let t=this.disjunction();this.consumeChar(")");let r={type:"Group",capturing:e,value:t};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(!1===KS.test(e))throw Error("Expecting a positive integer");for(;XS.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(!1===XS.test(e))throw Error("Expecting an integer");for(;XS.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:$S(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return"-"===this.peekChar()&&this.isClassAtom(1)}isDigit(){return XS.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}}isQuantifier(){let e=this.saveState();try{return void 0!==this.quantifier(!0)}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let r=0;r<e;r++){let e=this.popChar();if(!1===YS.test(e))throw Error("Expecting a HexDecimal digits");t+=e}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(void 0!==e&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}},QS=class{static{s(this,"BaseRegExpVisitor")}visitChildren(e){for(let t in e){let r=e[t];e.hasOwnProperty(t)&&(void 0!==r.type?this.visit(r):Array.isArray(r)&&r.forEach((e=>{this.visit(e)}),this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e)}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}},JS=/\r?\n/gm,eA=new ZS,tA=class extends QS{static{s(this,"TerminalRegExpVisitor")}constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(e){let t=String.fromCharCode(e.value);if(!this.multiline&&"\n"===t&&(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{let e=oA(t);this.endRegexpStack.push(e),this.isStarting&&(this.startRegexp+=e)}}visitSet(e){if(!this.multiline){let t=this.regex.substring(e.loc.begin,e.loc.end),r=new RegExp(t);this.multiline=!!"\n".match(r)}if(e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{let t=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(t),this.isStarting&&(this.startRegexp+=t)}}visitChildren(e){"Group"===e.type&&e.quantifier||super.visitChildren(e)}},rA=new tA;function nA(e){try{"string"!=typeof e&&(e=e.source),e=`/${e}/`;let t=eA.pattern(e),r=[];for(let n of t.value.value)rA.reset(e),rA.visit(n),r.push({start:rA.startRegexp,end:rA.endRegex});return r}catch{return[]}}function iA(e){try{return"string"==typeof e&&(e=new RegExp(e)),e=e.toString(),rA.reset(e),rA.visit(eA.pattern(e)),rA.multiline}catch{return!1}}function aA(e){return("string"==typeof e?new RegExp(e):e).test(" ")}function oA(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function sA(e){return Array.prototype.map.call(e,(e=>/\w/.test(e)?`[${e.toLowerCase()}${e.toUpperCase()}]`:oA(e))).join("")}function lA(e,t){let r=uA(e),n=t.match(r);return!!n&&n[0].length>0}function uA(e){"string"==typeof e&&(e=new RegExp(e));let t=e,r=e.source,n=0;function i(){let e,a="";function o(e){a+=r.substr(n,e),n+=e}function l(e){a+="(?:"+r.substr(n,e)+"|$)",n+=e}for(s(o,"appendRaw"),s(l,"appendOptional");n<r.length;)switch(r[n]){case"\\":switch(r[n+1]){case"c":l(3);break;case"x":l(4);break;case"u":t.unicode?"{"===r[n+2]?l(r.indexOf("}",n)-n+1):l(6):l(2);break;case"p":case"P":t.unicode?l(r.indexOf("}",n)-n+1):l(2);break;case"k":l(r.indexOf(">",n)-n+1);break;default:l(2)}break;case"[":e=/\[(?:\\.|.)*?\]/g,e.lastIndex=n,e=e.exec(r)||[],l(e[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":o(1);break;case"{":e=/\{\d+,?\d*\}/g,e.lastIndex=n,e=e.exec(r),e?o(e[0].length):l(1);break;case"(":if("?"===r[n+1])switch(r[n+2]){case":":a+="(?:",n+=3,a+=i()+"|$)";break;case"=":a+="(?=",n+=3,a+=i()+")";break;case"!":e=n,n+=3,i(),a+=r.substr(e,n-e);break;case"<":switch(r[n+3]){case"=":case"!":e=n,n+=4,i(),a+=r.substr(e,n-e);break;default:o(r.indexOf(">",n)-n+1),a+=i()+"|$)"}}else o(1),a+=i()+"|$)";break;case")":return++n,a;default:l(1)}return a}return s(i,"process"),new RegExp(i(),e.flags)}function cA(e){return e.rules.find((e=>kE(e)&&e.entry))}function hA(e){return e.rules.filter((e=>OE(e)&&e.hidden))}function dA(e,t){let r=new Set,n=cA(e);if(!n)return new Set(e.rules);let i=[n].concat(hA(e));for(let e of i)fA(e,r,t);let a=new Set;for(let t of e.rules)(r.has(t.name)||OE(t)&&t.hidden)&&a.add(t);return a}function fA(e,t,r){t.add(e.name),RS(e).forEach((e=>{if(lS(e)||r&&pS(e)){let n=e.rule.ref;n&&!t.has(n.name)&&fA(n,t,r)}}))}function pA(e){if(e.terminal)return e.terminal;if(e.type.ref){let t=wA(e.type.ref);return t?.terminal}}function gA(e){return e.hidden&&!FA(e).test(" ")}function mA(e,t){return e&&t?vA(e,t,e.astNode,!0):[]}function yA(e,t,r){if(!e||!t)return;let n=vA(e,t,e.astNode,!0);return 0!==n.length?n[r=void 0!==r?Math.max(0,Math.min(r,n.length-1)):0]:void 0}function vA(e,t,r,n){if(!n){let r=_S(e.grammarSource,qE);if(r&&r.feature===t)return[e]}return Qk(e)&&e.astNode===r?e.content.flatMap((e=>vA(e,t,r,!1))):[]}function xA(e,t){return e?CA(e,t,e?.astNode):[]}function bA(e,t,r){if(!e)return;let n=CA(e,t,e?.astNode);return 0!==n.length?n[r=void 0!==r?Math.max(0,Math.min(r,n.length-1)):0]:void 0}function CA(e,t,r){if(e.astNode!==r)return[];if(rS(e.grammarSource)&&e.grammarSource.value===t)return[e];let n,i=c_(e).iterator(),a=[];do{if(n=i.next(),!n.done){let e=n.value;e.astNode===r?rS(e.grammarSource)&&e.grammarSource.value===t&&a.push(e):i.prune()}}while(!n.done);return a}function TA(e){var t;let r=e.astNode;for(;r===(null===(t=e.container)||void 0===t?void 0:t.astNode);){let t=_S(e.grammarSource,qE);if(t)return t;e=e.container}}function wA(e){let t=e;return cE(t)&&(GE(t.$container)?t=t.$container.$container:kE(t.$container)?t=t.$container:I_(t.$container)),kA(e,t,new Map)}function kA(e,t,r){var n;function i(t,n){let i;return _S(t,qE)||(i=kA(n,n,r)),r.set(e,i),i}if(s(i,"go"),r.has(e))return r.get(e);r.set(e,void 0);for(let a of RS(t)){if(qE(a)&&"name"===a.feature.toLowerCase())return r.set(e,a),a;if(lS(a)&&kE(a.rule.ref))return i(a,a.rule.ref);if(RE(a)&&null!==(n=a.typeRef)&&void 0!==n&&n.ref)return i(a,a.typeRef.ref)}}function _A(e){let t=e.$container;if(eS(t)){let r=t.elements;for(let t=r.indexOf(e)-1;t>=0;t--){let e=r[t];if(GE(e))return e;{let e=RS(r[t]).find(GE);if(e)return e}}}if(Y_(t))return _A(t)}function EA(e,t){return"?"===e||"*"===e||eS(t)&&!!t.guardCondition}function SA(e){return"*"===e||"+"===e}function AA(e){return"+="===e}function NA(e){return RA(e,new Set)}function RA(e,t){if(t.has(e))return!0;t.add(e);for(let r of RS(e))if(lS(r)){if(!r.rule.ref||kE(r.rule.ref)&&!RA(r.rule.ref,t))return!1}else{if(qE(r))return!1;if(GE(r))return!1}return!!e.definition}function LA(e){return IA(e.type,new Set)}function IA(e,t){if(t.has(e))return!0;if(t.add(e),Q_(e))return!1;if(EE(e))return!1;if(zE(e))return e.types.every((e=>IA(e,t)));if(RE(e)){if(void 0!==e.primitiveType)return!0;if(void 0!==e.stringType)return!0;if(void 0!==e.typeRef){let r=e.typeRef.ref;return!!PE(r)&&IA(r.type,t)}return!1}return!1}function MA(e){if(e.inferredType)return e.inferredType.name;if(e.dataType)return e.dataType;if(e.returnType){let t=e.returnType.ref;if(t){if(kE(t))return t.name;if(dE(t)||PE(t))return t.name}}}function OA(e){var t;if(kE(e))return NA(e)?e.name:null!==(t=MA(e))&&void 0!==t?t:e.name;if(dE(e)||PE(e)||AE(e))return e.name;if(GE(e)){let t=DA(e);if(t)return t}else if(cE(e))return e.name;throw new Error("Cannot get name of Unknown Type")}function DA(e){var t;return e.inferredType?e.inferredType.name:null!==(t=e.type)&&void 0!==t&&t.ref?OA(e.type.ref):void 0}function PA(e){var t,r,n;return OE(e)?null!==(r=null===(t=e.type)||void 0===t?void 0:t.name)&&void 0!==r?r:"string":NA(e)?e.name:null!==(n=MA(e))&&void 0!==n?n:e.name}function FA(e){let t={s:!1,i:!1,u:!1},r=$A(e.definition,t),n=Object.entries(t).filter((([,e])=>e)).map((([e])=>e)).join("");return new RegExp(r,n)}s(nA,"getTerminalParts"),s(iA,"isMultilineComment"),s(aA,"isWhitespace"),s(oA,"escapeRegExp"),s(sA,"getCaseInsensitivePattern"),s(lA,"partialMatches"),s(uA,"partialRegExp"),s(cA,"getEntryRule"),s(hA,"getHiddenRules"),s(dA,"getAllReachableRules"),s(fA,"ruleDfs"),s(pA,"getCrossReferenceTerminal"),s(gA,"isCommentTerminal"),s(mA,"findNodesForProperty"),s(yA,"findNodeForProperty"),s(vA,"findNodesForPropertyInternal"),s(xA,"findNodesForKeyword"),s(bA,"findNodeForKeyword"),s(CA,"findNodesForKeywordInternal"),s(TA,"findAssignment"),s(wA,"findNameAssignment"),s(kA,"findNameAssignmentInternal"),s(_A,"getActionAtElement"),s(EA,"isOptionalCardinality"),s(SA,"isArrayCardinality"),s(AA,"isArrayOperator"),s(NA,"isDataTypeRule"),s(RA,"isDataTypeRuleInternal"),s(LA,"isDataType"),s(IA,"isDataTypeInternal"),s(MA,"getExplicitRuleType"),s(OA,"getTypeName"),s(DA,"getActionType"),s(PA,"getRuleType"),s(FA,"terminalRegex");var BA=/[\s\S]/.source;function $A(e,t){if(cS(e))return zA(e);if(dS(e))return UA(e);if(YE(e))return VA(e);if(pS(e)){let t=e.rule.ref;if(!t)throw new Error("Missing rule reference.");return qA($A(t.definition),{cardinality:e.cardinality,lookahead:e.lookahead})}if(iS(e))return jA(e);if(vS(e))return GA(e);if(oS(e)){let r=e.regex.lastIndexOf("/"),n=e.regex.substring(1,r),i=e.regex.substring(r+1);return t&&(t.i=i.includes("i"),t.s=i.includes("s"),t.u=i.includes("u")),qA(n,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}if(bS(e))return qA(BA,{cardinality:e.cardinality,lookahead:e.lookahead});throw new Error(`Invalid terminal element: ${e?.$type}`)}function zA(e){return qA(e.elements.map((e=>$A(e))).join("|"),{cardinality:e.cardinality,lookahead:e.lookahead})}function UA(e){return qA(e.elements.map((e=>$A(e))).join(""),{cardinality:e.cardinality,lookahead:e.lookahead})}function GA(e){return qA(`${BA}*?${$A(e.terminal)}`,{cardinality:e.cardinality,lookahead:e.lookahead})}function jA(e){return qA(`(?!${$A(e.terminal)})${BA}*?`,{cardinality:e.cardinality,lookahead:e.lookahead})}function VA(e){return e.right?qA(`[${WA(e.left)}-${WA(e.right)}]`,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1}):qA(WA(e.left),{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}function WA(e){return oA(e.value)}function qA(e,t){var r;return(!1!==t.wrap||t.lookahead)&&(e=`(${null!==(r=t.lookahead)&&void 0!==r?r:""}${e})`),t.cardinality?`${e}${t.cardinality}`:e}function HA(e){let t=[],r=e.Grammar;for(let e of r.rules)OE(e)&&gA(e)&&iA(FA(e))&&t.push(e.name);return{multilineCommentRules:t,nameRegexp:y_}}function YA(e){console&&console.error&&console.error(`Error: ${e}`)}function XA(e){console&&console.warn&&console.warn(`Warning: ${e}`)}function KA(e){let t=(new Date).getTime(),r=e();return{time:(new Date).getTime()-t,value:r}}function ZA(e){function t(){}s(t,"FakeConstructor"),t.prototype=e;let r=new t;function n(){return typeof r.bar}return s(n,"fakeAccess"),n(),n(),e}function QA(e){return JA(e)?e.LABEL:e.name}function JA(e){return Ow(e.LABEL)&&""!==e.LABEL}s($A,"abstractElementToRegex"),s(zA,"terminalAlternativesToRegex"),s(UA,"terminalGroupToRegex"),s(GA,"untilTokenToRegex"),s(jA,"negateTokenToRegex"),s(VA,"characterRangeToRegex"),s(WA,"keywordToRegex"),s(qA,"withCardinality"),s(HA,"createGrammarConfig"),s(YA,"PRINT_ERROR"),s(XA,"PRINT_WARNING"),s(KA,"timer"),s(ZA,"toFastProperties"),s(QA,"tokenLabel"),s(JA,"hasTokenLabel");var eN=class{static{s(this,"AbstractProduction")}get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),Vx(this.definition,(t=>{t.accept(e)}))}},tN=class extends eN{static{s(this,"NonTerminal")}constructor(e){super([]),this.idx=1,GT(this,Qw(e,(e=>void 0!==e)))}set definition(e){}get definition(){return void 0!==this.referencedRule?this.referencedRule.definition:[]}accept(e){e.visit(this)}},rN=class extends eN{static{s(this,"Rule")}constructor(e){super(e.definition),this.orgText="",GT(this,Qw(e,(e=>void 0!==e)))}},nN=class extends eN{static{s(this,"Alternative")}constructor(e){super(e.definition),this.ignoreAmbiguities=!1,GT(this,Qw(e,(e=>void 0!==e)))}},iN=class extends eN{static{s(this,"Option")}constructor(e){super(e.definition),this.idx=1,GT(this,Qw(e,(e=>void 0!==e)))}},aN=class extends eN{static{s(this,"RepetitionMandatory")}constructor(e){super(e.definition),this.idx=1,GT(this,Qw(e,(e=>void 0!==e)))}},oN=class extends eN{static{s(this,"RepetitionMandatoryWithSeparator")}constructor(e){super(e.definition),this.idx=1,GT(this,Qw(e,(e=>void 0!==e)))}},sN=class extends eN{static{s(this,"Repetition")}constructor(e){super(e.definition),this.idx=1,GT(this,Qw(e,(e=>void 0!==e)))}},lN=class extends eN{static{s(this,"RepetitionWithSeparator")}constructor(e){super(e.definition),this.idx=1,GT(this,Qw(e,(e=>void 0!==e)))}},uN=class extends eN{static{s(this,"Alternation")}get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,GT(this,Qw(e,(e=>void 0!==e)))}},cN=class{static{s(this,"Terminal")}constructor(e){this.idx=1,GT(this,Qw(e,(e=>void 0!==e)))}accept(e){e.visit(this)}};function hN(e){return AC(e,dN)}function dN(e){function t(e){return AC(e,dN)}if(s(t,"convertDefinition"),e instanceof tN){let t={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return Ow(e.label)&&(t.label=e.label),t}if(e instanceof nN)return{type:"Alternative",definition:t(e.definition)};if(e instanceof iN)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof aN)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof oN)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:dN(new cN({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof lN)return{type:"RepetitionWithSeparator",idx:e.idx,separator:dN(new cN({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof sN)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof uN)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof cN){let t={type:"Terminal",name:e.terminalType.name,label:QA(e.terminalType),idx:e.idx};Ow(e.label)&&(t.terminalLabel=e.label);let r=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(t.pattern=Vw(r)?r.source:r),t}if(e instanceof rN)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}s(hN,"serializeGrammar"),s(dN,"serializeProduction");var fN=class{static{s(this,"GAstVisitor")}visit(e){let t=e;switch(t.constructor){case tN:return this.visitNonTerminal(t);case nN:return this.visitAlternative(t);case iN:return this.visitOption(t);case aN:return this.visitRepetitionMandatory(t);case oN:return this.visitRepetitionMandatoryWithSeparator(t);case lN:return this.visitRepetitionWithSeparator(t);case sN:return this.visitRepetition(t);case uN:return this.visitAlternation(t);case cN:return this.visitTerminal(t);case rN:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}};function pN(e){return e instanceof nN||e instanceof iN||e instanceof sN||e instanceof aN||e instanceof oN||e instanceof lN||e instanceof cN||e instanceof rN}function gN(e,t=[]){return e instanceof iN||e instanceof sN||e instanceof lN||(e instanceof uN?Mk(e.definition,(e=>gN(e,t))):!(e instanceof tN&&Fw(t,e))&&(e instanceof eN&&(e instanceof tN&&t.push(e),gw(e.definition,(e=>gN(e,t))))))}function mN(e){return e instanceof uN}function yN(e){if(e instanceof tN)return"SUBRULE";if(e instanceof iN)return"OPTION";if(e instanceof uN)return"OR";if(e instanceof aN)return"AT_LEAST_ONE";if(e instanceof oN)return"AT_LEAST_ONE_SEP";if(e instanceof lN)return"MANY_SEP";if(e instanceof sN)return"MANY";if(e instanceof cN)return"CONSUME";throw Error("non exhaustive match")}s(pN,"isSequenceProd"),s(gN,"isOptionalProd"),s(mN,"isBranchingProd"),s(yN,"getProductionDslName");var vN=class{static{s(this,"RestWalker")}walk(e,t=[]){Vx(e.definition,((r,n)=>{let i=sw(e.definition,n+1);if(r instanceof tN)this.walkProdRef(r,i,t);else if(r instanceof cN)this.walkTerminal(r,i,t);else if(r instanceof nN)this.walkFlat(r,i,t);else if(r instanceof iN)this.walkOption(r,i,t);else if(r instanceof aN)this.walkAtLeastOne(r,i,t);else if(r instanceof oN)this.walkAtLeastOneSep(r,i,t);else if(r instanceof lN)this.walkManySep(r,i,t);else if(r instanceof sN)this.walkMany(r,i,t);else{if(!(r instanceof uN))throw Error("non exhaustive match");this.walkOr(r,i,t)}}))}walkTerminal(e,t,r){}walkProdRef(e,t,r){}walkFlat(e,t,r){let n=t.concat(r);this.walk(e,n)}walkOption(e,t,r){let n=t.concat(r);this.walk(e,n)}walkAtLeastOne(e,t,r){let n=[new iN({definition:e.definition})].concat(t,r);this.walk(e,n)}walkAtLeastOneSep(e,t,r){let n=xN(e,t,r);this.walk(e,n)}walkMany(e,t,r){let n=[new iN({definition:e.definition})].concat(t,r);this.walk(e,n)}walkManySep(e,t,r){let n=xN(e,t,r);this.walk(e,n)}walkOr(e,t,r){let n=t.concat(r);Vx(e.definition,(e=>{let t=new nN({definition:[e]});this.walk(t,n)}))}};function xN(e,t,r){return[new iN({definition:[new cN({terminalType:e.separator})].concat(e.definition)})].concat(t,r)}function bN(e){if(e instanceof tN)return bN(e.referencedRule);if(e instanceof cN)return wN(e);if(pN(e))return CN(e);if(mN(e))return TN(e);throw Error("non exhaustive match")}function CN(e){let t,r=[],n=e.definition,i=0,a=n.length>i,o=!0;for(;a&&o;)t=n[i],o=gN(t),r=r.concat(bN(t)),i+=1,a=n.length>i;return Dk(r)}function TN(e){let t=AC(e.definition,(e=>bN(e)));return Dk(ZC(t))}function wN(e){return[e.terminalType]}s(xN,"restForRepetitionWithSeparator"),s(bN,"first"),s(CN,"firstForSequence"),s(TN,"firstForBranching"),s(wN,"firstForTerminal");var kN="_~IN~_",_N=class extends vN{static{s(this,"ResyncFollowsWalker")}constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,r){}walkProdRef(e,t,r){let n=SN(e.referencedRule,e.idx)+this.topProd.name,i=t.concat(r),a=bN(new nN({definition:i}));this.follows[n]=a}};function EN(e){let t={};return Vx(e,(e=>{let r=new _N(e).startWalking();GT(t,r)})),t}function SN(e,t){return e.name+t+kN}s(EN,"computeAllProdsFollows"),s(SN,"buildBetweenProdsFollowPrefix");var AN={},NN=new ZS;function RN(e){let t=e.toString();if(AN.hasOwnProperty(t))return AN[t];{let e=NN.pattern(t);return AN[t]=e,e}}function LN(){AN={}}s(RN,"getRegExpAst"),s(LN,"clearRegExpParserCache");var IN="Complement Sets are not supported for first char optimization",MN='Unable to use "first char" lexer optimizations:\n';function ON(e,t=!1){try{let t=RN(e);return DN(t.value,{},t.flags.ignoreCase)}catch(r){if(r.message===IN)t&&XA(`${MN}\tUnable to optimize: < ${e.toString()} >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";t&&(r="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),YA(`${MN}\n\tFailed parsing: < ${e.toString()} >\n\tUsing the @chevrotain/regexp-to-ast library\n\tPlease open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function DN(e,t,r){switch(e.type){case"Disjunction":for(let n=0;n<e.value.length;n++)DN(e.value[n],t,r);break;case"Alternative":let n=e.value;for(let e=0;e<n.length;e++){let i=n[e];switch(i.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let a=i;switch(a.type){case"Character":PN(a.value,t,r);break;case"Set":if(!0===a.complement)throw Error(IN);Vx(a.value,(e=>{if("number"==typeof e)PN(e,t,r);else{let n=e;if(!0===r)for(let e=n.from;e<=n.to;e++)PN(e,t,r);else{for(let e=n.from;e<=n.to&&e<CR;e++)PN(e,t,r);if(n.to>=CR){let e=n.from>=CR?n.from:CR,r=n.to,i=wR(e),a=wR(r);for(let e=i;e<=a;e++)t[e]=e}}}}));break;case"Group":DN(a.value,t,r);break;default:throw Error("Non Exhaustive Match")}let o=void 0!==a.quantifier&&0===a.quantifier.atLeast;if("Group"===a.type&&!1===$N(a)||"Group"!==a.type&&!1===o)break}break;default:throw Error("non exhaustive match!")}return IC(t)}function PN(e,t,r){let n=wR(e);t[n]=n,!0===r&&FN(e,t)}function FN(e,t){let r=String.fromCharCode(e),n=r.toUpperCase();if(n!==r){let e=wR(n.charCodeAt(0));t[e]=e}else{let e=r.toLowerCase();if(e!==r){let r=wR(e.charCodeAt(0));t[r]=r}}}function BN(e,t){return bw(e.value,(e=>{if("number"==typeof e)return Fw(t,e);{let r=e;return void 0!==bw(t,(e=>r.from<=e&&e<=r.to))}}))}function $N(e){let t=e.quantifier;return!(!t||0!==t.atLeast)||!!e.value&&(Lm(e.value)?gw(e.value,$N):$N(e.value))}s(ON,"getOptimizedStartCodesIndices"),s(DN,"firstCharOptimizedIndices"),s(PN,"addOptimizedIdxToResult"),s(FN,"handleIgnoreCase"),s(BN,"findCode"),s($N,"isWholeOptional");var zN=class extends QS{static{s(this,"CharCodeFinder")}constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(!0!==this.found){switch(e.type){case"Lookahead":return void this.visitLookahead(e);case"NegativeLookahead":return void this.visitNegativeLookahead(e)}super.visitChildren(e)}}visitCharacter(e){Fw(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?void 0===BN(e,this.targetCharCodes)&&(this.found=!0):void 0!==BN(e,this.targetCharCodes)&&(this.found=!0)}};function UN(e,t){if(t instanceof RegExp){let r=RN(t),n=new zN(e);return n.visit(r),n.found}return void 0!==bw(t,(t=>Fw(e,t.charCodeAt(0))))}s(UN,"canMatchCharCode");var GN="PATTERN",jN="defaultMode",VN="modes",WN="boolean"==typeof new RegExp("(?:)").sticky;function qN(e,t){t=Ox(t,{useSticky:WN,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:s(((e,t)=>t()),"tracer")});let r,n=t.tracer;n("initCharCodeToOptimizedIndexMap",(()=>{kR()})),n("Reject Lexer.NA",(()=>{r=Nk(e,(e=>e[GN]===jR.NA))}));let i,a,o,l,u,c,h,d,f,p,g,m=!1;n("Transform Patterns",(()=>{m=!1,i=AC(r,(e=>{let r=e[GN];if(Vw(r)){let e=r.source;return 1!==e.length||"^"===e||"$"===e||"."===e||r.ignoreCase?2!==e.length||"\\"!==e[0]||Fw(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],e[1])?t.useSticky?cR(r):uR(r):e[1]:e}if(fp(r))return m=!0,{exec:r};if("object"==typeof r)return m=!0,r;if("string"==typeof r){if(1===r.length)return r;{let e=r.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=new RegExp(e);return t.useSticky?cR(n):uR(n)}}throw Error("non exhaustive match")}))})),n("misc mapping",(()=>{a=AC(r,(e=>e.tokenTypeIdx)),o=AC(r,(e=>{let t=e.GROUP;if(t!==jR.SKIPPED){if(Ow(t))return t;if(OC(t))return!1;throw Error("non exhaustive match")}})),l=AC(r,(e=>{let t=e.LONGER_ALT;if(t)return Lm(t)?AC(t,(e=>zw(r,e))):[zw(r,t)]})),u=AC(r,(e=>e.PUSH_MODE)),c=AC(r,(e=>Iw(e,"POP_MODE")))})),n("Line Terminator Handling",(()=>{let e=xR(t.lineTerminatorCharacters);h=AC(r,(e=>!1)),"onlyOffset"!==t.positionTracking&&(h=AC(r,(t=>Iw(t,"LINE_BREAKS")?!!t.LINE_BREAKS:!1===yR(t,e)&&UN(e,t.PATTERN))))})),n("Misc Mapping #2",(()=>{d=AC(r,pR),f=AC(i,gR),p=iT(r,((e,t)=>{let r=t.GROUP;return Ow(r)&&r!==jR.SKIPPED&&(e[r]=[]),e}),{}),g=AC(i,((e,t)=>({pattern:i[t],longerAlt:l[t],canLineTerminator:h[t],isCustom:d[t],short:f[t],group:o[t],push:u[t],pop:c[t],tokenTypeIdx:a[t],tokenType:r[t]})))}));let y=!0,v=[];return t.safeMode||n("First Char Optimization",(()=>{v=iT(r,((e,r,n)=>{if("string"==typeof r.PATTERN){let t=wR(r.PATTERN.charCodeAt(0));bR(e,t,g[n])}else if(Lm(r.START_CHARS_HINT)){let t;Vx(r.START_CHARS_HINT,(r=>{let i=wR("string"==typeof r?r.charCodeAt(0):r);t!==i&&(t=i,bR(e,i,g[n]))}))}else if(Vw(r.PATTERN))if(r.PATTERN.unicode)y=!1,t.ensureOptimizations&&YA(`${MN}\tUnable to analyze < ${r.PATTERN.toString()} > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let i=ON(r.PATTERN,t.ensureOptimizations);kv(i)&&(y=!1),Vx(i,(t=>{bR(e,t,g[n])}))}else t.ensureOptimizations&&YA(`${MN}\tTokenType: <${r.name}> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),y=!1;return e}),[])})),{emptyGroups:p,patternIdxToConfig:g,charCodeToPatternIdxToConfig:v,hasCustom:m,canBeOptimized:y}}function HN(e,t){let r=[],n=XN(e);r=r.concat(n.errors);let i=KN(n.valid),a=i.valid;return r=r.concat(i.errors),r=r.concat(YN(a)),r=r.concat(iR(a)),r=r.concat(aR(a,t)),r=r.concat(oR(a)),r}function YN(e){let t=[],r=kC(e,(e=>Vw(e[GN])));return t=t.concat(QN(r)),t=t.concat(tR(r)),t=t.concat(rR(r)),t=t.concat(nR(r)),t=t.concat(JN(r)),t}function XN(e){let t=kC(e,(e=>!Iw(e,GN))),r=AC(t,(e=>({message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:zR.MISSING_PATTERN,tokenTypes:[e]})));return{errors:r,valid:aw(e,t)}}function KN(e){let t=kC(e,(e=>{let t=e[GN];return!(Vw(t)||fp(t)||Iw(t,"exec")||Ow(t))})),r=AC(t,(e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:zR.INVALID_PATTERN,tokenTypes:[e]})));return{errors:r,valid:aw(e,t)}}s(qN,"analyzeTokenTypes"),s(HN,"validatePatterns"),s(YN,"validateRegExpPattern"),s(XN,"findMissingPatterns"),s(KN,"findInvalidPatterns");var ZN=/[^\\][$]/;function QN(e){class t extends QS{static{s(this,"EndAnchorFinder")}constructor(){super(...arguments),this.found=!1}visitEndAnchor(e){this.found=!0}}let r=kC(e,(e=>{let r=e.PATTERN;try{let e=RN(r),n=new t;return n.visit(e),n.found}catch{return ZN.test(r.source)}}));return AC(r,(e=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:zR.EOI_ANCHOR_FOUND,tokenTypes:[e]})))}function JN(e){let t=kC(e,(e=>e.PATTERN.test("")));return AC(t,(e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:zR.EMPTY_MATCH_PATTERN,tokenTypes:[e]})))}s(QN,"findEndOfInputAnchor"),s(JN,"findEmptyMatchRegExps");var eR=/[^\\[][\^]|^\^/;function tR(e){class t extends QS{static{s(this,"StartAnchorFinder")}constructor(){super(...arguments),this.found=!1}visitStartAnchor(e){this.found=!0}}let r=kC(e,(e=>{let r=e.PATTERN;try{let e=RN(r),n=new t;return n.visit(e),n.found}catch{return eR.test(r.source)}}));return AC(r,(e=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:zR.SOI_ANCHOR_FOUND,tokenTypes:[e]})))}function rR(e){let t=kC(e,(e=>{let t=e[GN];return t instanceof RegExp&&(t.multiline||t.global)}));return AC(t,(e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:zR.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[e]})))}function nR(e){let t=[],r=AC(e,(r=>iT(e,((e,n)=>(r.PATTERN.source===n.PATTERN.source&&!Fw(t,n)&&n.PATTERN!==jR.NA&&(t.push(n),e.push(n)),e)),[])));r=XT(r);let n=kC(r,(e=>e.length>1));return AC(n,(e=>{let t=AC(e,(e=>e.name));return{message:`The same RegExp pattern ->${Tw(e).PATTERN}<-has been used in all of the following Token Types: ${t.join(", ")} <-`,type:zR.DUPLICATE_PATTERNS_FOUND,tokenTypes:e}}))}function iR(e){let t=kC(e,(e=>{if(!Iw(e,"GROUP"))return!1;let t=e.GROUP;return t!==jR.SKIPPED&&t!==jR.NA&&!Ow(t)}));return AC(t,(e=>({message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:zR.INVALID_GROUP_TYPE_FOUND,tokenTypes:[e]})))}function aR(e,t){let r=kC(e,(e=>void 0!==e.PUSH_MODE&&!Fw(t,e.PUSH_MODE)));return AC(r,(e=>({message:`Token Type: ->${e.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${e.PUSH_MODE}<-which does not exist`,type:zR.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[e]})))}function oR(e){let t=[],r=iT(e,((e,t,r)=>{let n=t.PATTERN;return n===jR.NA||(Ow(n)?e.push({str:n,idx:r,tokenType:t}):Vw(n)&&lR(n)&&e.push({str:n.source,idx:r,tokenType:t})),e}),[]);return Vx(e,((e,n)=>{Vx(r,(({str:r,idx:i,tokenType:a})=>{if(n<i&&sR(r,e.PATTERN)){let r=`Token: ->${a.name}<- can never be matched.\nBecause it appears AFTER the Token Type ->${e.name}<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:r,type:zR.UNREACHABLE_PATTERN,tokenTypes:[e,a]})}}))})),t}function sR(e,t){if(Vw(t)){let r=t.exec(e);return null!==r&&0===r.index}if(fp(t))return t(e,0,[],{});if(Iw(t,"exec"))return t.exec(e,0,[],{});if("string"==typeof t)return t===e;throw Error("non exhaustive match")}function lR(e){return void 0===bw([".","\\","[","]","|","^","$","(",")","?","*","+","{"],(t=>-1!==e.source.indexOf(t)))}function uR(e){let t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function cR(e){let t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function hR(e,t,r){let n=[];return Iw(e,jN)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+jN+"> property in its definition\n",type:zR.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),Iw(e,VN)||n.push({message:"A MultiMode Lexer cannot be initialized without a <modes> property in its definition\n",type:zR.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),Iw(e,VN)&&Iw(e,jN)&&!Iw(e.modes,e.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${jN}: <${e.defaultMode}>which does not exist\n`,type:zR.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),Iw(e,VN)&&Vx(e.modes,((e,t)=>{Vx(e,((r,i)=>{if(OC(r))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${t}> at index: <${i}>\n`,type:zR.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(Iw(r,"LONGER_ALT")){let i=Lm(r.LONGER_ALT)?r.LONGER_ALT:[r.LONGER_ALT];Vx(i,(i=>{!OC(i)&&!Fw(e,i)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${i.name}> on token <${r.name}> outside of mode <${t}>\n`,type:zR.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})}))}}))})),n}function dR(e,t,r){let n=[],i=!1,a=XT(ZC(IC(e.modes))),o=Nk(a,(e=>e[GN]===jR.NA)),s=xR(r);return t&&Vx(o,(e=>{let t=yR(e,s);if(!1!==t){let r={message:vR(e,t),type:t.issue,tokenType:e};n.push(r)}else Iw(e,"LINE_BREAKS")?!0===e.LINE_BREAKS&&(i=!0):UN(s,e.PATTERN)&&(i=!0)})),t&&!i&&n.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:zR.NO_LINE_BREAKS_FLAGS}),n}function fR(e){let t={},r=Ev(e);return Vx(r,(r=>{let n=e[r];if(!Lm(n))throw Error("non exhaustive match");t[r]=[]})),t}function pR(e){let t=e.PATTERN;if(Vw(t))return!1;if(fp(t))return!0;if(Iw(t,"exec"))return!0;if(Ow(t))return!1;throw Error("non exhaustive match")}function gR(e){return!(!Ow(e)||1!==e.length)&&e.charCodeAt(0)}s(tR,"findStartOfInputAnchor"),s(rR,"findUnsupportedFlags"),s(nR,"findDuplicatePatterns"),s(iR,"findInvalidGroupType"),s(aR,"findModesThatDoNotExist"),s(oR,"findUnreachablePatterns"),s(sR,"testTokenType"),s(lR,"noMetaChar"),s(uR,"addStartOfInput"),s(cR,"addStickyFlag"),s(hR,"performRuntimeChecks"),s(dR,"performWarningRuntimeChecks"),s(fR,"cloneEmptyGroups"),s(pR,"isCustomPattern"),s(gR,"isShortPattern");var mR={test:s((function(e){let t=e.length;for(let r=this.lastIndex;r<t;r++){let t=e.charCodeAt(r);if(10===t)return this.lastIndex=r+1,!0;if(13===t)return 10===e.charCodeAt(r+1)?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1}),"test"),lastIndex:0};function yR(e,t){if(Iw(e,"LINE_BREAKS"))return!1;if(Vw(e.PATTERN)){try{UN(t,e.PATTERN)}catch(e){return{issue:zR.IDENTIFY_TERMINATOR,errMsg:e.message}}return!1}if(Ow(e.PATTERN))return!1;if(pR(e))return{issue:zR.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function vR(e,t){if(t.issue===zR.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <${e.name}> Token Type\n\t Root cause: ${t.errMsg}.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(t.issue===zR.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <${e.name}> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function xR(e){return AC(e,(e=>Ow(e)?e.charCodeAt(0):e))}function bR(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}s(yR,"checkLineBreaksIssues"),s(vR,"buildLineBreakIssueMessage"),s(xR,"getCharCodes"),s(bR,"addToMapOfArrays");var CR=256,TR=[];function wR(e){return e<CR?e:TR[e]}function kR(){if(kv(TR)){TR=new Array(65536);for(let e=0;e<65536;e++)TR[e]=e>255?255+~~(e/255):e}}function _R(e,t){let r=e.tokenTypeIdx;return r===t.tokenTypeIdx||!0===t.isParent&&!0===t.categoryMatchesMap[r]}function ER(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}s(wR,"charCodeToOptimizedIndex"),s(kR,"initCharCodeToOptimizedIndexMap"),s(_R,"tokenStructuredMatcher"),s(ER,"tokenStructuredMatcherNoCategories");var SR=1,AR={};function NR(e){let t=RR(e);LR(t),MR(t),IR(t),Vx(t,(e=>{e.isParent=e.categoryMatches.length>0}))}function RR(e){let t=Rx(e),r=e,n=!0;for(;n;){r=XT(ZC(AC(r,(e=>e.CATEGORIES))));let e=aw(r,t);t=t.concat(e),kv(e)?n=!1:r=e}return t}function LR(e){Vx(e,(e=>{DR(e)||(AR[SR]=e,e.tokenTypeIdx=SR++),PR(e)&&!Lm(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),PR(e)||(e.CATEGORIES=[]),FR(e)||(e.categoryMatches=[]),BR(e)||(e.categoryMatchesMap={})}))}function IR(e){Vx(e,(e=>{e.categoryMatches=[],Vx(e.categoryMatchesMap,((t,r)=>{e.categoryMatches.push(AR[r].tokenTypeIdx)}))}))}function MR(e){Vx(e,(e=>{OR([],e)}))}function OR(e,t){Vx(e,(e=>{t.categoryMatchesMap[e.tokenTypeIdx]=!0})),Vx(t.CATEGORIES,(r=>{let n=e.concat(t);Fw(n,r)||OR(n,r)}))}function DR(e){return Iw(e,"tokenTypeIdx")}function PR(e){return Iw(e,"CATEGORIES")}function FR(e){return Iw(e,"categoryMatches")}function BR(e){return Iw(e,"categoryMatchesMap")}function $R(e){return Iw(e,"tokenTypeIdx")}s(NR,"augmentTokenTypes"),s(RR,"expandCategories"),s(LR,"assignTokenDefaultProps"),s(IR,"assignCategoriesTokensProp"),s(MR,"assignCategoriesMapProp"),s(OR,"singleAssignCategoriesToksMap"),s(DR,"hasShortKeyProperty"),s(PR,"hasCategoriesProperty"),s(FR,"hasExtendingTokensTypesProperty"),s(BR,"hasExtendingTokensTypesMapProperty"),s($R,"isTokenType");var zR,UR={buildUnableToPopLexerModeMessage:e=>`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`,buildUnexpectedCharactersMessage:(e,t,r,n,i)=>`unexpected character: ->${e.charAt(t)}<- at offset: ${t}, skipped ${r} characters.`};!function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",e[e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"}(zR||(zR={}));var GR={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:UR,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(GR);var jR=class{static{s(this,"Lexer")}constructor(e,t=GR){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(e,t)=>{if(!0===this.traceInitPerf){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${e}>`);let{time:n,value:i}=KA(t),a=n>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${n}ms`),this.traceInitIndent--,i}return t()},"boolean"==typeof t)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=GT({},GR,t);let r=this.config.traceInitPerf;!0===r?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof r&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(()=>{let r,n=!0;this.TRACE_INIT("Lexer Config handling",(()=>{if(this.config.lineTerminatorsPattern===GR.lineTerminatorsPattern)this.config.lineTerminatorsPattern=mR;else if(this.config.lineTerminatorCharacters===GR.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Lm(e)?r={modes:{defaultMode:Rx(e)},defaultMode:jN}:(n=!1,r=Rx(e))})),!1===this.config.skipValidations&&(this.TRACE_INIT("performRuntimeChecks",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(hR(r,this.trackStartLines,this.config.lineTerminatorCharacters))})),this.TRACE_INIT("performWarningRuntimeChecks",(()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(dR(r,this.trackStartLines,this.config.lineTerminatorCharacters))}))),r.modes=r.modes?r.modes:{},Vx(r.modes,((e,t)=>{r.modes[t]=Nk(e,(e=>OC(e)))}));let i=Ev(r.modes);if(Vx(r.modes,((e,r)=>{this.TRACE_INIT(`Mode: <${r}> processing`,(()=>{if(this.modes.push(r),!1===this.config.skipValidations&&this.TRACE_INIT("validatePatterns",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(HN(e,i))})),kv(this.lexerDefinitionErrors)){let n;NR(e),this.TRACE_INIT("analyzeTokenTypes",(()=>{n=qN(e,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})})),this.patternIdxToConfig[r]=n.patternIdxToConfig,this.charCodeToPatternIdxToConfig[r]=n.charCodeToPatternIdxToConfig,this.emptyGroups=GT({},this.emptyGroups,n.emptyGroups),this.hasCustom=n.hasCustom||this.hasCustom,this.canModeBeOptimized[r]=n.canBeOptimized}}))})),this.defaultMode=r.defaultMode,!kv(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let e=AC(this.lexerDefinitionErrors,(e=>e.message)).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+e)}Vx(this.lexerDefinitionWarning,(e=>{XA(e.message)})),this.TRACE_INIT("Choosing sub-methods implementations",(()=>{if(WN?(this.chopInput=Fy,this.match=this.matchWithTest):(this.updateLastIndex=vT,this.match=this.matchWithExec),n&&(this.handleModes=vT),!1===this.trackStartLines&&(this.computeNewColumn=Fy),!1===this.trackEndLines&&(this.updateTokenEndLineColumnLocation=vT),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)})),this.TRACE_INIT("Failed Optimization Warnings",(()=>{let e=iT(this.canModeBeOptimized,((e,t,r)=>(!1===t&&e.push(r),e)),[]);if(t.ensureOptimizations&&!kv(e))throw Error(`Lexer Modes: < ${e.join(", ")} > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.`)})),this.TRACE_INIT("clearRegExpParserCache",(()=>{LN()})),this.TRACE_INIT("toFastProperties",(()=>{ZA(this)}))}))}tokenize(e,t=this.defaultMode){if(!kv(this.lexerDefinitionErrors)){let e=AC(this.lexerDefinitionErrors,(e=>e.message)).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+e)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let r,n,i,a,o,l,u,c,h,d,f,p,g,m,y,v,x=e,b=x.length,C=0,T=0,w=this.hasCustom?0:Math.floor(e.length/10),k=new Array(w),_=[],E=this.trackStartLines?1:void 0,S=this.trackStartLines?1:void 0,A=fR(this.emptyGroups),N=this.trackStartLines,R=this.config.lineTerminatorsPattern,L=0,I=[],M=[],O=[],D=[];function P(){return I}function F(e){let t=wR(e),r=M[t];return void 0===r?D:r}Object.freeze(D),s(P,"getPossiblePatternsSlow"),s(F,"getPossiblePatternsOptimized");let B=s((e=>{if(1===O.length&&void 0===e.tokenType.PUSH_MODE){let t=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(e);_.push({offset:e.startOffset,line:e.startLine,column:e.startColumn,length:e.image.length,message:t})}else{O.pop();let e=Px(O);I=this.patternIdxToConfig[e],M=this.charCodeToPatternIdxToConfig[e],L=I.length;let t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;v=M&&t?F:P}}),"pop_mode");function $(e){O.push(e),M=this.charCodeToPatternIdxToConfig[e],I=this.patternIdxToConfig[e],L=I.length,L=I.length;let t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;v=M&&t?F:P}s($,"push_mode"),$.call(this,t);let z,U=this.config.recoveryEnabled;for(;C<b;){l=null;let t=x.charCodeAt(C),s=v(t),w=s.length;for(r=0;r<w;r++){z=s[r];let n=z.pattern;u=null;let h=z.short;if(!1!==h?t===h&&(l=n):!0===z.isCustom?(y=n.exec(x,C,k,A),null!==y?(l=y[0],void 0!==y.payload&&(u=y.payload)):l=null):(this.updateLastIndex(n,C),l=this.match(n,e,C)),null!==l){if(o=z.longerAlt,void 0!==o){let t=o.length;for(i=0;i<t;i++){let t=I[o[i]],r=t.pattern;if(c=null,!0===t.isCustom?(y=r.exec(x,C,k,A),null!==y?(a=y[0],void 0!==y.payload&&(c=y.payload)):a=null):(this.updateLastIndex(r,C),a=this.match(r,e,C)),a&&a.length>l.length){l=a,u=c,z=t;break}}}break}}if(null!==l){if(h=l.length,d=z.group,void 0!==d&&(f=z.tokenTypeIdx,p=this.createTokenInstance(l,C,f,z.tokenType,E,S,h),this.handlePayload(p,u),!1===d?T=this.addToken(k,T,p):A[d].push(p)),e=this.chopInput(e,h),C+=h,S=this.computeNewColumn(S,h),!0===N&&!0===z.canLineTerminator){let e,t,r=0;R.lastIndex=0;do{e=R.test(l),!0===e&&(t=R.lastIndex-1,r++)}while(!0===e);0!==r&&(E+=r,S=h-t,this.updateTokenEndLineColumnLocation(p,d,t,r,E,S,h))}this.handleModes(z,B,$,p)}else{let t=C,r=E,i=S,a=!1===U;for(;!1===a&&C<b;)for(e=this.chopInput(e,1),C++,n=0;n<L;n++){let t=I[n],r=t.pattern,i=t.short;if(!1!==i?x.charCodeAt(C)===i&&(a=!0):!0===t.isCustom?a=null!==r.exec(x,C,k,A):(this.updateLastIndex(r,C),a=null!==r.exec(e)),!0===a)break}if(g=C-t,S=this.computeNewColumn(S,g),m=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(x,t,g,r,i),_.push({offset:t,line:r,column:i,length:g,message:m}),!1===U)break}}return this.hasCustom||(k.length=T),{tokens:k,groups:A,errors:_}}handleModes(e,t,r,n){if(!0===e.pop){let i=e.push;t(n),void 0!==i&&r.call(this,i)}else void 0!==e.push&&r.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,r,n,i,a,o){let s,l;void 0!==t&&(s=r===o-1,l=s?-1:0,1===n&&!0===s||(e.endLine=i+l,e.endColumn=a-1-l))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,r,n){return{image:e,startOffset:t,tokenTypeIdx:r,tokenType:n}}createStartOnlyToken(e,t,r,n,i,a){return{image:e,startOffset:t,startLine:i,startColumn:a,tokenTypeIdx:r,tokenType:n}}createFullToken(e,t,r,n,i,a,o){return{image:e,startOffset:t,endOffset:t+o-1,startLine:i,endLine:i,startColumn:a,endColumn:a+o-1,tokenTypeIdx:r,tokenType:n}}addTokenUsingPush(e,t,r){return e.push(r),t}addTokenUsingMemberAccess(e,t,r){return e[t]=r,++t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){null!==t&&(e.payload=t)}matchWithTest(e,t,r){return!0===e.test(t)?t.substring(r,e.lastIndex):null}matchWithExec(e,t){let r=e.exec(t);return null!==r?r[0]:null}};function VR(e){return WR(e)?e.LABEL:e.name}function WR(e){return Ow(e.LABEL)&&""!==e.LABEL}jR.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",jR.NA=/NOT_APPLICABLE/,s(VR,"tokenLabel"),s(WR,"hasTokenLabel");var qR="parent",HR="categories",YR="label",XR="group",KR="push_mode",ZR="pop_mode",QR="longer_alt",JR="line_breaks",eL="start_chars_hint";function tL(e){return rL(e)}function rL(e){let t=e.pattern,r={};if(r.name=e.name,OC(t)||(r.PATTERN=t),Iw(e,qR))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";return Iw(e,HR)&&(r.CATEGORIES=e[HR]),NR([r]),Iw(e,YR)&&(r.LABEL=e[YR]),Iw(e,XR)&&(r.GROUP=e[XR]),Iw(e,ZR)&&(r.POP_MODE=e[ZR]),Iw(e,KR)&&(r.PUSH_MODE=e[KR]),Iw(e,QR)&&(r.LONGER_ALT=e[QR]),Iw(e,JR)&&(r.LINE_BREAKS=e[JR]),Iw(e,eL)&&(r.START_CHARS_HINT=e[eL]),r}s(tL,"createToken"),s(rL,"createTokenInternal");var nL=tL({name:"EOF",pattern:jR.NA});function iL(e,t,r,n,i,a,o,s){return{image:t,startOffset:r,endOffset:n,startLine:i,endLine:a,startColumn:o,endColumn:s,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function aL(e,t){return _R(e,t)}NR([nL]),s(iL,"createTokenInstance"),s(aL,"tokenMatcher");var oL={buildMismatchTokenMessage:({expected:e,actual:t,previous:r,ruleName:n})=>`Expecting ${WR(e)?`--\x3e ${VR(e)} <--`:`token of type --\x3e ${e.name} <--`} but found --\x3e '${t.image}' <--`,buildNotAllInputParsedMessage:({firstRedundant:e,ruleName:t})=>"Redundant input, expecting EOF but found: "+e.image,buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:r,customUserDescription:n,ruleName:i}){let a="Expecting: ",o="\nbut found: '"+Tw(t).image+"'";if(n)return a+n+o;{let t=iT(e,((e,t)=>e.concat(t)),[]),r=AC(t,(e=>`[${AC(e,(e=>VR(e))).join(", ")}]`)),n=`one of these possible Token sequences:\n${AC(r,((e,t)=>`  ${t+1}. ${e}`)).join("\n")}`;return a+n+o}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:r,ruleName:n}){let i="Expecting: ",a="\nbut found: '"+Tw(t).image+"'";if(r)return i+r+a;{let t=`expecting at least one iteration which starts with one of these possible Token sequences::\n  <${AC(e,(e=>`[${AC(e,(e=>VR(e))).join(",")}]`)).join(" ,")}>`;return i+t+a}}};Object.freeze(oL);var sL={buildRuleNotFoundError:(e,t)=>"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+e.name+"<-"},lL={buildDuplicateFoundError(e,t){function r(e){return e instanceof cN?e.terminalType.name:e instanceof tN?e.nonTerminalName:""}s(r,"getExtraProductionArgument");let n=e.name,i=Tw(t),a=i.idx,o=yN(i),l=r(i),u=`->${o}${a>0?a:""}<- ${l?`with argument: ->${l}<-`:""}\n                  appears more than once (${t.length} times) in the top level rule: ->${n}<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,"\n"),u},buildNamespaceConflictError:e=>`Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter.`,buildAlternationPrefixAmbiguityError(e){let t=AC(e.prefixPath,(e=>VR(e))).join(", "),r=0===e.alternation.idx?"":e.alternation.idx;return`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix\nin <OR${r}> inside <${e.topLevelRule.name}> Rule,\n<${t}> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details.`},buildAlternationAmbiguityError(e){let t=AC(e.prefixPath,(e=>VR(e))).join(", "),r=0===e.alternation.idx?"":e.alternation.idx,n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${e.topLevelRule.name}> Rule,\n<${t}> may appears as a prefix path in all these alternatives.\n`;return n+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",n},buildEmptyRepetitionError(e){let t=yN(e.repetition);return 0!==e.repetition.idx&&(t+=e.repetition.idx),`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.\nThis could lead to an infinite loop.`},buildTokenNameError:e=>"deprecated",buildEmptyAlternationError:e=>`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}> in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\nOnly the last alternative may be an empty alternative.`,buildTooManyAlternativesError:e=>`An Alternation cannot have more than 256 alternatives:\n<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\n has ${e.alternation.definition.length+1} alternatives.`,buildLeftRecursionError(e){let t=e.topLevelRule.name,r=AC(e.leftRecursionPath,(e=>e.name));return`Left Recursion found in grammar.\nrule: <${t}> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n ${`${t} --\x3e ${r.concat([t]).join(" --\x3e ")}`}\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError:e=>"deprecated",buildDuplicateRuleNameError(e){let t;return t=e.topLevelRule instanceof rN?e.topLevelRule.name:e.topLevelRule,`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`}};function uL(e,t){let r=new hL(e,t);return r.resolveRefs(),r.errors}s(uL,"resolveGrammar");var cL,hL=class extends fN{static{s(this,"GastRefResolverVisitor")}constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){Vx(IC(this.nameToTopRule),(e=>{this.currTopLevel=e,e.accept(this)}))}visitNonTerminal(e){let t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{let t=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:t,type:aM.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}},dL=class extends vN{static{s(this,"AbstractNextPossibleTokensWalker")}constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Rx(this.path.ruleStack).reverse(),this.occurrenceStack=Rx(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let n=t.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,n)}}updateExpectedNext(){kv(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},fL=class extends dL{static{s(this,"NextAfterTokenWalker")}constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let e=t.concat(r),n=new nN({definition:e});this.possibleTokTypes=bN(n),this.found=!0}}},pL=class extends vN{static{s(this,"AbstractNextTerminalAfterProductionWalker")}constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},gL=class extends pL{static{s(this,"NextTerminalAfterManyWalker")}walkMany(e,t,r){if(e.idx===this.occurrence){let e=Tw(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof cN&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkMany(e,t,r)}},mL=class extends pL{static{s(this,"NextTerminalAfterManySepWalker")}walkManySep(e,t,r){if(e.idx===this.occurrence){let e=Tw(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof cN&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkManySep(e,t,r)}},yL=class extends pL{static{s(this,"NextTerminalAfterAtLeastOneWalker")}walkAtLeastOne(e,t,r){if(e.idx===this.occurrence){let e=Tw(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof cN&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkAtLeastOne(e,t,r)}},vL=class extends pL{static{s(this,"NextTerminalAfterAtLeastOneSepWalker")}walkAtLeastOneSep(e,t,r){if(e.idx===this.occurrence){let e=Tw(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof cN&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkAtLeastOneSep(e,t,r)}};function xL(e,t,r=[]){r=Rx(r);let n=[],i=0;function a(t){return t.concat(sw(e,i+1))}function o(e){let i=xL(a(e),t,r);return n.concat(i)}for(s(a,"remainingPathWith"),s(o,"getAlternativesForProd");r.length<t&&i<e.length;){let t=e[i];if(t instanceof nN)return o(t.definition);if(t instanceof tN)return o(t.definition);if(t instanceof iN)n=o(t.definition);else{if(t instanceof aN){return o(t.definition.concat([new sN({definition:t.definition})]))}if(t instanceof oN){return o([new nN({definition:t.definition}),new sN({definition:[new cN({terminalType:t.separator})].concat(t.definition)})])}if(t instanceof lN){let e=t.definition.concat([new sN({definition:[new cN({terminalType:t.separator})].concat(t.definition)})]);n=o(e)}else if(t instanceof sN){let e=t.definition.concat([new sN({definition:t.definition})]);n=o(e)}else{if(t instanceof uN)return Vx(t.definition,(e=>{!1===kv(e.definition)&&(n=o(e.definition))})),n;if(!(t instanceof cN))throw Error("non exhaustive match");r.push(t.terminalType)}}i++}return n.push({partialPath:r,suffixDef:sw(e,i)}),n}function bL(e,t,r,n){let i="EXIT_NONE_TERMINAL",a=[i],o="EXIT_ALTERNATIVE",s=!1,l=t.length,u=l-n-1,c=[],h=[];for(h.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!kv(h);){let e=h.pop();if(e===o){s&&Px(h).idx<=u&&h.pop();continue}let n=e.def,d=e.idx,f=e.ruleStack,p=e.occurrenceStack;if(kv(n))continue;let g=n[0];if(g===i){let e={idx:d,def:sw(n),ruleStack:uw(f),occurrenceStack:uw(p)};h.push(e)}else if(g instanceof cN)if(d<l-1){let e=d+1;if(r(t[e],g.terminalType)){let t={idx:e,def:sw(n),ruleStack:f,occurrenceStack:p};h.push(t)}}else{if(d!==l-1)throw Error("non exhaustive match");c.push({nextTokenType:g.terminalType,nextTokenOccurrence:g.idx,ruleStack:f,occurrenceStack:p}),s=!0}else if(g instanceof tN){let e=Rx(f);e.push(g.nonTerminalName);let t=Rx(p);t.push(g.idx);let r={idx:d,def:g.definition.concat(a,sw(n)),ruleStack:e,occurrenceStack:t};h.push(r)}else if(g instanceof iN){let e={idx:d,def:sw(n),ruleStack:f,occurrenceStack:p};h.push(e),h.push(o);let t={idx:d,def:g.definition.concat(sw(n)),ruleStack:f,occurrenceStack:p};h.push(t)}else if(g instanceof aN){let e=new sN({definition:g.definition,idx:g.idx}),t={idx:d,def:g.definition.concat([e],sw(n)),ruleStack:f,occurrenceStack:p};h.push(t)}else if(g instanceof oN){let e=new cN({terminalType:g.separator}),t=new sN({definition:[e].concat(g.definition),idx:g.idx}),r={idx:d,def:g.definition.concat([t],sw(n)),ruleStack:f,occurrenceStack:p};h.push(r)}else if(g instanceof lN){let e={idx:d,def:sw(n),ruleStack:f,occurrenceStack:p};h.push(e),h.push(o);let t=new cN({terminalType:g.separator}),r=new sN({definition:[t].concat(g.definition),idx:g.idx}),i={idx:d,def:g.definition.concat([r],sw(n)),ruleStack:f,occurrenceStack:p};h.push(i)}else if(g instanceof sN){let e={idx:d,def:sw(n),ruleStack:f,occurrenceStack:p};h.push(e),h.push(o);let t=new sN({definition:g.definition,idx:g.idx}),r={idx:d,def:g.definition.concat([t],sw(n)),ruleStack:f,occurrenceStack:p};h.push(r)}else if(g instanceof uN)for(let e=g.definition.length-1;e>=0;e--){let t={idx:d,def:g.definition[e].definition.concat(sw(n)),ruleStack:f,occurrenceStack:p};h.push(t),h.push(o)}else if(g instanceof nN)h.push({idx:d,def:g.definition.concat(sw(n)),ruleStack:f,occurrenceStack:p});else{if(!(g instanceof rN))throw Error("non exhaustive match");h.push(CL(g,d,f,p))}}return c}function CL(e,t,r,n){let i=Rx(r);i.push(e.name);let a=Rx(n);return a.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:a}}function TL(e){if(e instanceof iN||"Option"===e)return cL.OPTION;if(e instanceof sN||"Repetition"===e)return cL.REPETITION;if(e instanceof aN||"RepetitionMandatory"===e)return cL.REPETITION_MANDATORY;if(e instanceof oN||"RepetitionMandatoryWithSeparator"===e)return cL.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof lN||"RepetitionWithSeparator"===e)return cL.REPETITION_WITH_SEPARATOR;if(e instanceof uN||"Alternation"===e)return cL.ALTERNATION;throw Error("non exhaustive match")}function wL(e){let{occurrence:t,rule:r,prodType:n,maxLookahead:i}=e,a=TL(n);return a===cL.ALTERNATION?OL(t,r,i):DL(t,r,a,i)}function kL(e,t,r,n,i,a){let o=OL(e,t,r);return a(o,n,BL(o)?ER:_R,i)}function _L(e,t,r,n,i,a){let o=DL(e,t,i,r),s=BL(o)?ER:_R;return a(o[0],s,n)}function EL(e,t,r,n){let i=e.length,a=gw(e,(e=>gw(e,(e=>1===e.length))));if(t)return function(t){let n=AC(t,(e=>e.GATE));for(let t=0;t<i;t++){let i=e[t],a=i.length,o=n[t];if(void 0===o||!1!==o.call(this))e:for(let e=0;e<a;e++){let n=i[e],a=n.length;for(let e=0;e<a;e++){let t=this.LA(e+1);if(!1===r(t,n[e]))continue e}return t}}};if(a&&!n){let t=AC(e,(e=>ZC(e))),r=iT(t,((e,t,r)=>(Vx(t,(t=>{Iw(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=r),Vx(t.categoryMatches,(t=>{Iw(e,t)||(e[t]=r)}))})),e)),{});return function(){let e=this.LA(1);return r[e.tokenTypeIdx]}}return function(){for(let t=0;t<i;t++){let n=e[t],i=n.length;e:for(let e=0;e<i;e++){let i=n[e],a=i.length;for(let e=0;e<a;e++){let t=this.LA(e+1);if(!1===r(t,i[e]))continue e}return t}}}}function SL(e,t,r){let n=gw(e,(e=>1===e.length)),i=e.length;if(n&&!r){let t=ZC(e);if(1===t.length&&kv(t[0].categoryMatches)){let e=t[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===e}}{let e=iT(t,((e,t,r)=>(e[t.tokenTypeIdx]=!0,Vx(t.categoryMatches,(t=>{e[t]=!0})),e)),[]);return function(){let t=this.LA(1);return!0===e[t.tokenTypeIdx]}}}return function(){e:for(let r=0;r<i;r++){let n=e[r],i=n.length;for(let e=0;e<i;e++){let r=this.LA(e+1);if(!1===t(r,n[e]))continue e}return!0}return!1}}s(xL,"possiblePathsFrom"),s(bL,"nextPossibleTokensAfter"),s(CL,"expandTopLevelRule"),function(e){e[e.OPTION=0]="OPTION",e[e.REPETITION=1]="REPETITION",e[e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",e[e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",e[e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",e[e.ALTERNATION=5]="ALTERNATION"}(cL||(cL={})),s(TL,"getProdType"),s(wL,"getLookaheadPaths"),s(kL,"buildLookaheadFuncForOr"),s(_L,"buildLookaheadFuncForOptionalProd"),s(EL,"buildAlternativesLookAheadFunc"),s(SL,"buildSingleAlternativeLookaheadFunction");var AL=class extends vN{static{s(this,"RestDefinitionFinderWalker")}constructor(e,t,r){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,r,n){return e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.restDef=r.concat(n),!0)}walkOption(e,t,r){this.checkIsTarget(e,cL.OPTION,t,r)||super.walkOption(e,t,r)}walkAtLeastOne(e,t,r){this.checkIsTarget(e,cL.REPETITION_MANDATORY,t,r)||super.walkOption(e,t,r)}walkAtLeastOneSep(e,t,r){this.checkIsTarget(e,cL.REPETITION_MANDATORY_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}walkMany(e,t,r){this.checkIsTarget(e,cL.REPETITION,t,r)||super.walkOption(e,t,r)}walkManySep(e,t,r){this.checkIsTarget(e,cL.REPETITION_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}},NL=class extends fN{static{s(this,"InsideDefinitionFinderVisitor")}constructor(e,t,r){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=r,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(void 0===this.targetRef||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,cL.OPTION)}visitRepetition(e){this.checkIsTarget(e,cL.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,cL.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,cL.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,cL.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,cL.ALTERNATION)}};function RL(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=[];return t}function LL(e){let t=[""];for(let r=0;r<e.length;r++){let n=e[r],i=[];for(let e=0;e<t.length;e++){let r=t[e];i.push(r+"_"+n.tokenTypeIdx);for(let e=0;e<n.categoryMatches.length;e++){let t="_"+n.categoryMatches[e];i.push(r+t)}}t=i}return t}function IL(e,t,r){for(let n=0;n<e.length;n++){if(n===r)continue;let i=e[n];for(let e=0;e<t.length;e++){if(!0===i[t[e]])return!1}}return!0}function ML(e,t){let r=AC(e,(e=>xL([e],1))),n=RL(r.length),i=AC(r,(e=>{let t={};return Vx(e,(e=>{let r=LL(e.partialPath);Vx(r,(e=>{t[e]=!0}))})),t})),a=r;for(let e=1;e<=t;e++){let r=a;a=RL(r.length);for(let o=0;o<r.length;o++){let s=r[o];for(let r=0;r<s.length;r++){let l=s[r].partialPath,u=s[r].suffixDef,c=LL(l);if(IL(i,c,o)||kv(u)||l.length===t){let e=n[o];if(!1===PL(e,l)){e.push(l);for(let e=0;e<c.length;e++){let t=c[e];i[o][t]=!0}}}else{let t=xL(u,e+1,l);a[o]=a[o].concat(t),Vx(t,(e=>{let t=LL(e.partialPath);Vx(t,(e=>{i[o][e]=!0}))}))}}}}return n}function OL(e,t,r,n){let i=new NL(e,cL.ALTERNATION,n);return t.accept(i),ML(i.result,r)}function DL(e,t,r,n){let i=new NL(e,r);t.accept(i);let a=i.result,o=new AL(t,e,r).startWalking();return ML([new nN({definition:a}),new nN({definition:o})],n)}function PL(e,t){e:for(let r=0;r<e.length;r++){let n=e[r];if(n.length===t.length){for(let e=0;e<n.length;e++){let r=t[e],i=n[e];if(!1==(r===i||void 0!==i.categoryMatchesMap[r.tokenTypeIdx]))continue e}return!0}}return!1}function FL(e,t){return e.length<t.length&&gw(e,((e,r)=>{let n=t[r];return e===n||n.categoryMatchesMap[e.tokenTypeIdx]}))}function BL(e){return gw(e,(e=>gw(e,(e=>gw(e,(e=>kv(e.categoryMatches)))))))}function $L(e){let t=e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName});return AC(t,(e=>Object.assign({type:aM.CUSTOM_LOOKAHEAD_VALIDATION},e)))}function zL(e,t,r,n){let i=kw(e,(e=>UL(e,r))),a=nI(e,t,r),o=kw(e,(e=>JL(e,r))),s=kw(e,(t=>WL(t,e,n,r)));return i.concat(a,o,s)}function UL(e,t){let r=new VL;e.accept(r);let n=r.allProductions,i=Sw(n,GL),a=Qw(i,(e=>e.length>1));return AC(IC(a),(r=>{let n=Tw(r),i=t.buildDuplicateFoundError(e,r),a=yN(n),o={message:i,type:aM.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:a,occurrence:n.idx},s=jL(n);return s&&(o.parameter=s),o}))}function GL(e){return`${yN(e)}_#_${e.idx}_#_${jL(e)}`}function jL(e){return e instanceof cN?e.terminalType.name:e instanceof tN?e.nonTerminalName:""}s(RL,"initializeArrayOfArrays"),s(LL,"pathToHashKeys"),s(IL,"isUniquePrefixHash"),s(ML,"lookAheadSequenceFromAlternatives"),s(OL,"getLookaheadPathsForOr"),s(DL,"getLookaheadPathsForOptionalProd"),s(PL,"containsPath"),s(FL,"isStrictPrefixOfPath"),s(BL,"areTokenCategoriesNotUsed"),s($L,"validateLookahead"),s(zL,"validateGrammar"),s(UL,"validateDuplicateProductions"),s(GL,"identifyProductionForDuplicates"),s(jL,"getExtraProductionArgument");var VL=class extends fN{static{s(this,"OccurrenceValidationCollector")}constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}};function WL(e,t,r,n){let i=[];if(iT(t,((t,r)=>r.name===e.name?t+1:t),0)>1){let t=n.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});i.push({message:t,type:aM.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}function qL(e,t,r){let n,i=[];return Fw(t,e)||(n=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,i.push({message:n,type:aM.INVALID_RULE_OVERRIDE,ruleName:e})),i}function HL(e,t,r,n=[]){let i=[],a=YL(t.definition);if(kv(a))return[];{let t=e.name;Fw(a,e)&&i.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:n}),type:aM.LEFT_RECURSION,ruleName:t});let o=aw(a,n.concat([e])),s=kw(o,(t=>{let i=Rx(n);return i.push(t),HL(e,t,r,i)}));return i.concat(s)}}function YL(e){let t=[];if(kv(e))return t;let r=Tw(e);if(r instanceof tN)t.push(r.referencedRule);else if(r instanceof nN||r instanceof iN||r instanceof aN||r instanceof oN||r instanceof lN||r instanceof sN)t=t.concat(YL(r.definition));else if(r instanceof uN)t=ZC(AC(r.definition,(e=>YL(e.definition))));else if(!(r instanceof cN))throw Error("non exhaustive match");let n=gN(r),i=e.length>1;if(n&&i){let r=sw(e);return t.concat(YL(r))}return t}s(WL,"validateRuleDoesNotAlreadyExist"),s(qL,"validateRuleIsOverridden"),s(HL,"validateNoLeftRecursion"),s(YL,"getFirstNoneTerminal");var XL=class extends fN{static{s(this,"OrCollector")}constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}};function KL(e,t){let r=new XL;e.accept(r);let n=r.alternations;return kw(n,(r=>{let n=uw(r.definition);return kw(n,((n,i)=>{let a=bL([n],[],_R,1);return kv(a)?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:r,emptyChoiceIdx:i}),type:aM.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:r.idx,alternative:i+1}]:[]}))}))}function ZL(e,t,r){let n=new XL;e.accept(n);let i=n.alternations;return i=Nk(i,(e=>!0===e.ignoreAmbiguities)),kw(i,(n=>{let i=n.idx,a=n.maxLookahead||t,o=OL(i,e,a,n),s=tI(o,n,e,r),l=rI(o,n,e,r);return s.concat(l)}))}s(KL,"validateEmptyOrAlternative"),s(ZL,"validateAmbiguousAlternationAlternatives");var QL=class extends fN{static{s(this,"RepetitionCollector")}constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}};function JL(e,t){let r=new XL;e.accept(r);let n=r.alternations;return kw(n,(r=>r.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:r}),type:aM.TOO_MANY_ALTS,ruleName:e.name,occurrence:r.idx}]:[]))}function eI(e,t,r){let n=[];return Vx(e,(e=>{let i=new QL;e.accept(i);let a=i.allProductions;Vx(a,(i=>{let a=TL(i),o=i.maxLookahead||t,s=DL(i.idx,e,a,o)[0];if(kv(ZC(s))){let t=r.buildEmptyRepetitionError({topLevelRule:e,repetition:i});n.push({message:t,type:aM.NO_NON_EMPTY_LOOKAHEAD,ruleName:e.name})}}))})),n}function tI(e,t,r,n){let i=[],a=iT(e,((r,n,a)=>(!0===t.definition[a].ignoreAmbiguities||Vx(n,(n=>{let o=[a];Vx(e,((e,r)=>{a!==r&&PL(e,n)&&!0!==t.definition[r].ignoreAmbiguities&&o.push(r)})),o.length>1&&!PL(i,n)&&(i.push(n),r.push({alts:o,path:n}))})),r)),[]);return AC(a,(e=>{let i=AC(e.alts,(e=>e+1));return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:aM.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:t.idx,alternatives:e.alts}}))}function rI(e,t,r,n){let i=iT(e,((e,t,r)=>{let n=AC(t,(e=>({idx:r,path:e})));return e.concat(n)}),[]);return XT(kw(i,(e=>{if(!0===t.definition[e.idx].ignoreAmbiguities)return[];let a=e.idx,o=e.path,s=kC(i,(e=>!0!==t.definition[e.idx].ignoreAmbiguities&&e.idx<a&&FL(e.path,o)));return AC(s,(e=>{let i=[e.idx+1,a+1],o=0===t.idx?"":t.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:aM.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:o,alternatives:i}}))})))}function nI(e,t,r){let n=[],i=AC(t,(e=>e.name));return Vx(e,(e=>{let t=e.name;if(Fw(i,t)){let i=r.buildNamespaceConflictError(e);n.push({message:i,type:aM.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:t})}})),n}function iI(e){let t=Ox(e,{errMsgProvider:sL}),r={};return Vx(e.rules,(e=>{r[e.name]=e})),uL(r,t.errMsgProvider)}function aI(e){return zL((e=Ox(e,{errMsgProvider:lL})).rules,e.tokenTypes,e.errMsgProvider,e.grammarName)}s(JL,"validateTooManyAlts"),s(eI,"validateSomeNonEmptyLookaheadPath"),s(tI,"checkAlternativesAmbiguities"),s(rI,"checkPrefixAlternativesAmbiguities"),s(nI,"checkTerminalAndNoneTerminalsNameSpace"),s(iI,"resolveGrammar"),s(aI,"validateGrammar");var oI="MismatchedTokenException",sI="NoViableAltException",lI="EarlyExitException",uI="NotAllInputParsedException",cI=[oI,sI,lI,uI];function hI(e){return Fw(cI,e.name)}Object.freeze(cI),s(hI,"isRecognitionException");var dI=class extends Error{static{s(this,"RecognitionException")}constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},fI=class extends dI{static{s(this,"MismatchedTokenException")}constructor(e,t,r){super(e,t),this.previousToken=r,this.name=oI}},pI=class extends dI{static{s(this,"NoViableAltException")}constructor(e,t,r){super(e,t),this.previousToken=r,this.name=sI}},gI=class extends dI{static{s(this,"NotAllInputParsedException")}constructor(e,t){super(e,t),this.name=uI}},mI=class extends dI{static{s(this,"EarlyExitException")}constructor(e,t,r){super(e,t),this.previousToken=r,this.name=lI}},yI={},vI="InRuleRecoveryException",xI=class extends Error{static{s(this,"InRuleRecoveryException")}constructor(e){super(e),this.name=vI}},bI=class{static{s(this,"Recoverable")}initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=Iw(e,"recoveryEnabled")?e.recoveryEnabled:oM.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=CI)}getTokenToInsert(e){let t=iL(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,r,n){let i=this.findReSyncTokenType(),a=this.exportLexerState(),o=[],l=!1,u=this.LA(1),c=this.LA(1),h=s((()=>{let e=this.LA(0),t=this.errorMessageProvider.buildMismatchTokenMessage({expected:n,actual:u,previous:e,ruleName:this.getCurrRuleFullName()}),r=new fI(t,u,this.LA(0));r.resyncedTokens=uw(o),this.SAVE_ERROR(r)}),"generateErrorMessage");for(;!l;){if(this.tokenMatcher(c,n))return void h();if(r.call(this))return h(),void e.apply(this,t);this.tokenMatcher(c,i)?l=!0:(c=this.SKIP_TOKEN(),this.addToResyncTokens(c,o))}this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,t,r){return!(!1===r||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){let r=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let e=this.SKIP_TOKEN();return this.consumeToken(),e}throw new xI("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||kv(t))return!1;let r=this.LA(1);return void 0!==bw(t,(e=>this.tokenMatcher(r,e)))}canRecoverWithSingleTokenDeletion(e){return!!this.canTokenTypeBeDeletedInRecovery(e)&&this.tokenMatcher(this.LA(2),e)}isInCurrentRuleReSyncSet(e){let t=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(t);return Fw(r,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),t=this.LA(1),r=2;for(;;){let n=bw(e,(e=>aL(t,e)));if(void 0!==n)return n;t=this.LA(r),r++}}getCurrFollowKey(){if(1===this.RULE_STACK.length)return yI;let e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return AC(e,((r,n)=>0===n?yI:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:t[n],inRule:this.shortRuleNameToFullName(e[n-1])}))}flattenFollowSet(){let e=AC(this.buildFullFollowKeyStack(),(e=>this.getFollowSetFromFollowKey(e)));return ZC(e)}getFollowSetFromFollowKey(e){if(e===yI)return[nL];let t=e.ruleName+e.idxInCallingRule+kN+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,nL)||t.push(e),t}reSyncTo(e){let t=[],r=this.LA(1);for(;!1===this.tokenMatcher(r,e);)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,t);return uw(t)}attemptInRepetitionRecovery(e,t,r,n,i,a,o){}getCurrentGrammarPath(e,t){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:Rx(this.RULE_OCCURRENCE_STACK),lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return AC(this.RULE_STACK,(e=>this.shortRuleNameToFullName(e)))}};function CI(e,t,r,n,i,a,o){let s=this.getKeyForAutomaticLookahead(n,i),l=this.firstAfterRepMap[s];if(void 0===l){let e=this.getCurrRuleFullName();l=new a(this.getGAstProductions()[e],i).startWalking(),this.firstAfterRepMap[s]=l}let u=l.token,c=l.occurrence,h=l.isEndOfRule;1===this.RULE_STACK.length&&h&&void 0===u&&(u=nL,c=1),void 0!==u&&void 0!==c&&this.shouldInRepetitionRecoveryBeTried(u,c,o)&&this.tryInRepetitionRecovery(e,t,r,u)}function TI(e,t,r){return r|t|e}s(CI,"attemptInRepetitionRecovery"),s(TI,"getKeyForAutomaticLookahead");var wI=class{static{s(this,"LLkLookaheadStrategy")}constructor(e){var t;this.maxLookahead=null!==(t=e?.maxLookahead)&&void 0!==t?t:oM.maxLookahead}validate(e){let t=this.validateNoLeftRecursion(e.rules);if(kv(t)){let r=this.validateEmptyOrAlternatives(e.rules),n=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),i=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...r,...n,...i]}return t}validateNoLeftRecursion(e){return kw(e,(e=>HL(e,e,lL)))}validateEmptyOrAlternatives(e){return kw(e,(e=>KL(e,lL)))}validateAmbiguousAlternationAlternatives(e,t){return kw(e,(e=>ZL(e,t,lL)))}validateSomeNonEmptyLookaheadPath(e,t){return eI(e,t,lL)}buildLookaheadForAlternation(e){return kL(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,EL)}buildLookaheadForOptional(e){return _L(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,TL(e.prodType),SL)}},kI=class{static{s(this,"LooksAhead")}initLooksAhead(e){this.dynamicTokensEnabled=Iw(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:oM.dynamicTokensEnabled,this.maxLookahead=Iw(e,"maxLookahead")?e.maxLookahead:oM.maxLookahead,this.lookaheadStrategy=Iw(e,"lookaheadStrategy")?e.lookaheadStrategy:new wI({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){Vx(e,(e=>{this.TRACE_INIT(`${e.name} Rule Lookahead`,(()=>{let{alternation:t,repetition:r,option:n,repetitionMandatory:i,repetitionMandatoryWithSeparator:a,repetitionWithSeparator:o}=SI(e);Vx(t,(t=>{let r=0===t.idx?"":t.idx;this.TRACE_INIT(`${yN(t)}${r}`,(()=>{let r=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:t.idx,rule:e,maxLookahead:t.maxLookahead||this.maxLookahead,hasPredicates:t.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),n=TI(this.fullRuleNameToShort[e.name],256,t.idx);this.setLaFuncCache(n,r)}))})),Vx(r,(t=>{this.computeLookaheadFunc(e,t.idx,768,"Repetition",t.maxLookahead,yN(t))})),Vx(n,(t=>{this.computeLookaheadFunc(e,t.idx,512,"Option",t.maxLookahead,yN(t))})),Vx(i,(t=>{this.computeLookaheadFunc(e,t.idx,1024,"RepetitionMandatory",t.maxLookahead,yN(t))})),Vx(a,(t=>{this.computeLookaheadFunc(e,t.idx,1536,"RepetitionMandatoryWithSeparator",t.maxLookahead,yN(t))})),Vx(o,(t=>{this.computeLookaheadFunc(e,t.idx,1280,"RepetitionWithSeparator",t.maxLookahead,yN(t))}))}))}))}computeLookaheadFunc(e,t,r,n,i,a){this.TRACE_INIT(`${a}${0===t?"":t}`,(()=>{let a=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:i||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:n}),o=TI(this.fullRuleNameToShort[e.name],r,t);this.setLaFuncCache(o,a)}))}getKeyForAutomaticLookahead(e,t){return TI(this.getLastExplicitRuleShortName(),e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}},_I=class extends fN{static{s(this,"DslMethodsCollectorVisitor")}constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},EI=new _I;function SI(e){EI.reset(),e.accept(EI);let t=EI.dslMethods;return EI.reset(),t}function AI(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset)}function NI(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}function RI(e,t,r){void 0===e.children[r]?e.children[r]=[t]:e.children[r].push(t)}function LI(e,t,r){void 0===e.children[t]?e.children[t]=[r]:e.children[t].push(r)}s(SI,"collectMethods"),s(AI,"setNodeLocationOnlyOffset"),s(NI,"setNodeLocationFull"),s(RI,"addTerminalToCst"),s(LI,"addNoneTerminalToCst");var II,MI="name";function OI(e,t){Object.defineProperty(e,MI,{enumerable:!1,configurable:!0,writable:!1,value:t})}function DI(e,t){let r=Ev(e),n=r.length;for(let i=0;i<n;i++){let n=e[r[i]],a=n.length;for(let e=0;e<a;e++){let r=n[e];void 0===r.tokenTypeIdx&&this[r.name](r.children,t)}}}function PI(e,t){let r=s((function(){}),"derivedConstructor");OI(r,e+"BaseSemantics");let n={visit:s((function(e,t){if(Lm(e)&&(e=e[0]),!OC(e))return this[e.name](e.children,t)}),"visit"),validateVisitor:s((function(){let e=BI(this,t);if(!kv(e)){let t=AC(e,(e=>e.msg));throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:\n\t${t.join("\n\n").replace(/\n/g,"\n\t")}`)}}),"validateVisitor")};return r.prototype=n,r.prototype.constructor=r,r._RULE_NAMES=t,r}function FI(e,t,r){let n=s((function(){}),"derivedConstructor");OI(n,e+"BaseSemanticsWithDefaults");let i=Object.create(r.prototype);return Vx(t,(e=>{i[e]=DI})),n.prototype=i,n.prototype.constructor=n,n}function BI(e,t){return $I(e,t)}function $I(e,t){let r=kC(t,(t=>!1===fp(e[t]))),n=AC(r,(t=>({msg:`Missing visitor method: <${t}> on ${e.constructor.name} CST Visitor.`,type:II.MISSING_METHOD,methodName:t})));return XT(n)}s(OI,"defineNameProp"),s(DI,"defaultVisit"),s(PI,"createBaseSemanticVisitorConstructor"),s(FI,"createBaseVisitorConstructorWithDefaults"),function(e){e[e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",e[e.MISSING_METHOD=1]="MISSING_METHOD"}(II||(II={})),s(BI,"validateVisitor"),s($I,"validateMissingCstMethods");var zI=class{static{s(this,"TreeBuilder")}initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=Iw(e,"nodeLocationTracking")?e.nodeLocationTracking:oM.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=NI,this.setNodeLocationFromNode=NI,this.cstPostRule=vT,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=vT,this.setNodeLocationFromNode=vT,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=AI,this.setNodeLocationFromNode=AI,this.cstPostRule=vT,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=vT,this.setNodeLocationFromNode=vT,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`);this.setNodeLocationFromToken=vT,this.setNodeLocationFromNode=vT,this.cstPostRule=vT,this.setInitialNodeLocation=vT}else this.cstInvocationStateUpdate=vT,this.cstFinallyStateUpdate=vT,this.cstPostTerminal=vT,this.cstPostNonTerminal=vT,this.cstPostRule=vT}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?(r.endOffset=t.endOffset,r.endLine=t.endLine,r.endColumn=t.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){let t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?r.endOffset=t.endOffset:r.startOffset=NaN}cstPostTerminal(e,t){let r=this.CST_STACK[this.CST_STACK.length-1];RI(r,t,e),this.setNodeLocationFromToken(r.location,t)}cstPostNonTerminal(e,t){let r=this.CST_STACK[this.CST_STACK.length-1];LI(r,t,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(OC(this.baseCstVisitorConstructor)){let e=PI(this.className,Ev(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(OC(this.baseCstVisitorWithDefaultsConstructor)){let e=FI(this.className,Ev(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}},UI=class{static{s(this,"LexerAdapter")}initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):iM}LA(e){let t=this.currIdx+e;return t<0||this.tokVectorLength<=t?iM:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}},GI=class{static{s(this,"RecognizerApi")}ACTION(e){return e.call(this)}consume(e,t,r){return this.consumeInternal(t,e,r)}subrule(e,t,r){return this.subruleInternal(t,e,r)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,r=sM){if(Fw(this.definedRulesNames,e)){let t={message:lL.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:aM.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(t)}this.definedRulesNames.push(e);let n=this.defineRule(e,t,r);return this[e]=n,n}OVERRIDE_RULE(e,t,r=sM){let n=qL(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(n);let i=this.defineRule(e,t,r);return this[e]=i,i}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);let r=this.saveRecogState();try{return e.apply(this,t),!0}catch(e){if(hI(e))return!1;throw e}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return hN(IC(this.gastProductionsCache))}},jI=class{static{s(this,"RecognizerEngine")}initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=ER,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},Iw(t,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(Lm(e)){if(kv(e))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof e[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(Lm(e))this.tokensMap=iT(e,((e,t)=>(e[t.name]=t,e)),{});else if(Iw(e,"modes")&&gw(ZC(IC(e.modes)),$R)){let t=ZC(IC(e.modes)),r=Dk(t);this.tokensMap=iT(r,((e,t)=>(e[t.name]=t,e)),{})}else{if(!cp(e))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=Rx(e)}this.tokensMap.EOF=nL;let r=Iw(e,"modes")?ZC(IC(e.modes)):IC(e),n=gw(r,(e=>kv(e.categoryMatches)));this.tokenMatcher=n?ER:_R,NR(IC(this.tokensMap))}defineRule(e,t,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let n,i=Iw(r,"resyncEnabled")?r.resyncEnabled:sM.resyncEnabled,a=Iw(r,"recoveryValueFunc")?r.recoveryValueFunc:sM.recoveryValueFunc,o=this.ruleShortNameIdx<<12;return this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=e,this.fullRuleNameToShort[e]=o,n=!0===this.outputCst?s((function(...r){try{this.ruleInvocationStateUpdate(o,e,this.subruleIdx),t.apply(this,r);let n=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(n),n}catch(e){return this.invokeRuleCatch(e,i,a)}finally{this.ruleFinallyStateUpdate()}}),"invokeRuleWithTry"):s((function(...r){try{return this.ruleInvocationStateUpdate(o,e,this.subruleIdx),t.apply(this,r)}catch(e){return this.invokeRuleCatch(e,i,a)}finally{this.ruleFinallyStateUpdate()}}),"invokeRuleWithTryCst"),Object.assign(n,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,r){let n=1===this.RULE_STACK.length,i=t&&!this.isBackTracking()&&this.recoveryEnabled;if(hI(e)){let t=e;if(i){let n=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(n)){if(t.resyncedTokens=this.reSyncTo(n),this.outputCst){let e=this.CST_STACK[this.CST_STACK.length-1];return e.recoveredNode=!0,e}return r(e)}if(this.outputCst){let e=this.CST_STACK[this.CST_STACK.length-1];e.recoveredNode=!0,t.partialCstResult=e}throw t}if(n)return this.moveToTerminatedState(),r(e);throw t}throw e}optionInternal(e,t){let r=this.getKeyForAutomaticLookahead(512,t);return this.optionInternalLogic(e,t,r)}optionInternalLogic(e,t,r){let n,i=this.getLaFuncFromCache(r);if("function"!=typeof e){n=e.DEF;let t=e.GATE;if(void 0!==t){let e=i;i=s((()=>t.call(this)&&e.call(this)),"lookAheadFunc")}}else n=e;if(!0===i.call(this))return n.call(this)}atLeastOneInternal(e,t){let r=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,t,r)}atLeastOneInternalLogic(e,t,r){let n,i=this.getLaFuncFromCache(r);if("function"!=typeof t){n=t.DEF;let e=t.GATE;if(void 0!==e){let t=i;i=s((()=>e.call(this)&&t.call(this)),"lookAheadFunc")}}else n=t;if(!0!==i.call(this))throw this.raiseEarlyExitException(e,cL.REPETITION_MANDATORY,t.ERR_MSG);{let e=this.doSingleRepetition(n);for(;!0===i.call(this)&&!0===e;)e=this.doSingleRepetition(n)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],i,1024,e,yL)}atLeastOneSepFirstInternal(e,t){let r=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,t,r)}atLeastOneSepFirstInternalLogic(e,t,r){let n=t.DEF,i=t.SEP;if(!0!==this.getLaFuncFromCache(r).call(this))throw this.raiseEarlyExitException(e,cL.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG);{n.call(this);let t=s((()=>this.tokenMatcher(this.LA(1),i)),"separatorLookAheadFunc");for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,i,t,n,vL],t,1536,e,vL)}}manyInternal(e,t){let r=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,t,r)}manyInternalLogic(e,t,r){let n,i=this.getLaFuncFromCache(r);if("function"!=typeof t){n=t.DEF;let e=t.GATE;if(void 0!==e){let t=i;i=s((()=>e.call(this)&&t.call(this)),"lookaheadFunction")}}else n=t;let a=!0;for(;!0===i.call(this)&&!0===a;)a=this.doSingleRepetition(n);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],i,768,e,gL,a)}manySepFirstInternal(e,t){let r=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,t,r)}manySepFirstInternalLogic(e,t,r){let n=t.DEF,i=t.SEP;if(!0===this.getLaFuncFromCache(r).call(this)){n.call(this);let t=s((()=>this.tokenMatcher(this.LA(1),i)),"separatorLookAheadFunc");for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,i,t,n,mL],t,1280,e,mL)}}repetitionSepSecondInternal(e,t,r,n,i){for(;r();)this.CONSUME(t),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,r,n,i],r,1536,e,i)}doSingleRepetition(e){let t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){let r=this.getKeyForAutomaticLookahead(256,t),n=Lm(e)?e:e.DEF,i=this.getLaFuncFromCache(r).call(this,n);if(void 0!==i)return n[i].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){let e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new gI(t,e))}}subruleInternal(e,t,r){let n;try{let i=void 0!==r?r.ARGS:void 0;return this.subruleIdx=t,n=e.apply(this,i),this.cstPostNonTerminal(n,void 0!==r&&void 0!==r.LABEL?r.LABEL:e.ruleName),n}catch(t){throw this.subruleInternalError(t,r,e.ruleName)}}subruleInternalError(e,t,r){throw hI(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==t&&void 0!==t.LABEL?t.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,t,r){let n;try{let t=this.LA(1);!0===this.tokenMatcher(t,e)?(this.consumeToken(),n=t):this.consumeInternalError(e,t,r)}catch(r){n=this.consumeInternalRecovery(e,t,r)}return this.cstPostTerminal(void 0!==r&&void 0!==r.LABEL?r.LABEL:e.name,n),n}consumeInternalError(e,t,r){let n,i=this.LA(0);throw n=void 0!==r&&r.ERR_MSG?r.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new fI(n,t,i))}consumeInternalRecovery(e,t,r){if(!this.recoveryEnabled||"MismatchedTokenException"!==r.name||this.isBackTracking())throw r;{let n=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,n)}catch(e){throw e.name===vI?r:e}}}saveRecogState(){let e=this.errors,t=Rx(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return 0!==this.isBackTrackingStack.length}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),nL)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}},VI=class{static{s(this,"ErrorHandler")}initErrorHandler(e){this._errors=[],this.errorMessageProvider=Iw(e,"errorMessageProvider")?e.errorMessageProvider:oM.errorMessageProvider}SAVE_ERROR(e){if(hI(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Rx(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return Rx(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,r){let n=this.getCurrRuleFullName(),i=DL(e,this.getGAstProductions()[n],t,this.maxLookahead)[0],a=[];for(let e=1;e<=this.maxLookahead;e++)a.push(this.LA(e));let o=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:i,actual:a,previous:this.LA(0),customUserDescription:r,ruleName:n});throw this.SAVE_ERROR(new mI(o,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){let r=this.getCurrRuleFullName(),n=OL(e,this.getGAstProductions()[r],this.maxLookahead),i=[];for(let e=1;e<=this.maxLookahead;e++)i.push(this.LA(e));let a=this.LA(0),o=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:n,actual:i,previous:a,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new pI(o,this.LA(1),a))}},WI=class{static{s(this,"ContentAssist")}initContentAssist(){}computeContentAssist(e,t){let r=this.gastProductionsCache[e];if(OC(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return bL([r],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let t=Tw(e.ruleStack),r=this.getGAstProductions()[t];return new fL(r,e).startWalking()}},qI={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(qI);var HI=Math.pow(2,8)-1,YI=tL({name:"RECORDING_PHASE_TOKEN",pattern:jR.NA});NR([YI]);var XI=iL(YI,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(XI);var KI={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}},ZI=class{static{s(this,"GastRecorder")}initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(()=>{for(let e=0;e<10;e++){let t=e>0?e:"";this[`CONSUME${t}`]=function(t,r){return this.consumeInternalRecord(t,e,r)},this[`SUBRULE${t}`]=function(t,r){return this.subruleInternalRecord(t,e,r)},this[`OPTION${t}`]=function(t){return this.optionInternalRecord(t,e)},this[`OR${t}`]=function(t){return this.orInternalRecord(t,e)},this[`MANY${t}`]=function(t){this.manyInternalRecord(e,t)},this[`MANY_SEP${t}`]=function(t){this.manySepFirstInternalRecord(e,t)},this[`AT_LEAST_ONE${t}`]=function(t){this.atLeastOneInternalRecord(e,t)},this[`AT_LEAST_ONE_SEP${t}`]=function(t){this.atLeastOneSepFirstInternalRecord(e,t)}}this.consume=function(e,t,r){return this.consumeInternalRecord(t,e,r)},this.subrule=function(e,t,r){return this.subruleInternalRecord(t,e,r)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD}))}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(()=>{let e=this;for(let t=0;t<10;t++){let r=t>0?t:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA}))}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return iM}topLevelRuleRecord(e,t){try{let r=new rN({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),t.call(this),this.recordingProdStack.pop(),r}catch(e){if(!0!==e.KNOWN_RECORDER_ERROR)try{e.message=e.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch{throw e}throw e}}optionInternalRecord(e,t){return QI.call(this,iN,e,t)}atLeastOneInternalRecord(e,t){QI.call(this,aN,t,e)}atLeastOneSepFirstInternalRecord(e,t){QI.call(this,oN,t,e,true)}manyInternalRecord(e,t){QI.call(this,sN,t,e)}manySepFirstInternalRecord(e,t){QI.call(this,lN,t,e,true)}orInternalRecord(e,t){return JI.call(this,e,t)}subruleInternalRecord(e,t,r){if(tM(t),!e||!1===Iw(e,"ruleName")){let r=new Error(`<SUBRULE${eM(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw r.KNOWN_RECORDER_ERROR=!0,r}let n=Px(this.recordingProdStack),i=e.ruleName,a=new tN({idx:t,nonTerminalName:i,label:r?.LABEL,referencedRule:void 0});return n.definition.push(a),this.outputCst?KI:qI}consumeInternalRecord(e,t,r){if(tM(t),!DR(e)){let r=new Error(`<CONSUME${eM(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw r.KNOWN_RECORDER_ERROR=!0,r}let n=Px(this.recordingProdStack),i=new cN({idx:t,terminalType:e,label:r?.LABEL});return n.definition.push(i),XI}};function QI(e,t,r,n=!1){tM(r);let i=Px(this.recordingProdStack),a=fp(t)?t:t.DEF,o=new e({definition:[],idx:r});return n&&(o.separator=t.SEP),Iw(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(o),a.call(this),i.definition.push(o),this.recordingProdStack.pop(),qI}function JI(e,t){tM(t);let r=Px(this.recordingProdStack),n=!1===Lm(e),i=!1===n?e:e.DEF,a=new uN({definition:[],idx:t,ignoreAmbiguities:n&&!0===e.IGNORE_AMBIGUITIES});Iw(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD);let o=Mk(i,(e=>fp(e.GATE)));return a.hasPredicates=o,r.definition.push(a),Vx(i,(e=>{let t=new nN({definition:[]});a.definition.push(t),Iw(e,"IGNORE_AMBIGUITIES")?t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES:Iw(e,"GATE")&&(t.ignoreAmbiguities=!0),this.recordingProdStack.push(t),e.ALT.call(this),this.recordingProdStack.pop()})),qI}function eM(e){return 0===e?"":`${e}`}function tM(e){if(e<0||e>HI){let t=new Error(`Invalid DSL Method idx value: <${e}>\n\tIdx value must be a none negative value smaller than ${HI+1}`);throw t.KNOWN_RECORDER_ERROR=!0,t}}s(QI,"recordProd"),s(JI,"recordOrProd"),s(eM,"getIdxSuffix"),s(tM,"assertMethodIdxIsValid");var rM=class{static{s(this,"PerformanceTracer")}initPerformanceTracer(e){if(Iw(e,"traceInitPerf")){let t=e.traceInitPerf,r="number"==typeof t;this.traceInitMaxIdent=r?t:1/0,this.traceInitPerf=r?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=oM.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(!0===this.traceInitPerf){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${e}>`);let{time:n,value:i}=KA(t),a=n>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${n}ms`),this.traceInitIndent--,i}return t()}};function nM(e,t){t.forEach((t=>{let r=t.prototype;Object.getOwnPropertyNames(r).forEach((n=>{if("constructor"===n)return;let i=Object.getOwnPropertyDescriptor(r,n);i&&(i.get||i.set)?Object.defineProperty(e.prototype,n,i):e.prototype[n]=t.prototype[n]}))}))}s(nM,"applyMixins");var iM=iL(nL,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(iM);var aM,oM=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:oL,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),sM=Object.freeze({recoveryValueFunc:s((()=>{}),"recoveryValueFunc"),resyncEnabled:!0});function lM(e=void 0){return function(){return e}}!function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",e[e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",e[e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",e[e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",e[e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",e[e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",e[e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",e[e.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"}(aM||(aM={})),s(lM,"EMPTY_ALT");var uM=class e{static{s(this,"Parser")}static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",(()=>{let t;this.selfAnalysisDone=!0;let r=this.className;this.TRACE_INIT("toFastProps",(()=>{ZA(this)})),this.TRACE_INIT("Grammar Recording",(()=>{try{this.enableRecording(),Vx(this.definedRulesNames,(e=>{let t,r=this[e].originalGrammarAction;this.TRACE_INIT(`${e} Rule`,(()=>{t=this.topLevelRuleRecord(e,r)})),this.gastProductionsCache[e]=t}))}finally{this.disableRecording()}}));let n=[];if(this.TRACE_INIT("Grammar Resolving",(()=>{n=iI({rules:IC(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)})),this.TRACE_INIT("Grammar Validations",(()=>{if(kv(n)&&!1===this.skipValidations){let e=aI({rules:IC(this.gastProductionsCache),tokenTypes:IC(this.tokensMap),errMsgProvider:lL,grammarName:r}),t=$L({lookaheadStrategy:this.lookaheadStrategy,rules:IC(this.gastProductionsCache),tokenTypes:IC(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(e,t)}})),kv(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",(()=>{let e=EN(IC(this.gastProductionsCache));this.resyncFollows=e})),this.TRACE_INIT("ComputeLookaheadFunctions",(()=>{var e,t;null===(t=(e=this.lookaheadStrategy).initialize)||void 0===t||t.call(e,{rules:IC(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(IC(this.gastProductionsCache))}))),!e.DEFER_DEFINITION_ERRORS_HANDLING&&!kv(this.definitionErrors))throw t=AC(this.definitionErrors,(e=>e.message)),new Error(`Parser Definition Errors detected:\n ${t.join("\n-------------------------------\n")}`)}))}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;let r=this;if(r.initErrorHandler(t),r.initLexerAdapter(),r.initLooksAhead(t),r.initRecognizerEngine(e,t),r.initRecoverable(t),r.initTreeBuilder(t),r.initContentAssist(),r.initGastRecorder(t),r.initPerformanceTracer(t),Iw(t,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=Iw(t,"skipValidations")?t.skipValidations:oM.skipValidations}};uM.DEFER_DEFINITION_ERRORS_HANDLING=!1,nM(uM,[bI,kI,zI,UI,jI,GI,VI,WI,ZI,rM]);var cM=class extends uM{static{s(this,"EmbeddedActionsParser")}constructor(e,t=oM){let r=Rx(t);r.outputCst=!1,super(e,r)}};function hM(e,t,r){return`${e.name}_${t}_${r}`}s(hM,"buildATNKey");var dM=1,fM=2,pM=4,gM=5,mM=7,yM=8,vM=9,xM=10,bM=11,CM=12,TM=class{static{s(this,"AbstractTransition")}constructor(e){this.target=e}isEpsilon(){return!1}},wM=class extends TM{static{s(this,"AtomTransition")}constructor(e,t){super(e),this.tokenType=t}},kM=class extends TM{static{s(this,"EpsilonTransition")}constructor(e){super(e)}isEpsilon(){return!0}},_M=class extends TM{static{s(this,"RuleTransition")}constructor(e,t,r){super(e),this.rule=t,this.followState=r}isEpsilon(){return!0}};function EM(e){let t={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};SM(t,e);let r=e.length;for(let n=0;n<r;n++){let r=e[n],i=DM(t,r,r);void 0!==i&&WM(t,r,i)}return t}function SM(e,t){let r=t.length;for(let n=0;n<r;n++){let r=t[n],i=HM(e,r,void 0,{type:fM}),a=HM(e,r,void 0,{type:mM});i.stop=a,e.ruleToStartState.set(r,i),e.ruleToStopState.set(r,a)}}function AM(e,t,r){return r instanceof cN?jM(e,t,r.terminalType,r):r instanceof tN?VM(e,t,r):r instanceof uN?MM(e,t,r):r instanceof iN?OM(e,t,r):r instanceof sN?NM(e,t,r):r instanceof lN?RM(e,t,r):r instanceof aN?LM(e,t,r):r instanceof oN?IM(e,t,r):DM(e,t,r)}function NM(e,t,r){let n=HM(e,t,r,{type:gM});return $M(e,n),FM(e,t,r,zM(e,t,n,r,DM(e,t,r)))}function RM(e,t,r){let n=HM(e,t,r,{type:gM});return $M(e,n),FM(e,t,r,zM(e,t,n,r,DM(e,t,r)),jM(e,t,r.separator,r))}function LM(e,t,r){let n=HM(e,t,r,{type:pM});return $M(e,n),PM(e,t,r,zM(e,t,n,r,DM(e,t,r)))}function IM(e,t,r){let n=HM(e,t,r,{type:pM});return $M(e,n),PM(e,t,r,zM(e,t,n,r,DM(e,t,r)),jM(e,t,r.separator,r))}function MM(e,t,r){let n=HM(e,t,r,{type:dM});$M(e,n);let i=AC(r.definition,(r=>AM(e,t,r)));return zM(e,t,n,r,...i)}function OM(e,t,r){let n=HM(e,t,r,{type:dM});return $M(e,n),BM(e,t,r,zM(e,t,n,r,DM(e,t,r)))}function DM(e,t,r){let n=kC(AC(r.definition,(r=>AM(e,t,r))),(e=>void 0!==e));return 1===n.length?n[0]:0===n.length?void 0:GM(e,n)}function PM(e,t,r,n,i){let a=n.left,o=n.right,s=HM(e,t,r,{type:bM});$M(e,s);let l=HM(e,t,r,{type:CM});return a.loopback=s,l.loopback=s,e.decisionMap[hM(t,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",r.idx)]=s,qM(o,s),void 0===i?(qM(s,a),qM(s,l)):(qM(s,l),qM(s,i.left),qM(i.right,a)),{left:a,right:l}}function FM(e,t,r,n,i){let a=n.left,o=n.right,s=HM(e,t,r,{type:xM});$M(e,s);let l=HM(e,t,r,{type:CM}),u=HM(e,t,r,{type:vM});return s.loopback=u,l.loopback=u,qM(s,a),qM(s,l),qM(o,u),void 0!==i?(qM(u,l),qM(u,i.left),qM(i.right,a)):qM(u,s),e.decisionMap[hM(t,i?"RepetitionWithSeparator":"Repetition",r.idx)]=s,{left:s,right:l}}function BM(e,t,r,n){let i=n.left;return qM(i,n.right),e.decisionMap[hM(t,"Option",r.idx)]=i,n}function $M(e,t){return e.decisionStates.push(t),t.decision=e.decisionStates.length-1,t.decision}function zM(e,t,r,n,...i){let a=HM(e,t,n,{type:yM,start:r});r.end=a;for(let e of i)void 0!==e?(qM(r,e.left),qM(e.right,a)):qM(r,a);let o={left:r,right:a};return e.decisionMap[hM(t,UM(n),n.idx)]=r,o}function UM(e){if(e instanceof uN)return"Alternation";if(e instanceof iN)return"Option";if(e instanceof sN)return"Repetition";if(e instanceof lN)return"RepetitionWithSeparator";if(e instanceof aN)return"RepetitionMandatory";if(e instanceof oN)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function GM(e,t){let r=t.length;for(let n=0;n<r-1;n++){let r,i=t[n];1===i.left.transitions.length&&(r=i.left.transitions[0]);let a=r instanceof _M,o=r,s=t[n+1].left;i.left.type===dM&&i.right.type===dM&&void 0!==r&&(a&&o.followState===i.right||r.target===i.right)?(a?o.followState=s:r.target=s,XM(e,i.right)):qM(i.right,s)}let n=t[0],i=t[r-1];return{left:n.left,right:i.right}}function jM(e,t,r,n){let i=HM(e,t,n,{type:dM}),a=HM(e,t,n,{type:dM});return YM(i,new wM(a,r)),{left:i,right:a}}function VM(e,t,r){let n=r.referencedRule,i=e.ruleToStartState.get(n),a=HM(e,t,r,{type:dM}),o=HM(e,t,r,{type:dM});return YM(a,new _M(i,n,o)),{left:a,right:o}}function WM(e,t,r){let n=e.ruleToStartState.get(t);qM(n,r.left);let i=e.ruleToStopState.get(t);return qM(r.right,i),{left:n,right:i}}function qM(e,t){YM(e,new kM(t))}function HM(e,t,r,n){let i=Object.assign({atn:e,production:r,epsilonOnlyTransitions:!1,rule:t,transitions:[],nextTokenWithinRule:[],stateNumber:e.states.length},n);return e.states.push(i),i}function YM(e,t){0===e.transitions.length&&(e.epsilonOnlyTransitions=t.isEpsilon()),e.transitions.push(t)}function XM(e,t){e.states.splice(e.states.indexOf(t),1)}s(EM,"createATN"),s(SM,"createRuleStartAndStopATNStates"),s(AM,"atom"),s(NM,"repetition"),s(RM,"repetitionSep"),s(LM,"repetitionMandatory"),s(IM,"repetitionMandatorySep"),s(MM,"alternation"),s(OM,"option"),s(DM,"block"),s(PM,"plus"),s(FM,"star"),s(BM,"optional"),s($M,"defineDecisionState"),s(zM,"makeAlts"),s(UM,"getProdType"),s(GM,"makeBlock"),s(jM,"tokenRef"),s(VM,"ruleRef"),s(WM,"buildRuleHandle"),s(qM,"epsilon"),s(HM,"newState"),s(YM,"addTransition"),s(XM,"removeState");var KM={},ZM=class{static{s(this,"ATNConfigSet")}constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){let t=QM(e);t in this.map||(this.map[t]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return AC(this.configs,(e=>e.alt))}get key(){let e="";for(let t in this.map)e+=t+":";return e}};function QM(e,t=!0){return`${t?`a${e.alt}`:""}s${e.state.stateNumber}:${e.stack.map((e=>e.stateNumber.toString())).join("_")}`}function JM(e,t){let r={};return n=>{let i=n.toString(),a=r[i];return void 0!==a||(a={atnStartState:e,decision:t,states:{}},r[i]=a),a}}s(QM,"getATNConfigKey"),s(JM,"createDFACache");var eO,tO,rO,nO,iO,aO,oO,sO,lO,uO,cO,hO,dO,fO,pO,gO,mO,yO,vO,xO,bO,CO,TO,wO,kO,_O,EO,SO,AO,NO,RO,LO,IO,MO,OO,DO,PO,FO,BO,$O,zO,UO,GO,jO,VO,WO,qO,HO,YO,XO,KO,ZO,QO,JO,eD,tD,rD,nD,iD,aD,oD,sD,lD,uD,cD,hD,dD,fD,pD,gD,mD,yD,vD,xD,bD,CD,TD,wD,kD,_D=class{static{s(this,"PredicateSet")}constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,t){this.predicates[e]=t}toString(){let e="",t=this.predicates.length;for(let r=0;r<t;r++)e+=!0===this.predicates[r]?"1":"0";return e}},ED=new _D,SD=class extends wI{static{s(this,"LLStarLookaheadStrategy")}constructor(e){var t;super(),this.logging=null!==(t=e?.logging)&&void 0!==t?t:e=>console.log(e)}initialize(e){this.atn=EM(e.rules),this.dfas=ND(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){let{prodOccurrence:t,rule:r,hasPredicates:n,dynamicTokensEnabled:i}=e,a=this.dfas,o=this.logging,s=hM(r,"Alternation",t),l=this.atn.decisionMap[s].decision,u=AC(wL({maxLookahead:1,occurrence:t,prodType:"Alternation",rule:r}),(e=>AC(e,(e=>e[0]))));if(AD(u,!1)&&!i){let e=iT(u,((e,t,r)=>(Vx(t,(t=>{t&&(e[t.tokenTypeIdx]=r,Vx(t.categoryMatches,(t=>{e[t]=r})))})),e)),{});return n?function(t){var r;let n=this.LA(1),i=e[n.tokenTypeIdx];if(void 0!==t&&void 0!==i){let e=null===(r=t[i])||void 0===r?void 0:r.GATE;if(void 0!==e&&!1===e.call(this))return}return i}:function(){let t=this.LA(1);return e[t.tokenTypeIdx]}}return n?function(e){let t=new _D,r=void 0===e?0:e.length;for(let n=0;n<r;n++){let r=e?.[n].GATE;t.set(n,void 0===r||r.call(this))}let n=RD.call(this,a,l,t,o);return"number"==typeof n?n:void 0}:function(){let e=RD.call(this,a,l,ED,o);return"number"==typeof e?e:void 0}}buildLookaheadForOptional(e){let{prodOccurrence:t,rule:r,prodType:n,dynamicTokensEnabled:i}=e,a=this.dfas,o=this.logging,s=hM(r,n,t),l=this.atn.decisionMap[s].decision,u=AC(wL({maxLookahead:1,occurrence:t,prodType:n,rule:r}),(e=>AC(e,(e=>e[0]))));if(AD(u)&&u[0][0]&&!i){let e=u[0],t=ZC(e);if(1===t.length&&kv(t[0].categoryMatches)){let e=t[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===e}}{let e=iT(t,((e,t)=>(void 0!==t&&(e[t.tokenTypeIdx]=!0,Vx(t.categoryMatches,(t=>{e[t]=!0}))),e)),{});return function(){let t=this.LA(1);return!0===e[t.tokenTypeIdx]}}}return function(){let e=RD.call(this,a,l,ED,o);return"object"!=typeof e&&0===e}}};function AD(e,t=!0){let r=new Set;for(let n of e){let e=new Set;for(let i of n){if(void 0===i){if(t)break;return!1}let n=[i.tokenTypeIdx].concat(i.categoryMatches);for(let t of n)if(r.has(t)){if(!e.has(t))return!1}else r.add(t),e.add(t)}}return!0}function ND(e){let t=e.decisionStates.length,r=Array(t);for(let n=0;n<t;n++)r[n]=JM(e.decisionStates[n],n);return r}function RD(e,t,r,n){let i=e[t](r),a=i.start;if(void 0===a){a=jD(i,UD(VD(i.atnStartState))),i.start=a}return LD.apply(this,[i,a,r,n])}function LD(e,t,r,n){let i=t,a=1,o=[],s=this.LA(a++);for(;;){let t=FD(i,s);if(void 0===t&&(t=ID.apply(this,[e,i,s,a,r,n])),t===KM)return PD(o,i,s);if(!0===t.isAcceptState)return t.prediction;i=t,o.push(s),s=this.LA(a++)}}function ID(e,t,r,n,i,a){let o=BD(t.configs,r,i);if(0===o.size)return GD(e,t,r,KM),KM;let s=UD(o),l=zD(o,i);if(void 0!==l)s.isAcceptState=!0,s.prediction=l,s.configs.uniqueAlt=l;else if(XD(o)){let t=Yw(o.alts);s.isAcceptState=!0,s.prediction=t,s.configs.uniqueAlt=t,MD.apply(this,[e,n,o.alts,a])}return s=GD(e,t,r,s),s}function MD(e,t,r,n){let i=[];for(let e=1;e<=t;e++)i.push(this.LA(e).tokenType);let a=e.atnStartState;n(OD({topLevelRule:a.rule,ambiguityIndices:r,production:a.production,prefixPath:i}))}function OD(e){let t=AC(e.prefixPath,(e=>VR(e))).join(", "),r=0===e.production.idx?"":e.production.idx,n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(", ")}> in <${DD(e.production)}${r}> inside <${e.topLevelRule.name}> Rule,\n<${t}> may appears as a prefix path in all these alternatives.\n`;return n+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",n}function DD(e){if(e instanceof tN)return"SUBRULE";if(e instanceof iN)return"OPTION";if(e instanceof uN)return"OR";if(e instanceof aN)return"AT_LEAST_ONE";if(e instanceof oN)return"AT_LEAST_ONE_SEP";if(e instanceof lN)return"MANY_SEP";if(e instanceof sN)return"MANY";if(e instanceof cN)return"CONSUME";throw Error("non exhaustive match")}function PD(e,t,r){let n=kw(t.configs.elements,(e=>e.state.transitions)),i=Fk(n.filter((e=>e instanceof wM)).map((e=>e.tokenType)),(e=>e.tokenTypeIdx));return{actualToken:r,possibleTokenTypes:i,tokenPath:e}}function FD(e,t){return e.edges[t.tokenTypeIdx]}function BD(e,t,r){let n,i=new ZM,a=[];for(let n of e.elements){if(!1===r.is(n.alt))continue;if(n.state.type===mM){a.push(n);continue}let e=n.state.transitions.length;for(let r=0;r<e;r++){let e=$D(n.state.transitions[r],t);void 0!==e&&i.add({state:e,alt:n.alt,stack:n.stack})}}if(0===a.length&&1===i.size&&(n=i),void 0===n){n=new ZM;for(let e of i.elements)WD(e,n)}if(a.length>0&&!HD(n))for(let e of a)n.add(e);return n}function $D(e,t){if(e instanceof wM&&aL(t,e.tokenType))return e.target}function zD(e,t){let r;for(let n of e.elements)if(!0===t.is(n.alt))if(void 0===r)r=n.alt;else if(r!==n.alt)return;return r}function UD(e){return{configs:e,edges:{},isAcceptState:!1,prediction:-1}}function GD(e,t,r,n){return n=jD(e,n),t.edges[r.tokenTypeIdx]=n,n}function jD(e,t){if(t===KM)return t;let r=t.configs.key,n=e.states[r];return void 0!==n?n:(t.configs.finalize(),e.states[r]=t,t)}function VD(e){let t=new ZM,r=e.transitions.length;for(let n=0;n<r;n++){WD({state:e.transitions[n].target,alt:n,stack:[]},t)}return t}function WD(e,t){let r=e.state;if(r.type===mM){if(e.stack.length>0){let r=[...e.stack];WD({state:r.pop(),alt:e.alt,stack:r},t)}else t.add(e);return}r.epsilonOnlyTransitions||t.add(e);let n=r.transitions.length;for(let i=0;i<n;i++){let n=qD(e,r.transitions[i]);void 0!==n&&WD(n,t)}}function qD(e,t){if(t instanceof kM)return{state:t.target,alt:e.alt,stack:e.stack};if(t instanceof _M){let r=[...e.stack,t.followState];return{state:t.target,alt:e.alt,stack:r}}}function HD(e){for(let t of e.elements)if(t.state.type===mM)return!0;return!1}function YD(e){for(let t of e.elements)if(t.state.type!==mM)return!1;return!0}function XD(e){if(YD(e))return!0;let t=KD(e.elements);return ZD(t)&&!QD(t)}function KD(e){let t=new Map;for(let r of e){let e=QM(r,!1),n=t.get(e);void 0===n&&(n={},t.set(e,n)),n[r.alt]=!0}return t}function ZD(e){for(let t of Array.from(e.values()))if(Object.keys(t).length>1)return!0;return!1}function QD(e){for(let t of Array.from(e.values()))if(1===Object.keys(t).length)return!0;return!1}s(AD,"isLL1Sequence"),s(ND,"initATNSimulator"),s(RD,"adaptivePredict"),s(LD,"performLookahead"),s(ID,"computeLookaheadTarget"),s(MD,"reportLookaheadAmbiguity"),s(OD,"buildAmbiguityError"),s(DD,"getProductionDslName"),s(PD,"buildAdaptivePredictError"),s(FD,"getExistingTargetState"),s(BD,"computeReachSet"),s($D,"getReachableTarget"),s(zD,"getUniqueAlt"),s(UD,"newDFAState"),s(GD,"addDFAEdge"),s(jD,"addDFAState"),s(VD,"computeStartState"),s(WD,"closure"),s(qD,"getEpsilonTarget"),s(HD,"hasConfigInRuleStopState"),s(YD,"allConfigsInRuleStopStates"),s(XD,"hasConflictTerminatingPrediction"),s(KD,"getConflictingAltSets"),s(ZD,"hasConflictingAltSet"),s(QD,"hasStateAssociatedWithOneAlt"),function(e){function t(e){return"string"==typeof e}s(t,"is"),e.is=t}(eO||(eO={})),function(e){function t(e){return"string"==typeof e}s(t,"is"),e.is=t}(tO||(tO={})),function(e){function t(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647,s(t,"is"),e.is=t}(rO||(rO={})),function(e){function t(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.MIN_VALUE=0,e.MAX_VALUE=2147483647,s(t,"is"),e.is=t}(nO||(nO={})),function(e){function t(e,t){return e===Number.MAX_VALUE&&(e=nO.MAX_VALUE),t===Number.MAX_VALUE&&(t=nO.MAX_VALUE),{line:e,character:t}}function r(e){let t=e;return JD.objectLiteral(t)&&JD.uinteger(t.line)&&JD.uinteger(t.character)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(iO||(iO={})),function(e){function t(e,t,r,n){if(JD.uinteger(e)&&JD.uinteger(t)&&JD.uinteger(r)&&JD.uinteger(n))return{start:iO.create(e,t),end:iO.create(r,n)};if(iO.is(e)&&iO.is(t))return{start:e,end:t};throw new Error(`Range#create called with invalid arguments[${e}, ${t}, ${r}, ${n}]`)}function r(e){let t=e;return JD.objectLiteral(t)&&iO.is(t.start)&&iO.is(t.end)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(aO||(aO={})),function(e){function t(e,t){return{uri:e,range:t}}function r(e){let t=e;return JD.objectLiteral(t)&&aO.is(t.range)&&(JD.string(t.uri)||JD.undefined(t.uri))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(oO||(oO={})),function(e){function t(e,t,r,n){return{targetUri:e,targetRange:t,targetSelectionRange:r,originSelectionRange:n}}function r(e){let t=e;return JD.objectLiteral(t)&&aO.is(t.targetRange)&&JD.string(t.targetUri)&&aO.is(t.targetSelectionRange)&&(aO.is(t.originSelectionRange)||JD.undefined(t.originSelectionRange))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(sO||(sO={})),function(e){function t(e,t,r,n){return{red:e,green:t,blue:r,alpha:n}}function r(e){let t=e;return JD.objectLiteral(t)&&JD.numberRange(t.red,0,1)&&JD.numberRange(t.green,0,1)&&JD.numberRange(t.blue,0,1)&&JD.numberRange(t.alpha,0,1)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(lO||(lO={})),function(e){function t(e,t){return{range:e,color:t}}function r(e){let t=e;return JD.objectLiteral(t)&&aO.is(t.range)&&lO.is(t.color)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(uO||(uO={})),function(e){function t(e,t,r){return{label:e,textEdit:t,additionalTextEdits:r}}function r(e){let t=e;return JD.objectLiteral(t)&&JD.string(t.label)&&(JD.undefined(t.textEdit)||xO.is(t))&&(JD.undefined(t.additionalTextEdits)||JD.typedArray(t.additionalTextEdits,xO.is))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(cO||(cO={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(hO||(hO={})),function(e){function t(e,t,r,n,i,a){let o={startLine:e,endLine:t};return JD.defined(r)&&(o.startCharacter=r),JD.defined(n)&&(o.endCharacter=n),JD.defined(i)&&(o.kind=i),JD.defined(a)&&(o.collapsedText=a),o}function r(e){let t=e;return JD.objectLiteral(t)&&JD.uinteger(t.startLine)&&JD.uinteger(t.startLine)&&(JD.undefined(t.startCharacter)||JD.uinteger(t.startCharacter))&&(JD.undefined(t.endCharacter)||JD.uinteger(t.endCharacter))&&(JD.undefined(t.kind)||JD.string(t.kind))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(dO||(dO={})),function(e){function t(e,t){return{location:e,message:t}}function r(e){let t=e;return JD.defined(t)&&oO.is(t.location)&&JD.string(t.message)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(fO||(fO={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(pO||(pO={})),function(e){e.Unnecessary=1,e.Deprecated=2}(gO||(gO={})),function(e){function t(e){let t=e;return JD.objectLiteral(t)&&JD.string(t.href)}s(t,"is"),e.is=t}(mO||(mO={})),function(e){function t(e,t,r,n,i,a){let o={range:e,message:t};return JD.defined(r)&&(o.severity=r),JD.defined(n)&&(o.code=n),JD.defined(i)&&(o.source=i),JD.defined(a)&&(o.relatedInformation=a),o}function r(e){var t;let r=e;return JD.defined(r)&&aO.is(r.range)&&JD.string(r.message)&&(JD.number(r.severity)||JD.undefined(r.severity))&&(JD.integer(r.code)||JD.string(r.code)||JD.undefined(r.code))&&(JD.undefined(r.codeDescription)||JD.string(null===(t=r.codeDescription)||void 0===t?void 0:t.href))&&(JD.string(r.source)||JD.undefined(r.source))&&(JD.undefined(r.relatedInformation)||JD.typedArray(r.relatedInformation,fO.is))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(yO||(yO={})),function(e){function t(e,t,...r){let n={title:e,command:t};return JD.defined(r)&&r.length>0&&(n.arguments=r),n}function r(e){let t=e;return JD.defined(t)&&JD.string(t.title)&&JD.string(t.command)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(vO||(vO={})),function(e){function t(e,t){return{range:e,newText:t}}function r(e,t){return{range:{start:e,end:e},newText:t}}function n(e){return{range:e,newText:""}}function i(e){let t=e;return JD.objectLiteral(t)&&JD.string(t.newText)&&aO.is(t.range)}s(t,"replace"),e.replace=t,s(r,"insert"),e.insert=r,s(n,"del"),e.del=n,s(i,"is"),e.is=i}(xO||(xO={})),function(e){function t(e,t,r){let n={label:e};return void 0!==t&&(n.needsConfirmation=t),void 0!==r&&(n.description=r),n}function r(e){let t=e;return JD.objectLiteral(t)&&JD.string(t.label)&&(JD.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(JD.string(t.description)||void 0===t.description)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(bO||(bO={})),function(e){function t(e){let t=e;return JD.string(t)}s(t,"is"),e.is=t}(CO||(CO={})),function(e){function t(e,t,r){return{range:e,newText:t,annotationId:r}}function r(e,t,r){return{range:{start:e,end:e},newText:t,annotationId:r}}function n(e,t){return{range:e,newText:"",annotationId:t}}function i(e){let t=e;return xO.is(t)&&(bO.is(t.annotationId)||CO.is(t.annotationId))}s(t,"replace"),e.replace=t,s(r,"insert"),e.insert=r,s(n,"del"),e.del=n,s(i,"is"),e.is=i}(TO||(TO={})),function(e){function t(e,t){return{textDocument:e,edits:t}}function r(e){let t=e;return JD.defined(t)&&RO.is(t.textDocument)&&Array.isArray(t.edits)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(wO||(wO={})),function(e){function t(e,t,r){let n={kind:"create",uri:e};return void 0!==t&&(void 0!==t.overwrite||void 0!==t.ignoreIfExists)&&(n.options=t),void 0!==r&&(n.annotationId=r),n}function r(e){let t=e;return t&&"create"===t.kind&&JD.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||JD.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||JD.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||CO.is(t.annotationId))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(kO||(kO={})),function(e){function t(e,t,r,n){let i={kind:"rename",oldUri:e,newUri:t};return void 0!==r&&(void 0!==r.overwrite||void 0!==r.ignoreIfExists)&&(i.options=r),void 0!==n&&(i.annotationId=n),i}function r(e){let t=e;return t&&"rename"===t.kind&&JD.string(t.oldUri)&&JD.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||JD.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||JD.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||CO.is(t.annotationId))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(_O||(_O={})),function(e){function t(e,t,r){let n={kind:"delete",uri:e};return void 0!==t&&(void 0!==t.recursive||void 0!==t.ignoreIfNotExists)&&(n.options=t),void 0!==r&&(n.annotationId=r),n}function r(e){let t=e;return t&&"delete"===t.kind&&JD.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||JD.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||JD.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||CO.is(t.annotationId))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(EO||(EO={})),function(e){function t(e){let t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((e=>JD.string(e.kind)?kO.is(e)||_O.is(e)||EO.is(e):wO.is(e))))}s(t,"is"),e.is=t}(SO||(SO={})),function(e){function t(e){return{uri:e}}function r(e){let t=e;return JD.defined(t)&&JD.string(t.uri)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(AO||(AO={})),function(e){function t(e,t){return{uri:e,version:t}}function r(e){let t=e;return JD.defined(t)&&JD.string(t.uri)&&JD.integer(t.version)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(NO||(NO={})),function(e){function t(e,t){return{uri:e,version:t}}function r(e){let t=e;return JD.defined(t)&&JD.string(t.uri)&&(null===t.version||JD.integer(t.version))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(RO||(RO={})),function(e){function t(e,t,r,n){return{uri:e,languageId:t,version:r,text:n}}function r(e){let t=e;return JD.defined(t)&&JD.string(t.uri)&&JD.string(t.languageId)&&JD.integer(t.version)&&JD.string(t.text)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(LO||(LO={})),function(e){function t(t){let r=t;return r===e.PlainText||r===e.Markdown}e.PlainText="plaintext",e.Markdown="markdown",s(t,"is"),e.is=t}(IO||(IO={})),function(e){function t(e){let t=e;return JD.objectLiteral(e)&&IO.is(t.kind)&&JD.string(t.value)}s(t,"is"),e.is=t}(MO||(MO={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(OO||(OO={})),function(e){e.PlainText=1,e.Snippet=2}(DO||(DO={})),(PO||(PO={})).Deprecated=1,function(e){function t(e,t,r){return{newText:e,insert:t,replace:r}}function r(e){let t=e;return t&&JD.string(t.newText)&&aO.is(t.insert)&&aO.is(t.replace)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(FO||(FO={})),function(e){e.asIs=1,e.adjustIndentation=2}(BO||(BO={})),function(e){function t(e){let t=e;return t&&(JD.string(t.detail)||void 0===t.detail)&&(JD.string(t.description)||void 0===t.description)}s(t,"is"),e.is=t}($O||($O={})),function(e){function t(e){return{label:e}}s(t,"create"),e.create=t}(zO||(zO={})),function(e){function t(e,t){return{items:e||[],isIncomplete:!!t}}s(t,"create"),e.create=t}(UO||(UO={})),function(e){function t(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}function r(e){let t=e;return JD.string(t)||JD.objectLiteral(t)&&JD.string(t.language)&&JD.string(t.value)}s(t,"fromPlainText"),e.fromPlainText=t,s(r,"is"),e.is=r}(GO||(GO={})),function(e){function t(e){let t=e;return!!t&&JD.objectLiteral(t)&&(MO.is(t.contents)||GO.is(t.contents)||JD.typedArray(t.contents,GO.is))&&(void 0===e.range||aO.is(e.range))}s(t,"is"),e.is=t}(jO||(jO={})),function(e){function t(e,t){return t?{label:e,documentation:t}:{label:e}}s(t,"create"),e.create=t}(VO||(VO={})),function(e){function t(e,t,...r){let n={label:e};return JD.defined(t)&&(n.documentation=t),JD.defined(r)?n.parameters=r:n.parameters=[],n}s(t,"create"),e.create=t}(WO||(WO={})),function(e){e.Text=1,e.Read=2,e.Write=3}(qO||(qO={})),function(e){function t(e,t){let r={range:e};return JD.number(t)&&(r.kind=t),r}s(t,"create"),e.create=t}(HO||(HO={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(YO||(YO={})),(XO||(XO={})).Deprecated=1,function(e){function t(e,t,r,n,i){let a={name:e,kind:t,location:{uri:n,range:r}};return i&&(a.containerName=i),a}s(t,"create"),e.create=t}(KO||(KO={})),function(e){function t(e,t,r,n){return void 0!==n?{name:e,kind:t,location:{uri:r,range:n}}:{name:e,kind:t,location:{uri:r}}}s(t,"create"),e.create=t}(ZO||(ZO={})),function(e){function t(e,t,r,n,i,a){let o={name:e,detail:t,kind:r,range:n,selectionRange:i};return void 0!==a&&(o.children=a),o}function r(e){let t=e;return t&&JD.string(t.name)&&JD.number(t.kind)&&aO.is(t.range)&&aO.is(t.selectionRange)&&(void 0===t.detail||JD.string(t.detail))&&(void 0===t.deprecated||JD.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(QO||(QO={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(JO||(JO={})),function(e){e.Invoked=1,e.Automatic=2}(eD||(eD={})),function(e){function t(e,t,r){let n={diagnostics:e};return null!=t&&(n.only=t),null!=r&&(n.triggerKind=r),n}function r(e){let t=e;return JD.defined(t)&&JD.typedArray(t.diagnostics,yO.is)&&(void 0===t.only||JD.typedArray(t.only,JD.string))&&(void 0===t.triggerKind||t.triggerKind===eD.Invoked||t.triggerKind===eD.Automatic)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(tD||(tD={})),function(e){function t(e,t,r){let n={title:e},i=!0;return"string"==typeof t?(i=!1,n.kind=t):vO.is(t)?n.command=t:n.edit=t,i&&void 0!==r&&(n.kind=r),n}function r(e){let t=e;return t&&JD.string(t.title)&&(void 0===t.diagnostics||JD.typedArray(t.diagnostics,yO.is))&&(void 0===t.kind||JD.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||vO.is(t.command))&&(void 0===t.isPreferred||JD.boolean(t.isPreferred))&&(void 0===t.edit||SO.is(t.edit))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(rD||(rD={})),function(e){function t(e,t){let r={range:e};return JD.defined(t)&&(r.data=t),r}function r(e){let t=e;return JD.defined(t)&&aO.is(t.range)&&(JD.undefined(t.command)||vO.is(t.command))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(nD||(nD={})),function(e){function t(e,t){return{tabSize:e,insertSpaces:t}}function r(e){let t=e;return JD.defined(t)&&JD.uinteger(t.tabSize)&&JD.boolean(t.insertSpaces)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(iD||(iD={})),function(e){function t(e,t,r){return{range:e,target:t,data:r}}function r(e){let t=e;return JD.defined(t)&&aO.is(t.range)&&(JD.undefined(t.target)||JD.string(t.target))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(aD||(aD={})),function(e){function t(e,t){return{range:e,parent:t}}function r(t){let r=t;return JD.objectLiteral(r)&&aO.is(r.range)&&(void 0===r.parent||e.is(r.parent))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(oD||(oD={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(sD||(sD={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(lD||(lD={})),function(e){function t(e){let t=e;return JD.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}s(t,"is"),e.is=t}(uD||(uD={})),function(e){function t(e,t){return{range:e,text:t}}function r(e){let t=e;return null!=t&&aO.is(t.range)&&JD.string(t.text)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(cD||(cD={})),function(e){function t(e,t,r){return{range:e,variableName:t,caseSensitiveLookup:r}}function r(e){let t=e;return null!=t&&aO.is(t.range)&&JD.boolean(t.caseSensitiveLookup)&&(JD.string(t.variableName)||void 0===t.variableName)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(hD||(hD={})),function(e){function t(e,t){return{range:e,expression:t}}function r(e){let t=e;return null!=t&&aO.is(t.range)&&(JD.string(t.expression)||void 0===t.expression)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(dD||(dD={})),function(e){function t(e,t){return{frameId:e,stoppedLocation:t}}function r(e){let t=e;return JD.defined(t)&&aO.is(e.stoppedLocation)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(fD||(fD={})),function(e){function t(e){return 1===e||2===e}e.Type=1,e.Parameter=2,s(t,"is"),e.is=t}(pD||(pD={})),function(e){function t(e){return{value:e}}function r(e){let t=e;return JD.objectLiteral(t)&&(void 0===t.tooltip||JD.string(t.tooltip)||MO.is(t.tooltip))&&(void 0===t.location||oO.is(t.location))&&(void 0===t.command||vO.is(t.command))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(gD||(gD={})),function(e){function t(e,t,r){let n={position:e,label:t};return void 0!==r&&(n.kind=r),n}function r(e){let t=e;return JD.objectLiteral(t)&&iO.is(t.position)&&(JD.string(t.label)||JD.typedArray(t.label,gD.is))&&(void 0===t.kind||pD.is(t.kind))&&void 0===t.textEdits||JD.typedArray(t.textEdits,xO.is)&&(void 0===t.tooltip||JD.string(t.tooltip)||MO.is(t.tooltip))&&(void 0===t.paddingLeft||JD.boolean(t.paddingLeft))&&(void 0===t.paddingRight||JD.boolean(t.paddingRight))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(mD||(mD={})),function(e){function t(e){return{kind:"snippet",value:e}}s(t,"createSnippet"),e.createSnippet=t}(yD||(yD={})),function(e){function t(e,t,r,n){return{insertText:e,filterText:t,range:r,command:n}}s(t,"create"),e.create=t}(vD||(vD={})),function(e){function t(e){return{items:e}}s(t,"create"),e.create=t}(xD||(xD={})),function(e){e.Invoked=0,e.Automatic=1}(bD||(bD={})),function(e){function t(e,t){return{range:e,text:t}}s(t,"create"),e.create=t}(CD||(CD={})),function(e){function t(e,t){return{triggerKind:e,selectedCompletionInfo:t}}s(t,"create"),e.create=t}(TD||(TD={})),function(e){function t(e){let t=e;return JD.objectLiteral(t)&&tO.is(t.uri)&&JD.string(t.name)}s(t,"is"),e.is=t}(wD||(wD={})),function(e){function t(e,t,r,n){return new eP(e,t,r,n)}function r(e){let t=e;return!!(JD.defined(t)&&JD.string(t.uri)&&(JD.undefined(t.languageId)||JD.string(t.languageId))&&JD.uinteger(t.lineCount)&&JD.func(t.getText)&&JD.func(t.positionAt)&&JD.func(t.offsetAt))}function n(e,t){let r=e.getText(),n=i(t,((e,t)=>{let r=e.range.start.line-t.range.start.line;return 0===r?e.range.start.character-t.range.start.character:r})),a=r.length;for(let t=n.length-1;t>=0;t--){let i=n[t],o=e.offsetAt(i.range.start),s=e.offsetAt(i.range.end);if(!(s<=a))throw new Error("Overlapping edit");r=r.substring(0,o)+i.newText+r.substring(s,r.length),a=o}return r}function i(e,t){if(e.length<=1)return e;let r=e.length/2|0,n=e.slice(0,r),a=e.slice(r);i(n,t),i(a,t);let o=0,s=0,l=0;for(;o<n.length&&s<a.length;)t(n[o],a[s])<=0?e[l++]=n[o++]:e[l++]=a[s++];for(;o<n.length;)e[l++]=n[o++];for(;s<a.length;)e[l++]=a[s++];return e}s(t,"create"),e.create=t,s(r,"is"),e.is=r,s(n,"applyEdits"),e.applyEdits=n,s(i,"mergeSort")}(kD||(kD={}));var JD,eP=class{static{s(this,"FullTextDocument")}constructor(e,t,r,n){this._uri=e,this._languageId=t,this._version=r,this._content=n,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(void 0===this._lineOffsets){let e=[],t=this._content,r=!0;for(let n=0;n<t.length;n++){r&&(e.push(n),r=!1);let i=t.charAt(n);r="\r"===i||"\n"===i,"\r"===i&&n+1<t.length&&"\n"===t.charAt(n+1)&&n++}r&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),r=0,n=t.length;if(0===n)return iO.create(0,e);for(;r<n;){let i=Math.floor((r+n)/2);t[i]>e?n=i:r=i+1}let i=r-1;return iO.create(i,e-t[i])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let r=t[e.line],n=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,n),r)}get lineCount(){return this.getLineOffsets().length}};!function(e){let t=Object.prototype.toString;function r(e){return typeof e<"u"}function n(e){return typeof e>"u"}function i(e){return!0===e||!1===e}function a(e){return"[object String]"===t.call(e)}function o(e){return"[object Number]"===t.call(e)}function l(e,r,n){return"[object Number]"===t.call(e)&&r<=e&&e<=n}function u(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647}function c(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647}function h(e){return"[object Function]"===t.call(e)}function d(e){return null!==e&&"object"==typeof e}function f(e,t){return Array.isArray(e)&&e.every(t)}s(r,"defined"),e.defined=r,s(n,"undefined"),e.undefined=n,s(i,"boolean"),e.boolean=i,s(a,"string"),e.string=a,s(o,"number"),e.number=o,s(l,"numberRange"),e.numberRange=l,s(u,"integer"),e.integer=u,s(c,"uinteger"),e.uinteger=c,s(h,"func"),e.func=h,s(d,"objectLiteral"),e.objectLiteral=d,s(f,"typedArray"),e.typedArray=f}(JD||(JD={}));var tP=class{static{s(this,"CstNodeBuilder")}constructor(){this.nodeStack=[]}get current(){return this.nodeStack[this.nodeStack.length-1]}buildRootNode(e){return this.rootNode=new oP(e),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){let t=new iP;return t.grammarSource=e,t.root=this.rootNode,this.current.content.push(t),this.nodeStack.push(t),t}buildLeafNode(e,t){let r=new nP(e.startOffset,e.image.length,f_(e),e.tokenType,!1);return r.grammarSource=t,r.root=this.rootNode,this.current.content.push(r),r}removeNode(e){let t=e.container;if(t){let r=t.content.indexOf(e);r>=0&&t.content.splice(r,1)}}construct(e){let t=this.current;"string"==typeof e.$type&&(this.current.astNode=e),e.$cstNode=t;let r=this.nodeStack.pop();0===r?.content.length&&this.removeNode(r)}addHiddenTokens(e){for(let t of e){let e=new nP(t.startOffset,t.image.length,f_(t),t.tokenType,!0);e.root=this.rootNode,this.addHiddenToken(this.rootNode,e)}}addHiddenToken(e,t){let{offset:r,end:n}=t;for(let i=0;i<e.content.length;i++){let a=e.content[i],{offset:o,end:s}=a;if(Qk(a)&&r>o&&n<s)return void this.addHiddenToken(a,t);if(n<=o)return void e.content.splice(i,0,t)}e.content.push(t)}},rP=class{static{s(this,"AbstractCstNode")}get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var e,t;let r="string"==typeof(null===(e=this._astNode)||void 0===e?void 0:e.$type)?this._astNode:null===(t=this.container)||void 0===t?void 0:t.astNode;if(!r)throw new Error("This node has no associated AST element");return r}set astNode(e){this._astNode=e}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}},nP=class extends rP{static{s(this,"LeafCstNodeImpl")}get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,t,r,n,i=!1){super(),this._hidden=i,this._offset=e,this._tokenType=n,this._length=t,this._range=r}},iP=class extends rP{static{s(this,"CompositeCstNodeImpl")}constructor(){super(...arguments),this.content=new aP(this)}get children(){return this.content}get offset(){var e,t;return null!==(t=null===(e=this.firstNonHiddenNode)||void 0===e?void 0:e.offset)&&void 0!==t?t:0}get length(){return this.end-this.offset}get end(){var e,t;return null!==(t=null===(e=this.lastNonHiddenNode)||void 0===e?void 0:e.end)&&void 0!==t?t:0}get range(){let e=this.firstNonHiddenNode,t=this.lastNonHiddenNode;if(e&&t){if(void 0===this._rangeCache){let{range:r}=e,{range:n}=t;this._rangeCache={start:r.start,end:n.end.line<r.start.line?r.start:n.end}}return this._rangeCache}return{start:iO.create(0,0),end:iO.create(0,0)}}get firstNonHiddenNode(){for(let e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){let t=this.content[e];if(!t.hidden)return t}return this.content[this.content.length-1]}},aP=class e extends Array{static{s(this,"CstNodeContainer")}constructor(t){super(),this.parent=t,Object.setPrototypeOf(this,e.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,t,...r){return this.addParents(r),super.splice(e,t,...r)}addParents(e){for(let t of e)t.container=this.parent}},oP=class extends iP{static{s(this,"RootCstNodeImpl")}get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=e??""}},sP=Symbol("Datatype");function lP(e){return e.$type===sP}s(lP,"isDataTypeNode");var uP=s((e=>e.endsWith("​")?e:e+"​"),"withRuleSuffix"),cP=class{static{s(this,"AbstractLangiumParser")}constructor(e){this._unorderedGroups=new Map,this.lexer=e.parser.Lexer;let t=this.lexer.definition;this.wrapper=new mP(t,Object.assign(Object.assign({},e.parser.ParserConfig),{errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,t){this.wrapper.wrapOr(e,t)}optional(e,t){this.wrapper.wrapOption(e,t)}many(e,t){this.wrapper.wrapMany(e,t)}atLeastOne(e,t){this.wrapper.wrapAtLeastOne(e,t)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}},hP=class extends cP{static{s(this,"LangiumParser")}get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new tP,this.stack=[],this.assignmentMap=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,t){let r=e.fragment?void 0:NA(e)?sP:OA(e),n=this.wrapper.DEFINE_RULE(uP(e.name),this.startImplementation(r,t).bind(this));return e.entry&&(this.mainRule=n),n}parse(e){this.nodeBuilder.buildRootNode(e);let t=this.lexer.tokenize(e);this.wrapper.input=t.tokens;let r=this.mainRule.call(this.wrapper,{});return this.nodeBuilder.addHiddenTokens(t.hidden),this.unorderedGroups.clear(),{value:r,lexerErrors:t.errors,parserErrors:this.wrapper.errors}}startImplementation(e,t){return r=>{if(!this.isRecording()){let t={$type:e};this.stack.push(t),e===sP&&(t.value="")}let n;try{n=t(r)}catch{n=void 0}return!this.isRecording()&&void 0===n&&(n=this.construct()),n}}consume(e,t,r){let n=this.wrapper.wrapConsume(e,t);if(!this.isRecording()&&this.isValidToken(n)){let e=this.nodeBuilder.buildLeafNode(n,r),{assignment:t,isCrossRef:i}=this.getAssignment(r),a=this.current;if(t){let a=rS(r)?n.image:this.converter.convert(n.image,e);this.assign(t.operator,t.feature,a,e,i)}else if(lP(a)){let t=n.image;rS(r)||(t=this.converter.convert(t,e).toString()),a.value+=t}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&"number"==typeof e.endOffset&&!isNaN(e.endOffset)}subrule(e,t,r,n){let i;this.isRecording()||(i=this.nodeBuilder.buildCompositeNode(r));let a=this.wrapper.wrapSubrule(e,t,n);!this.isRecording()&&i&&i.length>0&&this.performSubruleAssignment(a,r,i)}performSubruleAssignment(e,t,r){let{assignment:n,isCrossRef:i}=this.getAssignment(t);if(n)this.assign(n.operator,n.feature,e,r,i);else if(!n){let t=this.current;if(lP(t))t.value+=e.toString();else if("object"==typeof e&&e){let r=e.$type,n=this.assignWithoutOverride(e,t);r&&(n.$type=r);let i=n;this.stack.pop(),this.stack.push(i)}}}action(e,t){if(!this.isRecording()){let r=this.current;if(!r.$cstNode&&t.feature&&t.operator){r=this.construct(!1);let e=r.$cstNode.feature;this.nodeBuilder.buildCompositeNode(e)}let n={$type:e};this.stack.pop(),this.stack.push(n),t.feature&&t.operator&&this.assign(t.operator,t.feature,r,r.$cstNode,!1)}}construct(e=!0){if(this.isRecording())return;let t=this.current;return kS(t),this.nodeBuilder.construct(t),e&&this.stack.pop(),lP(t)?this.converter.convert(t.value,t.$cstNode):(DS(this.astReflection,t),t)}getAssignment(e){if(!this.assignmentMap.has(e)){let t=_S(e,qE);this.assignmentMap.set(e,{assignment:t,isCrossRef:!!t&&KE(t.terminal)})}return this.assignmentMap.get(e)}assign(e,t,r,n,i){let a,o=this.current;switch(a=i&&"string"==typeof r?this.linker.buildReference(o,t,n,r):r,e){case"=":o[t]=a;break;case"?=":o[t]=!0;break;case"+=":Array.isArray(o[t])||(o[t]=[]),o[t].push(a)}}assignWithoutOverride(e,t){for(let[r,n]of Object.entries(t)){let t=e[r];void 0===t?e[r]=n:Array.isArray(t)&&Array.isArray(n)&&(n.push(...t),e[r]=n)}return e}get definitionErrors(){return this.wrapper.definitionErrors}},dP=class{static{s(this,"AbstractParserErrorMessageProvider")}buildMismatchTokenMessage(e){return oL.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return oL.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return oL.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return oL.buildEarlyExitMessage(e)}},fP=class extends dP{static{s(this,"LangiumParserErrorMessageProvider")}buildMismatchTokenMessage({expected:e,actual:t}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${t.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}},pP=class extends cP{static{s(this,"LangiumCompletionParser")}constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();let t=this.lexer.tokenize(e);return this.tokens=t.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,t){let r=this.wrapper.DEFINE_RULE(uP(e.name),this.startImplementation(t).bind(this));return e.entry&&(this.mainRule=r),r}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return t=>{let r=this.keepStackSize();try{e(t)}finally{this.resetStackSize(r)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){let e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,t,r){this.wrapper.wrapConsume(e,t),this.isRecording()||(this.lastElementStack=[...this.elementStack,r],this.nextTokenIndex=this.currIdx+1)}subrule(e,t,r,n){this.before(r),this.wrapper.wrapSubrule(e,t,n),this.after(r)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){let t=this.elementStack.lastIndexOf(e);t>=0&&this.elementStack.splice(t)}}get currIdx(){return this.wrapper.currIdx}},gP={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new fP},mP=class extends cM{static{s(this,"ChevrotainWrapper")}constructor(e,t){let r=t&&"maxLookahead"in t;super(e,Object.assign(Object.assign(Object.assign({},gP),{lookaheadStrategy:r?new wI({maxLookahead:t.maxLookahead}):new SD}),t))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,t){return this.RULE(e,t)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,t){return this.consume(e,t)}wrapSubrule(e,t,r){return this.subrule(e,t,{ARGS:[r]})}wrapOr(e,t){this.or(e,t)}wrapOption(e,t){this.option(e,t)}wrapMany(e,t){this.many(e,t)}wrapAtLeastOne(e,t){this.atLeastOne(e,t)}};function yP(e,t,r){return vP({parser:t,tokens:r,rules:new Map,ruleNames:new Map},e),t}function vP(e,t){let r=dA(t,!1),n=o_(t.rules).filter(kE).filter((e=>r.has(e)));for(let t of n){let r=Object.assign(Object.assign({},e),{consume:1,optional:1,subrule:1,many:1,or:1});r.rules.set(t.name,e.parser.rule(t,xP(r,t.definition)))}}function xP(e,t,r=!1){let n;if(rS(t))n=NP(e,t);else if(GE(t))n=bP(e,t);else if(qE(t))n=xP(e,t.terminal);else if(KE(t))n=AP(e,t);else if(lS(t))n=CP(e,t);else if(VE(t))n=kP(e,t);else if(mS(t))n=_P(e,t);else if(eS(t))n=EP(e,t);else{if(!QE(t))throw new L_(t.$cstNode,`Unexpected element type: ${t.$type}`);{let r=e.consume++;n=s((()=>e.parser.consume(r,nL,t)),"method")}}return RP(e,r?void 0:SP(t),n,t.cardinality)}function bP(e,t){let r=OA(t);return()=>e.parser.action(r,t)}function CP(e,t){let r=t.rule.ref;if(kE(r)){let n=e.subrule++,i=t.arguments.length>0?TP(r,t.arguments):()=>({});return a=>e.parser.subrule(n,LP(e,r),t,i(a))}if(OE(r)){let n=e.consume++,i=MP(e,r.name);return()=>e.parser.consume(n,i,t)}if(!r)throw new L_(t.$cstNode,`Undefined rule type: ${t.$type}`);I_()}function TP(e,t){let r=t.map((e=>wP(e.value)));return t=>{let n={};for(let i=0;i<r.length;i++){let a=e.parameters[i],o=r[i];n[a.name]=o(t)}return n}}function wP(e){if(iE(e)){let t=wP(e.left),r=wP(e.right);return e=>t(e)||r(e)}if(rE(e)){let t=wP(e.left),r=wP(e.right);return e=>t(e)&&r(e)}if(mE(e)){let t=wP(e.value);return e=>!t(e)}if(TE(e)){let t=e.parameter.ref.name;return e=>void 0!==e&&!0===e[t]}if(eE(e)){let t=!!e.true;return()=>t}I_()}function kP(e,t){if(1===t.elements.length)return xP(e,t.elements[0]);{let r=[];for(let n of t.elements){let t={ALT:xP(e,n,!0)},i=SP(n);i&&(t.GATE=wP(i)),r.push(t)}let n=e.or++;return t=>e.parser.alternatives(n,r.map((e=>{let r={ALT:s((()=>e.ALT(t)),"ALT")},n=e.GATE;return n&&(r.GATE=()=>n(t)),r})))}}function _P(e,t){if(1===t.elements.length)return xP(e,t.elements[0]);let r=[];for(let n of t.elements){let t={ALT:xP(e,n,!0)},i=SP(n);i&&(t.GATE=wP(i)),r.push(t)}let n=e.or++,i=s(((e,t)=>`uGroup_${e}_${t.getRuleStack().join("-")}`),"idFunc"),a=s((t=>e.parser.alternatives(n,r.map(((r,a)=>{let o={ALT:s((()=>!0),"ALT")},l=e.parser;o.ALT=()=>{if(r.ALT(t),!l.isRecording()){let e=i(n,l);l.unorderedGroups.get(e)||l.unorderedGroups.set(e,[]);let t=l.unorderedGroups.get(e);typeof t?.[a]>"u"&&(t[a]=!0)}};let u=r.GATE;return o.GATE=u?()=>u(t):()=>{let e=l.unorderedGroups.get(i(n,l));return!e?.[a]},o})))),"alternatives"),o=RP(e,SP(t),a,"*");return t=>{o(t),e.parser.isRecording()||e.parser.unorderedGroups.delete(i(n,e.parser))}}function EP(e,t){let r=t.elements.map((t=>xP(e,t)));return e=>r.forEach((t=>t(e)))}function SP(e){if(eS(e))return e.guardCondition}function AP(e,t,r=t.terminal){if(r){if(lS(r)&&kE(r.rule.ref)){let n=e.subrule++;return i=>e.parser.subrule(n,LP(e,r.rule.ref),t,i)}if(lS(r)&&OE(r.rule.ref)){let n=e.consume++,i=MP(e,r.rule.ref.name);return()=>e.parser.consume(n,i,t)}if(rS(r)){let n=e.consume++,i=MP(e,r.value);return()=>e.parser.consume(n,i,t)}throw new Error("Could not build cross reference parser")}{if(!t.type.ref)throw new Error("Could not resolve reference to type: "+t.type.$refText);let r=wA(t.type.ref),n=r?.terminal;if(!n)throw new Error("Could not find name assignment for type: "+OA(t.type.ref));return AP(e,t,n)}}function NP(e,t){let r=e.consume++,n=e.tokens[t.value];if(!n)throw new Error("Could not find token for keyword: "+t.value);return()=>e.parser.consume(r,n,t)}function RP(e,t,r,n){let i=t&&wP(t);if(!n){if(i){let t=e.or++;return n=>e.parser.alternatives(t,[{ALT:s((()=>r(n)),"ALT"),GATE:s((()=>i(n)),"GATE")},{ALT:lM(),GATE:s((()=>!i(n)),"GATE")}])}return r}if("*"===n){let t=e.many++;return n=>e.parser.many(t,{DEF:s((()=>r(n)),"DEF"),GATE:i?()=>i(n):void 0})}if("+"===n){let t=e.many++;if(i){let n=e.or++;return a=>e.parser.alternatives(n,[{ALT:s((()=>e.parser.atLeastOne(t,{DEF:s((()=>r(a)),"DEF")})),"ALT"),GATE:s((()=>i(a)),"GATE")},{ALT:lM(),GATE:s((()=>!i(a)),"GATE")}])}return n=>e.parser.atLeastOne(t,{DEF:s((()=>r(n)),"DEF")})}if("?"===n){let t=e.optional++;return n=>e.parser.optional(t,{DEF:s((()=>r(n)),"DEF"),GATE:i?()=>i(n):void 0})}I_()}function LP(e,t){let r=IP(e,t),n=e.rules.get(r);if(!n)throw new Error(`Rule "${r}" not found."`);return n}function IP(e,t){if(kE(t))return t.name;if(e.ruleNames.has(t))return e.ruleNames.get(t);{let r=t,n=r.$container,i=t.$type;for(;!kE(n);)(eS(n)||VE(n)||mS(n))&&(i=n.elements.indexOf(r).toString()+":"+i),r=n,n=n.$container;return i=n.name+":"+i,e.ruleNames.set(t,i),i}}function MP(e,t){let r=e.tokens[t];if(!r)throw new Error(`Token "${t}" not found."`);return r}function OP(e){let t=e.Grammar,r=e.parser.Lexer,n=new pP(e);return yP(t,n,r.definition),n.finalize(),n}function DP(e){let t=PP(e);return t.finalize(),t}function PP(e){let t=e.Grammar,r=e.parser.Lexer;return yP(t,new hP(e),r.definition)}s(yP,"createParser"),s(vP,"buildRules"),s(xP,"buildElement"),s(bP,"buildAction"),s(CP,"buildRuleCall"),s(TP,"buildRuleCallPredicate"),s(wP,"buildPredicate"),s(kP,"buildAlternatives"),s(_P,"buildUnorderedGroup"),s(EP,"buildGroup"),s(SP,"getGuardCondition"),s(AP,"buildCrossReference"),s(NP,"buildKeyword"),s(RP,"wrap"),s(LP,"getRule"),s(IP,"getRuleName"),s(MP,"getToken"),s(OP,"createCompletionParser"),s(DP,"createLangiumParser"),s(PP,"prepareLangiumParser");var FP,BP=class{static{s(this,"DefaultTokenBuilder")}buildTokens(e,t){let r=o_(dA(e,!1)),n=this.buildTerminalTokens(r),i=this.buildKeywordTokens(r,n,t);return n.forEach((e=>{let t=e.PATTERN;"object"==typeof t&&t&&"test"in t&&aA(t)?i.unshift(e):i.push(e)})),i}buildTerminalTokens(e){return e.filter(OE).filter((e=>!e.fragment)).map((e=>this.buildTerminalToken(e))).toArray()}buildTerminalToken(e){let t=FA(e),r=this.requiresCustomPattern(t)?this.regexPatternFunction(t):t,n={name:e.name,PATTERN:r,LINE_BREAKS:!0};return e.hidden&&(n.GROUP=aA(t)?jR.SKIPPED:"hidden"),n}requiresCustomPattern(e){return!!e.flags.includes("u")||!(!e.source.includes("?<=")&&!e.source.includes("?<!"))}regexPatternFunction(e){let t=new RegExp(e,e.flags+"y");return(e,r)=>(t.lastIndex=r,t.exec(e))}buildKeywordTokens(e,t,r){return e.filter(kE).flatMap((e=>RS(e).filter(rS))).distinct((e=>e.value)).toArray().sort(((e,t)=>t.value.length-e.value.length)).map((e=>this.buildKeywordToken(e,t,!!r?.caseInsensitive)))}buildKeywordToken(e,t,r){return{name:e.value,PATTERN:this.buildKeywordPattern(e,r),LONGER_ALT:this.findLongerAlt(e,t)}}buildKeywordPattern(e,t){return t?new RegExp(sA(e.value)):e.value}findLongerAlt(e,t){return t.reduce(((t,r)=>{let n=r?.PATTERN;return n?.source&&lA("^"+n.source+"$",e.value)&&t.push(r),t}),[])}},$P=class{static{s(this,"DefaultValueConverter")}convert(e,t){let r=t.grammarSource;if(KE(r)&&(r=pA(r)),lS(r)){let n=r.rule.ref;if(!n)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(n,e,t)}return e}runConverter(e,t,r){var n;switch(e.name.toUpperCase()){case"INT":return FP.convertInt(t);case"STRING":return FP.convertString(t);case"ID":return FP.convertID(t)}switch(null===(n=PA(e))||void 0===n?void 0:n.toLowerCase()){case"number":return FP.convertNumber(t);case"boolean":return FP.convertBoolean(t);case"bigint":return FP.convertBigint(t);case"date":return FP.convertDate(t);default:return t}}};!function(e){function t(e){let t="";for(let n=1;n<e.length-1;n++){let i=e.charAt(n);if("\\"===i){t+=r(e.charAt(++n))}else t+=i}return t}function r(e){switch(e){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"0":return"\0";default:return e}}function n(e){return"^"===e.charAt(0)?e.substring(1):e}function i(e){return parseInt(e)}function a(e){return BigInt(e)}function o(e){return new Date(e)}function l(e){return Number(e)}function u(e){return"true"===e.toLowerCase()}s(t,"convertString"),e.convertString=t,s(r,"convertEscapeCharacter"),s(n,"convertID"),e.convertID=n,s(i,"convertInt"),e.convertInt=i,s(a,"convertBigint"),e.convertBigint=a,s(o,"convertDate"),e.convertDate=o,s(l,"convertNumber"),e.convertNumber=l,s(u,"convertBoolean"),e.convertBoolean=u}(FP||(FP={}));var zP={};function UP(){return new Promise((e=>{typeof setImmediate>"u"?setTimeout(e,0):setImmediate(e)}))}h(zP,d(Vk(),1)),s(UP,"delayNextTick");var GP=0,jP=10;function VP(){return GP=Date.now(),new zP.CancellationTokenSource}function WP(e){jP=e}s(VP,"startCancelableOperation"),s(WP,"setInterruptionPeriod");var qP=Symbol("OperationCancelled");function HP(e){return e===qP}async function YP(e){if(e===zP.CancellationToken.None)return;let t=Date.now();if(t-GP>=jP&&(GP=t,await UP()),e.isCancellationRequested)throw qP}s(HP,"isOperationCancelled"),s(YP,"interruptAndCheck");var XP,KP,ZP=class{static{s(this,"Deferred")}constructor(){this.promise=new Promise(((e,t)=>{this.resolve=t=>(e(t),this),this.reject=e=>(t(e),this)}))}},QP=class e{static{s(this,"FullTextDocument")}constructor(e,t,r,n){this._uri=e,this._languageId=t,this._version=r,this._content=n,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(t,r){for(let r of t)if(e.isIncremental(r)){let e=rF(r.range),t=this.offsetAt(e.start),n=this.offsetAt(e.end);this._content=this._content.substring(0,t)+r.text+this._content.substring(n,this._content.length);let i=Math.max(e.start.line,0),a=Math.max(e.end.line,0),o=this._lineOffsets,s=eF(r.text,!1,t);if(a-i===s.length)for(let e=0,t=s.length;e<t;e++)o[e+i+1]=s[e];else s.length<1e4?o.splice(i+1,a-i,...s):this._lineOffsets=o=o.slice(0,i+1).concat(s,o.slice(a+1));let l=r.text.length-(n-t);if(0!==l)for(let e=i+1+s.length,t=o.length;e<t;e++)o[e]=o[e]+l}else{if(!e.isFull(r))throw new Error("Unknown change event received");this._content=r.text,this._lineOffsets=void 0}this._version=r}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=eF(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),r=0,n=t.length;if(0===n)return{line:0,character:e};for(;r<n;){let i=Math.floor((r+n)/2);t[i]>e?n=i:r=i+1}let i=r-1;return{line:i,character:(e=this.ensureBeforeEOL(e,t[i]))-t[i]}}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let r=t[e.line];if(e.character<=0)return r;let n=e.line+1<t.length?t[e.line+1]:this._content.length,i=Math.min(r+e.character,n);return this.ensureBeforeEOL(i,r)}ensureBeforeEOL(e,t){for(;e>t&&tF(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)}static isFull(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength}};function JP(e,t){if(e.length<=1)return e;let r=e.length/2|0,n=e.slice(0,r),i=e.slice(r);JP(n,t),JP(i,t);let a=0,o=0,s=0;for(;a<n.length&&o<i.length;)t(n[a],i[o])<=0?e[s++]=n[a++]:e[s++]=i[o++];for(;a<n.length;)e[s++]=n[a++];for(;o<i.length;)e[s++]=i[o++];return e}function eF(e,t,r=0){let n=t?[r]:[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);tF(i)&&(13===i&&t+1<e.length&&10===e.charCodeAt(t+1)&&t++,n.push(r+t+1))}return n}function tF(e){return 13===e||10===e}function rF(e){let t=e.start,r=e.end;return t.line>r.line||t.line===r.line&&t.character>r.character?{start:r,end:t}:e}function nF(e){let t=rF(e.range);return t!==e.range?{newText:e.newText,range:t}:e}!function(e){function t(e,t,r,n){return new QP(e,t,r,n)}function r(e,t,r){if(e instanceof QP)return e.update(t,r),e;throw new Error("TextDocument.update: document must be created by TextDocument.create")}function n(e,t){let r=e.getText(),n=JP(t.map(nF),((e,t)=>{let r=e.range.start.line-t.range.start.line;return 0===r?e.range.start.character-t.range.start.character:r})),i=0,a=[];for(let t of n){let n=e.offsetAt(t.range.start);if(n<i)throw new Error("Overlapping edit");n>i&&a.push(r.substring(i,n)),t.newText.length&&a.push(t.newText),i=e.offsetAt(t.range.end)}return a.push(r.substr(i)),a.join("")}s(t,"create"),e.create=t,s(r,"update"),e.update=r,s(n,"applyEdits"),e.applyEdits=n}(XP||(XP={})),s(JP,"mergeSort"),s(eF,"computeLineOffsets"),s(tF,"isEOL"),s(rF,"getWellformedRange"),s(nF,"getWellformedEdit"),(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",i=0,a=-1,o=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(a!==s-1&&1!==o)if(a!==s-1&&2===o){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):i=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),a=s,o=0;continue}}else if(2===n.length||1===n.length){n="",i=0,a=s,o=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),i=s-a-1;a=s,o=0}else 46===r&&-1!==o?++o:o=-1}return n}s(t,"e"),s(r,"r");var n={resolve:s((function(){for(var e,n="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o;a>=0?o=arguments[a]:(void 0===e&&(e=qf.cwd()),o=e),t(o),0!==o.length&&(n=o+"/"+n,i=47===o.charCodeAt(0))}return n=r(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."}),"resolve"),normalize:s((function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&i&&(e+="/"),n?"/"+e:e}),"normalize"),isAbsolute:s((function(e){return t(e),e.length>0&&47===e.charCodeAt(0)}),"isAbsolute"),join:s((function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var i=arguments[r];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":n.normalize(e)}),"join"),relative:s((function(e,r){if(t(e),t(r),e===r||(e=n.resolve(e))===(r=n.resolve(r)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var a=e.length,o=a-i,s=1;s<r.length&&47===r.charCodeAt(s);++s);for(var l=r.length-s,u=o<l?o:l,c=-1,h=0;h<=u;++h){if(h===u){if(l>u){if(47===r.charCodeAt(s+h))return r.slice(s+h+1);if(0===h)return r.slice(s+h)}else o>u&&(47===e.charCodeAt(i+h)?c=h:0===h&&(c=0));break}var d=e.charCodeAt(i+h);if(d!==r.charCodeAt(s+h))break;47===d&&(c=h)}var f="";for(h=i+c+1;h<=a;++h)h!==a&&47!==e.charCodeAt(h)||(0===f.length?f+="..":f+="/..");return f.length>0?f+r.slice(s+c):(s+=c,47===r.charCodeAt(s)&&++s,r.slice(s))}),"relative"),_makeLong:s((function(e){return e}),"_makeLong"),dirname:s((function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,i=-1,a=!0,o=e.length-1;o>=1;--o)if(47===(r=e.charCodeAt(o))){if(!a){i=o;break}}else a=!1;return-1===i?n?"/":".":n&&1===i?"//":e.slice(0,i)}),"dirname"),basename:s((function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,i=0,a=-1,o=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var s=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!o){i=n+1;break}}else-1===l&&(o=!1,l=n+1),s>=0&&(u===r.charCodeAt(s)?-1==--s&&(a=n):(s=-1,a=l))}return i===a?a=l:-1===a&&(a=e.length),e.slice(i,a)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){i=n+1;break}}else-1===a&&(o=!1,a=n+1);return-1===a?"":e.slice(i,a)}),"basename"),extname:s((function(e){t(e);for(var r=-1,n=0,i=-1,a=!0,o=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47!==l)-1===i&&(a=!1,i=s+1),46===l?-1===r?r=s:1!==o&&(o=1):-1!==r&&(o=-1);else if(!a){n=s+1;break}}return-1===r||-1===i||0===o||1===o&&r===i-1&&r===n+1?"":e.slice(r,i)}),"extname"),format:s((function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)}),"format"),parse:s((function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,i=e.charCodeAt(0),a=47===i;a?(r.root="/",n=1):n=0;for(var o=-1,s=0,l=-1,u=!0,c=e.length-1,h=0;c>=n;--c)if(47!==(i=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===i?-1===o?o=c:1!==h&&(h=1):-1!==o&&(h=-1);else if(!u){s=c+1;break}return-1===o||-1===l||0===h||1===h&&o===l-1&&o===s+1?-1!==l&&(r.base=r.name=0===s&&a?e.slice(1,l):e.slice(s,l)):(0===s&&a?(r.name=e.slice(1,o),r.base=e.slice(1,l)):(r.name=e.slice(s,o),r.base=e.slice(s,l)),r.ext=e.slice(o,l)),s>0?r.dir=e.slice(0,s-1):a&&(r.dir="/"),r}),"parse"),sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}s(r,"r"),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{let e;r.r(n),r.d(n,{URI:s((()=>h),"URI"),Utils:s((()=>_),"Utils")}),"object"==typeof qf?e="win32"===qf.platform:"object"==typeof navigator&&(e=navigator.userAgent.indexOf("Windows")>=0);let t=/^\w[\w\d+.-]*$/,i=/^\//,a=/^\/\//;function o(e,r){if(!e.scheme&&r)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!t.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!i.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}s(o,"s");let l="",u="/",c=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{static{s(this,"f")}static isUri(e){return e instanceof h||!!e&&"string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString}scheme;authority;path;query;fragment;constructor(e,t,r,n,i,a=!1){"object"==typeof e?(this.scheme=e.scheme||l,this.authority=e.authority||l,this.path=e.path||l,this.query=e.query||l,this.fragment=e.fragment||l):(this.scheme=function(e,t){return e||t?e:"file"}(e,a),this.authority=t||l,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==u&&(t=u+t):t=u}return t}(this.scheme,r||l),this.query=n||l,this.fragment=i||l,o(this,a))}get fsPath(){return y(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:r,path:n,query:i,fragment:a}=e;return void 0===t?t=this.scheme:null===t&&(t=l),void 0===r?r=this.authority:null===r&&(r=l),void 0===n?n=this.path:null===n&&(n=l),void 0===i?i=this.query:null===i&&(i=l),void 0===a?a=this.fragment:null===a&&(a=l),t===this.scheme&&r===this.authority&&n===this.path&&i===this.query&&a===this.fragment?this:new f(t,r,n,i,a)}static parse(e,t=!1){let r=c.exec(e);return r?new f(r[2]||l,C(r[4]||l),C(r[5]||l),C(r[7]||l),C(r[9]||l),t):new f(l,l,l,l,l)}static file(t){let r=l;if(e&&(t=t.replace(/\\/g,u)),t[0]===u&&t[1]===u){let e=t.indexOf(u,2);-1===e?(r=t.substring(2),t=u):(r=t.substring(2,e),t=t.substring(e)||u)}return new f("file",r,t,l,l)}static from(e){let t=new f(e.scheme,e.authority,e.path,e.query,e.fragment);return o(t,!0),t}toString(e=!1){return v(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof h)return e;{let t=new f(e);return t._formatted=e.external,t._fsPath=e._sep===d?e.fsPath:null,t}}return e}}let d=e?1:void 0;class f extends h{static{s(this,"l")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=y(this,!1)),this._fsPath}toString(e=!1){return e?v(this,!0):(this._formatted||(this._formatted=v(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=d),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}let p={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function g(e,t,r){let n,i=-1;for(let a=0;a<e.length;a++){let o=e.charCodeAt(a);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o||r&&91===o||r&&93===o||r&&58===o)-1!==i&&(n+=encodeURIComponent(e.substring(i,a)),i=-1),void 0!==n&&(n+=e.charAt(a));else{void 0===n&&(n=e.substr(0,a));let t=p[o];void 0!==t?(-1!==i&&(n+=encodeURIComponent(e.substring(i,a)),i=-1),n+=t):-1===i&&(i=a)}}return-1!==i&&(n+=encodeURIComponent(e.substring(i))),void 0!==n?n:e}function m(e){let t;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);35===n||63===n?(void 0===t&&(t=e.substr(0,r)),t+=p[n]):void 0!==t&&(t+=e[r])}return void 0!==t?t:e}function y(t,r){let n;return n=t.authority&&t.path.length>1&&"file"===t.scheme?`//${t.authority}${t.path}`:47===t.path.charCodeAt(0)&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&58===t.path.charCodeAt(2)?r?t.path.substr(1):t.path[1].toLowerCase()+t.path.substr(2):t.path,e&&(n=n.replace(/\//g,"\\")),n}function v(e,t){let r=t?m:g,n="",{scheme:i,authority:a,path:o,query:s,fragment:l}=e;if(i&&(n+=i,n+=":"),(a||"file"===i)&&(n+=u,n+=u),a){let e=a.indexOf("@");if(-1!==e){let t=a.substr(0,e);a=a.substr(e+1),e=t.lastIndexOf(":"),-1===e?n+=r(t,!1,!1):(n+=r(t.substr(0,e),!1,!1),n+=":",n+=r(t.substr(e+1),!1,!0)),n+="@"}a=a.toLowerCase(),e=a.lastIndexOf(":"),-1===e?n+=r(a,!1,!0):(n+=r(a.substr(0,e),!1,!0),n+=a.substr(e))}if(o){if(o.length>=3&&47===o.charCodeAt(0)&&58===o.charCodeAt(2)){let e=o.charCodeAt(1);e>=65&&e<=90&&(o=`/${String.fromCharCode(e+32)}:${o.substr(3)}`)}else if(o.length>=2&&58===o.charCodeAt(1)){let e=o.charCodeAt(0);e>=65&&e<=90&&(o=`${String.fromCharCode(e+32)}:${o.substr(2)}`)}n+=r(o,!0,!1)}return s&&(n+="?",n+=r(s,!1,!1)),l&&(n+="#",n+=t?l:g(l,!1,!1)),n}function x(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+x(e.substr(3)):e}}s(g,"d"),s(m,"p"),s(y,"m"),s(v,"y"),s(x,"v");let b=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function C(e){return e.match(b)?e.replace(b,(e=>x(e))):e}s(C,"C");var T=r(470);let w=T.posix||T,k="/";var _;!function(e){e.joinPath=function(e,...t){return e.with({path:w.join(e.path,...t)})},e.resolvePath=function(e,...t){let r=e.path,n=!1;r[0]!==k&&(r=k+r,n=!0);let i=w.resolve(r,...t);return n&&i[0]===k&&!e.authority&&(i=i.substring(1)),e.with({path:i})},e.dirname=function(e){if(0===e.path.length||e.path===k)return e;let t=w.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)&&(t=""),e.with({path:t})},e.basename=function(e){return w.basename(e.path)},e.extname=function(e){return w.extname(e.path)}}(_||(_={}))})(),KP=n})();var iF,aF,{URI:oF,Utils:sF}=KP;!function(e){function t(e,t){return e?.toString()===t?.toString()}function r(e,t){let r="string"==typeof e?e:e.path,n="string"==typeof t?t:t.path,i=r.split("/").filter((e=>e.length>0)),a=n.split("/").filter((e=>e.length>0)),o=0;for(;o<i.length&&i[o]===a[o];o++);return"../".repeat(i.length-o)+a.slice(o).join("/")}e.basename=sF.basename,e.dirname=sF.dirname,e.extname=sF.extname,e.joinPath=sF.joinPath,e.resolvePath=sF.resolvePath,s(t,"equals"),e.equals=t,s(r,"relative"),e.relative=r}(iF||(iF={})),function(e){e[e.Changed=0]="Changed",e[e.Parsed=1]="Parsed",e[e.IndexedContent=2]="IndexedContent",e[e.ComputedScopes=3]="ComputedScopes",e[e.Linked=4]="Linked",e[e.IndexedReferences=5]="IndexedReferences",e[e.Validated=6]="Validated"}(aF||(aF={}));var lF=class{static{s(this,"DefaultLangiumDocumentFactory")}constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}async fromUri(e,t=zP.CancellationToken.None){let r=await this.fileSystemProvider.readFile(e);return this.createAsync(e,r,t)}fromTextDocument(e,t,r){return t=t??oF.parse(e.uri),r?this.createAsync(t,e,r):this.create(t,e)}fromString(e,t,r){return r?this.createAsync(t,e,r):this.create(t,e)}fromModel(e,t){return this.create(t,{$model:e})}create(e,t){if("string"==typeof t){let r=this.parse(e,t);return this.createLangiumDocument(r,e,void 0,t)}if("$model"in t){let r={value:t.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(r,e)}{let r=this.parse(e,t.getText());return this.createLangiumDocument(r,e,t)}}async createAsync(e,t,r){if("string"==typeof t){let n=await this.parseAsync(e,t,r);return this.createLangiumDocument(n,e,void 0,t)}{let n=await this.parseAsync(e,t.getText(),r);return this.createLangiumDocument(n,e,t)}}createLangiumDocument(e,t,r,n){let i;if(r)i={parseResult:e,uri:t,state:aF.Parsed,references:[],textDocument:r};else{let r=this.createTextDocumentGetter(t,n);i={parseResult:e,uri:t,state:aF.Parsed,references:[],get textDocument(){return r()}}}return e.value.$document=i,i}async update(e,t){var r,n;let i=null===(r=e.parseResult.value.$cstNode)||void 0===r?void 0:r.root.fullText,a=null===(n=this.textDocuments)||void 0===n?void 0:n.get(e.uri.toString()),o=a?a.getText():await this.fileSystemProvider.readFile(e.uri);if(a)Object.defineProperty(e,"textDocument",{value:a});else{let t=this.createTextDocumentGetter(e.uri,o);Object.defineProperty(e,"textDocument",{get:t})}return i!==o&&(e.parseResult=await this.parseAsync(e.uri,o,t),e.parseResult.value.$document=e),e.state=aF.Parsed,e}parse(e,t){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(t)}parseAsync(e,t,r){return this.serviceRegistry.getServices(e).parser.AsyncParser.parse(t,r)}createTextDocumentGetter(e,t){let r,n=this.serviceRegistry;return()=>r??(r=XP.create(e.toString(),n.getServices(e).LanguageMetaData.languageId,0,t??""))}},uF=class{static{s(this,"DefaultLangiumDocuments")}constructor(e){this.documentMap=new Map,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory}get all(){return o_(this.documentMap.values())}addDocument(e){let t=e.uri.toString();if(this.documentMap.has(t))throw new Error(`A document with the URI '${t}' is already present.`);this.documentMap.set(t,e)}getDocument(e){let t=e.toString();return this.documentMap.get(t)}async getOrCreateDocument(e,t){let r=this.getDocument(e);return r||(r=await this.langiumDocumentFactory.fromUri(e,t),this.addDocument(r),r)}createDocument(e,t,r){if(r)return this.langiumDocumentFactory.fromString(t,e,r).then((e=>(this.addDocument(e),e)));{let r=this.langiumDocumentFactory.fromString(t,e);return this.addDocument(r),r}}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(e){let t=e.toString(),r=this.documentMap.get(t);return r&&(r.state=aF.Changed,r.precomputedScopes=void 0,r.references=[],r.diagnostics=void 0),r}deleteDocument(e){let t=e.toString(),r=this.documentMap.get(t);return r&&(r.state=aF.Changed,this.documentMap.delete(t)),r}},cF=class{static{s(this,"DefaultLinker")}constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator}async link(e,t=zP.CancellationToken.None){for(let r of LS(e.parseResult.value))await YP(t),MS(r).forEach((t=>this.doLink(t,e)))}doLink(e,t){let r=e.reference;if(void 0===r._ref)try{let t=this.getCandidate(e);if(Kk(t))r._ref=t;else if(r._nodeDescription=t,this.langiumDocuments().hasDocument(t.documentUri)){let n=this.loadAstNode(t);r._ref=n??this.createLinkingError(e,t)}}catch(t){r._ref=Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${r.$refText}': ${t}`})}t.references.push(r)}unlink(e){for(let t of e.references)delete t._ref,delete t._nodeDescription;e.references=[]}getCandidate(e){return this.scopeProvider.getScope(e).getElement(e.reference.$refText)??this.createLinkingError(e)}buildReference(e,t,r,n){let i=this,a={$refNode:r,$refText:n,get ref(){var r;if(Hk(this._ref))return this._ref;if(Xk(this._nodeDescription)){let r=i.loadAstNode(this._nodeDescription);this._ref=r??i.createLinkingError({reference:a,container:e,property:t},this._nodeDescription)}else if(void 0===this._ref){let n=i.getLinkedNode({reference:a,container:e,property:t});if(n.error&&SS(e).state<aF.ComputedScopes)return;this._ref=null!==(r=n.node)&&void 0!==r?r:n.error,this._nodeDescription=n.descr}return Hk(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return Kk(this._ref)?this._ref:void 0}};return a}getLinkedNode(e){try{let t=this.getCandidate(e);if(Kk(t))return{error:t};let r=this.loadAstNode(t);return r?{node:r,descr:t}:{descr:t,error:this.createLinkingError(e,t)}}catch(t){return{error:Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${e.reference.$refText}': ${t}`})}}}loadAstNode(e){if(e.node)return e.node;let t=this.langiumDocuments().getDocument(e.documentUri);return t?this.astNodeLocator.getAstNode(t.parseResult.value,e.path):void 0}createLinkingError(e,t){let r=SS(e.container);r.state<aF.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${r.uri}).`);let n=this.reflection.getReferenceType(e);return Object.assign(Object.assign({},e),{message:`Could not resolve reference to ${n} named '${e.reference.$refText}'.`,targetDescription:t})}};function hF(e){return"string"==typeof e.name}s(hF,"isNamed");var dF=class{static{s(this,"DefaultNameProvider")}getName(e){if(hF(e))return e.name}getNameNode(e){return yA(e.$cstNode,"name")}},fF=class{static{s(this,"DefaultReferences")}constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator}findDeclaration(e){if(e){let t=TA(e),r=e.astNode;if(t&&r){let n=r[t.feature];if(Yk(n))return n.ref;if(Array.isArray(n))for(let t of n)if(Yk(t)&&t.$refNode&&t.$refNode.offset<=e.offset&&t.$refNode.end>=e.end)return t.ref}if(r){let t=this.nameProvider.getNameNode(r);if(t&&(t===e||d_(e,t)))return r}}}findDeclarationNode(e){let t=this.findDeclaration(e);if(t?.$cstNode){return this.nameProvider.getNameNode(t)??t.$cstNode}}findReferences(e,t){let r=[];if(t.includeDeclaration){let t=this.getReferenceToSelf(e);t&&r.push(t)}let n=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return t.documentUri&&(n=n.filter((e=>iF.equals(e.sourceUri,t.documentUri)))),r.push(...n),o_(r)}getReferenceToSelf(e){let t=this.nameProvider.getNameNode(e);if(t){let r=SS(e),n=this.nodeLocator.getAstNodePath(e);return{sourceUri:r.uri,sourcePath:n,targetUri:r.uri,targetPath:n,segment:p_(t),local:!0}}}},pF=class{static{s(this,"MultiMap")}constructor(e){if(this.map=new Map,e)for(let[t,r]of e)this.add(t,r)}get size(){return s_.sum(o_(this.map.values()).map((e=>e.length)))}clear(){this.map.clear()}delete(e,t){if(void 0===t)return this.map.delete(e);{let r=this.map.get(e);if(r){let n=r.indexOf(t);if(n>=0)return 1===r.length?this.map.delete(e):r.splice(n,1),!0}return!1}}get(e){var t;return null!==(t=this.map.get(e))&&void 0!==t?t:[]}has(e,t){if(void 0===t)return this.map.has(e);{let r=this.map.get(e);return!!r&&r.indexOf(t)>=0}}add(e,t){return this.map.has(e)?this.map.get(e).push(t):this.map.set(e,[t]),this}addAll(e,t){return this.map.has(e)?this.map.get(e).push(...t):this.map.set(e,Array.from(t)),this}forEach(e){this.map.forEach(((t,r)=>t.forEach((t=>e(t,r,this)))))}[Symbol.iterator](){return this.entries().iterator()}entries(){return o_(this.map.entries()).flatMap((([e,t])=>t.map((t=>[e,t]))))}keys(){return o_(this.map.keys())}values(){return o_(this.map.values()).flat()}entriesGroupedByKey(){return o_(this.map.entries())}},gF=class{static{s(this,"BiMap")}get size(){return this.map.size}constructor(e){if(this.map=new Map,this.inverse=new Map,e)for(let[t,r]of e)this.set(t,r)}clear(){this.map.clear(),this.inverse.clear()}set(e,t){return this.map.set(e,t),this.inverse.set(t,e),this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(e){let t=this.map.get(e);return void 0!==t&&(this.map.delete(e),this.inverse.delete(t),!0)}},mF=class{static{s(this,"DefaultScopeComputation")}constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}async computeExports(e,t=zP.CancellationToken.None){return this.computeExportsForNode(e.parseResult.value,e,void 0,t)}async computeExportsForNode(e,t,r=NS,n=zP.CancellationToken.None){let i=[];this.exportNode(e,i,t);for(let a of r(e))await YP(n),this.exportNode(a,i,t);return i}exportNode(e,t,r){let n=this.nameProvider.getName(e);n&&t.push(this.descriptions.createDescription(e,n,r))}async computeLocalScopes(e,t=zP.CancellationToken.None){let r=e.parseResult.value,n=new pF;for(let i of RS(r))await YP(t),this.processNode(i,e,n);return n}processNode(e,t,r){let n=e.$container;if(n){let i=this.nameProvider.getName(e);i&&r.add(n,this.descriptions.createDescription(e,i,t))}}},yF=class{static{s(this,"StreamScope")}constructor(e,t,r){var n;this.elements=e,this.outerScope=t,this.caseInsensitive=null!==(n=r?.caseInsensitive)&&void 0!==n&&n}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){let t=this.caseInsensitive?this.elements.find((t=>t.name.toLowerCase()===e.toLowerCase())):this.elements.find((t=>t.name===e));return t||(this.outerScope?this.outerScope.getElement(e):void 0)}},vF=class{static{s(this,"MapScope")}constructor(e,t,r){var n;this.elements=new Map,this.caseInsensitive=null!==(n=r?.caseInsensitive)&&void 0!==n&&n;for(let t of e){let e=this.caseInsensitive?t.name.toLowerCase():t.name;this.elements.set(e,t)}this.outerScope=t}getElement(e){let t=this.caseInsensitive?e.toLowerCase():e,r=this.elements.get(t);return r||(this.outerScope?this.outerScope.getElement(e):void 0)}getAllElements(){let e=o_(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}},xF={getElement(){},getAllElements:()=>i_},bF=class{static{s(this,"DisposableCache")}constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach((e=>e.dispose()))}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}},CF=class extends bF{static{s(this,"SimpleCache")}constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,t){this.throwIfDisposed(),this.cache.set(e,t)}get(e,t){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(t){let r=t();return this.cache.set(e,r),r}}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}},TF=class extends bF{static{s(this,"ContextCache")}constructor(e){super(),this.cache=new Map,this.converter=e??(e=>e)}has(e,t){return this.throwIfDisposed(),this.cacheForContext(e).has(t)}set(e,t,r){this.throwIfDisposed(),this.cacheForContext(e).set(t,r)}get(e,t,r){this.throwIfDisposed();let n=this.cacheForContext(e);if(n.has(t))return n.get(t);if(r){let e=r();return n.set(t,e),e}}delete(e,t){return this.throwIfDisposed(),this.cacheForContext(e).delete(t)}clear(e){if(this.throwIfDisposed(),e){let t=this.converter(e);this.cache.delete(t)}else this.cache.clear()}cacheForContext(e){let t=this.converter(e),r=this.cache.get(t);return r||(r=new Map,this.cache.set(t,r)),r}},wF=class extends TF{static{s(this,"DocumentCache")}constructor(e){super((e=>e.toString())),this.onDispose(e.workspace.DocumentBuilder.onUpdate(((e,t)=>{let r=e.concat(t);for(let e of r)this.clear(e)})))}},kF=class extends CF{static{s(this,"WorkspaceCache")}constructor(e){super(),this.onDispose(e.workspace.DocumentBuilder.onUpdate((()=>{this.clear()})))}},_F=class{static{s(this,"DefaultScopeProvider")}constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new kF(e.shared)}getScope(e){let t=[],r=this.reflection.getReferenceType(e),n=SS(e.container).precomputedScopes;if(n){let i=e.container;do{let e=n.get(i);e.length>0&&t.push(o_(e).filter((e=>this.reflection.isSubtype(e.type,r)))),i=i.$container}while(i)}let i=this.getGlobalScope(r,e);for(let e=t.length-1;e>=0;e--)i=this.createScope(t[e],i);return i}createScope(e,t,r){return new yF(o_(e),t,r)}createScopeForNodes(e,t,r){let n=o_(e).map((e=>{let t=this.nameProvider.getName(e);if(t)return this.descriptions.createDescription(e,t)})).nonNullable();return new yF(n,t,r)}getGlobalScope(e,t){return this.globalScopeCache.get(e,(()=>new vF(this.indexManager.allElements(e))))}};function EF(e){return"string"==typeof e.$comment}function SF(e){return"object"==typeof e&&!!e&&("$ref"in e||"$error"in e)}s(EF,"isAstNodeWithComment"),s(SF,"isIntermediateReference");var AF,NF=class{static{s(this,"DefaultJsonSerializer")}constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=e.shared.workspace.LangiumDocuments,this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,t={}){let r=t?.replacer,n=s(((e,r)=>this.replacer(e,r,t)),"defaultReplacer"),i=r?(e,t)=>r(e,t,n):n;try{return this.currentDocument=SS(e),JSON.stringify(e,i,t?.space)}finally{this.currentDocument=void 0}}deserialize(e,t={}){let r=JSON.parse(e);return this.linkNode(r,r,t),r}replacer(e,t,{refText:r,sourceText:n,textRegions:i,comments:a,uriConverter:o}){var s,l,u,c;if(!this.ignoreProperties.has(e)){if(Yk(t)){let e=t.ref,n=r?t.$refText:void 0;if(e){let r=SS(e),i="";return this.currentDocument&&this.currentDocument!==r&&(i=o?o(r.uri,t):r.uri.toString()),{$ref:`${i}#${this.astNodeLocator.getAstNodePath(e)}`,$refText:n}}return{$error:null!==(l=null===(s=t.error)||void 0===s?void 0:s.message)&&void 0!==l?l:"Could not resolve reference",$refText:n}}if(Hk(t)){let r;if(i&&(r=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},t)),(!e||t.$document)&&r?.$textRegion&&(r.$textRegion.documentURI=null===(u=this.currentDocument)||void 0===u?void 0:u.uri.toString())),n&&!e&&(r??(r=Object.assign({},t)),r.$sourceText=null===(c=t.$cstNode)||void 0===c?void 0:c.text),a){r??(r=Object.assign({},t));let e=this.commentProvider.getComment(t);e&&(r.$comment=e.replace(/\r/g,""))}return r??t}return t}}addAstNodeRegionWithAssignmentsTo(e){let t=s((e=>({offset:e.offset,end:e.end,length:e.length,range:e.range})),"createDocumentSegment");if(e.$cstNode){let r=(e.$textRegion=t(e.$cstNode)).assignments={};return Object.keys(e).filter((e=>!e.startsWith("$"))).forEach((n=>{let i=mA(e.$cstNode,n).map(t);0!==i.length&&(r[n]=i)})),e}}linkNode(e,t,r,n,i,a){for(let[n,i]of Object.entries(e))if(Array.isArray(i))for(let a=0;a<i.length;a++){let o=i[a];SF(o)?i[a]=this.reviveReference(e,n,t,o,r):Hk(o)&&this.linkNode(o,t,r,e,n,a)}else SF(i)?e[n]=this.reviveReference(e,n,t,i,r):Hk(i)&&this.linkNode(i,t,r,e,n);let o=e;o.$container=n,o.$containerProperty=i,o.$containerIndex=a}reviveReference(e,t,r,n,i){let a=n.$refText,o=n.$error;if(n.$ref){let e=this.getRefNode(r,n.$ref,i.uriConverter);if(Hk(e))return a||(a=this.nameProvider.getName(e)),{$refText:a??"",ref:e};o=e}if(o){let r={$refText:a??""};return r.error={container:e,property:t,message:o,reference:r},r}}getRefNode(e,t,r){try{let n=t.indexOf("#");if(0===n){return this.astNodeLocator.getAstNode(e,t.substring(1))||"Could not resolve path: "+t}if(n<0){let e=r?r(t):oF.parse(t),n=this.langiumDocuments.getDocument(e);return n?n.parseResult.value:"Could not find document for URI: "+t}let i=r?r(t.substring(0,n)):oF.parse(t.substring(0,n)),a=this.langiumDocuments.getDocument(i);return a?n===t.length-1?a.parseResult.value:this.astNodeLocator.getAstNode(a.parseResult.value,t.substring(n+1))||"Could not resolve URI: "+t:"Could not find document for URI: "+t}catch(e){return String(e)}}},RF=class{static{s(this,"DefaultServiceRegistry")}register(e){if(this.singleton||this.map){if(!this.map&&(this.map={},this.singleton)){for(let e of this.singleton.LanguageMetaData.fileExtensions)this.map[e]=this.singleton;this.singleton=void 0}for(let t of e.LanguageMetaData.fileExtensions)void 0!==this.map[t]&&this.map[t]!==e&&console.warn(`The file extension ${t} is used by multiple languages. It is now assigned to '${e.LanguageMetaData.languageId}'.`),this.map[t]=e}else this.singleton=e}getServices(e){if(void 0!==this.singleton)return this.singleton;if(void 0===this.map)throw new Error("The service registry is empty. Use `register` to register the services of a language.");let t=iF.extname(e),r=this.map[t];if(!r)throw new Error(`The service registry contains no services for the extension '${t}'.`);return r}get all(){return void 0!==this.singleton?[this.singleton]:void 0!==this.map?Object.values(this.map):[]}};function LF(e){return{code:e}}s(LF,"diagnosticData"),(AF||(AF={})).all=["fast","slow","built-in"];var IF,MF=class{static{s(this,"ValidationRegistry")}constructor(e){this.entries=new pF,this.reflection=e.shared.AstReflection}register(e,t=this,r="fast"){if("built-in"===r)throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(let[n,i]of Object.entries(e)){let e=i;if(Array.isArray(e))for(let i of e){let e={check:this.wrapValidationException(i,t),category:r};this.addEntry(n,e)}else if("function"==typeof e){let i={check:this.wrapValidationException(e,t),category:r};this.addEntry(n,i)}}}wrapValidationException(e,t){return async(r,n,i)=>{try{await e.call(t,r,n,i)}catch(e){if(HP(e))throw e;console.error("An error occurred during validation:",e);let t=e instanceof Error?e.message:String(e);e instanceof Error&&e.stack&&console.error(e.stack),n("error","An error occurred during validation: "+t,{node:r})}}}addEntry(e,t){if("AstNode"!==e)for(let r of this.reflection.getAllSubTypes(e))this.entries.add(r,t);else this.entries.add("AstNode",t)}getChecks(e,t){let r=o_(this.entries.get(e)).concat(this.entries.get("AstNode"));return t&&(r=r.filter((e=>t.includes(e.category)))),r.map((e=>e.check))}},OF=class{static{s(this,"DefaultDocumentValidator")}constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData}async validateDocument(e,t={},r=zP.CancellationToken.None){let n=e.parseResult,i=[];if(await YP(r),(!t.categories||t.categories.includes("built-in"))&&(this.processLexingErrors(n,i,t),t.stopAfterLexingErrors&&i.some((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.code)===IF.LexingError}))||(this.processParsingErrors(n,i,t),t.stopAfterParsingErrors&&i.some((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.code)===IF.ParsingError})))||(this.processLinkingErrors(e,i,t),t.stopAfterLinkingErrors&&i.some((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.code)===IF.LinkingError})))))return i;try{i.push(...await this.validateAst(n.value,t,r))}catch(e){if(HP(e))throw e;console.error("An error occurred during validation:",e)}return await YP(r),i}processLexingErrors(e,t,r){for(let r of e.lexerErrors){let e={severity:PF("error"),range:{start:{line:r.line-1,character:r.column-1},end:{line:r.line-1,character:r.column+r.length-1}},message:r.message,data:LF(IF.LexingError),source:this.getSource()};t.push(e)}}processParsingErrors(e,t,r){for(let r of e.parserErrors){let e;if(isNaN(r.token.startOffset)){if("previousToken"in r){let t=r.previousToken;if(isNaN(t.startOffset)){let t={line:0,character:0};e={start:t,end:t}}else{let r={line:t.endLine-1,character:t.endColumn};e={start:r,end:r}}}}else e=f_(r.token);if(e){let n={severity:PF("error"),range:e,message:r.message,data:LF(IF.ParsingError),source:this.getSource()};t.push(n)}}}processLinkingErrors(e,t,r){for(let r of e.references){let e=r.error;if(e){let r={node:e.container,property:e.property,index:e.index,data:{code:IF.LinkingError,containerType:e.container.$type,property:e.property,refText:e.reference.$refText}};t.push(this.toDiagnostic("error",e.message,r))}}}async validateAst(e,t,r=zP.CancellationToken.None){let n=[],i=s(((e,t,r)=>{n.push(this.toDiagnostic(e,t,r))}),"acceptor");return await Promise.all(LS(e).map((async e=>{await YP(r);let n=this.validationRegistry.getChecks(e.$type,t.categories);for(let t of n)await t(e,i,r)}))),n}toDiagnostic(e,t,r){return{message:t,range:DF(r),severity:PF(e),code:r.code,codeDescription:r.codeDescription,tags:r.tags,relatedInformation:r.relatedInformation,data:r.data,source:this.getSource()}}getSource(){return this.metadata.languageId}};function DF(e){if(e.range)return e.range;let t;return"string"==typeof e.property?t=yA(e.node.$cstNode,e.property,e.index):"string"==typeof e.keyword&&(t=bA(e.node.$cstNode,e.keyword,e.index)),t??(t=e.node.$cstNode),t?t.range:{start:{line:0,character:0},end:{line:0,character:0}}}function PF(e){switch(e){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+e)}}s(DF,"getDiagnosticRange"),s(PF,"toDiagnosticSeverity"),function(e){e.LexingError="lexing-error",e.ParsingError="parsing-error",e.LinkingError="linking-error"}(IF||(IF={}));var FF,BF=class{static{s(this,"DefaultAstNodeDescriptionProvider")}constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,t,r=SS(e)){t??(t=this.nameProvider.getName(e));let n=this.astNodeLocator.getAstNodePath(e);if(!t)throw new Error(`Node at path ${n} has no name.`);let i,a=s((()=>{var t;return i??(i=p_(null!==(t=this.nameProvider.getNameNode(e))&&void 0!==t?t:e.$cstNode))}),"nameSegmentGetter");return{node:e,name:t,get nameSegment(){return a()},selectionSegment:p_(e.$cstNode),type:e.$type,documentUri:r.uri,path:n}}},$F=class{static{s(this,"DefaultReferenceDescriptionProvider")}constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,t=zP.CancellationToken.None){let r=[],n=e.parseResult.value;for(let e of LS(n))await YP(t),MS(e).filter((e=>!Kk(e))).forEach((e=>{let t=this.createDescription(e);t&&r.push(t)}));return r}createDescription(e){let t=e.reference.$nodeDescription,r=e.reference.$refNode;if(!t||!r)return;let n=SS(e.container).uri;return{sourceUri:n,sourcePath:this.nodeLocator.getAstNodePath(e.container),targetUri:t.documentUri,targetPath:t.path,segment:p_(r),local:iF.equals(t.documentUri,n)}}},zF=class{static{s(this,"DefaultAstNodeLocator")}constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){let t=this.getAstNodePath(e.$container),r=this.getPathSegment(e);return t+this.segmentSeparator+r}return""}getPathSegment({$containerProperty:e,$containerIndex:t}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return void 0!==t?e+this.indexSeparator+t:e}getAstNode(e,t){return t.split(this.segmentSeparator).reduce(((e,t)=>{if(!e||0===t.length)return e;let r=t.indexOf(this.indexSeparator);if(r>0){let n=t.substring(0,r),i=parseInt(t.substring(r+1)),a=e[n];return a?.[i]}return e[t]}),e)}},UF=class{static{s(this,"DefaultConfigurationProvider")}constructor(e){this._ready=new ZP,this.settings={},this.workspaceConfig=!1,this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var t,r;this.workspaceConfig=null!==(r=null===(t=e.capabilities.workspace)||void 0===t?void 0:t.configuration)&&void 0!==r&&r}async initialized(e){if(this.workspaceConfig){if(e.register){let t=this.serviceRegistry.all;e.register({section:t.map((e=>this.toSectionName(e.LanguageMetaData.languageId)))})}if(e.fetchConfiguration){let t=this.serviceRegistry.all.map((e=>({section:this.toSectionName(e.LanguageMetaData.languageId)}))),r=await e.fetchConfiguration(t);t.forEach(((e,t)=>{this.updateSectionConfiguration(e.section,r[t])}))}}this._ready.resolve()}updateConfiguration(e){e.settings&&Object.keys(e.settings).forEach((t=>{this.updateSectionConfiguration(t,e.settings[t])}))}updateSectionConfiguration(e,t){this.settings[e]=t}async getConfiguration(e,t){await this.ready;let r=this.toSectionName(e);if(this.settings[r])return this.settings[r][t]}toSectionName(e){return`${e}`}};!function(e){function t(e){return{dispose:s((async()=>await e()),"dispose")}}s(t,"create"),e.create=t}(FF||(FF={}));var GF=class{static{s(this,"DefaultDocumentBuilder")}constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new pF,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=aF.Changed,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.indexManager=e.workspace.IndexManager,this.serviceRegistry=e.ServiceRegistry}async build(e,t={},r=zP.CancellationToken.None){var n,i;for(let r of e){let e=r.uri.toString();if(r.state===aF.Validated){if("boolean"==typeof t.validation&&t.validation)r.state=aF.IndexedReferences,r.diagnostics=void 0,this.buildState.delete(e);else if("object"==typeof t.validation){let a=this.buildState.get(e),o=null===(n=a?.result)||void 0===n?void 0:n.validationChecks;if(o){let n=(null!==(i=t.validation.categories)&&void 0!==i?i:AF.all).filter((e=>!o.includes(e)));n.length>0&&(this.buildState.set(e,{completed:!1,options:{validation:Object.assign(Object.assign({},t.validation),{categories:n})},result:a.result}),r.state=aF.IndexedReferences)}}}else this.buildState.delete(e)}this.currentState=aF.Changed,await this.emitUpdate(e.map((e=>e.uri)),[]),await this.buildDocuments(e,t,r)}async update(e,t,r=zP.CancellationToken.None){this.currentState=aF.Changed;for(let e of t)this.langiumDocuments.deleteDocument(e),this.buildState.delete(e.toString()),this.indexManager.remove(e);for(let t of e){if(!this.langiumDocuments.invalidateDocument(t)){let e=this.langiumDocumentFactory.fromModel({$type:"INVALID"},t);e.state=aF.Changed,this.langiumDocuments.addDocument(e)}this.buildState.delete(t.toString())}let n=o_(e).concat(t).map((e=>e.toString())).toSet();this.langiumDocuments.all.filter((e=>!n.has(e.uri.toString())&&this.shouldRelink(e,n))).forEach((e=>{this.serviceRegistry.getServices(e.uri).references.Linker.unlink(e),e.state=Math.min(e.state,aF.ComputedScopes),e.diagnostics=void 0})),await this.emitUpdate(e,t),await YP(r);let i=this.langiumDocuments.all.filter((e=>{var t;return e.state<aF.Linked||!(null!==(t=this.buildState.get(e.uri.toString()))&&void 0!==t&&t.completed)})).toArray();await this.buildDocuments(i,this.updateBuildOptions,r)}async emitUpdate(e,t){await Promise.all(this.updateListeners.map((r=>r(e,t))))}shouldRelink(e,t){return!!e.references.some((e=>void 0!==e.error))||this.indexManager.isAffected(e,t)}onUpdate(e){return this.updateListeners.push(e),FF.create((()=>{let t=this.updateListeners.indexOf(e);t>=0&&this.updateListeners.splice(t,1)}))}async buildDocuments(e,t,r){this.prepareBuild(e,t),await this.runCancelable(e,aF.Parsed,r,(e=>this.langiumDocumentFactory.update(e,r))),await this.runCancelable(e,aF.IndexedContent,r,(e=>this.indexManager.updateContent(e,r))),await this.runCancelable(e,aF.ComputedScopes,r,(async e=>{let t=this.serviceRegistry.getServices(e.uri).references.ScopeComputation;e.precomputedScopes=await t.computeLocalScopes(e,r)})),await this.runCancelable(e,aF.Linked,r,(e=>this.serviceRegistry.getServices(e.uri).references.Linker.link(e,r))),await this.runCancelable(e,aF.IndexedReferences,r,(e=>this.indexManager.updateReferences(e,r)));let n=e.filter((e=>this.shouldValidate(e)));await this.runCancelable(n,aF.Validated,r,(e=>this.validate(e,r)));for(let t of e){let e=this.buildState.get(t.uri.toString());e&&(e.completed=!0)}}prepareBuild(e,t){for(let r of e){let e=r.uri.toString(),n=this.buildState.get(e);(!n||n.completed)&&this.buildState.set(e,{completed:!1,options:t,result:n?.result})}}async runCancelable(e,t,r,n){let i=e.filter((e=>e.state<t));for(let e of i)await YP(r),await n(e),e.state=t;await this.notifyBuildPhase(i,t,r),this.currentState=t}onBuildPhase(e,t){return this.buildPhaseListeners.add(e,t),FF.create((()=>{this.buildPhaseListeners.delete(e,t)}))}waitUntil(e,t,r){let n;if(t&&"path"in t?n=t:r=t,r??(r=zP.CancellationToken.None),n){let t=this.langiumDocuments.getDocument(n);if(t&&t.state>e)return Promise.resolve(n)}return this.currentState>=e?Promise.resolve(void 0):r.isCancellationRequested?Promise.reject(qP):new Promise(((t,i)=>{let a=this.onBuildPhase(e,(()=>{if(a.dispose(),o.dispose(),n){let e=this.langiumDocuments.getDocument(n);t(e?.uri)}else t(void 0)})),o=r.onCancellationRequested((()=>{a.dispose(),o.dispose(),i(qP)}))}))}async notifyBuildPhase(e,t,r){if(0===e.length)return;let n=this.buildPhaseListeners.get(t);for(let t of n)await YP(r),await t(e,r)}shouldValidate(e){return!!this.getBuildOptions(e).validation}async validate(e,t){var r,n;let i=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,a=this.getBuildOptions(e).validation,o="object"==typeof a?a:void 0,s=await i.validateDocument(e,o,t);e.diagnostics?e.diagnostics.push(...s):e.diagnostics=s;let l=this.buildState.get(e.uri.toString());if(l){null!==(r=l.result)&&void 0!==r||(l.result={});let e=null!==(n=o?.categories)&&void 0!==n?n:AF.all;l.result.validationChecks?l.result.validationChecks.push(...e):l.result.validationChecks=[...e]}}getBuildOptions(e){var t,r;return null!==(r=null===(t=this.buildState.get(e.uri.toString()))||void 0===t?void 0:t.options)&&void 0!==r?r:{}}},jF=class{static{s(this,"DefaultIndexManager")}constructor(e){this.symbolIndex=new Map,this.symbolByTypeIndex=new TF,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,t){let r=SS(e).uri,n=[];return this.referenceIndex.forEach((e=>{e.forEach((e=>{iF.equals(e.targetUri,r)&&e.targetPath===t&&n.push(e)}))})),o_(n)}allElements(e,t){let r=o_(this.symbolIndex.keys());return t&&(r=r.filter((e=>!t||t.has(e)))),r.map((t=>this.getFileDescriptions(t,e))).flat()}getFileDescriptions(e,t){var r;return t?this.symbolByTypeIndex.get(e,t,(()=>{var r;return(null!==(r=this.symbolIndex.get(e))&&void 0!==r?r:[]).filter((e=>this.astReflection.isSubtype(e.type,t)))})):null!==(r=this.symbolIndex.get(e))&&void 0!==r?r:[]}remove(e){let t=e.toString();this.symbolIndex.delete(t),this.symbolByTypeIndex.clear(t),this.referenceIndex.delete(t)}async updateContent(e,t=zP.CancellationToken.None){let r=await this.serviceRegistry.getServices(e.uri).references.ScopeComputation.computeExports(e,t),n=e.uri.toString();this.symbolIndex.set(n,r),this.symbolByTypeIndex.clear(n)}async updateReferences(e,t=zP.CancellationToken.None){let r=await this.serviceRegistry.getServices(e.uri).workspace.ReferenceDescriptionProvider.createDescriptions(e,t);this.referenceIndex.set(e.uri.toString(),r)}isAffected(e,t){let r=this.referenceIndex.get(e.uri.toString());return!!r&&r.some((e=>!e.local&&t.has(e.targetUri.toString())))}},VF=class{static{s(this,"DefaultWorkspaceManager")}constructor(e){this.initialBuildOptions={},this._ready=new ZP,this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}initialize(e){var t;this.folders=null!==(t=e.workspaceFolders)&&void 0!==t?t:void 0}initialized(e){return this.mutex.write((e=>{var t;return this.initializeWorkspace(null!==(t=this.folders)&&void 0!==t?t:[],e)}))}async initializeWorkspace(e,t=zP.CancellationToken.None){let r=await this.performStartup(e);await YP(t),await this.documentBuilder.build(r,this.initialBuildOptions,t)}async performStartup(e){let t=this.serviceRegistry.all.flatMap((e=>e.LanguageMetaData.fileExtensions)),r=[],n=s((e=>{r.push(e),this.langiumDocuments.hasDocument(e.uri)||this.langiumDocuments.addDocument(e)}),"collector");return await this.loadAdditionalDocuments(e,n),await Promise.all(e.map((e=>[e,this.getRootFolder(e)])).map((async e=>this.traverseFolder(...e,t,n)))),this._ready.resolve(),r}loadAdditionalDocuments(e,t){return Promise.resolve()}getRootFolder(e){return oF.parse(e.uri)}async traverseFolder(e,t,r,n){let i=await this.fileSystemProvider.readDirectory(t);await Promise.all(i.map((async t=>{if(this.includeEntry(e,t,r))if(t.isDirectory)await this.traverseFolder(e,t.uri,r,n);else if(t.isFile){let e=await this.langiumDocuments.getOrCreateDocument(t.uri);n(e)}})))}includeEntry(e,t,r){let n=iF.basename(t.uri);if(n.startsWith("."))return!1;if(t.isDirectory)return"node_modules"!==n&&"out"!==n;if(t.isFile){let e=iF.extname(t.uri);return r.includes(e)}return!1}},WF=class{static{s(this,"DefaultLexer")}constructor(e){let t=e.parser.TokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(t);let r=YF(t)?Object.values(t):t;this.chevrotainLexer=new jR(r,{positionTracking:"full"})}get definition(){return this.tokenTypes}tokenize(e){var t;let r=this.chevrotainLexer.tokenize(e);return{tokens:r.tokens,errors:r.errors,hidden:null!==(t=r.groups.hidden)&&void 0!==t?t:[]}}toTokenTypeDictionary(e){if(YF(e))return e;let t=HF(e)?Object.values(e.modes).flat():e,r={};return t.forEach((e=>r[e.name]=e)),r}};function qF(e){return Array.isArray(e)&&(0===e.length||"name"in e[0])}function HF(e){return e&&"modes"in e&&"defaultMode"in e}function YF(e){return!qF(e)&&!HF(e)}function XF(e,t,r){let n,i;return"string"==typeof e?(i=t,n=r):(i=e.range.start,n=t),i||(i=iO.create(0,0)),oB({index:0,tokens:eB({lines:ZF(e),position:i,options:fB(n)}),position:i})}function KF(e,t){let r=fB(t),n=ZF(e);if(0===n.length)return!1;let i=n[0],a=n[n.length-1],o=r.start,s=r.end;return!!o?.exec(i)&&!!s?.exec(a)}function ZF(e){let t="";return t="string"==typeof e?e:e.text,t.split(JS)}s(qF,"isTokenTypeArray"),s(HF,"isIMultiModeLexerDefinition"),s(YF,"isTokenTypeDictionary"),s(XF,"parseJSDoc"),s(KF,"isJSDoc"),s(ZF,"getLines");var QF=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,JF=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function eB(e){var t,r,n;let i=[],a=e.position.line,o=e.position.character;for(let s=0;s<e.lines.length;s++){let l=0===s,u=s===e.lines.length-1,c=e.lines[s],h=0;if(l&&e.options.start){let r=null===(t=e.options.start)||void 0===t?void 0:t.exec(c);r&&(h=r.index+r[0].length)}else{let t=null===(r=e.options.line)||void 0===r?void 0:r.exec(c);t&&(h=t.index+t[0].length)}if(u){let t=null===(n=e.options.end)||void 0===n?void 0:n.exec(c);t&&(c=c.substring(0,t.index))}if(c=c.substring(0,aB(c)),iB(c,h)>=c.length){if(i.length>0){let e=iO.create(a,o);i.push({type:"break",content:"",range:aO.create(e,e)})}}else{QF.lastIndex=h;let e=QF.exec(c);if(e){let t=e[0],r=e[1],n=iO.create(a,o+h),s=iO.create(a,o+h+t.length);i.push({type:"tag",content:r,range:aO.create(n,s)}),h+=t.length,h=iB(c,h)}if(h<c.length){let e=c.substring(h),t=Array.from(e.matchAll(JF));i.push(...tB(t,e,a,o+h))}}a++,o=0}return i.length>0&&"break"===i[i.length-1].type?i.slice(0,-1):i}function tB(e,t,r,n){let i=[];if(0===e.length){let e=iO.create(r,n),a=iO.create(r,n+t.length);i.push({type:"text",content:t,range:aO.create(e,a)})}else{let a=0;for(let o of e){let e=o.index,s=t.substring(a,e);s.length>0&&i.push({type:"text",content:t.substring(a,e),range:aO.create(iO.create(r,a+n),iO.create(r,e+n))});let l=s.length+1,u=o[1];if(i.push({type:"inline-tag",content:u,range:aO.create(iO.create(r,a+l+n),iO.create(r,a+l+u.length+n))}),l+=u.length,4===o.length){l+=o[2].length;let e=o[3];i.push({type:"text",content:e,range:aO.create(iO.create(r,a+l+n),iO.create(r,a+l+e.length+n))})}else i.push({type:"text",content:"",range:aO.create(iO.create(r,a+l+n),iO.create(r,a+l+n))});a=e+o[0].length}let o=t.substring(a);o.length>0&&i.push({type:"text",content:o,range:aO.create(iO.create(r,a+n),iO.create(r,a+n+o.length))})}return i}s(eB,"tokenize"),s(tB,"buildInlineTokens");var rB=/\S/,nB=/\s*$/;function iB(e,t){let r=e.substring(t).match(rB);return r?t+r.index:e.length}function aB(e){let t=e.match(nB);if(t&&"number"==typeof t.index)return t.index}function oB(e){var t,r,n,i;let a=iO.create(e.position.line,e.position.character);if(0===e.tokens.length)return new gB([],aO.create(a,a));let o=[];for(;e.index<e.tokens.length;){let t=sB(e,o[o.length-1]);t&&o.push(t)}let s=null!==(r=null===(t=o[0])||void 0===t?void 0:t.range.start)&&void 0!==r?r:a,l=null!==(i=null===(n=o[o.length-1])||void 0===n?void 0:n.range.end)&&void 0!==i?i:a;return new gB(o,aO.create(s,l))}function sB(e,t){let r=e.tokens[e.index];return"tag"===r.type?hB(e,!1):"text"===r.type||"inline-tag"===r.type?uB(e):(lB(r,t),void e.index++)}function lB(e,t){if(t){let r=new bB("",e.range);"inlines"in t?t.inlines.push(r):t.content.inlines.push(r)}}function uB(e){let t=e.tokens[e.index],r=t,n=t,i=[];for(;t&&"break"!==t.type&&"tag"!==t.type;)i.push(cB(e)),n=t,t=e.tokens[e.index];return new xB(i,aO.create(r.range.start,n.range.end))}function cB(e){return"inline-tag"===e.tokens[e.index].type?hB(e,!0):dB(e)}function hB(e,t){let r=e.tokens[e.index++],n=r.content.substring(1),i=e.tokens[e.index];if("text"===i?.type){if(t){let i=dB(e);return new mB(n,new xB([i],i.range),t,aO.create(r.range.start,i.range.end))}{let i=uB(e);return new mB(n,i,t,aO.create(r.range.start,i.range.end))}}{let e=r.range;return new mB(n,new xB([],e),t,e)}}function dB(e){let t=e.tokens[e.index++];return new bB(t.content,t.range)}function fB(e){if(!e)return fB({start:"/**",end:"*/",line:"*"});let{start:t,end:r,line:n}=e;return{start:pB(t,!0),end:pB(r,!1),line:pB(n,!0)}}function pB(e,t){if("string"==typeof e||"object"==typeof e){let r="string"==typeof e?oA(e):e.source;return t?new RegExp(`^\\s*${r}`):new RegExp(`\\s*${r}\\s*$`)}return e}s(iB,"skipWhitespace"),s(aB,"lastCharacter"),s(oB,"parseJSDocComment"),s(sB,"parseJSDocElement"),s(lB,"appendEmptyLine"),s(uB,"parseJSDocText"),s(cB,"parseJSDocInline"),s(hB,"parseJSDocTag"),s(dB,"parseJSDocLine"),s(fB,"normalizeOptions"),s(pB,"normalizeOption");var gB=class{static{s(this,"JSDocCommentImpl")}constructor(e,t){this.elements=e,this.range=t}getTag(e){return this.getAllTags().find((t=>t.name===e))}getTags(e){return this.getAllTags().filter((t=>t.name===e))}getAllTags(){return this.elements.filter((e=>"name"in e))}toString(){let e="";for(let t of this.elements)if(0===e.length)e=t.toString();else{let r=t.toString();e+=CB(e)+r}return e.trim()}toMarkdown(e){let t="";for(let r of this.elements)if(0===t.length)t=r.toMarkdown(e);else{let n=r.toMarkdown(e);t+=CB(t)+n}return t.trim()}},mB=class{static{s(this,"JSDocTagImpl")}constructor(e,t,r,n){this.name=e,this.content=t,this.inline=r,this.range=n}toString(){let e=`@${this.name}`,t=this.content.toString();return 1===this.content.inlines.length?e=`${e} ${t}`:this.content.inlines.length>1&&(e=`${e}\n${t}`),this.inline?`{${e}}`:e}toMarkdown(e){var t,r;return null!==(r=null===(t=e?.renderTag)||void 0===t?void 0:t.call(e,this))&&void 0!==r?r:this.toMarkdownDefault(e)}toMarkdownDefault(e){let t=this.content.toMarkdown(e);if(this.inline){let r=yB(this.name,t,e??{});if("string"==typeof r)return r}let r="";"italic"===e?.tag||void 0===e?.tag?r="*":"bold"===e?.tag?r="**":"bold-italic"===e?.tag&&(r="***");let n=`${r}@${this.name}${r}`;return 1===this.content.inlines.length?n=`${n} — ${t}`:this.content.inlines.length>1&&(n=`${n}\n${t}`),this.inline?`{${n}}`:n}};function yB(e,t,r){var n,i;if("linkplain"===e||"linkcode"===e||"link"===e){let a=t.indexOf(" "),o=t;if(a>0){let e=iB(t,a);o=t.substring(e),t=t.substring(0,a)}return("linkcode"===e||"link"===e&&"code"===r.link)&&(o=`\`${o}\``),null!==(i=null===(n=r.renderLink)||void 0===n?void 0:n.call(r,t,o))&&void 0!==i?i:vB(t,o)}}function vB(e,t){try{return oF.parse(e,!0),`[${t}](${e})`}catch{return e}}s(yB,"renderInlineTag"),s(vB,"renderLinkDefault");var xB=class{static{s(this,"JSDocTextImpl")}constructor(e,t){this.inlines=e,this.range=t}toString(){let e="";for(let t=0;t<this.inlines.length;t++){let r=this.inlines[t],n=this.inlines[t+1];e+=r.toString(),n&&n.range.start.line>r.range.start.line&&(e+="\n")}return e}toMarkdown(e){let t="";for(let r=0;r<this.inlines.length;r++){let n=this.inlines[r],i=this.inlines[r+1];t+=n.toMarkdown(e),i&&i.range.start.line>n.range.start.line&&(t+="\n")}return t}},bB=class{static{s(this,"JSDocLineImpl")}constructor(e,t){this.text=e,this.range=t}toString(){return this.text}toMarkdown(){return this.text}};function CB(e){return e.endsWith("\n")?"\n":"\n\n"}s(CB,"fillNewlines");var TB=class{static{s(this,"JSDocDocumentationProvider")}constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){let t=this.commentProvider.getComment(e);if(t&&KF(t))return XF(t).toMarkdown({renderLink:s(((t,r)=>this.documentationLinkRenderer(e,t,r)),"renderLink"),renderTag:s((t=>this.documentationTagRenderer(e,t)),"renderTag")})}documentationLinkRenderer(e,t,r){var n;let i=null!==(n=this.findNameInPrecomputedScopes(e,t))&&void 0!==n?n:this.findNameInGlobalScope(e,t);if(i&&i.nameSegment){let e=i.nameSegment.range.start.line+1,t=i.nameSegment.range.start.character+1;return`[${r}](${i.documentUri.with({fragment:`L${e},${t}`}).toString()})`}}documentationTagRenderer(e,t){}findNameInPrecomputedScopes(e,t){let r=SS(e).precomputedScopes;if(!r)return;let n=e;do{let e=r.get(n).find((e=>e.name===t));if(e)return e;n=n.$container}while(n)}findNameInGlobalScope(e,t){return this.indexManager.allElements().find((e=>e.name===t))}},wB=class{static{s(this,"DefaultCommentProvider")}constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){var t;return EF(e)?e.$comment:null===(t=x_(e.$cstNode,this.grammarConfig().multilineCommentRules))||void 0===t?void 0:t.text}},kB={};h(kB,d(jk(),1));var _B,EB=class{static{s(this,"DefaultAsyncParser")}constructor(e){this.syncParser=e.parser.LangiumParser}parse(e){return Promise.resolve(this.syncParser.parse(e))}},SB=class{static{s(this,"AbstractThreadedAsyncParser")}constructor(e){this.threadCount=8,this.terminationDelay=200,this.workerPool=[],this.queue=[],this.hydrator=e.serializer.Hydrator}initializeWorkers(){for(;this.workerPool.length<this.threadCount;){let e=this.createWorker();e.onReady((()=>{if(this.queue.length>0){let t=this.queue.shift();t&&(e.lock(),t.resolve(e))}})),this.workerPool.push(e)}}async parse(e,t){let r,n=await this.acquireParserWorker(t),i=new ZP,a=t.onCancellationRequested((()=>{r=setTimeout((()=>{this.terminateWorker(n)}),this.terminationDelay)}));return n.parse(e).then((e=>{let t=this.hydrator.hydrate(e);i.resolve(t)})).catch((e=>{i.reject(e)})).finally((()=>{a.dispose(),clearTimeout(r)})),i.promise}terminateWorker(e){e.terminate();let t=this.workerPool.indexOf(e);t>=0&&this.workerPool.splice(t,1)}async acquireParserWorker(e){this.initializeWorkers();for(let e of this.workerPool)if(e.ready)return e.lock(),e;let t=new ZP;return e.onCancellationRequested((()=>{let e=this.queue.indexOf(t);e>=0&&this.queue.splice(e,1),t.reject(qP)})),this.queue.push(t),t.promise}},AB=class{static{s(this,"ParserWorker")}get ready(){return this._ready}get onReady(){return this.onReadyEmitter.event}constructor(e,t,r,n){this.onReadyEmitter=new kB.Emitter,this.deferred=new ZP,this._ready=!0,this._parsing=!1,this.sendMessage=e,this._terminate=n,t((e=>{let t=e;this.deferred.resolve(t),this.unlock()})),r((e=>{this.deferred.reject(e),this.unlock()}))}terminate(){this.deferred.reject(qP),this._terminate()}lock(){this._ready=!1}unlock(){this._parsing=!1,this._ready=!0,this.onReadyEmitter.fire()}parse(e){if(this._parsing)throw new Error("Parser worker is busy");return this._parsing=!0,this.deferred=new ZP,this.sendMessage(e),this.deferred.promise}},NB=class{static{s(this,"DefaultWorkspaceLock")}constructor(){this.previousTokenSource=new zP.CancellationTokenSource,this.writeQueue=[],this.readQueue=[],this.done=!0}write(e){this.cancelWrite();let t=new zP.CancellationTokenSource;return this.previousTokenSource=t,this.enqueue(this.writeQueue,e,t.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,t,r){let n=new ZP,i={action:t,deferred:n,cancellationToken:r??zP.CancellationToken.None};return e.push(i),this.performNextOperation(),n.promise}async performNextOperation(){if(!this.done)return;let e=[];if(this.writeQueue.length>0)e.push(this.writeQueue.shift());else{if(!(this.readQueue.length>0))return;e.push(...this.readQueue.splice(0,this.readQueue.length))}this.done=!1,await Promise.all(e.map((async({action:e,deferred:t,cancellationToken:r})=>{try{let n=await Promise.resolve().then((()=>e(r)));t.resolve(n)}catch(e){HP(e)?t.resolve(void 0):t.reject(e)}}))),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}},RB=class{static{s(this,"DefaultHydrator")}constructor(e){this.grammarElementIdMap=new gF,this.tokenTypeIdMap=new gF,this.grammar=e.Grammar,this.lexer=e.parser.Lexer,this.linker=e.references.Linker}dehydrate(e){return{lexerErrors:e.lexerErrors.map((e=>Object.assign({},e))),parserErrors:e.parserErrors.map((e=>Object.assign({},e))),value:this.dehydrateAstNode(e.value,this.createDehyrationContext(e.value))}}createDehyrationContext(e){let t=new Map,r=new Map;for(let r of LS(e))t.set(r,{});if(e.$cstNode)for(let t of c_(e.$cstNode))r.set(t,{});return{astNodes:t,cstNodes:r}}dehydrateAstNode(e,t){let r=t.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,void 0!==e.$cstNode&&(r.$cstNode=this.dehydrateCstNode(e.$cstNode,t));for(let[n,i]of Object.entries(e))if(!n.startsWith("$"))if(Array.isArray(i)){let e=[];r[n]=e;for(let r of i)Hk(r)?e.push(this.dehydrateAstNode(r,t)):Yk(r)?e.push(this.dehydrateReference(r,t)):e.push(r)}else Hk(i)?r[n]=this.dehydrateAstNode(i,t):Yk(i)?r[n]=this.dehydrateReference(i,t):void 0!==i&&(r[n]=i);return r}dehydrateReference(e,t){let r={};return r.$refText=e.$refText,e.$refNode&&(r.$refNode=t.cstNodes.get(e.$refNode)),r}dehydrateCstNode(e,t){let r=t.cstNodes.get(e);return e_(e)?r.fullText=e.fullText:r.grammarSource=this.getGrammarElementId(e.grammarSource),r.hidden=e.hidden,r.astNode=t.astNodes.get(e.astNode),Qk(e)?r.content=e.content.map((e=>this.dehydrateCstNode(e,t))):Jk(e)&&(r.tokenType=e.tokenType.name,r.offset=e.offset,r.length=e.length,r.startLine=e.range.start.line,r.startColumn=e.range.start.character,r.endLine=e.range.end.line,r.endColumn=e.range.end.character),r}hydrate(e){let t=e.value,r=this.createHydrationContext(t);return"$cstNode"in t&&this.hydrateCstNode(t.$cstNode,r),{lexerErrors:e.lexerErrors,parserErrors:e.parserErrors,value:this.hydrateAstNode(t,r)}}createHydrationContext(e){let t,r=new Map,n=new Map;for(let t of LS(e))r.set(t,{});if(e.$cstNode)for(let r of c_(e.$cstNode)){let e;"fullText"in r?(e=new oP(r.fullText),t=e):"content"in r?e=new iP:"tokenType"in r&&(e=this.hydrateCstLeafNode(r)),e&&(n.set(r,e),e.root=t)}return{astNodes:r,cstNodes:n}}hydrateAstNode(e,t){let r=t.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,e.$cstNode&&(r.$cstNode=t.cstNodes.get(e.$cstNode));for(let[n,i]of Object.entries(e))if(!n.startsWith("$"))if(Array.isArray(i)){let e=[];r[n]=e;for(let a of i)Hk(a)?e.push(this.setParent(this.hydrateAstNode(a,t),r)):Yk(a)?e.push(this.hydrateReference(a,r,n,t)):e.push(a)}else Hk(i)?r[n]=this.setParent(this.hydrateAstNode(i,t),r):Yk(i)?r[n]=this.hydrateReference(i,r,n,t):void 0!==i&&(r[n]=i);return r}setParent(e,t){return e.$container=t,e}hydrateReference(e,t,r,n){return this.linker.buildReference(t,r,n.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,t,r=0){let n=t.cstNodes.get(e);if("number"==typeof e.grammarSource&&(n.grammarSource=this.getGrammarElement(e.grammarSource)),n.astNode=t.astNodes.get(e.astNode),Qk(n))for(let i of e.content){let e=this.hydrateCstNode(i,t,r++);n.content.push(e)}return n}hydrateCstLeafNode(e){let t=this.getTokenType(e.tokenType),r=e.offset,n=e.length,i=e.startLine,a=e.startColumn,o=e.endLine,s=e.endColumn,l=e.hidden;return new nP(r,n,{start:{line:i,character:a},end:{line:o,character:s}},t,l)}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(e){return 0===this.grammarElementIdMap.size&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(e)}getGrammarElement(e){0===this.grammarElementIdMap.size&&this.createGrammarElementIdMap();let t=this.grammarElementIdMap.getKey(e);if(t)return t;throw new Error("Invalid grammar element id: "+e)}createGrammarElementIdMap(){let e=0;for(let t of LS(this.grammar))Y_(t)&&this.grammarElementIdMap.set(t,e++)}};function LB(e){return{documentation:{CommentProvider:s((e=>new wB(e)),"CommentProvider"),DocumentationProvider:s((e=>new TB(e)),"DocumentationProvider")},parser:{AsyncParser:s((e=>new EB(e)),"AsyncParser"),GrammarConfig:s((e=>HA(e)),"GrammarConfig"),LangiumParser:s((e=>DP(e)),"LangiumParser"),CompletionParser:s((e=>OP(e)),"CompletionParser"),ValueConverter:s((()=>new $P),"ValueConverter"),TokenBuilder:s((()=>new BP),"TokenBuilder"),Lexer:s((e=>new WF(e)),"Lexer"),ParserErrorMessageProvider:s((()=>new fP),"ParserErrorMessageProvider")},workspace:{AstNodeLocator:s((()=>new zF),"AstNodeLocator"),AstNodeDescriptionProvider:s((e=>new BF(e)),"AstNodeDescriptionProvider"),ReferenceDescriptionProvider:s((e=>new $F(e)),"ReferenceDescriptionProvider")},references:{Linker:s((e=>new cF(e)),"Linker"),NameProvider:s((()=>new dF),"NameProvider"),ScopeProvider:s((e=>new _F(e)),"ScopeProvider"),ScopeComputation:s((e=>new mF(e)),"ScopeComputation"),References:s((e=>new fF(e)),"References")},serializer:{Hydrator:s((e=>new RB(e)),"Hydrator"),JsonSerializer:s((e=>new NF(e)),"JsonSerializer")},validation:{DocumentValidator:s((e=>new OF(e)),"DocumentValidator"),ValidationRegistry:s((e=>new MF(e)),"ValidationRegistry")},shared:s((()=>e.shared),"shared")}}function IB(e){return{ServiceRegistry:s((()=>new RF),"ServiceRegistry"),workspace:{LangiumDocuments:s((e=>new uF(e)),"LangiumDocuments"),LangiumDocumentFactory:s((e=>new lF(e)),"LangiumDocumentFactory"),DocumentBuilder:s((e=>new GF(e)),"DocumentBuilder"),IndexManager:s((e=>new jF(e)),"IndexManager"),WorkspaceManager:s((e=>new VF(e)),"WorkspaceManager"),FileSystemProvider:s((t=>e.fileSystemProvider(t)),"FileSystemProvider"),WorkspaceLock:s((()=>new NB),"WorkspaceLock"),ConfigurationProvider:s((e=>new UF(e)),"ConfigurationProvider")}}}function MB(e,t,r,n,i,a,o,s,l){return PB([e,t,r,n,i,a,o,s,l].reduce($B,{}))}s(LB,"createDefaultCoreModule"),s(IB,"createDefaultSharedCoreModule"),(_B||(_B={})).merge=(e,t)=>$B($B({},e),t),s(MB,"inject");var OB=Symbol("isProxy");function DB(e){if(e&&e[OB])for(let t of Object.values(e))DB(t);return e}function PB(e,t){let r=new Proxy({},{deleteProperty:s((()=>!1),"deleteProperty"),get:s(((n,i)=>BB(n,i,e,t||r)),"get"),getOwnPropertyDescriptor:s(((n,i)=>(BB(n,i,e,t||r),Object.getOwnPropertyDescriptor(n,i))),"getOwnPropertyDescriptor"),has:s(((t,r)=>r in e),"has"),ownKeys:s((()=>[...Reflect.ownKeys(e),OB]),"ownKeys")});return r[OB]=!0,r}s(DB,"eagerLoad"),s(PB,"_inject");var FB=Symbol();function BB(e,t,r,n){if(t in e){if(e[t]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:e[t]});if(e[t]===FB)throw new Error('Cycle detected. Please make "'+String(t)+'" lazy. See https://langium.org/docs/configuration-services/#resolving-cyclic-dependencies');return e[t]}if(t in r){let i=r[t];e[t]=FB;try{e[t]="function"==typeof i?i(n):PB(i,n)}catch(r){throw e[t]=r instanceof Error?r:void 0,r}return e[t]}}function $B(e,t){if(t)for(let[r,n]of Object.entries(t))if(void 0!==n){let t=e[r];e[r]=null!==t&&null!==n&&"object"==typeof t&&"object"==typeof n?$B(t,n):n}return e}s(BB,"_resolve"),s($B,"_merge");var zB={};u(zB,{AstUtils:()=>wS,BiMap:()=>gF,Cancellation:()=>zP,ContextCache:()=>TF,CstUtils:()=>qk,DONE_RESULT:()=>a_,Deferred:()=>ZP,Disposable:()=>FF,DisposableCache:()=>bF,DocumentCache:()=>wF,EMPTY_STREAM:()=>i_,ErrorWithLocation:()=>L_,GrammarUtils:()=>R_,MultiMap:()=>pF,OperationCancelled:()=>qP,Reduction:()=>s_,RegExpUtils:()=>BS,SimpleCache:()=>CF,StreamImpl:()=>t_,TreeStreamImpl:()=>u_,URI:()=>oF,UriUtils:()=>iF,WorkspaceCache:()=>kF,assertUnreachable:()=>I_,delayNextTick:()=>UP,interruptAndCheck:()=>YP,isOperationCancelled:()=>HP,loadGrammarFromJson:()=>qB,setInterruptionPeriod:()=>WP,startCancelableOperation:()=>VP,stream:()=>o_}),h(zB,kB);var UB=class{static{s(this,"EmptyFileSystemProvider")}readFile(){throw new Error("No file system is available.")}async readDirectory(){return[]}},GB={fileSystemProvider:s((()=>new UB),"fileSystemProvider")},jB={Grammar:s((()=>{}),"Grammar"),LanguageMetaData:s((()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})),"LanguageMetaData")},VB={AstReflection:s((()=>new CS),"AstReflection")};function WB(){let e=MB(IB(GB),VB),t=MB(LB({shared:e}),jB);return e.ServiceRegistry.register(t),t}function qB(e){var t;let r=WB(),n=r.serializer.JsonSerializer.deserialize(e);return r.shared.workspace.LangiumDocumentFactory.fromModel(n,oF.parse(`memory://${null!==(t=n.name)&&void 0!==t?t:"grammar"}.langium`)),n}s(WB,"createMinimalGrammarServices"),s(qB,"loadGrammarFromJson"),h(Wk,zB);var HB=Object.defineProperty,YB=s(((e,t)=>HB(e,"name",{value:t,configurable:!0})),"__name");function XB(e){return m$.isInstance(e,"Architecture")}s(XB,"isArchitecture"),YB(XB,"isArchitecture");var KB="Branch";function ZB(e){return m$.isInstance(e,KB)}s(ZB,"isBranch"),YB(ZB,"isBranch");var QB="Commit";function JB(e){return m$.isInstance(e,QB)}s(JB,"isCommit"),YB(JB,"isCommit");function e$(e){return m$.isInstance(e,"Common")}s(e$,"isCommon"),YB(e$,"isCommon");var t$="GitGraph";function r$(e){return m$.isInstance(e,t$)}s(r$,"isGitGraph"),YB(r$,"isGitGraph");function n$(e){return m$.isInstance(e,"Info")}s(n$,"isInfo"),YB(n$,"isInfo");var i$="Merge";function a$(e){return m$.isInstance(e,i$)}s(a$,"isMerge"),YB(a$,"isMerge");function o$(e){return m$.isInstance(e,"Packet")}s(o$,"isPacket"),YB(o$,"isPacket");function s$(e){return m$.isInstance(e,"PacketBlock")}s(s$,"isPacketBlock"),YB(s$,"isPacketBlock");function l$(e){return m$.isInstance(e,"Pie")}s(l$,"isPie"),YB(l$,"isPie");function u$(e){return m$.isInstance(e,"PieSection")}s(u$,"isPieSection"),YB(u$,"isPieSection");var c$,h$,d$,f$,p$,g$=class extends Zk{static{s(this,"MermaidAstReflection")}static{YB(this,"MermaidAstReflection")}getAllTypes(){return["Architecture","Branch","Checkout","CherryPicking","Commit","Common","Direction","Edge","GitGraph","Group","Info","Junction","Merge","Packet","PacketBlock","Pie","PieSection","Service","Statement"]}computeIsSubtype(e,t){switch(e){case KB:case"Checkout":case"CherryPicking":case QB:case i$:return this.isSubtype("Statement",t);case"Direction":return this.isSubtype(t$,t);default:return!1}}getReferenceType(e){let t=`${e.container.$type}:${e.property}`;throw new Error(`${t} is not a valid reference id.`)}getTypeMetaData(e){switch(e){case"Architecture":return{name:"Architecture",properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]};case"Branch":return{name:"Branch",properties:[{name:"name"},{name:"order"}]};case"Checkout":return{name:"Checkout",properties:[{name:"branch"}]};case"CherryPicking":return{name:"CherryPicking",properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]};case"Commit":return{name:"Commit",properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Common":return{name:"Common",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Edge":return{name:"Edge",properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]};case"GitGraph":return{name:"GitGraph",properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]};case"Group":return{name:"Group",properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]};case"Info":return{name:"Info",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Junction":return{name:"Junction",properties:[{name:"id"},{name:"in"}]};case"Merge":return{name:"Merge",properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Packet":return{name:"Packet",properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]};case"PacketBlock":return{name:"PacketBlock",properties:[{name:"end"},{name:"label"},{name:"start"}]};case"Pie":return{name:"Pie",properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]};case"PieSection":return{name:"PieSection",properties:[{name:"label"},{name:"value"}]};case"Service":return{name:"Service",properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]};case"Direction":return{name:"Direction",properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]};default:return{name:e,properties:[]}}}},m$=new g$,y$=YB((()=>c$??(c$=qB('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","name":"Info","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'))),"InfoGrammar"),v$=YB((()=>h$??(h$=qB('{"$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"$type":"ParserRule","name":"Packet","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"packet-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"?"},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|\'[^\']*\'/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'))),"PacketGrammar"),x$=YB((()=>d$??(d$=qB('{"$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"$type":"ParserRule","name":"Pie","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"PIE_SECTION_LABEL","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]+\\"/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"PIE_SECTION_VALUE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'))),"PieGrammar"),b$=YB((()=>f$??(f$=qB('{"$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"$type":"ParserRule","name":"Architecture","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","fragment":true,"definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"LeftPort","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"RightPort","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Arrow","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ID","definition":{"$type":"RegexToken","regex":"/[\\\\w]+/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TEXT_ICON","definition":{"$type":"RegexToken","regex":"/\\\\(\\"[^\\"]+\\"\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'))),"ArchitectureGrammar"),C$=YB((()=>p$??(p$=qB('{"$type":"Grammar","isDeclared":true,"name":"GitGraph","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"rules":[{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","name":"GitGraph","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+(?=\\\\s)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|\'[^\']*\'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}'))),"GitGraphGrammar"),T$={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},w$={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},k$={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},_$={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},E$={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},S$={AstReflection:YB((()=>new g$),"AstReflection")},A$={Grammar:YB((()=>y$()),"Grammar"),LanguageMetaData:YB((()=>T$),"LanguageMetaData"),parser:{}},N$={Grammar:YB((()=>v$()),"Grammar"),LanguageMetaData:YB((()=>w$),"LanguageMetaData"),parser:{}},R$={Grammar:YB((()=>x$()),"Grammar"),LanguageMetaData:YB((()=>k$),"LanguageMetaData"),parser:{}},L$={Grammar:YB((()=>b$()),"Grammar"),LanguageMetaData:YB((()=>_$),"LanguageMetaData"),parser:{}},I$={Grammar:YB((()=>C$()),"Grammar"),LanguageMetaData:YB((()=>E$),"LanguageMetaData"),parser:{}},M$={ACC_DESCR:/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/accTitle[\t ]*:([^\n\r]*)/,TITLE:/title([\t ][^\n\r]*|)/},O$=class extends $P{static{s(this,"AbstractMermaidValueConverter")}static{YB(this,"AbstractMermaidValueConverter")}runConverter(e,t,r){let n=this.runCommonConverter(e,t,r);return void 0===n&&(n=this.runCustomConverter(e,t,r)),void 0===n?super.runConverter(e,t,r):n}runCommonConverter(e,t,r){let n=M$[e.name];if(void 0===n)return;let i=n.exec(t);if(null!==i){if(void 0!==i[1])return i[1].trim().replace(/[\t ]{2,}/gm," ");if(void 0!==i[2])return i[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,"\n")}}},D$=class extends O${static{s(this,"CommonValueConverter")}static{YB(this,"CommonValueConverter")}runCustomConverter(e,t,r){}},P$=class extends BP{static{s(this,"AbstractMermaidTokenBuilder")}static{YB(this,"AbstractMermaidTokenBuilder")}constructor(e){super(),this.keywords=new Set(e)}buildKeywordTokens(e,t,r){let n=super.buildKeywordTokens(e,t,r);return n.forEach((e=>{this.keywords.has(e.name)&&void 0!==e.PATTERN&&(e.PATTERN=new RegExp(e.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))})),n}};(class extends P${static{s(this,"CommonTokenBuilder")}static{YB(this,"CommonTokenBuilder")}});var F$={},B$={info:YB((async()=>{let{createInfoServices:e}=await import("./info-46DW6VJ7-CQJS2HF5.mjs.be0c4496.js"),t=e().Info.parser.LangiumParser;F$.info=t}),"info"),packet:YB((async()=>{let{createPacketServices:e}=await import("./packet-W2GHVCYJ-EO6UC2GD.mjs.475b4af3.js"),t=e().Packet.parser.LangiumParser;F$.packet=t}),"packet"),pie:YB((async()=>{let{createPieServices:e}=await import("./pie-BEWT4RHE-B6EMOCE6.mjs.67a30459.js"),t=e().Pie.parser.LangiumParser;F$.pie=t}),"pie"),architecture:YB((async()=>{let{createArchitectureServices:e}=await import("./architecture-I3QFYML2-BNJ4OOAP.mjs.9796778d.js"),t=e().Architecture.parser.LangiumParser;F$.architecture=t}),"architecture"),gitGraph:YB((async()=>{let{createGitGraphServices:e}=await import("./gitGraph-YCYPL57B-MEVJTYR7.mjs.bb20d6bd.js"),t=e().GitGraph.parser.LangiumParser;F$.gitGraph=t}),"gitGraph")};async function $$(e,t){let r=B$[e];if(!r)throw new Error(`Unknown diagram type: ${e}`);F$[e]||await r();let n=F$[e].parse(t);if(n.lexerErrors.length>0||n.parserErrors.length>0)throw new z$(n);return n.value}s($$,"parse"),YB($$,"parse");var z$=class extends Error{static{s(this,"MermaidParseError")}constructor(e){let t=e.lexerErrors.map((e=>e.message)).join("\n"),r=e.parserErrors.map((e=>e.message)).join("\n");super(`Parsing failed: ${t} ${r}`),this.result=e}static{YB(this,"MermaidParseError")}},U$=class extends P${static{s(this,"PieTokenBuilder")}static{YB(this,"PieTokenBuilder")}constructor(){super(["pie","showData"])}},G$=class extends O${static{s(this,"PieValueConverter")}static{YB(this,"PieValueConverter")}runCustomConverter(e,t,r){if("PIE_SECTION_LABEL"===e.name)return t.replace(/"/g,"").trim()}},j$={parser:{TokenBuilder:YB((()=>new U$),"TokenBuilder"),ValueConverter:YB((()=>new G$),"ValueConverter")}};function V$(e=GB){let t=MB(IB(e),S$),r=MB(LB({shared:t}),R$,j$);return t.ServiceRegistry.register(r),{shared:t,Pie:r}}s(V$,"createPieServices"),YB(V$,"createPieServices");var W$=class extends P${static{s(this,"ArchitectureTokenBuilder")}static{YB(this,"ArchitectureTokenBuilder")}constructor(){super(["architecture"])}},q$=class extends O${static{s(this,"ArchitectureValueConverter")}static{YB(this,"ArchitectureValueConverter")}runCustomConverter(e,t,r){return"ARCH_ICON"===e.name?t.replace(/[()]/g,"").trim():"ARCH_TEXT_ICON"===e.name?t.replace(/["()]/g,""):"ARCH_TITLE"===e.name?t.replace(/[[\]]/g,"").trim():void 0}},H$={parser:{TokenBuilder:YB((()=>new W$),"TokenBuilder"),ValueConverter:YB((()=>new q$),"ValueConverter")}};function Y$(e=GB){let t=MB(IB(e),S$),r=MB(LB({shared:t}),L$,H$);return t.ServiceRegistry.register(r),{shared:t,Architecture:r}}s(Y$,"createArchitectureServices"),YB(Y$,"createArchitectureServices");var X$=class extends P${static{s(this,"GitGraphTokenBuilder")}static{YB(this,"GitGraphTokenBuilder")}constructor(){super(["gitGraph"])}},K$={parser:{TokenBuilder:YB((()=>new X$),"TokenBuilder"),ValueConverter:YB((()=>new D$),"ValueConverter")}};function Z$(e=GB){let t=MB(IB(e),S$),r=MB(LB({shared:t}),I$,K$);return t.ServiceRegistry.register(r),{shared:t,GitGraph:r}}s(Z$,"createGitGraphServices"),YB(Z$,"createGitGraphServices");var Q$=l(((e,t)=>{!function(r,n){"object"==typeof e&&typeof t<"u"?t.exports=n():"function"==typeof define&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=n()}(e,(function(){var e=6e4,t=36e5,r="millisecond",n="second",i="minute",a="hour",o="day",l="week",u="month",c="quarter",h="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:s((function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}),"ordinal")},y=s((function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e}),"m"),v={s:y,z:s((function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(i,2,"0")}),"z"),m:s((function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,u),a=r-i<0,o=t.clone().add(n+(a?-1:1),u);return+(-(n+(r-i)/(a?i-o:o-i))||0)}),"t"),a:s((function(e){return e<0?Math.ceil(e)||0:Math.floor(e)}),"a"),p:s((function(e){return{M:u,y:h,w:l,d:o,D:d,h:a,m:i,s:n,ms:r,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")}),"p"),u:s((function(e){return void 0===e}),"u")},x="en",b={};b[x]=m;var C="$isDayjsObject",T=s((function(e){return e instanceof E||!(!e||!e[C])}),"S"),w=s((function e(t,r,n){var i;if(!t)return x;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(i=a),r&&(b[a]=r,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;b[s]=t,i=s}return!n&&i&&(x=i),i||!n&&x}),"t"),k=s((function(e,t){if(T(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new E(r)}),"O"),_=v;_.l=w,_.i=T,_.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function m(e){this.$L=w(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[C]=!0}s(m,"M");var y=m.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(_.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return _},y.isValid=function(){return this.$d.toString()!==f},y.isSame=function(e,t){var r=k(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return k(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<k(e)},y.$g=function(e,t,r){return _.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,c=!!_.u(t)||t,f=_.p(e),p=s((function(e,t){var n=_.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return c?n:n.endOf(o)}),"l"),g=s((function(e,t){return _.w(r.toDate()[e].apply(r.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),r)}),"$"),m=this.$W,y=this.$M,v=this.$D,x="set"+(this.$u?"UTC":"");switch(f){case h:return c?p(1,0):p(31,11);case u:return c?p(1,y):p(0,y+1);case l:var b=this.$locale().weekStart||0,C=(m<b?m+7:m)-b;return p(c?v-C:v+(6-C),y);case o:case d:return g(x+"Hours",0);case a:return g(x+"Minutes",1);case i:return g(x+"Seconds",2);case n:return g(x+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var s,l=_.p(e),c="set"+(this.$u?"UTC":""),f=(s={},s[o]=c+"Date",s[d]=c+"Date",s[u]=c+"Month",s[h]=c+"FullYear",s[a]=c+"Hours",s[i]=c+"Minutes",s[n]=c+"Seconds",s[r]=c+"Milliseconds",s)[l],p=l===o?this.$D+(t-this.$W):t;if(l===u||l===h){var g=this.clone().set(d,1);g.$d[f](p),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[_.p(e)]()},y.add=function(r,c){var d,f=this;r=Number(r);var p=_.p(c),g=s((function(e){var t=k(f);return _.w(t.date(t.date()+Math.round(e*r)),f)}),"y");if(p===u)return this.set(u,this.$M+r);if(p===h)return this.set(h,this.$y+r);if(p===o)return g(1);if(p===l)return g(7);var m=(d={},d[i]=e,d[a]=t,d[n]=1e3,d)[p]||1,y=this.$d.getTime()+r*m;return _.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=_.z(this),a=this.$H,o=this.$m,l=this.$M,u=r.weekdays,c=r.months,h=r.meridiem,d=s((function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)}),"h"),p=s((function(e){return _.s(a%12||12,e,"0")}),"d"),m=h||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(g,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return _.s(t.$y,4,"0");case"M":return l+1;case"MM":return _.s(l+1,2,"0");case"MMM":return d(r.monthsShort,l,c,3);case"MMMM":return d(c,l);case"D":return t.$D;case"DD":return _.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,u,2);case"ddd":return d(r.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(a);case"HH":return _.s(a,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return m(a,o,!0);case"A":return m(a,o,!1);case"m":return String(o);case"mm":return _.s(o,2,"0");case"s":return String(t.$s);case"ss":return _.s(t.$s,2,"0");case"SSS":return _.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,d,f){var p,g=this,m=_.p(d),y=k(r),v=(y.utcOffset()-this.utcOffset())*e,x=this-y,b=s((function(){return _.m(g,y)}),"D");switch(m){case h:p=b()/12;break;case u:p=b();break;case c:p=b()/3;break;case l:p=(x-v)/6048e5;break;case o:p=(x-v)/864e5;break;case a:p=x/t;break;case i:p=x/e;break;case n:p=x/1e3;break;default:p=x}return f?p:_.a(p)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=w(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return _.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),S=E.prototype;return k.prototype=S,[["$ms",r],["$s",n],["$m",i],["$H",a],["$W",o],["$M",u],["$y",h],["$D",d]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,E,k),e.$i=!0),k},k.locale=w,k.isDayjs=T,k.unix=function(e){return k(1e3*e)},k.en=b[x],k.Ls=b,k.p={},k}))})),J$=l(((e,t)=>{!function(r,n){"object"==typeof e&&typeof t<"u"?t.exports=n():"function"==typeof define&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).DOMPurify=n()}(e,(function(){let{entries:e,setPrototypeOf:t,isFrozen:r,getPrototypeOf:n,getOwnPropertyDescriptor:i}=Object,{freeze:a,seal:o,create:l}=Object,{apply:u,construct:c}=typeof Reflect<"u"&&Reflect;a||(a=s((function(e){return e}),"freeze")),o||(o=s((function(e){return e}),"seal")),u||(u=s((function(e,t,r){return e.apply(t,r)}),"apply")),c||(c=s((function(e,t){return new e(...t)}),"construct"));let h=w(Array.prototype.forEach),d=w(Array.prototype.pop),f=w(Array.prototype.push),p=w(String.prototype.toLowerCase),g=w(String.prototype.toString),m=w(String.prototype.match),y=w(String.prototype.replace),v=w(String.prototype.indexOf),x=w(String.prototype.trim),b=w(Object.prototype.hasOwnProperty),C=w(RegExp.prototype.test),T=k(TypeError);function w(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return u(e,t,n)}}function k(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return c(e,r)}}function _(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;t&&t(e,null);let a=n.length;for(;a--;){let t=n[a];if("string"==typeof t){let e=i(t);e!==t&&(r(n)||(n[a]=e),t=e)}e[t]=!0}return e}function E(e){for(let t=0;t<e.length;t++)b(e,t)||(e[t]=null);return e}function S(t){let r=l(null);for(let[n,i]of e(t))b(t,n)&&(Array.isArray(i)?r[n]=E(i):i&&"object"==typeof i&&i.constructor===Object?r[n]=S(i):r[n]=i);return r}function A(e,t){for(;null!==e;){let r=i(e,t);if(r){if(r.get)return w(r.get);if("function"==typeof r.value)return w(r.value)}e=n(e)}function r(){return null}return s(r,"fallbackValue"),r}s(w,"unapply"),s(k,"unconstruct"),s(_,"addToSet"),s(E,"cleanArray"),s(S,"clone"),s(A,"lookupGetter");let N=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),O=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),D=a(["#text"]),P=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),F=a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),$=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),U=o(/<%[\w\W]*|[\w\W]*%>/gm),G=o(/\${[\w\W]*}/gm),j=o(/^data-[\-\w.\u00B7-\uFFFF]/),V=o(/^aria-[\-\w]+$/),W=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q=o(/^(?:\w+script|data):/i),H=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Y=o(/^html$/i),X=o(/^[a-z][.\w]*(-[.\w]+)+$/i);var K=Object.freeze({__proto__:null,MUSTACHE_EXPR:z,ERB_EXPR:U,TMPLIT_EXPR:G,DATA_ATTR:j,ARIA_ATTR:V,IS_ALLOWED_URI:W,IS_SCRIPT_OR_DATA:q,ATTR_WHITESPACE:H,DOCTYPE_NAME:Y,CUSTOM_ELEMENT:X});let Z=1,Q=3,J=7,ee=8,te=9,re=s((function(){return typeof window>"u"?null:window}),"getGlobal"),ne=s((function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let r=null,n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(r=t.getAttribute(n));let i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}}),"_createTrustedTypesPolicy");function ie(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re(),r=s((e=>ie(e)),"DOMPurify");if(r.version="3.1.6",r.removed=[],!t||!t.document||t.document.nodeType!==te)return r.isSupported=!1,r;let{document:n}=t,i=n,o=i.currentScript,{DocumentFragment:u,HTMLTemplateElement:c,Node:w,Element:k,NodeFilter:E,NamedNodeMap:z=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:U,DOMParser:G,trustedTypes:j}=t,V=k.prototype,q=A(V,"cloneNode"),H=A(V,"remove"),X=A(V,"nextSibling"),ae=A(V,"childNodes"),oe=A(V,"parentNode");if("function"==typeof c){let e=n.createElement("template");e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let se,le="",{implementation:ue,createNodeIterator:ce,createDocumentFragment:he,getElementsByTagName:de}=n,{importNode:fe}=i,pe={};r.isSupported="function"==typeof e&&"function"==typeof oe&&ue&&void 0!==ue.createHTMLDocument;let{MUSTACHE_EXPR:ge,ERB_EXPR:me,TMPLIT_EXPR:ye,DATA_ATTR:ve,ARIA_ATTR:xe,IS_SCRIPT_OR_DATA:be,ATTR_WHITESPACE:Ce,CUSTOM_ELEMENT:Te}=K,{IS_ALLOWED_URI:we}=K,ke=null,_e=_({},[...N,...R,...L,...M,...D]),Ee=null,Se=_({},[...P,...F,...B,...$]),Ae=Object.seal(l(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ne=null,Re=null,Le=!0,Ie=!0,Me=!1,Oe=!0,De=!1,Pe=!0,Fe=!1,Be=!1,$e=!1,ze=!1,Ue=!1,Ge=!1,je=!0,Ve=!1,We=!0,qe=!1,He={},Ye=null,Xe=_({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ke=null,Ze=_({},["audio","video","img","source","image","track"]),Qe=null,Je=_({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",rt="http://www.w3.org/1999/xhtml",nt=rt,it=!1,at=null,ot=_({},[et,tt,rt],g),st=null,lt=["application/xhtml+xml","text/html"],ut=null,ct=null,ht=n.createElement("form"),dt=s((function(e){return e instanceof RegExp||e instanceof Function}),"isRegexOrFunction"),ft=s((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ct||ct!==e){if((!e||"object"!=typeof e)&&(e={}),e=S(e),st=-1===lt.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,ut="application/xhtml+xml"===st?g:p,ke=b(e,"ALLOWED_TAGS")?_({},e.ALLOWED_TAGS,ut):_e,Ee=b(e,"ALLOWED_ATTR")?_({},e.ALLOWED_ATTR,ut):Se,at=b(e,"ALLOWED_NAMESPACES")?_({},e.ALLOWED_NAMESPACES,g):ot,Qe=b(e,"ADD_URI_SAFE_ATTR")?_(S(Je),e.ADD_URI_SAFE_ATTR,ut):Je,Ke=b(e,"ADD_DATA_URI_TAGS")?_(S(Ze),e.ADD_DATA_URI_TAGS,ut):Ze,Ye=b(e,"FORBID_CONTENTS")?_({},e.FORBID_CONTENTS,ut):Xe,Ne=b(e,"FORBID_TAGS")?_({},e.FORBID_TAGS,ut):{},Re=b(e,"FORBID_ATTR")?_({},e.FORBID_ATTR,ut):{},He=!!b(e,"USE_PROFILES")&&e.USE_PROFILES,Le=!1!==e.ALLOW_ARIA_ATTR,Ie=!1!==e.ALLOW_DATA_ATTR,Me=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Oe=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,De=e.SAFE_FOR_TEMPLATES||!1,Pe=!1!==e.SAFE_FOR_XML,Fe=e.WHOLE_DOCUMENT||!1,ze=e.RETURN_DOM||!1,Ue=e.RETURN_DOM_FRAGMENT||!1,Ge=e.RETURN_TRUSTED_TYPE||!1,$e=e.FORCE_BODY||!1,je=!1!==e.SANITIZE_DOM,Ve=e.SANITIZE_NAMED_PROPS||!1,We=!1!==e.KEEP_CONTENT,qe=e.IN_PLACE||!1,we=e.ALLOWED_URI_REGEXP||W,nt=e.NAMESPACE||rt,Ae=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&dt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ae.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&dt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ae.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Ae.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),De&&(Ie=!1),Ue&&(ze=!0),He&&(ke=_({},D),Ee=[],!0===He.html&&(_(ke,N),_(Ee,P)),!0===He.svg&&(_(ke,R),_(Ee,F),_(Ee,$)),!0===He.svgFilters&&(_(ke,L),_(Ee,F),_(Ee,$)),!0===He.mathMl&&(_(ke,M),_(Ee,B),_(Ee,$))),e.ADD_TAGS&&(ke===_e&&(ke=S(ke)),_(ke,e.ADD_TAGS,ut)),e.ADD_ATTR&&(Ee===Se&&(Ee=S(Ee)),_(Ee,e.ADD_ATTR,ut)),e.ADD_URI_SAFE_ATTR&&_(Qe,e.ADD_URI_SAFE_ATTR,ut),e.FORBID_CONTENTS&&(Ye===Xe&&(Ye=S(Ye)),_(Ye,e.FORBID_CONTENTS,ut)),We&&(ke["#text"]=!0),Fe&&_(ke,["html","head","body"]),ke.table&&(_(ke,["tbody"]),delete Ne.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw T('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw T('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');se=e.TRUSTED_TYPES_POLICY,le=se.createHTML("")}else void 0===se&&(se=ne(j,o)),null!==se&&"string"==typeof le&&(le=se.createHTML(""));a&&a(e),ct=e}}),"_parseConfig"),pt=_({},["mi","mo","mn","ms","mtext"]),gt=_({},["foreignobject","annotation-xml"]),mt=_({},["title","style","font","a","script"]),yt=_({},[...R,...L,...I]),vt=_({},[...M,...O]),xt=s((function(e){let t=oe(e);(!t||!t.tagName)&&(t={namespaceURI:nt,tagName:"template"});let r=p(e.tagName),n=p(t.tagName);return!!at[e.namespaceURI]&&(e.namespaceURI===tt?t.namespaceURI===rt?"svg"===r:t.namespaceURI===et?"svg"===r&&("annotation-xml"===n||pt[n]):!!yt[r]:e.namespaceURI===et?t.namespaceURI===rt?"math"===r:t.namespaceURI===tt?"math"===r&&gt[n]:!!vt[r]:e.namespaceURI===rt?!(t.namespaceURI===tt&&!gt[n]||t.namespaceURI===et&&!pt[n])&&(!vt[r]&&(mt[r]||!yt[r])):!("application/xhtml+xml"!==st||!at[e.namespaceURI]))}),"_checkValidNamespace"),bt=s((function(e){f(r.removed,{element:e});try{oe(e).removeChild(e)}catch{H(e)}}),"_forceRemove"),Ct=s((function(e,t){try{f(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch{f(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Ee[e])if(ze||Ue)try{bt(t)}catch{}else try{t.setAttribute(e,"")}catch{}}),"_removeAttribute"),Tt=s((function(e){let t=null,r=null;if($e)e="<remove></remove>"+e;else{let t=m(e,/^[\r\n\t ]+/);r=t&&t[0]}"application/xhtml+xml"===st&&nt===rt&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");let i=se?se.createHTML(e):e;if(nt===rt)try{t=(new G).parseFromString(i,st)}catch{}if(!t||!t.documentElement){t=ue.createDocument(nt,"template",null);try{t.documentElement.innerHTML=it?le:i}catch{}}let a=t.body||t.documentElement;return e&&r&&a.insertBefore(n.createTextNode(r),a.childNodes[0]||null),nt===rt?de.call(t,Fe?"html":"body")[0]:Fe?t.documentElement:a}),"_initDocument"),wt=s((function(e){return ce.call(e.ownerDocument||e,e,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT|E.SHOW_PROCESSING_INSTRUCTION|E.SHOW_CDATA_SECTION,null)}),"_createNodeIterator"),kt=s((function(e){return e instanceof U&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof z)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)}),"_isClobbered"),_t=s((function(e){return"function"==typeof w&&e instanceof w}),"_isNode"),Et=s((function(e,t,n){pe[e]&&h(pe[e],(e=>{e.call(r,t,n,ct)}))}),"_executeHook"),St=s((function(e){let t=null;if(Et("beforeSanitizeElements",e,null),kt(e))return bt(e),!0;let n=ut(e.nodeName);if(Et("uponSanitizeElement",e,{tagName:n,allowedTags:ke}),e.hasChildNodes()&&!_t(e.firstElementChild)&&C(/<[/\w]/g,e.innerHTML)&&C(/<[/\w]/g,e.textContent)||e.nodeType===J||Pe&&e.nodeType===ee&&C(/<[/\w]/g,e.data))return bt(e),!0;if(!ke[n]||Ne[n]){if(!Ne[n]&&Nt(n)&&(Ae.tagNameCheck instanceof RegExp&&C(Ae.tagNameCheck,n)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(n)))return!1;if(We&&!Ye[n]){let t=oe(e)||e.parentNode,r=ae(e)||e.childNodes;if(r&&t){for(let n=r.length-1;n>=0;--n){let i=q(r[n],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,X(e))}}}return bt(e),!0}return e instanceof k&&!xt(e)||("noscript"===n||"noembed"===n||"noframes"===n)&&C(/<\/no(script|embed|frames)/i,e.innerHTML)?(bt(e),!0):(De&&e.nodeType===Q&&(t=e.textContent,h([ge,me,ye],(e=>{t=y(t,e," ")})),e.textContent!==t&&(f(r.removed,{element:e.cloneNode()}),e.textContent=t)),Et("afterSanitizeElements",e,null),!1)}),"_sanitizeElements"),At=s((function(e,t,r){if(je&&("id"===t||"name"===t)&&(r in n||r in ht))return!1;if((!Ie||Re[t]||!C(ve,t))&&(!Le||!C(xe,t)))if(!Ee[t]||Re[t]){if(!(Nt(e)&&(Ae.tagNameCheck instanceof RegExp&&C(Ae.tagNameCheck,e)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(e))&&(Ae.attributeNameCheck instanceof RegExp&&C(Ae.attributeNameCheck,t)||Ae.attributeNameCheck instanceof Function&&Ae.attributeNameCheck(t))||"is"===t&&Ae.allowCustomizedBuiltInElements&&(Ae.tagNameCheck instanceof RegExp&&C(Ae.tagNameCheck,r)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(r))))return!1}else if(!Qe[t]&&!C(we,y(r,Ce,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(r,"data:")||!Ke[e])&&(!Me||C(be,y(r,Ce,"")))&&r)return!1;return!0}),"_isValidAttribute"),Nt=s((function(e){return"annotation-xml"!==e&&m(e,Te)}),"_isBasicCustomElement"),Rt=s((function(e){Et("beforeSanitizeAttributes",e,null);let{attributes:t}=e;if(!t)return;let n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ee},i=t.length;for(;i--;){let a=t[i],{name:o,namespaceURI:s,value:l}=a,u=ut(o),c="value"===o?l:x(l);if(n.attrName=u,n.attrValue=c,n.keepAttr=!0,n.forceKeepAttr=void 0,Et("uponSanitizeAttribute",e,n),c=n.attrValue,Pe&&C(/((--!?|])>)|<\/(style|title)/i,c)){Ct(o,e);continue}if(n.forceKeepAttr||(Ct(o,e),!n.keepAttr))continue;if(!Oe&&C(/\/>/i,c)){Ct(o,e);continue}De&&h([ge,me,ye],(e=>{c=y(c,e," ")}));let f=ut(e.nodeName);if(At(f,u,c)){if(Ve&&("id"===u||"name"===u)&&(Ct(o,e),c="user-content-"+c),se&&"object"==typeof j&&"function"==typeof j.getAttributeType&&!s)switch(j.getAttributeType(f,u)){case"TrustedHTML":c=se.createHTML(c);break;case"TrustedScriptURL":c=se.createScriptURL(c)}try{s?e.setAttributeNS(s,o,c):e.setAttribute(o,c),kt(e)?bt(e):d(r.removed)}catch{}}}Et("afterSanitizeAttributes",e,null)}),"_sanitizeAttributes"),Lt=s((function e(t){let r=null,n=wt(t);for(Et("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)Et("uponSanitizeShadowNode",r,null),!St(r)&&(r.content instanceof u&&e(r.content),Rt(r));Et("afterSanitizeShadowDOM",t,null)}),"_sanitizeShadowDOM");return r.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,a=null,o=null,s=null;if(it=!e,it&&(e="\x3c!--\x3e"),"string"!=typeof e&&!_t(e)){if("function"!=typeof e.toString)throw T("toString is not a function");if("string"!=typeof(e=e.toString()))throw T("dirty is not a string, aborting")}if(!r.isSupported)return e;if(Be||ft(t),r.removed=[],"string"==typeof e&&(qe=!1),qe){if(e.nodeName){let t=ut(e.nodeName);if(!ke[t]||Ne[t])throw T("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof w)n=Tt("\x3c!----\x3e"),a=n.ownerDocument.importNode(e,!0),a.nodeType===Z&&"BODY"===a.nodeName||"HTML"===a.nodeName?n=a:n.appendChild(a);else{if(!ze&&!De&&!Fe&&-1===e.indexOf("<"))return se&&Ge?se.createHTML(e):e;if(n=Tt(e),!n)return ze?null:Ge?le:""}n&&$e&&bt(n.firstChild);let l=wt(qe?e:n);for(;o=l.nextNode();)St(o)||(o.content instanceof u&&Lt(o.content),Rt(o));if(qe)return e;if(ze){if(Ue)for(s=he.call(n.ownerDocument);n.firstChild;)s.appendChild(n.firstChild);else s=n;return(Ee.shadowroot||Ee.shadowrootmode)&&(s=fe.call(i,s,!0)),s}let c=Fe?n.outerHTML:n.innerHTML;return Fe&&ke["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&C(Y,n.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+c),De&&h([ge,me,ye],(e=>{c=y(c,e," ")})),se&&Ge?se.createHTML(c):c},r.setConfig=function(){ft(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Be=!0},r.clearConfig=function(){ct=null,Be=!1},r.isValidAttribute=function(e,t,r){ct||ft({});let n=ut(e),i=ut(t);return At(n,i,r)},r.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],f(pe[e],t))},r.removeHook=function(e){if(pe[e])return d(pe[e])},r.removeHooks=function(e){pe[e]&&(pe[e]=[])},r.removeAllHooks=function(){pe={}},r}return s(ie,"createDOMPurify"),ie()}))})),ez=d(Q$(),1),tz={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},rz={trace:s(((...e)=>{}),"trace"),debug:s(((...e)=>{}),"debug"),info:s(((...e)=>{}),"info"),warn:s(((...e)=>{}),"warn"),error:s(((...e)=>{}),"error"),fatal:s(((...e)=>{}),"fatal")},nz=s((function(e="fatal"){let t=tz.fatal;"string"==typeof e?e.toLowerCase()in tz&&(t=tz[e]):"number"==typeof e&&(t=e),rz.trace=()=>{},rz.debug=()=>{},rz.info=()=>{},rz.warn=()=>{},rz.error=()=>{},rz.fatal=()=>{},t<=tz.fatal&&(rz.fatal=console.error?console.error.bind(console,iz("FATAL"),"color: orange"):console.log.bind(console,"[35m",iz("FATAL"))),t<=tz.error&&(rz.error=console.error?console.error.bind(console,iz("ERROR"),"color: orange"):console.log.bind(console,"[31m",iz("ERROR"))),t<=tz.warn&&(rz.warn=console.warn?console.warn.bind(console,iz("WARN"),"color: orange"):console.log.bind(console,"[33m",iz("WARN"))),t<=tz.info&&(rz.info=console.info?console.info.bind(console,iz("INFO"),"color: lightblue"):console.log.bind(console,"[34m",iz("INFO"))),t<=tz.debug&&(rz.debug=console.debug?console.debug.bind(console,iz("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",iz("DEBUG"))),t<=tz.trace&&(rz.trace=console.debug?console.debug.bind(console,iz("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",iz("TRACE")))}),"setLogLevel"),iz=s((e=>`%c${(0,ez.default)().format("ss.SSS")} : ${e} : `),"format"),az=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,oz=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,sz=/\s*%%.*\n/gm,lz=class extends Error{static{s(this,"UnknownDiagramError")}constructor(e){super(e),this.name="UnknownDiagramError"}},uz={},cz=s((function(e,t){e=e.replace(az,"").replace(oz,"").replace(sz,"\n");for(let[r,{detector:n}]of Object.entries(uz))if(n(e,t))return r;throw new lz(`No diagram type detected matching given configuration for text: ${e}`)}),"detectType");s(((...e)=>{for(let{id:t,detector:r,loader:n}of e)hz(t,r,n)}),"registerLazyLoadedDiagrams");var hz=s(((e,t,r)=>{uz[e]&&rz.warn(`Detector with key ${e} already exists. Overwriting.`),uz[e]={detector:t,loader:r},rz.debug(`Detector with key ${e} added${r?" with loader":""}`)}),"addDetector");s((e=>uz[e].loader),"getDiagramLoader");var dz=s(((e,t,{depth:r=2,clobber:n=!1}={})=>{let i={depth:r,clobber:n};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach((t=>dz(e,t,i))),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach((t=>{e.includes(t)||e.push(t)})),e):void 0===e||r<=0?null!=e&&"object"==typeof e&&"object"==typeof t?Object.assign(e,t):t:(void 0!==t&&"object"==typeof e&&"object"==typeof t&&Object.keys(t).forEach((i=>{"object"!=typeof t[i]||void 0!==e[i]&&"object"!=typeof e[i]?(n||"object"!=typeof e[i]&&"object"!=typeof t[i])&&(e[i]=t[i]):(void 0===e[i]&&(e[i]=Array.isArray(t[i])?[]:{}),e[i]=dz(e[i],t[i],{depth:r-1,clobber:n}))})),e)}),"assignWithDepth"),fz=dz,pz={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:s((e=>e>=255?255:e<0?0:e),"r"),g:s((e=>e>=255?255:e<0?0:e),"g"),b:s((e=>e>=255?255:e<0?0:e),"b"),h:s((e=>e%360),"h"),s:s((e=>e>=100?100:e<0?0:e),"s"),l:s((e=>e>=100?100:e<0?0:e),"l"),a:s((e=>e>=1?1:e<0?0:e),"a")},toLinear:s((e=>{let t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92}),"toLinear"),hue2rgb:s(((e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?e+6*(t-e)*r:r<.5?t:r<.6666666666666666?e+(t-e)*(.6666666666666666-r)*6:e)),"hue2rgb"),hsl2rgb:s((({h:e,s:t,l:r},n)=>{if(!t)return 2.55*r;e/=360,t/=100;let i=(r/=100)<.5?r*(1+t):r+t-r*t,a=2*r-i;switch(n){case"r":return 255*pz.hue2rgb(a,i,e+.3333333333333333);case"g":return 255*pz.hue2rgb(a,i,e);case"b":return 255*pz.hue2rgb(a,i,e-.3333333333333333)}}),"hsl2rgb"),rgb2hsl:s((({r:e,g:t,b:r},n)=>{e/=255,t/=255,r/=255;let i=Math.max(e,t,r),a=Math.min(e,t,r),o=(i+a)/2;if("l"===n)return 100*o;if(i===a)return 0;let s=i-a;if("s"===n)return 100*(o>.5?s/(2-i-a):s/(i+a));switch(i){case e:return 60*((t-r)/s+(t<r?6:0));case t:return 60*((r-e)/s+2);case r:return 60*((e-t)/s+4);default:return-1}}),"rgb2hsl")},gz=pz,mz={clamp:s(((e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e))),"clamp"),round:s((e=>Math.round(1e10*e)/1e10),"round")},yz=mz,vz={dec2hex:s((e=>{let t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}),"dec2hex")},xz={channel:gz,lang:yz,unit:vz},bz={};for(let e=0;e<=255;e++)bz[e]=xz.unit.dec2hex(e);var Cz=0,Tz=1,wz=2,kz=class{static{s(this,"Type")}constructor(){this.type=Cz}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=Cz}is(e){return this.type===e}},_z=kz,Ez=class{static{s(this,"Channels")}constructor(e,t){this.color=t,this.changed=!1,this.data=e,this.type=new _z}set(e,t){return this.color=t,this.changed=!1,this.data=e,this.type.type=Cz,this}_ensureHSL(){let e=this.data,{h:t,s:r,l:n}=e;void 0===t&&(e.h=xz.channel.rgb2hsl(e,"h")),void 0===r&&(e.s=xz.channel.rgb2hsl(e,"s")),void 0===n&&(e.l=xz.channel.rgb2hsl(e,"l"))}_ensureRGB(){let e=this.data,{r:t,g:r,b:n}=e;void 0===t&&(e.r=xz.channel.hsl2rgb(e,"r")),void 0===r&&(e.g=xz.channel.hsl2rgb(e,"g")),void 0===n&&(e.b=xz.channel.hsl2rgb(e,"b"))}get r(){let e=this.data,t=e.r;return this.type.is(wz)||void 0===t?(this._ensureHSL(),xz.channel.hsl2rgb(e,"r")):t}get g(){let e=this.data,t=e.g;return this.type.is(wz)||void 0===t?(this._ensureHSL(),xz.channel.hsl2rgb(e,"g")):t}get b(){let e=this.data,t=e.b;return this.type.is(wz)||void 0===t?(this._ensureHSL(),xz.channel.hsl2rgb(e,"b")):t}get h(){let e=this.data,t=e.h;return this.type.is(Tz)||void 0===t?(this._ensureRGB(),xz.channel.rgb2hsl(e,"h")):t}get s(){let e=this.data,t=e.s;return this.type.is(Tz)||void 0===t?(this._ensureRGB(),xz.channel.rgb2hsl(e,"s")):t}get l(){let e=this.data,t=e.l;return this.type.is(Tz)||void 0===t?(this._ensureRGB(),xz.channel.rgb2hsl(e,"l")):t}get a(){return this.data.a}set r(e){this.type.set(Tz),this.changed=!0,this.data.r=e}set g(e){this.type.set(Tz),this.changed=!0,this.data.g=e}set b(e){this.type.set(Tz),this.changed=!0,this.data.b=e}set h(e){this.type.set(wz),this.changed=!0,this.data.h=e}set s(e){this.type.set(wz),this.changed=!0,this.data.s=e}set l(e){this.type.set(wz),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}},Sz=new Ez({r:0,g:0,b:0,a:0},"transparent"),Az={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:s((e=>{if(35!==e.charCodeAt(0))return;let t=e.match(Az.re);if(!t)return;let r=t[1],n=parseInt(r,16),i=r.length,a=i%4==0,o=i>4,s=o?1:17,l=o?8:4,u=a?0:-1,c=o?255:15;return Sz.set({r:(n>>l*(u+3)&c)*s,g:(n>>l*(u+2)&c)*s,b:(n>>l*(u+1)&c)*s,a:a?(n&c)*s/255:1},e)}),"parse"),stringify:s((e=>{let{r:t,g:r,b:n,a:i}=e;return i<1?`#${bz[Math.round(t)]}${bz[Math.round(r)]}${bz[Math.round(n)]}${bz[Math.round(255*i)]}`:`#${bz[Math.round(t)]}${bz[Math.round(r)]}${bz[Math.round(n)]}`}),"stringify")},Nz=Az,Rz={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:s((e=>{let t=e.match(Rz.hueRe);if(t){let[,e,r]=t;switch(r){case"grad":return xz.channel.clamp.h(.9*parseFloat(e));case"rad":return xz.channel.clamp.h(180*parseFloat(e)/Math.PI);case"turn":return xz.channel.clamp.h(360*parseFloat(e))}}return xz.channel.clamp.h(parseFloat(e))}),"_hue2deg"),parse:s((e=>{let t=e.charCodeAt(0);if(104!==t&&72!==t)return;let r=e.match(Rz.re);if(!r)return;let[,n,i,a,o,s]=r;return Sz.set({h:Rz._hue2deg(n),s:xz.channel.clamp.s(parseFloat(i)),l:xz.channel.clamp.l(parseFloat(a)),a:o?xz.channel.clamp.a(s?parseFloat(o)/100:parseFloat(o)):1},e)}),"parse"),stringify:s((e=>{let{h:t,s:r,l:n,a:i}=e;return i<1?`hsla(${xz.lang.round(t)}, ${xz.lang.round(r)}%, ${xz.lang.round(n)}%, ${i})`:`hsl(${xz.lang.round(t)}, ${xz.lang.round(r)}%, ${xz.lang.round(n)}%)`}),"stringify")},Lz=Rz,Iz={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:s((e=>{e=e.toLowerCase();let t=Iz.colors[e];if(t)return Nz.parse(t)}),"parse"),stringify:s((e=>{let t=Nz.stringify(e);for(let e in Iz.colors)if(Iz.colors[e]===t)return e}),"stringify")},Mz=Iz,Oz={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:s((e=>{let t=e.charCodeAt(0);if(114!==t&&82!==t)return;let r=e.match(Oz.re);if(!r)return;let[,n,i,a,o,s,l,u,c]=r;return Sz.set({r:xz.channel.clamp.r(i?2.55*parseFloat(n):parseFloat(n)),g:xz.channel.clamp.g(o?2.55*parseFloat(a):parseFloat(a)),b:xz.channel.clamp.b(l?2.55*parseFloat(s):parseFloat(s)),a:u?xz.channel.clamp.a(c?parseFloat(u)/100:parseFloat(u)):1},e)}),"parse"),stringify:s((e=>{let{r:t,g:r,b:n,a:i}=e;return i<1?`rgba(${xz.lang.round(t)}, ${xz.lang.round(r)}, ${xz.lang.round(n)}, ${xz.lang.round(i)})`:`rgb(${xz.lang.round(t)}, ${xz.lang.round(r)}, ${xz.lang.round(n)})`}),"stringify")},Dz=Oz,Pz={format:{keyword:Mz,hex:Nz,rgb:Dz,rgba:Dz,hsl:Lz,hsla:Lz},parse:s((e=>{if("string"!=typeof e)return e;let t=Nz.parse(e)||Dz.parse(e)||Lz.parse(e)||Mz.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)}),"parse"),stringify:s((e=>!e.changed&&e.color?e.color:e.type.is(wz)||void 0===e.data.r?Lz.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Dz.stringify(e):Nz.stringify(e)),"stringify")},Fz=Pz,Bz=s(((e,t)=>{let r=Fz.parse(e);for(let e in t)r[e]=xz.channel.clamp[e](t[e]);return Fz.stringify(r)}),"change"),$z=Bz,zz=s(((e,t,r=0,n=1)=>{if("number"!=typeof e)return $z(e,{a:t});let i=Sz.set({r:xz.channel.clamp.r(e),g:xz.channel.clamp.g(t),b:xz.channel.clamp.b(r),a:xz.channel.clamp.a(n)});return Fz.stringify(i)}),"rgba"),Uz=zz;s(((e,t)=>xz.lang.round(Fz.parse(e)[t])),"channel");var Gz,jz=s((e=>{let{r:t,g:r,b:n}=Fz.parse(e),i=.2126*xz.channel.toLinear(t)+.7152*xz.channel.toLinear(r)+.0722*xz.channel.toLinear(n);return xz.lang.round(i)}),"luminance"),Vz=jz,Wz=s((e=>Vz(e)>=.5),"isLight"),qz=Wz,Hz=s((e=>!qz(e)),"isDark"),Yz=Hz,Xz=s(((e,t,r)=>{let n=Fz.parse(e),i=n[t],a=xz.channel.clamp[t](i+r);return i!==a&&(n[t]=a),Fz.stringify(n)}),"adjustChannel"),Kz=Xz,Zz=s(((e,t)=>Kz(e,"l",t)),"lighten"),Qz=Zz,Jz=s(((e,t)=>Kz(e,"l",-t)),"darken"),eU=Jz,tU=s(((e,t)=>{let r=Fz.parse(e),n={};for(let e in t)t[e]&&(n[e]=r[e]+t[e]);return $z(e,n)}),"adjust"),rU=tU,nU=s(((e,t,r=50)=>{let{r:n,g:i,b:a,a:o}=Fz.parse(e),{r:s,g:l,b:u,a:c}=Fz.parse(t),h=r/100,d=2*h-1,f=o-c,p=((d*f==-1?d:(d+f)/(1+d*f))+1)/2,g=1-p;return Uz(n*p+s*g,i*p+l*g,a*p+u*g,o*h+c*(1-h))}),"mix"),iU=nU,aU=s(((e,t=100)=>{let r=Fz.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,iU(r,e,t)}),"invert"),oU=aU,sU="#ffffff",lU="#f2f2f2",uU=s(((e,t)=>rU(e,t?{s:-40,l:10}:{s:-40,l:-10})),"mkBorder"),cU=class{static{s(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||rU(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||rU(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||uU(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||uU(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||uU(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||uU(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||oU(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||oU(this.tertiaryColor),this.lineColor=this.lineColor||oU(this.background),this.arrowheadColor=this.arrowheadColor||oU(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?eU(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||eU(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||oU(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Qz(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||rU(this.primaryColor,{h:30}),this.cScale4=this.cScale4||rU(this.primaryColor,{h:60}),this.cScale5=this.cScale5||rU(this.primaryColor,{h:90}),this.cScale6=this.cScale6||rU(this.primaryColor,{h:120}),this.cScale7=this.cScale7||rU(this.primaryColor,{h:150}),this.cScale8=this.cScale8||rU(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||rU(this.primaryColor,{h:270}),this.cScale10=this.cScale10||rU(this.primaryColor,{h:300}),this.cScale11=this.cScale11||rU(this.primaryColor,{h:330}),this.darkMode)for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=eU(this["cScale"+e],75);else for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=eU(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||oU(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||Qz(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||eU(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;let e=this.darkMode?-4:-1;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||rU(this.mainBkg,{h:180,s:-15,l:e*(5+3*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||rU(this.mainBkg,{h:180,s:-15,l:e*(8+3*t)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||rU(this.primaryColor,{h:64}),this.fillType3=this.fillType3||rU(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||rU(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||rU(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||rU(this.primaryColor,{h:128}),this.fillType7=this.fillType7||rU(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||rU(this.primaryColor,{l:-10}),this.pie5=this.pie5||rU(this.secondaryColor,{l:-10}),this.pie6=this.pie6||rU(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||rU(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||rU(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||rU(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||rU(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||rU(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||rU(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||rU(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||rU(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||rU(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||rU(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||rU(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||rU(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Yz(this.quadrant1Fill)?Qz(this.quadrant1Fill):eU(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?eU(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||rU(this.primaryColor,{h:-30}),this.git4=this.git4||rU(this.primaryColor,{h:-60}),this.git5=this.git5||rU(this.primaryColor,{h:-90}),this.git6=this.git6||rU(this.primaryColor,{h:60}),this.git7=this.git7||rU(this.primaryColor,{h:120}),this.darkMode?(this.git0=Qz(this.git0,25),this.git1=Qz(this.git1,25),this.git2=Qz(this.git2,25),this.git3=Qz(this.git3,25),this.git4=Qz(this.git4,25),this.git5=Qz(this.git5,25),this.git6=Qz(this.git6,25),this.git7=Qz(this.git7,25)):(this.git0=eU(this.git0,25),this.git1=eU(this.git1,25),this.git2=eU(this.git2,25),this.git3=eU(this.git3,25),this.git4=eU(this.git4,25),this.git5=eU(this.git5,25),this.git6=eU(this.git6,25),this.git7=eU(this.git7,25)),this.gitInv0=this.gitInv0||oU(this.git0),this.gitInv1=this.gitInv1||oU(this.git1),this.gitInv2=this.gitInv2||oU(this.git2),this.gitInv3=this.gitInv3||oU(this.git3),this.gitInv4=this.gitInv4||oU(this.git4),this.gitInv5=this.gitInv5||oU(this.git5),this.gitInv6=this.gitInv6||oU(this.git6),this.gitInv7=this.gitInv7||oU(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||sU,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lU}calculate(e){if("object"!=typeof e)return void this.updateColors();let t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}},hU=s((e=>{let t=new cU;return t.calculate(e),t}),"getThemeVariables"),dU=class{static{s(this,"Theme")}constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Qz(this.primaryColor,16),this.tertiaryColor=rU(this.primaryColor,{h:-160}),this.primaryBorderColor=oU(this.background),this.secondaryBorderColor=uU(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=uU(this.tertiaryColor,this.darkMode),this.primaryTextColor=oU(this.primaryColor),this.secondaryTextColor=oU(this.secondaryColor),this.tertiaryTextColor=oU(this.tertiaryColor),this.lineColor=oU(this.background),this.textColor=oU(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Qz(oU("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=Uz(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=eU("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=eU(this.sectionBkgColor,10),this.taskBorderColor=Uz(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Uz(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=Qz(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Qz(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Qz(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=rU(this.primaryColor,{h:64}),this.fillType3=rU(this.secondaryColor,{h:64}),this.fillType4=rU(this.primaryColor,{h:-64}),this.fillType5=rU(this.secondaryColor,{h:-64}),this.fillType6=rU(this.primaryColor,{h:128}),this.fillType7=rU(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||rU(this.primaryColor,{h:30}),this.cScale4=this.cScale4||rU(this.primaryColor,{h:60}),this.cScale5=this.cScale5||rU(this.primaryColor,{h:90}),this.cScale6=this.cScale6||rU(this.primaryColor,{h:120}),this.cScale7=this.cScale7||rU(this.primaryColor,{h:150}),this.cScale8=this.cScale8||rU(this.primaryColor,{h:210}),this.cScale9=this.cScale9||rU(this.primaryColor,{h:270}),this.cScale10=this.cScale10||rU(this.primaryColor,{h:300}),this.cScale11=this.cScale11||rU(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||oU(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||Qz(this["cScale"+e],10);for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||rU(this.mainBkg,{h:30,s:-30,l:-(4*e-10)}),this["surfacePeer"+e]=this["surfacePeer"+e]||rU(this.mainBkg,{h:30,s:-30,l:-(4*e-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||rU(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||rU(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||rU(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||rU(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||rU(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||rU(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Yz(this.quadrant1Fill)?Qz(this.quadrant1Fill):eU(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?eU(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Qz(this.secondaryColor,20),this.git1=Qz(this.pie2||this.secondaryColor,20),this.git2=Qz(this.pie3||this.tertiaryColor,20),this.git3=Qz(this.pie4||rU(this.primaryColor,{h:-30}),20),this.git4=Qz(this.pie5||rU(this.primaryColor,{h:-60}),20),this.git5=Qz(this.pie6||rU(this.primaryColor,{h:-90}),10),this.git6=Qz(this.pie7||rU(this.primaryColor,{h:60}),10),this.git7=Qz(this.pie8||rU(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||oU(this.git0),this.gitInv1=this.gitInv1||oU(this.git1),this.gitInv2=this.gitInv2||oU(this.git2),this.gitInv3=this.gitInv3||oU(this.git3),this.gitInv4=this.gitInv4||oU(this.git4),this.gitInv5=this.gitInv5||oU(this.git5),this.gitInv6=this.gitInv6||oU(this.git6),this.gitInv7=this.gitInv7||oU(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||oU(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||oU(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Qz(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Qz(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if("object"!=typeof e)return void this.updateColors();let t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}},fU=s((e=>{let t=new dU;return t.calculate(e),t}),"getThemeVariables"),pU=class{static{s(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=rU(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=rU(this.primaryColor,{h:-160}),this.primaryBorderColor=uU(this.primaryColor,this.darkMode),this.secondaryBorderColor=uU(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=uU(this.tertiaryColor,this.darkMode),this.primaryTextColor=oU(this.primaryColor),this.secondaryTextColor=oU(this.secondaryColor),this.tertiaryTextColor=oU(this.tertiaryColor),this.lineColor=oU(this.background),this.textColor=oU(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Uz(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||rU(this.primaryColor,{h:30}),this.cScale4=this.cScale4||rU(this.primaryColor,{h:60}),this.cScale5=this.cScale5||rU(this.primaryColor,{h:90}),this.cScale6=this.cScale6||rU(this.primaryColor,{h:120}),this.cScale7=this.cScale7||rU(this.primaryColor,{h:150}),this.cScale8=this.cScale8||rU(this.primaryColor,{h:210}),this.cScale9=this.cScale9||rU(this.primaryColor,{h:270}),this.cScale10=this.cScale10||rU(this.primaryColor,{h:300}),this.cScale11=this.cScale11||rU(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||eU(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||eU(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=eU(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||eU(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||rU(this["cScale"+e],{h:180});for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||rU(this.mainBkg,{h:30,l:-(5+5*e)}),this["surfacePeer"+e]=this["surfacePeer"+e]||rU(this.mainBkg,{h:30,l:-(7+5*e)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||oU(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||oU(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Qz(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=rU(this.primaryColor,{h:64}),this.fillType3=rU(this.secondaryColor,{h:64}),this.fillType4=rU(this.primaryColor,{h:-64}),this.fillType5=rU(this.secondaryColor,{h:-64}),this.fillType6=rU(this.primaryColor,{h:128}),this.fillType7=rU(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||rU(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||rU(this.primaryColor,{l:-10}),this.pie5=this.pie5||rU(this.secondaryColor,{l:-30}),this.pie6=this.pie6||rU(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||rU(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||rU(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||rU(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||rU(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||rU(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||rU(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||rU(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||rU(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||rU(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||rU(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||rU(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||rU(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Yz(this.quadrant1Fill)?Qz(this.quadrant1Fill):eU(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||rU(this.primaryColor,{h:-30}),this.git4=this.git4||rU(this.primaryColor,{h:-60}),this.git5=this.git5||rU(this.primaryColor,{h:-90}),this.git6=this.git6||rU(this.primaryColor,{h:60}),this.git7=this.git7||rU(this.primaryColor,{h:120}),this.darkMode?(this.git0=Qz(this.git0,25),this.git1=Qz(this.git1,25),this.git2=Qz(this.git2,25),this.git3=Qz(this.git3,25),this.git4=Qz(this.git4,25),this.git5=Qz(this.git5,25),this.git6=Qz(this.git6,25),this.git7=Qz(this.git7,25)):(this.git0=eU(this.git0,25),this.git1=eU(this.git1,25),this.git2=eU(this.git2,25),this.git3=eU(this.git3,25),this.git4=eU(this.git4,25),this.git5=eU(this.git5,25),this.git6=eU(this.git6,25),this.git7=eU(this.git7,25)),this.gitInv0=this.gitInv0||eU(oU(this.git0),25),this.gitInv1=this.gitInv1||oU(this.git1),this.gitInv2=this.gitInv2||oU(this.git2),this.gitInv3=this.gitInv3||oU(this.git3),this.gitInv4=this.gitInv4||oU(this.git4),this.gitInv5=this.gitInv5||oU(this.git5),this.gitInv6=this.gitInv6||oU(this.git6),this.gitInv7=this.gitInv7||oU(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||oU(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||oU(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||sU,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lU}calculate(e){if("object"!=typeof e)return void this.updateColors();let t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}},gU=s((e=>{let t=new pU;return t.calculate(e),t}),"getThemeVariables"),mU=class{static{s(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Qz("#cde498",10),this.primaryBorderColor=uU(this.primaryColor,this.darkMode),this.secondaryBorderColor=uU(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=uU(this.tertiaryColor,this.darkMode),this.primaryTextColor=oU(this.primaryColor),this.secondaryTextColor=oU(this.secondaryColor),this.tertiaryTextColor=oU(this.primaryColor),this.lineColor=oU(this.background),this.textColor=oU(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=eU(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||rU(this.primaryColor,{h:30}),this.cScale4=this.cScale4||rU(this.primaryColor,{h:60}),this.cScale5=this.cScale5||rU(this.primaryColor,{h:90}),this.cScale6=this.cScale6||rU(this.primaryColor,{h:120}),this.cScale7=this.cScale7||rU(this.primaryColor,{h:150}),this.cScale8=this.cScale8||rU(this.primaryColor,{h:210}),this.cScale9=this.cScale9||rU(this.primaryColor,{h:270}),this.cScale10=this.cScale10||rU(this.primaryColor,{h:300}),this.cScale11=this.cScale11||rU(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||eU(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||eU(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=eU(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||eU(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||rU(this["cScale"+e],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||rU(this.mainBkg,{h:30,s:-30,l:-(5+5*e)}),this["surfacePeer"+e]=this["surfacePeer"+e]||rU(this.mainBkg,{h:30,s:-30,l:-(8+5*e)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=rU(this.primaryColor,{h:64}),this.fillType3=rU(this.secondaryColor,{h:64}),this.fillType4=rU(this.primaryColor,{h:-64}),this.fillType5=rU(this.secondaryColor,{h:-64}),this.fillType6=rU(this.primaryColor,{h:128}),this.fillType7=rU(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||rU(this.primaryColor,{l:-30}),this.pie5=this.pie5||rU(this.secondaryColor,{l:-30}),this.pie6=this.pie6||rU(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||rU(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||rU(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||rU(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||rU(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||rU(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||rU(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||rU(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||rU(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||rU(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||rU(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||rU(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||rU(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Yz(this.quadrant1Fill)?Qz(this.quadrant1Fill):eU(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||rU(this.primaryColor,{h:-30}),this.git4=this.git4||rU(this.primaryColor,{h:-60}),this.git5=this.git5||rU(this.primaryColor,{h:-90}),this.git6=this.git6||rU(this.primaryColor,{h:60}),this.git7=this.git7||rU(this.primaryColor,{h:120}),this.darkMode?(this.git0=Qz(this.git0,25),this.git1=Qz(this.git1,25),this.git2=Qz(this.git2,25),this.git3=Qz(this.git3,25),this.git4=Qz(this.git4,25),this.git5=Qz(this.git5,25),this.git6=Qz(this.git6,25),this.git7=Qz(this.git7,25)):(this.git0=eU(this.git0,25),this.git1=eU(this.git1,25),this.git2=eU(this.git2,25),this.git3=eU(this.git3,25),this.git4=eU(this.git4,25),this.git5=eU(this.git5,25),this.git6=eU(this.git6,25),this.git7=eU(this.git7,25)),this.gitInv0=this.gitInv0||oU(this.git0),this.gitInv1=this.gitInv1||oU(this.git1),this.gitInv2=this.gitInv2||oU(this.git2),this.gitInv3=this.gitInv3||oU(this.git3),this.gitInv4=this.gitInv4||oU(this.git4),this.gitInv5=this.gitInv5||oU(this.git5),this.gitInv6=this.gitInv6||oU(this.git6),this.gitInv7=this.gitInv7||oU(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||oU(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||oU(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||sU,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lU}calculate(e){if("object"!=typeof e)return void this.updateColors();let t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}},yU=s((e=>{let t=new mU;return t.calculate(e),t}),"getThemeVariables"),vU=class{static{s(this,"Theme")}constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Qz(this.contrast,55),this.background="#ffffff",this.tertiaryColor=rU(this.primaryColor,{h:-160}),this.primaryBorderColor=uU(this.primaryColor,this.darkMode),this.secondaryBorderColor=uU(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=uU(this.tertiaryColor,this.darkMode),this.primaryTextColor=oU(this.primaryColor),this.secondaryTextColor=oU(this.secondaryColor),this.tertiaryTextColor=oU(this.tertiaryColor),this.lineColor=oU(this.background),this.textColor=oU(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=Qz(this.contrast,55),this.border2=this.contrast,this.actorBorder=Qz(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||oU(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||Qz(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||eU(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||rU(this.mainBkg,{l:-(5+5*e)}),this["surfacePeer"+e]=this["surfacePeer"+e]||rU(this.mainBkg,{l:-(8+5*e)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Qz(this.contrast,30),this.sectionBkgColor2=Qz(this.contrast,30),this.taskBorderColor=eU(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Qz(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=eU(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=rU(this.primaryColor,{h:64}),this.fillType3=rU(this.secondaryColor,{h:64}),this.fillType4=rU(this.primaryColor,{h:-64}),this.fillType5=rU(this.secondaryColor,{h:-64}),this.fillType6=rU(this.primaryColor,{h:128}),this.fillType7=rU(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||rU(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||rU(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||rU(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||rU(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||rU(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||rU(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Yz(this.quadrant1Fill)?Qz(this.quadrant1Fill):eU(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=eU(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||rU(this.primaryColor,{h:-30}),this.git4=this.pie5||rU(this.primaryColor,{h:-60}),this.git5=this.pie6||rU(this.primaryColor,{h:-90}),this.git6=this.pie7||rU(this.primaryColor,{h:60}),this.git7=this.pie8||rU(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||oU(this.git0),this.gitInv1=this.gitInv1||oU(this.git1),this.gitInv2=this.gitInv2||oU(this.git2),this.gitInv3=this.gitInv3||oU(this.git3),this.gitInv4=this.gitInv4||oU(this.git4),this.gitInv5=this.gitInv5||oU(this.git5),this.gitInv6=this.gitInv6||oU(this.git6),this.gitInv7=this.gitInv7||oU(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||sU,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lU}calculate(e){if("object"!=typeof e)return void this.updateColors();let t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}},xU=s((e=>{let t=new vU;return t.calculate(e),t}),"getThemeVariables"),bU={base:{getThemeVariables:hU},dark:{getThemeVariables:fU},default:{getThemeVariables:gU},forest:{getThemeVariables:yU},neutral:{getThemeVariables:xU}},CU={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},TU={...CU,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:bU.default.getThemeVariables(),sequence:{...CU.sequence,messageFont:s((function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}),"messageFont"),noteFont:s((function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}}),"noteFont"),actorFont:s((function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}),"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...CU.gantt,tickInterval:void 0,useWidth:void 0},c4:{...CU.c4,useWidth:void 0,personFont:s((function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}}),"personFont"),external_personFont:s((function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}}),"external_personFont"),systemFont:s((function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}}),"systemFont"),external_systemFont:s((function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}}),"external_systemFont"),system_dbFont:s((function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}}),"system_dbFont"),external_system_dbFont:s((function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}}),"external_system_dbFont"),system_queueFont:s((function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}}),"system_queueFont"),external_system_queueFont:s((function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}}),"external_system_queueFont"),containerFont:s((function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}}),"containerFont"),external_containerFont:s((function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}}),"external_containerFont"),container_dbFont:s((function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}}),"container_dbFont"),external_container_dbFont:s((function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}}),"external_container_dbFont"),container_queueFont:s((function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}}),"container_queueFont"),external_container_queueFont:s((function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}}),"external_container_queueFont"),componentFont:s((function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}}),"componentFont"),external_componentFont:s((function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}}),"external_componentFont"),component_dbFont:s((function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}}),"component_dbFont"),external_component_dbFont:s((function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}}),"external_component_dbFont"),component_queueFont:s((function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}}),"component_queueFont"),external_component_queueFont:s((function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}}),"external_component_queueFont"),boundaryFont:s((function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}}),"boundaryFont"),messageFont:s((function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}),"messageFont")},pie:{...CU.pie,useWidth:984},xyChart:{...CU.xyChart,useWidth:void 0},requirement:{...CU.requirement,useWidth:void 0},packet:{...CU.packet}},wU=s(((e,t="")=>Object.keys(e).reduce(((r,n)=>Array.isArray(e[n])?r:"object"==typeof e[n]&&null!==e[n]?[...r,t+n,...wU(e[n],"")]:[...r,t+n]),[])),"keyify"),kU=new Set(wU(TU,"")),_U=TU,EU=s((e=>{if(rz.debug("sanitizeDirective called with",e),"object"==typeof e&&null!=e){if(Array.isArray(e))return void e.forEach((e=>EU(e)));for(let t of Object.keys(e)){if(rz.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!kU.has(t)||null==e[t]){rz.debug("sanitize deleting key: ",t),delete e[t];continue}if("object"==typeof e[t]){rz.debug("sanitizing object",t),EU(e[t]);continue}let r=["themeCSS","fontFamily","altFontFamily"];for(let n of r)t.includes(n)&&(rz.debug("sanitizing css option",t),e[t]=SU(e[t]))}if(e.themeVariables)for(let t of Object.keys(e.themeVariables)){let r=e.themeVariables[t];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}rz.debug("After sanitization",e)}}),"sanitizeDirective"),SU=s((e=>{let t=0,r=0;for(let n of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";"{"===n?t++:"}"===n&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e}),"sanitizeCss"),AU=Object.freeze(_U),NU=fz({},AU),RU=[],LU=fz({},AU),IU=s(((e,t)=>{let r=fz({},e),n={};for(let e of t)OU(e),n=fz(n,e);if(r=fz(r,n),n.theme&&n.theme in bU){let e=fz({},Gz),t=fz(e.themeVariables||{},n.themeVariables);r.theme&&r.theme in bU&&(r.themeVariables=bU[r.theme].getThemeVariables(t))}return BU(LU=r),LU}),"updateCurrentConfig");s((e=>(NU=fz({},AU),NU=fz(NU,e),e.theme&&bU[e.theme]&&(NU.themeVariables=bU[e.theme].getThemeVariables(e.themeVariables)),IU(NU,RU),NU)),"setSiteConfig"),s((e=>{Gz=fz({},e)}),"saveConfigFromInitialize"),s((e=>(NU=fz(NU,e),IU(NU,RU),NU)),"updateSiteConfig"),s((()=>fz({},NU)),"getSiteConfig"),s((e=>(BU(e),fz(LU,e),MU())),"setConfig");var MU=s((()=>fz({},LU)),"getConfig"),OU=s((e=>{e&&(["secure",...NU.secure??[]].forEach((t=>{Object.hasOwn(e,t)&&(rz.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])})),Object.keys(e).forEach((t=>{t.startsWith("__")&&delete e[t]})),Object.keys(e).forEach((t=>{"string"==typeof e[t]&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],"object"==typeof e[t]&&OU(e[t])})))}),"sanitize");s((e=>{EU(e),e.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),RU.push(e),IU(NU,RU)}),"addDirective"),s(((e=NU)=>{IU(e,RU=[])}),"reset");var DU={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},PU={},FU=s((e=>{PU[e]||(rz.warn(DU[e]),PU[e]=!0)}),"issueWarning"),BU=s((e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&FU("LAZY_LOAD_DEPRECATED")}),"checkConfig"),$U=d(J$(),1),zU=/<br\s*\/?>/gi,UU=s((e=>e?ZU(e).replace(/\\n/g,"#br#").split("#br#"):[""]),"getRows"),GU=(()=>{let e=!1;return()=>{e||(jU(),e=!0)}})();function jU(){let e="data-temp-href-target";$U.default.addHook("beforeSanitizeAttributes",(t=>{"A"===t.tagName&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")})),$U.default.addHook("afterSanitizeAttributes",(t=>{"A"===t.tagName&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),"_blank"===t.getAttribute("target")&&t.setAttribute("rel","noopener"))}))}s(jU,"setupDompurifyHooks");var VU=s((e=>(GU(),$U.default.sanitize(e))),"removeScript"),WU=s(((e,t)=>{if(!1!==t.flowchart?.htmlLabels){let r=t.securityLevel;"antiscript"===r||"strict"===r?e=VU(e):"loose"!==r&&(e=(e=(e=ZU(e)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),e=KU(e))}return e}),"sanitizeMore"),qU=s(((e,t)=>e&&(e=t.dompurifyConfig?$U.default.sanitize(WU(e,t),t.dompurifyConfig).toString():$U.default.sanitize(WU(e,t),{FORBID_TAGS:["style"]}).toString())),"sanitizeText"),HU=s(((e,t)=>"string"==typeof e?qU(e,t):e.flat().map((e=>qU(e,t)))),"sanitizeTextOrArray"),YU=s((e=>zU.test(e)),"hasBreaks"),XU=s((e=>e.split(zU)),"splitBreaks"),KU=s((e=>e.replace(/#br#/g,"<br/>")),"placeholderToBreak"),ZU=s((e=>e.replace(zU,"#br#")),"breakToPlaceholder"),QU=s((e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t}),"getUrl"),JU=s((e=>!(!1===e||["false","null","0"].includes(String(e).trim().toLowerCase()))),"evaluate"),eG=s((function(...e){let t=e.filter((e=>!isNaN(e)));return Math.max(...t)}),"getMax"),tG=s((function(...e){let t=e.filter((e=>!isNaN(e)));return Math.min(...t)}),"getMin");s((function(e){let t=e.split(/(,)/),r=[];for(let e=0;e<t.length;e++){let n=t[e];if(","===n&&e>0&&e+1<t.length){let i=t[e-1],a=t[e+1];nG(i,a)&&(n=i+","+a,e++,r.pop())}r.push(iG(n))}return r.join("")}),"parseGenericTypes");var rG=s(((e,t)=>Math.max(0,e.split(t).length-1)),"countOccurrence"),nG=s(((e,t)=>{let r=rG(e,"~"),n=rG(t,"~");return 1===r&&1===n}),"shouldCombineSets"),iG=s((e=>{let t=rG(e,"~"),r=!1;if(t<=1)return e;t%2!=0&&e.startsWith("~")&&(e=e.substring(1),r=!0);let n=[...e],i=n.indexOf("~"),a=n.lastIndexOf("~");for(;-1!==i&&-1!==a&&i!==a;)n[i]="<",n[a]=">",i=n.indexOf("~"),a=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")}),"processSet"),aG=s((()=>void 0!==window.MathMLElement),"isMathMLSupported"),oG=/\$\$(.*)\$\$/g,sG=s((e=>(e.match(oG)?.length??0)>0),"hasKatex");s((async(e,t)=>{e=await lG(e,t);let r=document.createElement("div");r.innerHTML=e,r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);let n={width:r.clientWidth,height:r.clientHeight};return r.remove(),n}),"calculateMathMLDimensions");var lG=s((async(e,t)=>{if(!sG(e))return e;if(!(aG()||t.legacyMathML||t.forceLegacyMathML))return e.replace(oG,"MathML is unsupported in this environment.");let{default:r}=await import("./katex-SWYD7GD6.mjs.1e396368.js"),n=t.forceLegacyMathML||!aG()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(zU).map((e=>sG(e)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${e}</div>`:`<div>${e}</div>`)).join("").replace(oG,((e,t)=>r.renderToString(t,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,"")))}),"renderKatex"),uG={getRows:UU,sanitizeText:qU,sanitizeTextOrArray:HU,hasBreaks:YU,splitBreaks:XU,lineBreakRegex:zU,removeScript:VU,getUrl:QU,evaluate:JU,getMax:eG,getMin:tG},cG=s((function(e,t){for(let r of t)e.attr(r[0],r[1])}),"d3Attrs"),hG=s((function(e,t,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${t}px;`)):(n.set("height",e),n.set("width",t)),n}),"calculateSvgSizeAttrs"),dG=s((function(e,t,r,n){let i=hG(t,r,n);cG(e,i)}),"configureSvgSize"),fG=s((function(e,t,r,n){let i=t.node().getBBox(),a=i.width,o=i.height;rz.info(`SVG bounds: ${a}x${o}`,i);let s=0,l=0;rz.info(`Graph bounds: ${s}x${l}`,e),s=a+2*r,l=o+2*r,rz.info(`Calculated bounds: ${s}x${l}`),dG(t,l,s,n);let u=`${i.x-r} ${i.y-r} ${i.width+2*r} ${i.height+2*r}`;t.attr("viewBox",u)}),"setupGraphViewbox"),pG={};s(((e,t,r)=>{let n="";return e in pG&&pG[e]?n=pG[e](r):rz.warn(`No theme found for ${e}`),` & {\n    font-family: ${r.fontFamily};\n    font-size: ${r.fontSize};\n    fill: ${r.textColor}\n  }\n\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${r.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${r.errorTextColor};\n    stroke: ${r.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 1px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n  & .edge-thickness-invisible {\n    stroke-width: 0;\n    fill: none;\n  }\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${r.lineColor};\n    stroke: ${r.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${r.lineColor};\n  }\n\n  & svg {\n    font-family: ${r.fontFamily};\n    font-size: ${r.fontSize};\n  }\n   & p {\n    margin: 0\n   }\n\n  ${n}\n\n  ${t}\n`}),"getStyles");var gG=s(((e,t)=>{void 0!==t&&(pG[e]=t)}),"addStylesForDiagram"),mG={};u(mG,{clear:()=>CG,getAccDescription:()=>_G,getAccTitle:()=>wG,getDiagramTitle:()=>SG,setAccDescription:()=>kG,setAccTitle:()=>TG,setDiagramTitle:()=>EG});var yG="",vG="",xG="",bG=s((e=>qU(e,MU())),"sanitizeText"),CG=s((()=>{yG="",xG="",vG=""}),"clear"),TG=s((e=>{yG=bG(e).replace(/^\s+/g,"")}),"setAccTitle"),wG=s((()=>yG),"getAccTitle"),kG=s((e=>{xG=bG(e).replace(/\n\s+/g,"\n")}),"setAccDescription"),_G=s((()=>xG),"getAccDescription"),EG=s((e=>{vG=bG(e)}),"setDiagramTitle"),SG=s((()=>vG),"getDiagramTitle"),AG=rz,NG=nz,RG=MU,LG=s((e=>qU(e,RG())),"sanitizeText"),IG=fG,MG=s((()=>mG),"getCommonDb"),OG={};s(((e,t,r)=>{OG[e]&&AG.warn(`Diagram with id ${e} already registered. Overwriting.`),OG[e]=t,r&&hz(e,r),gG(e,t.styles),t.injectUtils?.(AG,NG,RG,LG,IG,MG(),(()=>{}))}),"registerDiagram"),s((e=>{if(e in OG)return OG[e];throw new DG(e)}),"getDiagram");var DG=class extends Error{static{s(this,"DiagramNotFoundError")}constructor(e){super(`Diagram ${e} not found.`)}};function PG(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function FG(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function BG(e){let t,r,n;function i(e,n,i=0,a=e.length){if(i<a){if(0!==t(n,n))return a;do{let t=i+a>>>1;r(e[t],n)<0?i=t+1:a=t}while(i<a)}return i}function a(e,n,i=0,a=e.length){if(i<a){if(0!==t(n,n))return a;do{let t=i+a>>>1;r(e[t],n)<=0?i=t+1:a=t}while(i<a)}return i}function o(e,t,r=0,a=e.length){let o=i(e,t,r,a-1);return o>r&&n(e[o-1],t)>-n(e[o],t)?o-1:o}return 2!==e.length?(t=PG,r=s(((t,r)=>PG(e(t),r)),"compare2"),n=s(((t,r)=>e(t)-r),"delta")):(t=e===PG||e===FG?e:$G,r=e,n=e),s(i,"left"),s(a,"right"),s(o,"center"),{left:i,center:o,right:a}}function $G(){return 0}function zG(e){return null===e?NaN:+e}s((function(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r<i||void 0===r&&i>=i)&&(r=i)}return r}),"max"),s((function(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r>t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r>i||void 0===r&&i>=i)&&(r=i)}return r}),"min"),s(PG,"ascending"),s(FG,"descending"),s(BG,"bisector"),s($G,"zero"),s(zG,"number");var UG=BG(PG),GG=UG.right;UG.left,BG(zG).center;var jG=GG,VG=class extends Map{static{s(this,"InternMap")}constructor(e,t=YG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,r]of e)this.set(t,r)}get(e){return super.get(WG(this,e))}has(e){return super.has(WG(this,e))}set(e,t){return super.set(qG(this,e),t)}delete(e){return super.delete(HG(this,e))}};function WG({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):r}function qG({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function HG({_intern:e,_key:t},r){let n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function YG(e){return null!==e&&"object"==typeof e?e.valueOf():e}s(WG,"intern_get"),s(qG,"intern_set"),s(HG,"intern_delete"),s(YG,"keyof");var XG=Math.sqrt(50),KG=Math.sqrt(10),ZG=Math.sqrt(2);function QG(e,t,r){let n,i,a,o=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(o)),l=o/Math.pow(10,s),u=l>=XG?10:l>=KG?5:l>=ZG?2:1;return s<0?(a=Math.pow(10,-s)/u,n=Math.round(e*a),i=Math.round(t*a),n/a<e&&++n,i/a>t&&--i,a=-a):(a=Math.pow(10,s)*u,n=Math.round(e/a),i=Math.round(t/a),n*a<e&&++n,i*a>t&&--i),i<n&&.5<=r&&r<2?QG(e,t,2*r):[n,i,a]}function JG(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];let n=t<e,[i,a,o]=n?QG(t,e,r):QG(e,t,r);if(!(a>=i))return[];let s=a-i+1,l=new Array(s);if(n)if(o<0)for(let e=0;e<s;++e)l[e]=(a-e)/-o;else for(let e=0;e<s;++e)l[e]=(a-e)*o;else if(o<0)for(let e=0;e<s;++e)l[e]=(i+e)/-o;else for(let e=0;e<s;++e)l[e]=(i+e)*o;return l}function ej(e,t,r){return QG(e=+e,t=+t,r=+r)[2]}function tj(e,t,r){r=+r;let n=(t=+t)<(e=+e),i=n?ej(t,e,r):ej(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function rj(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),a=new Array(i);++n<i;)a[n]=e+n*r;return a}function nj(e){return e}s(QG,"tickSpec"),s(JG,"ticks"),s(ej,"tickIncrement"),s(tj,"tickStep"),s(rj,"range"),s(nj,"default");var ij=1,aj=2,oj=3,sj=4,lj=1e-6;function uj(e){return"translate("+e+",0)"}function cj(e){return"translate(0,"+e+")"}function hj(e){return t=>+e(t)}function dj(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function fj(){return!this.__axis}function pj(e,t){var r=[],n=null,i=null,a=6,o=6,l=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===ij||e===sj?-1:1,h=e===sj||e===aj?"x":"y",d=e===ij||e===oj?uj:cj;function f(s){var f=n??(t.ticks?t.ticks.apply(t,r):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,r):nj),g=Math.max(a,0)+l,m=t.range(),y=+m[0]+u,v=+m[m.length-1]+u,x=(t.bandwidth?dj:hj)(t.copy(),u),b=s.selection?s.selection():s,C=b.selectAll(".domain").data([null]),T=b.selectAll(".tick").data(f,t).order(),w=T.exit(),k=T.enter().append("g").attr("class","tick"),_=T.select("line"),E=T.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(k),_=_.merge(k.append("line").attr("stroke","currentColor").attr(h+"2",c*a)),E=E.merge(k.append("text").attr("fill","currentColor").attr(h,c*g).attr("dy",e===ij?"0em":e===oj?"0.71em":"0.32em")),s!==b&&(C=C.transition(s),T=T.transition(s),_=_.transition(s),E=E.transition(s),w=w.transition(s).attr("opacity",lj).attr("transform",(function(e){return isFinite(e=x(e))?d(e+u):this.getAttribute("transform")})),k.attr("opacity",lj).attr("transform",(function(e){var t=this.parentNode.__axis;return d((t&&isFinite(t=t(e))?t:x(e))+u)}))),w.remove(),C.attr("d",e===sj||e===aj?o?"M"+c*o+","+y+"H"+u+"V"+v+"H"+c*o:"M"+u+","+y+"V"+v:o?"M"+y+","+c*o+"V"+u+"H"+v+"V"+c*o:"M"+y+","+u+"H"+v),T.attr("opacity",1).attr("transform",(function(e){return d(x(e)+u)})),_.attr(h+"2",c*a),E.attr(h,c*g).text(p),b.filter(fj).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===aj?"start":e===sj?"end":"middle"),b.each((function(){this.__axis=x}))}return s(f,"axis"),f.scale=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return r=Array.from(arguments),f},f.tickArguments=function(e){return arguments.length?(r=null==e?[]:Array.from(e),f):r.slice()},f.tickValues=function(e){return arguments.length?(n=null==e?null:Array.from(e),f):n&&n.slice()},f.tickFormat=function(e){return arguments.length?(i=e,f):i},f.tickSize=function(e){return arguments.length?(a=o=+e,f):a},f.tickSizeInner=function(e){return arguments.length?(a=+e,f):a},f.tickSizeOuter=function(e){return arguments.length?(o=+e,f):o},f.tickPadding=function(e){return arguments.length?(l=+e,f):l},f.offset=function(e){return arguments.length?(u=+e,f):u},f}function gj(){}function mj(e){return null==e?gj:function(){return this.querySelector(e)}}function yj(e){"function"!=typeof e&&(e=mj(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a,o,s=t[i],l=s.length,u=n[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=e.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new hW(n,this._parents)}function vj(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function xj(){return[]}function bj(e){return null==e?xj:function(){return this.querySelectorAll(e)}}function Cj(e){return function(){return vj(e.apply(this,arguments))}}function Tj(e){e="function"==typeof e?Cj(e):bj(e);for(var t=this._groups,r=t.length,n=[],i=[],a=0;a<r;++a)for(var o,s=t[a],l=s.length,u=0;u<l;++u)(o=s[u])&&(n.push(e.call(o,o.__data__,u,s)),i.push(o));return new hW(n,i)}function wj(e){return function(){return this.matches(e)}}function kj(e){return function(t){return t.matches(e)}}s(uj,"translateX"),s(cj,"translateY"),s(hj,"number"),s(dj,"center"),s(fj,"entering"),s(pj,"axis"),s((function(e){return pj(ij,e)}),"axisTop"),s((function(e){return pj(oj,e)}),"axisBottom"),s(gj,"none"),s(mj,"default"),s(yj,"default"),s(vj,"array"),s(xj,"empty"),s(bj,"default"),s(Cj,"arrayAll"),s(Tj,"default"),s(wj,"default"),s(kj,"childMatcher");var _j=Array.prototype.find;function Ej(e){return function(){return _j.call(this.children,e)}}function Sj(){return this.firstElementChild}function Aj(e){return this.select(null==e?Sj:Ej("function"==typeof e?e:kj(e)))}s(Ej,"childFind"),s(Sj,"childFirst"),s(Aj,"default");var Nj=Array.prototype.filter;function Rj(){return Array.from(this.children)}function Lj(e){return function(){return Nj.call(this.children,e)}}function Ij(e){return this.selectAll(null==e?Rj:Lj("function"==typeof e?e:kj(e)))}function Mj(e){"function"!=typeof e&&(e=wj(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a,o=t[i],s=o.length,l=n[i]=[],u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new hW(n,this._parents)}function Oj(e){return new Array(e.length)}function Dj(){return new hW(this._enter||this._groups.map(Oj),this._parents)}function Pj(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Fj(e){return function(){return e}}function Bj(e,t,r,n,i,a){for(var o,s=0,l=t.length,u=a.length;s<u;++s)(o=t[s])?(o.__data__=a[s],n[s]=o):r[s]=new Pj(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function $j(e,t,r,n,i,a,o){var s,l,u,c=new Map,h=t.length,d=a.length,f=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(f[s]=u=o.call(l,l.__data__,s,t)+"",c.has(u)?i[s]=l:c.set(u,l));for(s=0;s<d;++s)u=o.call(e,a[s],s,a)+"",(l=c.get(u))?(n[s]=l,l.__data__=a[s],c.delete(u)):r[s]=new Pj(e,a[s]);for(s=0;s<h;++s)(l=t[s])&&c.get(f[s])===l&&(i[s]=l)}function zj(e){return e.__data__}function Uj(e,t){if(!arguments.length)return Array.from(this,zj);var r=t?$j:Bj,n=this._parents,i=this._groups;"function"!=typeof e&&(e=Fj(e));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=n[u],h=i[u],d=h.length,f=Gj(e.call(c,c&&c.__data__,u,n)),p=f.length,g=s[u]=new Array(p),m=o[u]=new Array(p);r(c,h,g,m,l[u]=new Array(d),f,t);for(var y,v,x=0,b=0;x<p;++x)if(y=g[x]){for(x>=b&&(b=x+1);!(v=m[b])&&++b<p;);y._next=v||null}}return(o=new hW(o,n))._enter=s,o._exit=l,o}function Gj(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function jj(){return new hW(this._exit||this._groups.map(Oj),this._parents)}function Vj(e,t,r){var n=this.enter(),i=this,a=this.exit();return"function"==typeof e?(n=e(n))&&(n=n.selection()):n=n.append(e+""),null!=t&&((i=t(i))&&(i=i.selection())),null==r?a.remove():r(a),n&&i?n.merge(i).order():i}function Wj(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,a=n.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u,c=r[l],h=n[l],d=c.length,f=s[l]=new Array(d),p=0;p<d;++p)(u=c[p]||h[p])&&(f[p]=u);for(;l<i;++l)s[l]=r[l];return new hW(s,this._parents)}function qj(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n,i=e[t],a=i.length-1,o=i[a];--a>=0;)(n=i[a])&&(o&&4^n.compareDocumentPosition(o)&&o.parentNode.insertBefore(n,o),o=n);return this}function Hj(e){function t(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}e||(e=Yj),s(t,"compareNode");for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var o,l=r[a],u=l.length,c=i[a]=new Array(u),h=0;h<u;++h)(o=l[h])&&(c[h]=o);c.sort(t)}return new hW(i,this._parents).order()}function Yj(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xj(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Kj(){return Array.from(this)}function Zj(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length;i<a;++i){var o=n[i];if(o)return o}return null}function Qj(){let e=0;for(let t of this)++e;return e}function Jj(){return!this.node()}function eV(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i,a=t[r],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this}s(Rj,"children"),s(Lj,"childrenFilter"),s(Ij,"default"),s(Mj,"default"),s(Oj,"default"),s(Dj,"default"),s(Pj,"EnterNode"),Pj.prototype={constructor:Pj,appendChild:s((function(e){return this._parent.insertBefore(e,this._next)}),"appendChild"),insertBefore:s((function(e,t){return this._parent.insertBefore(e,t)}),"insertBefore"),querySelector:s((function(e){return this._parent.querySelector(e)}),"querySelector"),querySelectorAll:s((function(e){return this._parent.querySelectorAll(e)}),"querySelectorAll")},s(Fj,"default"),s(Bj,"bindIndex"),s($j,"bindKey"),s(zj,"datum"),s(Uj,"default"),s(Gj,"arraylike"),s(jj,"default"),s(Vj,"default"),s(Wj,"default"),s(qj,"default"),s(Hj,"default"),s(Yj,"ascending"),s(Xj,"default"),s(Kj,"default"),s(Zj,"default"),s(Qj,"default"),s(Jj,"default"),s(eV,"default");var tV="http://www.w3.org/1999/xhtml",rV={svg:"http://www.w3.org/2000/svg",xhtml:tV,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nV(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),rV.hasOwnProperty(t)?{space:rV[t],local:e}:e}function iV(e){return function(){this.removeAttribute(e)}}function aV(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oV(e,t){return function(){this.setAttribute(e,t)}}function sV(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function lV(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}function uV(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function cV(e,t){var r=nV(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((null==t?r.local?aV:iV:"function"==typeof t?r.local?uV:lV:r.local?sV:oV)(r,t))}function hV(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function dV(e){return function(){this.style.removeProperty(e)}}function fV(e,t,r){return function(){this.style.setProperty(e,t,r)}}function pV(e,t,r){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function gV(e,t,r){return arguments.length>1?this.each((null==t?dV:"function"==typeof t?pV:fV)(e,t,r??"")):mV(this.node(),e)}function mV(e,t){return e.style.getPropertyValue(t)||hV(e).getComputedStyle(e,null).getPropertyValue(t)}function yV(e){return function(){delete this[e]}}function vV(e,t){return function(){this[e]=t}}function xV(e,t){return function(){var r=t.apply(this,arguments);null==r?delete this[e]:this[e]=r}}function bV(e,t){return arguments.length>1?this.each((null==t?yV:"function"==typeof t?xV:vV)(e,t)):this.node()[e]}function CV(e){return e.trim().split(/^|\s+/)}function TV(e){return e.classList||new wV(e)}function wV(e){this._node=e,this._names=CV(e.getAttribute("class")||"")}function kV(e,t){for(var r=TV(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function _V(e,t){for(var r=TV(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function EV(e){return function(){kV(this,e)}}function SV(e){return function(){_V(this,e)}}function AV(e,t){return function(){(t.apply(this,arguments)?kV:_V)(this,e)}}function NV(e,t){var r=CV(e+"");if(arguments.length<2){for(var n=TV(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each(("function"==typeof t?AV:t?EV:SV)(r,t))}function RV(){this.textContent=""}function LV(e){return function(){this.textContent=e}}function IV(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function MV(e){return arguments.length?this.each(null==e?RV:("function"==typeof e?IV:LV)(e)):this.node().textContent}function OV(){this.innerHTML=""}function DV(e){return function(){this.innerHTML=e}}function PV(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function FV(e){return arguments.length?this.each(null==e?OV:("function"==typeof e?PV:DV)(e)):this.node().innerHTML}function BV(){this.nextSibling&&this.parentNode.appendChild(this)}function $V(){return this.each(BV)}function zV(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function UV(){return this.each(zV)}function GV(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===tV&&t.documentElement.namespaceURI===tV?t.createElement(e):t.createElementNS(r,e)}}function jV(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function VV(e){var t=nV(e);return(t.local?jV:GV)(t)}function WV(e){var t="function"==typeof e?e:VV(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function qV(){return null}function HV(e,t){var r="function"==typeof e?e:VV(e),n=null==t?qV:"function"==typeof t?t:mj(t);return this.select((function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)}))}function YV(){var e=this.parentNode;e&&e.removeChild(this)}function XV(){return this.each(YV)}function KV(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ZV(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function QV(e){return this.select(e?ZV:KV)}function JV(e){return arguments.length?this.property("__data__",e):this.node().__data__}function eW(e){return function(t){e.call(this,t,this.__data__)}}function tW(e){return e.trim().split(/^|\s+/).map((function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}}))}function rW(e){return function(){var t=this.__on;if(t){for(var r,n=0,i=-1,a=t.length;n<a;++n)r=t[n],e.type&&r.type!==e.type||r.name!==e.name?t[++i]=r:this.removeEventListener(r.type,r.listener,r.options);++i?t.length=i:delete this.__on}}}function nW(e,t,r){return function(){var n,i=this.__on,a=eW(t);if(i)for(var o=0,s=i.length;o<s;++o)if((n=i[o]).type===e.type&&n.name===e.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=r),void(n.value=t);this.addEventListener(e.type,a,r),n={type:e.type,name:e.name,value:t,listener:a,options:r},i?i.push(n):this.__on=[n]}}function iW(e,t,r){var n,i,a=tW(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?nW:rW,n=0;n<o;++n)this.each(s(a[n],t,r));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(n=0,l=s[u];n<o;++n)if((i=a[n]).type===l.type&&i.name===l.name)return l.value}function aW(e,t,r){var n=hV(e),i=n.CustomEvent;"function"==typeof i?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function oW(e,t){return function(){return aW(this,e,t)}}function sW(e,t){return function(){return aW(this,e,t.apply(this,arguments))}}function lW(e,t){return this.each(("function"==typeof t?sW:oW)(e,t))}function*uW(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n,i=e[t],a=0,o=i.length;a<o;++a)(n=i[a])&&(yield n)}s(nV,"default"),s(iV,"attrRemove"),s(aV,"attrRemoveNS"),s(oV,"attrConstant"),s(sV,"attrConstantNS"),s(lV,"attrFunction"),s(uV,"attrFunctionNS"),s(cV,"default"),s(hV,"default"),s(dV,"styleRemove"),s(fV,"styleConstant"),s(pV,"styleFunction"),s(gV,"default"),s(mV,"styleValue"),s(yV,"propertyRemove"),s(vV,"propertyConstant"),s(xV,"propertyFunction"),s(bV,"default"),s(CV,"classArray"),s(TV,"classList"),s(wV,"ClassList"),wV.prototype={add:s((function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))}),"add"),remove:s((function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))}),"remove"),contains:s((function(e){return this._names.indexOf(e)>=0}),"contains")},s(kV,"classedAdd"),s(_V,"classedRemove"),s(EV,"classedTrue"),s(SV,"classedFalse"),s(AV,"classedFunction"),s(NV,"default"),s(RV,"textRemove"),s(LV,"textConstant"),s(IV,"textFunction"),s(MV,"default"),s(OV,"htmlRemove"),s(DV,"htmlConstant"),s(PV,"htmlFunction"),s(FV,"default"),s(BV,"raise"),s($V,"default"),s(zV,"lower"),s(UV,"default"),s(GV,"creatorInherit"),s(jV,"creatorFixed"),s(VV,"default"),s(WV,"default"),s(qV,"constantNull"),s(HV,"default"),s(YV,"remove"),s(XV,"default"),s(KV,"selection_cloneShallow"),s(ZV,"selection_cloneDeep"),s(QV,"default"),s(JV,"default"),s(eW,"contextListener"),s(tW,"parseTypenames"),s(rW,"onRemove"),s(nW,"onAdd"),s(iW,"default"),s(aW,"dispatchEvent"),s(oW,"dispatchConstant"),s(sW,"dispatchFunction"),s(lW,"default"),s(uW,"default");var cW=[null];function hW(e,t){this._groups=e,this._parents=t}function dW(){return new hW([[document.documentElement]],cW)}function fW(){return this}s(hW,"Selection"),s(dW,"selection"),s(fW,"selection_selection"),hW.prototype=dW.prototype={constructor:hW,select:yj,selectAll:Tj,selectChild:Aj,selectChildren:Ij,filter:Mj,data:Uj,enter:Dj,exit:jj,join:Vj,merge:Wj,selection:fW,order:qj,sort:Hj,call:Xj,nodes:Kj,node:Zj,size:Qj,empty:Jj,each:eV,attr:cV,style:gV,property:bV,classed:NV,text:MV,html:FV,raise:$V,lower:UV,append:WV,insert:HV,remove:XV,clone:QV,datum:JV,on:iW,dispatch:lW,[Symbol.iterator]:uW};var pW=dW;function gW(e){return"string"==typeof e?new hW([[document.querySelector(e)]],[document.documentElement]):new hW([[e]],cW)}function mW(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function yW(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function vW(){}s(gW,"default"),s(mW,"default"),s(yW,"extend"),s(vW,"Color");var xW=.7,bW=1/xW,CW="\\s*([+-]?\\d+)\\s*",TW="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wW="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kW=/^#([0-9a-f]{3,8})$/,_W=new RegExp(`^rgb\\(${CW},${CW},${CW}\\)$`),EW=new RegExp(`^rgb\\(${wW},${wW},${wW}\\)$`),SW=new RegExp(`^rgba\\(${CW},${CW},${CW},${TW}\\)$`),AW=new RegExp(`^rgba\\(${wW},${wW},${wW},${TW}\\)$`),NW=new RegExp(`^hsl\\(${TW},${wW},${wW}\\)$`),RW=new RegExp(`^hsla\\(${TW},${wW},${wW},${TW}\\)$`),LW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function IW(){return this.rgb().formatHex()}function MW(){return this.rgb().formatHex8()}function OW(){return XW(this).formatHsl()}function DW(){return this.rgb().formatRgb()}function PW(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=kW.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?FW(t):3===r?new UW(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?BW(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?BW(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=_W.exec(e))?new UW(t[1],t[2],t[3],1):(t=EW.exec(e))?new UW(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=SW.exec(e))?BW(t[1],t[2],t[3],t[4]):(t=AW.exec(e))?BW(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=NW.exec(e))?YW(t[1],t[2]/100,t[3]/100,1):(t=RW.exec(e))?YW(t[1],t[2]/100,t[3]/100,t[4]):LW.hasOwnProperty(e)?FW(LW[e]):"transparent"===e?new UW(NaN,NaN,NaN,0):null}function FW(e){return new UW(e>>16&255,e>>8&255,255&e,1)}function BW(e,t,r,n){return n<=0&&(e=t=r=NaN),new UW(e,t,r,n)}function $W(e){return e instanceof vW||(e=PW(e)),e?new UW((e=e.rgb()).r,e.g,e.b,e.opacity):new UW}function zW(e,t,r,n){return 1===arguments.length?$W(e):new UW(e,t,r,n??1)}function UW(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function GW(){return`#${HW(this.r)}${HW(this.g)}${HW(this.b)}`}function jW(){return`#${HW(this.r)}${HW(this.g)}${HW(this.b)}${HW(255*(isNaN(this.opacity)?1:this.opacity))}`}function VW(){let e=WW(this.opacity);return`${1===e?"rgb(":"rgba("}${qW(this.r)}, ${qW(this.g)}, ${qW(this.b)}${1===e?")":`, ${e})`}`}function WW(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qW(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function HW(e){return((e=qW(e))<16?"0":"")+e.toString(16)}function YW(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ZW(e,t,r,n)}function XW(e){if(e instanceof ZW)return new ZW(e.h,e.s,e.l,e.opacity);if(e instanceof vW||(e=PW(e)),!e)return new ZW;if(e instanceof ZW)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(r-n)/s+6*(r<n):r===a?(n-t)/s+2:(t-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new ZW(o,s,l,e.opacity)}function KW(e,t,r,n){return 1===arguments.length?XW(e):new ZW(e,t,r,n??1)}function ZW(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function QW(e){return(e=(e||0)%360)<0?e+360:e}function JW(e){return Math.max(0,Math.min(1,e||0))}function eq(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}mW(vW,PW,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:IW,formatHex:IW,formatHex8:MW,formatHsl:OW,formatRgb:DW,toString:DW}),s(IW,"color_formatHex"),s(MW,"color_formatHex8"),s(OW,"color_formatHsl"),s(DW,"color_formatRgb"),s(PW,"color"),s(FW,"rgbn"),s(BW,"rgba"),s($W,"rgbConvert"),s(zW,"rgb"),s(UW,"Rgb"),mW(UW,zW,yW(vW,{brighter(e){return e=null==e?bW:Math.pow(bW,e),new UW(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?xW:Math.pow(xW,e),new UW(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new UW(qW(this.r),qW(this.g),qW(this.b),WW(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GW,formatHex:GW,formatHex8:jW,formatRgb:VW,toString:VW})),s(GW,"rgb_formatHex"),s(jW,"rgb_formatHex8"),s(VW,"rgb_formatRgb"),s(WW,"clampa"),s(qW,"clampi"),s(HW,"hex"),s(YW,"hsla"),s(XW,"hslConvert"),s(KW,"hsl"),s(ZW,"Hsl"),mW(ZW,KW,yW(vW,{brighter(e){return e=null==e?bW:Math.pow(bW,e),new ZW(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?xW:Math.pow(xW,e),new ZW(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new UW(eq(e>=240?e-240:e+120,i,n),eq(e,i,n),eq(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new ZW(QW(this.h),JW(this.s),JW(this.l),WW(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=WW(this.opacity);return`${1===e?"hsl(":"hsla("}${QW(this.h)}, ${100*JW(this.s)}%, ${100*JW(this.l)}%${1===e?")":`, ${e})`}`}})),s(QW,"clamph"),s(JW,"clampt"),s(eq,"hsl2rgb");var tq=Math.PI/180,rq=180/Math.PI,nq=.96422,iq=1,aq=.82521,oq=4/29,sq=6/29,lq=3*sq*sq,uq=sq*sq*sq;function cq(e){if(e instanceof dq)return new dq(e.l,e.a,e.b,e.opacity);if(e instanceof xq)return bq(e);e instanceof UW||(e=$W(e));var t,r,n=mq(e.r),i=mq(e.g),a=mq(e.b),o=fq((.2225045*n+.7168786*i+.0606169*a)/iq);return n===i&&i===a?t=r=o:(t=fq((.4360747*n+.3850649*i+.1430804*a)/nq),r=fq((.0139322*n+.0971045*i+.7141733*a)/aq)),new dq(116*o-16,500*(t-o),200*(o-r),e.opacity)}function hq(e,t,r,n){return 1===arguments.length?cq(e):new dq(e,t,r,n??1)}function dq(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n}function fq(e){return e>uq?Math.pow(e,1/3):e/lq+oq}function pq(e){return e>sq?e*e*e:lq*(e-oq)}function gq(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function mq(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function yq(e){if(e instanceof xq)return new xq(e.h,e.c,e.l,e.opacity);if(e instanceof dq||(e=cq(e)),0===e.a&&0===e.b)return new xq(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*rq;return new xq(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function vq(e,t,r,n){return 1===arguments.length?yq(e):new xq(e,t,r,n??1)}function xq(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n}function bq(e){if(isNaN(e.h))return new dq(e.l,0,0,e.opacity);var t=e.h*tq;return new dq(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}s(cq,"labConvert"),s(hq,"lab"),s(dq,"Lab"),mW(dq,hq,yW(vW,{brighter(e){return new dq(this.l+18*(e??1),this.a,this.b,this.opacity)},darker(e){return new dq(this.l-18*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return new UW(gq(3.1338561*(t=nq*pq(t))-1.6168667*(e=iq*pq(e))-.4906146*(r=aq*pq(r))),gq(-.9787684*t+1.9161415*e+.033454*r),gq(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}})),s(fq,"xyz2lab"),s(pq,"lab2xyz"),s(gq,"lrgb2rgb"),s(mq,"rgb2lrgb"),s(yq,"hclConvert"),s(vq,"hcl"),s(xq,"Hcl"),s(bq,"hcl2lab"),mW(xq,vq,yW(vW,{brighter(e){return new xq(this.h,this.c,this.l+18*(e??1),this.opacity)},darker(e){return new xq(this.h,this.c,this.l-18*(e??1),this.opacity)},rgb(){return bq(this).rgb()}}));var Cq=s((e=>()=>e),"default");function Tq(e,t){return function(r){return e+r*t}}function wq(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function kq(e){return 1==(e=+e)?_q:function(t,r){return r-t?wq(t,r,e):Cq(isNaN(t)?r:t)}}function _q(e,t){var r=t-e;return r?Tq(e,r):Cq(isNaN(e)?t:e)}function Eq(e,t,r,n,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*n+o*i)/6}s(Tq,"linear"),s(wq,"exponential"),s((function(e,t){var r=t-e;return r?Tq(e,r>180||r<-180?r-360*Math.round(r/360):r):Cq(isNaN(e)?t:e)}),"hue"),s(kq,"gamma"),s(_q,"nogamma"),s((function(e){return function(t,r){var n=e((t=vq(t)).h,(r=vq(r)).h),i=_q(t.c,r.c),a=_q(t.l,r.l),o=_q(t.opacity,r.opacity);return function(e){return t.h=n(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}),"hcl"),s(Eq,"basis"),s((function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],a=e[n+1],o=n>0?e[n-1]:2*i-a,s=n<t-1?e[n+2]:2*a-i;return Eq((r-n/t)*t,o,i,a,s)}}),"default"),s((function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),i=e[(n+t-1)%t],a=e[n%t],o=e[(n+1)%t],s=e[(n+2)%t];return Eq((r-n/t)*t,i,a,o,s)}}),"default");var Sq=s((function e(t){var r=kq(t);function n(e,t){var n=r((e=zW(e)).r,(t=zW(t)).r),i=r(e.g,t.g),a=r(e.b,t.b),o=_q(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return s(n,"rgb"),n.gamma=e,n}),"rgbGamma")(1);function Aq(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function Nq(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rq(e,t){var r,n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),o=new Array(n);for(r=0;r<i;++r)a[r]=$q(e[r],t[r]);for(;r<n;++r)o[r]=t[r];return function(e){for(r=0;r<i;++r)o[r]=a[r](e);return o}}function Lq(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Iq(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Mq(e,t){var r,n={},i={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)r in e?n[r]=$q(e[r],t[r]):i[r]=t[r];return function(e){for(r in n)i[r]=n[r](e);return i}}s((function(e){return function(t){var r,n,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(r=0;r<i;++r)n=zW(t[r]),a[r]=n.r||0,o[r]=n.g||0,s[r]=n.b||0;return a=e(a),o=e(o),s=e(s),n.opacity=1,function(e){return n.r=a(e),n.g=o(e),n.b=s(e),n+""}}}),"rgbSpline"),s(Aq,"default"),s(Nq,"isNumberArray"),s(Rq,"genericArray"),s(Lq,"default"),s(Iq,"default"),s(Mq,"default");var Oq=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dq=new RegExp(Oq.source,"g");function Pq(e){return function(){return e}}function Fq(e){return function(t){return e(t)+""}}function Bq(e,t){var r,n,i,a=Oq.lastIndex=Dq.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(r=Oq.exec(e))&&(n=Dq.exec(t));)(i=n.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:Iq(r,n)})),a=Dq.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?Fq(l[0].x):Pq(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)s[(r=l[n]).i]=r.x(e);return s.join("")})}function $q(e,t){var r,n=typeof t;return null==t||"boolean"===n?Cq(t):("number"===n?Iq:"string"===n?(r=PW(t))?(t=r,Sq):Bq:t instanceof PW?Sq:t instanceof Date?Lq:Nq(t)?Aq:Array.isArray(t)?Rq:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Mq:Iq)(e,t)}function zq(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}s(Pq,"zero"),s(Fq,"one"),s(Bq,"default"),s($q,"default"),s(zq,"default");var Uq,Gq=180/Math.PI,jq={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vq(e,t,r,n,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,l/=s),e*n<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Gq,skewX:Math.atan(l)*Gq,scaleX:o,scaleY:s}}function Wq(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?jq:Vq(t.a,t.b,t.c,t.d,t.e,t.f)}function qq(e){return null==e?jq:(Uq||(Uq=document.createElementNS("http://www.w3.org/2000/svg","g")),Uq.setAttribute("transform",e),(e=Uq.transform.baseVal.consolidate())?Vq((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):jq)}function Hq(e,t,r,n){function i(e){return e.length?e.pop()+" ":""}function a(e,n,i,a,o,s){if(e!==i||n!==a){var l=o.push("translate(",null,t,null,r);s.push({i:l-4,x:Iq(e,i)},{i:l-2,x:Iq(n,a)})}else(i||a)&&o.push("translate("+i+t+a+r)}function o(e,t,r,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:r.push(i(r)+"rotate(",null,n)-2,x:Iq(e,t)})):t&&r.push(i(r)+"rotate("+t+n)}function l(e,t,r,a){e!==t?a.push({i:r.push(i(r)+"skewX(",null,n)-2,x:Iq(e,t)}):t&&r.push(i(r)+"skewX("+t+n)}function u(e,t,r,n,a,o){if(e!==r||t!==n){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Iq(e,r)},{i:s-2,x:Iq(t,n)})}else(1!==r||1!==n)&&a.push(i(a)+"scale("+r+","+n+")")}return s(i,"pop"),s(a,"translate"),s(o,"rotate"),s(l,"skewX"),s(u,"scale"),function(t,r){var n=[],i=[];return t=e(t),r=e(r),a(t.translateX,t.translateY,r.translateX,r.translateY,n,i),o(t.rotate,r.rotate,n,i),l(t.skewX,r.skewX,n,i),u(t.scaleX,t.scaleY,r.scaleX,r.scaleY,n,i),t=r=null,function(e){for(var t,r=-1,a=i.length;++r<a;)n[(t=i[r]).i]=t.x(e);return n.join("")}}}s(Vq,"default"),s(Wq,"parseCss"),s(qq,"parseSvg"),s(Hq,"interpolateTransform");var Yq=Hq(Wq,"px, ","px)","deg)"),Xq=Hq(qq,", ",")",")");function Kq(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}s(Kq,"initRange");var Zq=Symbol("implicit");function Qq(){var e=new VG,t=[],r=[],n=Zq;function i(i){let a=e.get(i);if(void 0===a){if(n!==Zq)return n;e.set(i,a=t.push(i)-1)}return r[a%r.length]}return s(i,"scale"),i.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new VG;for(let n of r)e.has(n)||e.set(n,t.push(n)-1);return i},i.range=function(e){return arguments.length?(r=Array.from(e),i):r.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return Qq(t,r).unknown(n)},Kq.apply(i,arguments),i}function Jq(e){return function(){return e}}function eH(e){return+e}s(Qq,"ordinal"),s(Jq,"constants"),s(eH,"number");var tH=[0,1];function rH(e){return e}function nH(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Jq(isNaN(t)?NaN:.5)}function iH(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}function aH(e,t,r){var n=e[0],i=e[1],a=t[0],o=t[1];return i<n?(n=nH(i,n),a=r(o,a)):(n=nH(n,i),a=r(a,o)),function(e){return a(n(e))}}function oH(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=nH(e[o],e[o+1]),a[o]=r(t[o],t[o+1]);return function(t){var r=jG(e,t,1,n)-1;return a[r](i[r](t))}}function sH(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function lH(){var e,t,r,n,i,a,o=tH,l=tH,u=$q,c=rH;function h(){var e=Math.min(o.length,l.length);return c!==rH&&(c=iH(o[0],o[e-1])),n=e>2?oH:aH,i=a=null,d}function d(t){return null==t||isNaN(t=+t)?r:(i||(i=n(o.map(e),l,u)))(e(c(t)))}return s(h,"rescale"),s(d,"scale"),d.invert=function(r){return c(t((a||(a=n(l,o.map(e),Iq)))(r)))},d.domain=function(e){return arguments.length?(o=Array.from(e,eH),h()):o.slice()},d.range=function(e){return arguments.length?(l=Array.from(e),h()):l.slice()},d.rangeRound=function(e){return l=Array.from(e),u=zq,h()},d.clamp=function(e){return arguments.length?(c=!!e||rH,h()):c!==rH},d.interpolate=function(e){return arguments.length?(u=e,h()):u},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,h()}}function uH(){return lH()(rH,rH)}function cH(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hH(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function dH(e){return(e=hH(Math.abs(e)))?e[1]:NaN}function fH(e,t){return function(r,n){for(var i=r.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(r.substring(i-=s,i+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function pH(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}s(rH,"identity"),s(nH,"normalize"),s(iH,"clamper"),s(aH,"bimap"),s(oH,"polymap"),s(sH,"copy"),s(lH,"transformer"),s(uH,"continuous"),s(cH,"default"),s(hH,"formatDecimalParts"),s(dH,"default"),s(fH,"default"),s(pH,"default");var gH,mH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yH(e){if(!(t=mH.exec(e)))throw new Error("invalid format: "+e);var t;return new vH({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function vH(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function xH(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}function bH(e,t){var r=hH(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(gH=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+hH(e,Math.max(0,t+a-1))[0]}function CH(e,t){var r=hH(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}s(yH,"formatSpecifier"),yH.prototype=vH.prototype,s(vH,"FormatSpecifier"),vH.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type},s(xH,"default"),s(bH,"default"),s(CH,"default");var TH={"%":s(((e,t)=>(100*e).toFixed(t)),"%"),b:s((e=>Math.round(e).toString(2)),"b"),c:s((e=>e+""),"c"),d:cH,e:s(((e,t)=>e.toExponential(t)),"e"),f:s(((e,t)=>e.toFixed(t)),"f"),g:s(((e,t)=>e.toPrecision(t)),"g"),o:s((e=>Math.round(e).toString(8)),"o"),p:s(((e,t)=>CH(100*e,t)),"p"),r:CH,s:bH,X:s((e=>Math.round(e).toString(16).toUpperCase()),"X"),x:s((e=>Math.round(e).toString(16)),"x")};function wH(e){return e}s(wH,"default");var kH,_H,EH,SH=Array.prototype.map,AH=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function NH(e){var t=void 0===e.grouping||void 0===e.thousands?wH:fH(SH.call(e.grouping,Number),e.thousands+""),r=void 0===e.currency?"":e.currency[0]+"",n=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?wH:pH(SH.call(e.numerals,String)),o=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function c(e){var c=(e=yH(e)).fill,h=e.align,d=e.sign,f=e.symbol,p=e.zero,g=e.width,m=e.comma,y=e.precision,v=e.trim,x=e.type;"n"===x?(m=!0,x="g"):TH[x]||(void 0===y&&(y=12),v=!0,x="g"),(p||"0"===c&&"="===h)&&(p=!0,c="0",h="=");var b="$"===f?r:"#"===f&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",C="$"===f?n:/[%p]/.test(x)?o:"",T=TH[x],w=/[defgprs%]/.test(x);function k(e){var r,n,o,s=b,f=C;if("c"===x)f=T(e)+f,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:T(Math.abs(e),y),v&&(e=xH(e)),k&&0==+e&&"+"!==d&&(k=!1),s=(k?"("===d?d:l:"-"===d||"("===d?"":d)+s,f=("s"===x?AH[8+gH/3]:"")+f+(k&&"("===d?")":""),w)for(r=-1,n=e.length;++r<n;)if(48>(o=e.charCodeAt(r))||o>57){f=(46===o?i+e.slice(r+1):e.slice(r))+f,e=e.slice(0,r);break}}m&&!p&&(e=t(e,1/0));var _=s.length+e.length+f.length,E=_<g?new Array(g-_+1).join(c):"";switch(m&&p&&(e=t(E+e,E.length?g-f.length:1/0),E=""),h){case"<":e=s+e+f+E;break;case"=":e=s+E+e+f;break;case"^":e=E.slice(0,_=E.length>>1)+s+e+f+E.slice(_);break;default:e=E+s+e+f}return a(e)}return y=void 0===y?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),s(k,"format"),k.toString=function(){return e+""},k}function h(e,t){var r=c(((e=yH(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(dH(t)/3))),i=Math.pow(10,-n),a=AH[8+n/3];return function(e){return r(i*e)+a}}return s(c,"newFormat"),s(h,"formatPrefix"),{format:c,formatPrefix:h}}function RH(e){return kH=NH(e),_H=kH.format,EH=kH.formatPrefix,kH}function LH(e){return Math.max(0,-dH(Math.abs(e)))}function IH(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(dH(t)/3)))-dH(Math.abs(e)))}function MH(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,dH(t)-dH(e))+1}function OH(e,t,r,n){var i,a=tj(e,t,r);switch((n=yH(n??",f")).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null==n.precision&&!isNaN(i=IH(a,o))&&(n.precision=i),EH(n,o);case"":case"e":case"g":case"p":case"r":null==n.precision&&!isNaN(i=MH(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-("e"===n.type));break;case"f":case"%":null==n.precision&&!isNaN(i=LH(a))&&(n.precision=i-2*("%"===n.type))}return _H(n)}function DH(e){var t=e.domain;return e.ticks=function(e){var r=t();return JG(r[0],r[r.length-1],e??10)},e.tickFormat=function(e,r){var n=t();return OH(n[0],n[n.length-1],e??10,r)},e.nice=function(r){null==r&&(r=10);var n,i,a=t(),o=0,s=a.length-1,l=a[o],u=a[s],c=10;for(u<l&&(i=l,l=u,u=i,i=o,o=s,s=i);c-- >0;){if((i=ej(l,u,r))===n)return a[o]=l,a[s]=u,t(a);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}n=i}return e},e}s(NH,"default"),RH({thousands:",",grouping:[3],currency:["$",""]}),s(RH,"defaultLocale"),s(LH,"default"),s(IH,"default"),s(MH,"default"),s(OH,"tickFormat"),s(DH,"linearish"),s((function e(){var t=uH();return t.copy=function(){return sH(t,e())},Kq.apply(t,arguments),DH(t)}),"linear");var PH=new Date,FH=new Date;function BH(e,t,r,n){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s(i,"interval"),i.floor=t=>(e(t=new Date(+t)),t),i.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),i.round=e=>{let t=i(e),r=i.ceil(e);return e-t<r-e?t:r},i.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),i.range=(r,n,a)=>{let o,s=[];if(r=i.ceil(r),a=null==a?1:Math.floor(a),!(r<n&&a>0))return s;do{s.push(o=new Date(+r)),t(r,a),e(r)}while(o<r&&r<n);return s},i.filter=r=>BH((t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)}),((e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););})),r&&(i.count=(t,n)=>(PH.setTime(+t),FH.setTime(+n),e(PH),e(FH),Math.floor(r(PH,FH))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(n?t=>n(t)%e==0:t=>i.count(0,t)%e==0):i:null)),i}s(BH,"timeInterval");var $H=BH((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));$H.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?BH((t=>{t.setTime(Math.floor(t/e)*e)}),((t,r)=>{t.setTime(+t+r*e)}),((t,r)=>(r-t)/e)):$H:null),$H.range;var zH=BH((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+1e3*t)}),((e,t)=>(t-e)/1e3),(e=>e.getUTCSeconds()));zH.range;var UH=BH((e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())}),((e,t)=>{e.setTime(+e+6e4*t)}),((e,t)=>(t-e)/6e4),(e=>e.getMinutes()));UH.range;var GH=BH((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+6e4*t)}),((e,t)=>(t-e)/6e4),(e=>e.getUTCMinutes()));GH.range;var jH=BH((e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())}),((e,t)=>{e.setTime(+e+36e5*t)}),((e,t)=>(t-e)/36e5),(e=>e.getHours()));jH.range;var VH=BH((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+36e5*t)}),((e,t)=>(t-e)/36e5),(e=>e.getUTCHours()));VH.range;var WH=BH((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5),(e=>e.getDate()-1));WH.range;var qH=BH((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/864e5),(e=>e.getUTCDate()-1));qH.range;var HH=BH((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/864e5),(e=>Math.floor(e/864e5)));function YH(e){return BH((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5))}HH.range,s(YH,"timeWeekday");var XH=YH(0),KH=YH(1),ZH=YH(2),QH=YH(3),JH=YH(4),eY=YH(5),tY=YH(6);function rY(e){return BH((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/6048e5))}XH.range,KH.range,ZH.range,QH.range,JH.range,eY.range,tY.range,s(rY,"utcWeekday");var nY=rY(0),iY=rY(1),aY=rY(2),oY=rY(3),sY=rY(4),lY=rY(5),uY=rY(6);nY.range,iY.range,aY.range,oY.range,sY.range,lY.range,uY.range;var cY=BH((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()));cY.range;var hY=BH((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()));hY.range;var dY=BH((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));dY.every=e=>isFinite(e=Math.floor(e))&&e>0?BH((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,r)=>{t.setFullYear(t.getFullYear()+r*e)})):null,dY.range;var fY=BH((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function pY(e,t,r,n,i,a){let o=[[zH,1,1e3],[zH,5,5e3],[zH,15,15e3],[zH,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[n,1,864e5],[n,2,1728e5],[r,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function l(e,t,r){let n=t<e;n&&([e,t]=[t,e]);let i=r&&"function"==typeof r.range?r:u(e,t,r),a=i?i.range(e,+t+1):[];return n?a.reverse():a}function u(t,r,n){let i=Math.abs(r-t)/n,a=BG((([,,e])=>e)).right(o,i);if(a===o.length)return e.every(tj(t/31536e6,r/31536e6,n));if(0===a)return $H.every(Math.max(tj(t,r,n),1));let[s,l]=o[i/o[a-1][2]<o[a][2]/i?a-1:a];return s.every(l)}return s(l,"ticks"),s(u,"tickInterval"),[l,u]}fY.every=e=>isFinite(e=Math.floor(e))&&e>0?BH((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)})):null,fY.range,s(pY,"ticker"),pY(fY,hY,nY,HH,VH,GH);var[gY,mY]=pY(dY,cY,XH,WH,jH,UH);function yY(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function vY(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function xY(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function bY(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,c=NY(i),h=RY(i),d=NY(a),f=RY(a),p=NY(o),g=RY(o),m=NY(l),y=RY(l),v=NY(u),x=RY(u),b={a:O,A:D,b:P,B:F,c:null,d:ZY,e:ZY,f:rX,g:fX,G:gX,H:QY,I:JY,j:eX,L:tX,m:nX,M:iX,p:B,q:$,Q:BX,s:$X,S:aX,u:oX,U:sX,V:uX,w:cX,W:hX,x:null,X:null,y:dX,Y:pX,Z:mX,"%":FX},C={a:z,A:U,b:G,B:j,c:null,d:yX,e:yX,f:TX,g:MX,G:DX,H:vX,I:xX,j:bX,L:CX,m:wX,M:kX,p:V,q:W,Q:BX,s:$X,S:_X,u:EX,U:SX,V:NX,w:RX,W:LX,x:null,X:null,y:IX,Y:OX,Z:PX,"%":FX},T={a:S,A:A,b:N,B:R,c:L,d:UY,e:UY,f:HY,g:FY,G:PY,H:jY,I:jY,j:GY,L:qY,m:zY,M:VY,p:E,q:$Y,Q:XY,s:KY,S:WY,u:IY,U:MY,V:OY,w:LY,W:DY,x:I,X:M,y:FY,Y:PY,Z:BY,"%":YY};function w(e,t){return function(r){var n,i,a,o=[],s=-1,l=0,u=e.length;for(r instanceof Date||(r=new Date(+r));++s<u;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=wY[n=e.charAt(++s)])?n=e.charAt(++s):i="e"===n?" ":"0",(a=t[n])&&(n=a(r,i)),o.push(n),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function k(e,t){return function(r){var n,i,a=xY(1900,void 0,1);if(_(a,e,r+="",0)!=r.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(n=vY(xY(a.y,0,1))).getUTCDay(),n=i>4||0===i?iY.ceil(n):iY(n),n=qH.offset(n,7*(a.V-1)),a.y=n.getUTCFullYear(),a.m=n.getUTCMonth(),a.d=n.getUTCDate()+(a.w+6)%7):(i=(n=yY(xY(a.y,0,1))).getDay(),n=i>4||0===i?KH.ceil(n):KH(n),n=WH.offset(n,7*(a.V-1)),a.y=n.getFullYear(),a.m=n.getMonth(),a.d=n.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?vY(xY(a.y,0,1)).getUTCDay():yY(xY(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,vY(a)):yY(a)}}function _(e,t,r,n){for(var i,a,o=0,s=t.length,l=r.length;o<s;){if(n>=l)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=T[i in wY?t.charAt(o++):i])||(n=a(e,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}function E(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=h.get(n[0].toLowerCase()),r+n[0].length):-1}function S(e,t,r){var n=p.exec(t.slice(r));return n?(e.w=g.get(n[0].toLowerCase()),r+n[0].length):-1}function A(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=f.get(n[0].toLowerCase()),r+n[0].length):-1}function N(e,t,r){var n=v.exec(t.slice(r));return n?(e.m=x.get(n[0].toLowerCase()),r+n[0].length):-1}function R(e,t,r){var n=m.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1}function L(e,r,n){return _(e,t,r,n)}function I(e,t,n){return _(e,r,t,n)}function M(e,t,r){return _(e,n,t,r)}function O(e){return o[e.getDay()]}function D(e){return a[e.getDay()]}function P(e){return u[e.getMonth()]}function F(e){return l[e.getMonth()]}function B(e){return i[+(e.getHours()>=12)]}function $(e){return 1+~~(e.getMonth()/3)}function z(e){return o[e.getUTCDay()]}function U(e){return a[e.getUTCDay()]}function G(e){return u[e.getUTCMonth()]}function j(e){return l[e.getUTCMonth()]}function V(e){return i[+(e.getUTCHours()>=12)]}function W(e){return 1+~~(e.getUTCMonth()/3)}return b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),C.x=w(r,C),C.X=w(n,C),C.c=w(t,C),s(w,"newFormat"),s(k,"newParse"),s(_,"parseSpecifier"),s(E,"parsePeriod"),s(S,"parseShortWeekday"),s(A,"parseWeekday"),s(N,"parseShortMonth"),s(R,"parseMonth"),s(L,"parseLocaleDateTime"),s(I,"parseLocaleDate"),s(M,"parseLocaleTime"),s(O,"formatShortWeekday"),s(D,"formatWeekday"),s(P,"formatShortMonth"),s(F,"formatMonth"),s(B,"formatPeriod"),s($,"formatQuarter"),s(z,"formatUTCShortWeekday"),s(U,"formatUTCWeekday"),s(G,"formatUTCShortMonth"),s(j,"formatUTCMonth"),s(V,"formatUTCPeriod"),s(W,"formatUTCQuarter"),{format:s((function(e){var t=w(e+="",b);return t.toString=function(){return e},t}),"format"),parse:s((function(e){var t=k(e+="",!1);return t.toString=function(){return e},t}),"parse"),utcFormat:s((function(e){var t=w(e+="",C);return t.toString=function(){return e},t}),"utcFormat"),utcParse:s((function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}),"utcParse")}}s(yY,"localDate"),s(vY,"utcDate"),s(xY,"newDate"),s(bY,"formatLocale");var CY,TY,wY={"-":"",_:" ",0:"0"},kY=/^\s*\d+/,_Y=/^%/,EY=/[\\^$*+?|[\]().{}]/g;function SY(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function AY(e){return e.replace(EY,"\\$&")}function NY(e){return new RegExp("^(?:"+e.map(AY).join("|")+")","i")}function RY(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function LY(e,t,r){var n=kY.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function IY(e,t,r){var n=kY.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function MY(e,t,r){var n=kY.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function OY(e,t,r){var n=kY.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function DY(e,t,r){var n=kY.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function PY(e,t,r){var n=kY.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function FY(e,t,r){var n=kY.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function BY(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function $Y(e,t,r){var n=kY.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function zY(e,t,r){var n=kY.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function UY(e,t,r){var n=kY.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function GY(e,t,r){var n=kY.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function jY(e,t,r){var n=kY.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function VY(e,t,r){var n=kY.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function WY(e,t,r){var n=kY.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function qY(e,t,r){var n=kY.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function HY(e,t,r){var n=kY.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function YY(e,t,r){var n=_Y.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function XY(e,t,r){var n=kY.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function KY(e,t,r){var n=kY.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function ZY(e,t){return SY(e.getDate(),t,2)}function QY(e,t){return SY(e.getHours(),t,2)}function JY(e,t){return SY(e.getHours()%12||12,t,2)}function eX(e,t){return SY(1+WH.count(dY(e),e),t,3)}function tX(e,t){return SY(e.getMilliseconds(),t,3)}function rX(e,t){return tX(e,t)+"000"}function nX(e,t){return SY(e.getMonth()+1,t,2)}function iX(e,t){return SY(e.getMinutes(),t,2)}function aX(e,t){return SY(e.getSeconds(),t,2)}function oX(e){var t=e.getDay();return 0===t?7:t}function sX(e,t){return SY(XH.count(dY(e)-1,e),t,2)}function lX(e){var t=e.getDay();return t>=4||0===t?JH(e):JH.ceil(e)}function uX(e,t){return e=lX(e),SY(JH.count(dY(e),e)+(4===dY(e).getDay()),t,2)}function cX(e){return e.getDay()}function hX(e,t){return SY(KH.count(dY(e)-1,e),t,2)}function dX(e,t){return SY(e.getFullYear()%100,t,2)}function fX(e,t){return SY((e=lX(e)).getFullYear()%100,t,2)}function pX(e,t){return SY(e.getFullYear()%1e4,t,4)}function gX(e,t){var r=e.getDay();return SY((e=r>=4||0===r?JH(e):JH.ceil(e)).getFullYear()%1e4,t,4)}function mX(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+SY(t/60|0,"0",2)+SY(t%60,"0",2)}function yX(e,t){return SY(e.getUTCDate(),t,2)}function vX(e,t){return SY(e.getUTCHours(),t,2)}function xX(e,t){return SY(e.getUTCHours()%12||12,t,2)}function bX(e,t){return SY(1+qH.count(fY(e),e),t,3)}function CX(e,t){return SY(e.getUTCMilliseconds(),t,3)}function TX(e,t){return CX(e,t)+"000"}function wX(e,t){return SY(e.getUTCMonth()+1,t,2)}function kX(e,t){return SY(e.getUTCMinutes(),t,2)}function _X(e,t){return SY(e.getUTCSeconds(),t,2)}function EX(e){var t=e.getUTCDay();return 0===t?7:t}function SX(e,t){return SY(nY.count(fY(e)-1,e),t,2)}function AX(e){var t=e.getUTCDay();return t>=4||0===t?sY(e):sY.ceil(e)}function NX(e,t){return e=AX(e),SY(sY.count(fY(e),e)+(4===fY(e).getUTCDay()),t,2)}function RX(e){return e.getUTCDay()}function LX(e,t){return SY(iY.count(fY(e)-1,e),t,2)}function IX(e,t){return SY(e.getUTCFullYear()%100,t,2)}function MX(e,t){return SY((e=AX(e)).getUTCFullYear()%100,t,2)}function OX(e,t){return SY(e.getUTCFullYear()%1e4,t,4)}function DX(e,t){var r=e.getUTCDay();return SY((e=r>=4||0===r?sY(e):sY.ceil(e)).getUTCFullYear()%1e4,t,4)}function PX(){return"+0000"}function FX(){return"%"}function BX(e){return+e}function $X(e){return Math.floor(+e/1e3)}function zX(e){return CY=bY(e),TY=CY.format,CY.parse,CY.utcFormat,CY.utcParse,CY}function UX(e,t){var r,n=0,i=(e=e.slice()).length-1,a=e[n],o=e[i];return o<a&&(r=n,n=i,i=r,r=a,a=o,o=r),e[n]=t.floor(a),e[i]=t.ceil(o),e}function GX(e){return new Date(e)}function jX(e){return e instanceof Date?+e:+new Date(+e)}function VX(e,t,r,n,i,a,o,l,u,c){var h=uH(),d=h.invert,f=h.domain,p=c(".%L"),g=c(":%S"),m=c("%I:%M"),y=c("%I %p"),v=c("%a %d"),x=c("%b %d"),b=c("%B"),C=c("%Y");function T(e){return(u(e)<e?p:l(e)<e?g:o(e)<e?m:a(e)<e?y:n(e)<e?i(e)<e?v:x:r(e)<e?b:C)(e)}return s(T,"tickFormat"),h.invert=function(e){return new Date(d(e))},h.domain=function(e){return arguments.length?f(Array.from(e,jX)):f().map(GX)},h.ticks=function(t){var r=f();return e(r[0],r[r.length-1],t??10)},h.tickFormat=function(e,t){return null==t?T:c(t)},h.nice=function(e){var r=f();return(!e||"function"!=typeof e.range)&&(e=t(r[0],r[r.length-1],e??10)),e?f(UX(r,e)):h},h.copy=function(){return sH(h,VX(e,t,r,n,i,a,o,l,u,c))},h}function WX(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(6*n,6*++n);return r}function qX(e){return s((function(){return e}),"constant")}s(SY,"pad"),s(AY,"requote"),s(NY,"formatRe"),s(RY,"formatLookup"),s(LY,"parseWeekdayNumberSunday"),s(IY,"parseWeekdayNumberMonday"),s(MY,"parseWeekNumberSunday"),s(OY,"parseWeekNumberISO"),s(DY,"parseWeekNumberMonday"),s(PY,"parseFullYear"),s(FY,"parseYear"),s(BY,"parseZone"),s($Y,"parseQuarter"),s(zY,"parseMonthNumber"),s(UY,"parseDayOfMonth"),s(GY,"parseDayOfYear"),s(jY,"parseHour24"),s(VY,"parseMinutes"),s(WY,"parseSeconds"),s(qY,"parseMilliseconds"),s(HY,"parseMicroseconds"),s(YY,"parseLiteralPercent"),s(XY,"parseUnixTimestamp"),s(KY,"parseUnixTimestampSeconds"),s(ZY,"formatDayOfMonth"),s(QY,"formatHour24"),s(JY,"formatHour12"),s(eX,"formatDayOfYear"),s(tX,"formatMilliseconds"),s(rX,"formatMicroseconds"),s(nX,"formatMonthNumber"),s(iX,"formatMinutes"),s(aX,"formatSeconds"),s(oX,"formatWeekdayNumberMonday"),s(sX,"formatWeekNumberSunday"),s(lX,"dISO"),s(uX,"formatWeekNumberISO"),s(cX,"formatWeekdayNumberSunday"),s(hX,"formatWeekNumberMonday"),s(dX,"formatYear"),s(fX,"formatYearISO"),s(pX,"formatFullYear"),s(gX,"formatFullYearISO"),s(mX,"formatZone"),s(yX,"formatUTCDayOfMonth"),s(vX,"formatUTCHour24"),s(xX,"formatUTCHour12"),s(bX,"formatUTCDayOfYear"),s(CX,"formatUTCMilliseconds"),s(TX,"formatUTCMicroseconds"),s(wX,"formatUTCMonthNumber"),s(kX,"formatUTCMinutes"),s(_X,"formatUTCSeconds"),s(EX,"formatUTCWeekdayNumberMonday"),s(SX,"formatUTCWeekNumberSunday"),s(AX,"UTCdISO"),s(NX,"formatUTCWeekNumberISO"),s(RX,"formatUTCWeekdayNumberSunday"),s(LX,"formatUTCWeekNumberMonday"),s(IX,"formatUTCYear"),s(MX,"formatUTCYearISO"),s(OX,"formatUTCFullYear"),s(DX,"formatUTCFullYearISO"),s(PX,"formatUTCZone"),s(FX,"formatLiteralPercent"),s(BX,"formatUnixTimestamp"),s($X,"formatUnixTimestampSeconds"),zX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),s(zX,"defaultLocale"),s(UX,"nice"),s(GX,"date"),s(jX,"number"),s(VX,"calendar"),s((function(){return Kq.apply(VX(gY,mY,dY,cY,XH,WH,jH,UH,zH,TY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),"time"),s((function e(){var t,r,n=Qq().unknown(void 0),i=n.domain,a=n.range,o=0,l=1,u=!1,c=0,h=0,d=.5;function f(){var e=i().length,n=l<o,s=n?l:o,f=n?o:l;t=(f-s)/Math.max(1,e-c+2*h),u&&(t=Math.floor(t)),s+=(f-s-t*(e-c))*d,r=t*(1-c),u&&(s=Math.round(s),r=Math.round(r));var p=rj(e).map((function(e){return s+t*e}));return a(n?p.reverse():p)}return delete n.unknown,s(f,"rescale"),n.domain=function(e){return arguments.length?(i(e),f()):i()},n.range=function(e){return arguments.length?([o,l]=e,o=+o,l=+l,f()):[o,l]},n.rangeRound=function(e){return[o,l]=e,o=+o,l=+l,u=!0,f()},n.bandwidth=function(){return r},n.step=function(){return t},n.round=function(e){return arguments.length?(u=!!e,f()):u},n.padding=function(e){return arguments.length?(c=Math.min(1,h=+e),f()):c},n.paddingInner=function(e){return arguments.length?(c=Math.min(1,e),f()):c},n.paddingOuter=function(e){return arguments.length?(h=+e,f()):h},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),f()):d},n.copy=function(){return e(i(),[o,l]).round(u).paddingInner(c).paddingOuter(h).align(d)},Kq.apply(f(),arguments)}),"band"),s(WX,"default"),WX("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),s(qX,"default");var HX=Math.abs,YX=Math.atan2,XX=Math.cos,KX=Math.max,ZX=Math.min,QX=Math.sin,JX=Math.sqrt,eK=1e-12,tK=Math.PI,rK=tK/2,nK=2*tK;function iK(e){return e>1?0:e<-1?tK:Math.acos(e)}function aK(e){return e>=1?rK:e<=-1?-rK:Math.asin(e)}s(iK,"acos"),s(aK,"asin");var oK=Math.PI,sK=2*oK,lK=1e-6,uK=sK-lK;function cK(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function hK(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cK;let r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}s(cK,"append"),s(hK,"appendRound");var dK=class{static{s(this,"Path")}constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?cK:hK(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,i,a){this._append`C${+e},${+t},${+r},${+n},${this._x1=+i},${this._y1=+a}`}arcTo(e,t,r,n,i){if(e=+e,t=+t,r=+r,n=+n,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,s=r-e,l=n-t,u=a-e,c=o-t,h=u*u+c*c;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>lK)if(Math.abs(c*s-l*u)>lK&&i){let d=r-a,f=n-o,p=s*s+l*l,g=d*d+f*f,m=Math.sqrt(p),y=Math.sqrt(h),v=i*Math.tan((oK-Math.acos((p+h-g)/(2*m*y)))/2),x=v/y,b=v/m;Math.abs(x-1)>lK&&this._append`L${e+x*u},${t+x*c}`,this._append`A${i},${i},0,0,${+(c*d>u*f)},${this._x1=e+b*s},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,r,n,i,a){if(e=+e,t=+t,a=!!a,(r=+r)<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(n),s=r*Math.sin(n),l=e+o,u=t+s,c=1^a,h=a?n-i:i-n;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>lK||Math.abs(this._y1-u)>lK)&&this._append`L${l},${u}`,r&&(h<0&&(h=h%sK+sK),h>uK?this._append`A${r},${r},0,1,${c},${e-o},${t-s}A${r},${r},0,1,${c},${this._x1=l},${this._y1=u}`:h>lK&&this._append`A${r},${r},0,${+(h>=oK)},${c},${this._x1=e+r*Math.cos(i)},${this._y1=t+r*Math.sin(i)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}};function fK(){return new dK}function pK(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{let e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new dK(t)}function gK(e){return e.innerRadius}function mK(e){return e.outerRadius}function yK(e){return e.startAngle}function vK(e){return e.endAngle}function xK(e){return e&&e.padAngle}function bK(e,t,r,n,i,a,o,s){var l=r-e,u=n-t,c=o-i,h=s-a,d=h*l-c*u;if(!(d*d<eK))return[e+(d=(c*(t-a)-h*(e-i))/d)*l,t+d*u]}function CK(e,t,r,n,i,a,o){var s=e-r,l=t-n,u=(o?a:-a)/JX(s*s+l*l),c=u*l,h=-u*s,d=e+c,f=t+h,p=r+c,g=n+h,m=(d+p)/2,y=(f+g)/2,v=p-d,x=g-f,b=v*v+x*x,C=i-a,T=d*g-p*f,w=(x<0?-1:1)*JX(KX(0,C*C*b-T*T)),k=(T*x-v*w)/b,_=(-T*v-x*w)/b,E=(T*x+v*w)/b,S=(-T*v+x*w)/b,A=k-m,N=_-y,R=E-m,L=S-y;return A*A+N*N>R*R+L*L&&(k=E,_=S),{cx:k,cy:_,x01:-c,y01:-h,x11:k*(i/C-1),y11:_*(i/C-1)}}function TK(e){this._context=e}function wK(e){return new TK(e)}function kK(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function _K(e){return e[0]}function EK(e){return e[1]}function SK(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function AK(e){return e}s(fK,"path"),fK.prototype=dK.prototype,s(pK,"withPath"),s(gK,"arcInnerRadius"),s(mK,"arcOuterRadius"),s(yK,"arcStartAngle"),s(vK,"arcEndAngle"),s(xK,"arcPadAngle"),s(bK,"intersect"),s(CK,"cornerTangents"),s((function(){var e=gK,t=mK,r=qX(0),n=null,i=yK,a=vK,o=xK,l=null,u=pK(c);function c(){var s,c,h=+e.apply(this,arguments),d=+t.apply(this,arguments),f=i.apply(this,arguments)-rK,p=a.apply(this,arguments)-rK,g=HX(p-f),m=p>f;if(l||(l=s=u()),d<h&&(c=d,d=h,h=c),d>eK)if(g>nK-eK)l.moveTo(d*XX(f),d*QX(f)),l.arc(0,0,d,f,p,!m),h>eK&&(l.moveTo(h*XX(p),h*QX(p)),l.arc(0,0,h,p,f,m));else{var y,v,x=f,b=p,C=f,T=p,w=g,k=g,_=o.apply(this,arguments)/2,E=_>eK&&(n?+n.apply(this,arguments):JX(h*h+d*d)),S=ZX(HX(d-h)/2,+r.apply(this,arguments)),A=S,N=S;if(E>eK){var R=aK(E/h*QX(_)),L=aK(E/d*QX(_));(w-=2*R)>eK?(C+=R*=m?1:-1,T-=R):(w=0,C=T=(f+p)/2),(k-=2*L)>eK?(x+=L*=m?1:-1,b-=L):(k=0,x=b=(f+p)/2)}var I=d*XX(x),M=d*QX(x),O=h*XX(T),D=h*QX(T);if(S>eK){var P,F=d*XX(b),B=d*QX(b),$=h*XX(C),z=h*QX(C);if(g<tK)if(P=bK(I,M,$,z,F,B,O,D)){var U=I-P[0],G=M-P[1],j=F-P[0],V=B-P[1],W=1/QX(iK((U*j+G*V)/(JX(U*U+G*G)*JX(j*j+V*V)))/2),q=JX(P[0]*P[0]+P[1]*P[1]);A=ZX(S,(h-q)/(W-1)),N=ZX(S,(d-q)/(W+1))}else A=N=0}k>eK?N>eK?(y=CK($,z,I,M,d,N,m),v=CK(F,B,O,D,d,N,m),l.moveTo(y.cx+y.x01,y.cy+y.y01),N<S?l.arc(y.cx,y.cy,N,YX(y.y01,y.x01),YX(v.y01,v.x01),!m):(l.arc(y.cx,y.cy,N,YX(y.y01,y.x01),YX(y.y11,y.x11),!m),l.arc(0,0,d,YX(y.cy+y.y11,y.cx+y.x11),YX(v.cy+v.y11,v.cx+v.x11),!m),l.arc(v.cx,v.cy,N,YX(v.y11,v.x11),YX(v.y01,v.x01),!m))):(l.moveTo(I,M),l.arc(0,0,d,x,b,!m)):l.moveTo(I,M),h>eK&&w>eK?A>eK?(y=CK(O,D,F,B,h,-A,m),v=CK(I,M,$,z,h,-A,m),l.lineTo(y.cx+y.x01,y.cy+y.y01),A<S?l.arc(y.cx,y.cy,A,YX(y.y01,y.x01),YX(v.y01,v.x01),!m):(l.arc(y.cx,y.cy,A,YX(y.y01,y.x01),YX(y.y11,y.x11),!m),l.arc(0,0,h,YX(y.cy+y.y11,y.cx+y.x11),YX(v.cy+v.y11,v.cx+v.x11),m),l.arc(v.cx,v.cy,A,YX(v.y11,v.x11),YX(v.y01,v.x01),!m))):l.arc(0,0,h,T,C,m):l.lineTo(O,D)}else l.moveTo(0,0);if(l.closePath(),s)return l=null,s+""||null}return s(c,"arc"),c.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,n=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-tK/2;return[XX(n)*r,QX(n)*r]},c.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:qX(+t),c):e},c.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:qX(+e),c):t},c.cornerRadius=function(e){return arguments.length?(r="function"==typeof e?e:qX(+e),c):r},c.padRadius=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:qX(+e),c):n},c.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:qX(+e),c):i},c.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:qX(+e),c):a},c.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:qX(+e),c):o},c.context=function(e){return arguments.length?(l=e??null,c):l},c}),"default"),s(TK,"Linear"),TK.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._point=0}),"lineStart"),lineEnd:s((function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}),"point")},s(wK,"default"),s(kK,"default"),s(_K,"x"),s(EK,"y"),s((function(e,t){var r=qX(!0),n=null,i=wK,a=null,o=pK(l);function l(s){var l,u,c,h=(s=kK(s)).length,d=!1;for(null==n&&(a=i(c=o())),l=0;l<=h;++l)!(l<h&&r(u=s[l],l,s))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(u,l,s),+t(u,l,s));if(c)return a=null,c+""||null}return e="function"==typeof e?e:void 0===e?_K:qX(e),t="function"==typeof t?t:void 0===t?EK:qX(t),s(l,"line"),l.x=function(t){return arguments.length?(e="function"==typeof t?t:qX(+t),l):e},l.y=function(e){return arguments.length?(t="function"==typeof e?e:qX(+e),l):t},l.defined=function(e){return arguments.length?(r="function"==typeof e?e:qX(!!e),l):r},l.curve=function(e){return arguments.length?(i=e,null!=n&&(a=i(n)),l):i},l.context=function(e){return arguments.length?(null==e?n=a=null:a=i(n=e),l):n},l}),"default"),s(SK,"default"),s(AK,"default"),s((function(){var e=AK,t=SK,r=null,n=qX(0),i=qX(nK),a=qX(0);function o(o){var s,l,u,c,h,d=(o=kK(o)).length,f=0,p=new Array(d),g=new Array(d),m=+n.apply(this,arguments),y=Math.min(nK,Math.max(-nK,i.apply(this,arguments)-m)),v=Math.min(Math.abs(y)/d,a.apply(this,arguments)),x=v*(y<0?-1:1);for(s=0;s<d;++s)(h=g[p[s]=s]=+e(o[s],s,o))>0&&(f+=h);for(null!=t?p.sort((function(e,r){return t(g[e],g[r])})):null!=r&&p.sort((function(e,t){return r(o[e],o[t])})),s=0,u=f?(y-d*x)/f:0;s<d;++s,m=c)l=p[s],c=m+((h=g[l])>0?h*u:0)+x,g[l]={data:o[l],index:s,value:h,startAngle:m,endAngle:c,padAngle:v};return g}return s(o,"pie"),o.value=function(t){return arguments.length?(e="function"==typeof t?t:qX(+t),o):e},o.sortValues=function(e){return arguments.length?(t=e,r=null,o):t},o.sort=function(e){return arguments.length?(r=e,t=null,o):r},o.startAngle=function(e){return arguments.length?(n="function"==typeof e?e:qX(+e),o):n},o.endAngle=function(e){return arguments.length?(i="function"==typeof e?e:qX(+e),o):i},o.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:qX(+e),o):a},o}),"default");var NK=class{static{s(this,"Bump")}constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}};function RK(e){return new NK(e,!0)}function LK(e){return new NK(e,!1)}function IK(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function MK(e){this._context=e}function OK(e){return new MK(e)}function DK(){}function PK(e){this._context=e}function FK(e){return new PK(e)}function BK(e){this._context=e}function $K(e){return new BK(e)}function zK(e,t){this._basis=new MK(e),this._beta=t}s(RK,"bumpX"),s(LK,"bumpY"),s(IK,"point"),s(MK,"Basis"),MK.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 3:IK(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:IK(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}),"point")},s(OK,"default"),s(DK,"default"),s(PK,"BasisClosed"),PK.prototype={areaStart:DK,areaEnd:DK,lineStart:s((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:IK(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}),"point")},s(FK,"default"),s(BK,"BasisOpen"),BK.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:IK(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}),"point")},s($K,"default"),s(zK,"Bundle"),zK.prototype={lineStart:s((function(){this._x=[],this._y=[],this._basis.lineStart()}),"lineStart"),lineEnd:s((function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n,i=e[0],a=t[0],o=e[r]-i,s=t[r]-a,l=-1;++l<=r;)n=l/r,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+n*o),this._beta*t[l]+(1-this._beta)*(a+n*s));this._x=this._y=null,this._basis.lineEnd()}),"lineEnd"),point:s((function(e,t){this._x.push(+e),this._y.push(+t)}),"point")};var UK=s((function e(t){function r(e){return 1===t?new MK(e):new zK(e,t)}return s(r,"bundle"),r.beta=function(t){return e(+t)},r}),"custom")(.85);function GK(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function jK(e,t){this._context=e,this._k=(1-t)/6}s(GK,"point"),s(jK,"Cardinal"),jK.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:GK(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:GK(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var VK=s((function e(t){function r(e){return new jK(e,t)}return s(r,"cardinal"),r.tension=function(t){return e(+t)},r}),"custom")(0);function WK(e,t){this._context=e,this._k=(1-t)/6}s(WK,"CardinalClosed"),WK.prototype={areaStart:DK,areaEnd:DK,lineStart:s((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:GK(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var qK=s((function e(t){function r(e){return new WK(e,t)}return s(r,"cardinal"),r.tension=function(t){return e(+t)},r}),"custom")(0);function HK(e,t){this._context=e,this._k=(1-t)/6}s(HK,"CardinalOpen"),HK.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:GK(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var YK=s((function e(t){function r(e){return new HK(e,t)}return s(r,"cardinal"),r.tension=function(t){return e(+t)},r}),"custom")(0);function XK(e,t,r){var n=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>eK){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>eK){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*u+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*u+e._y1*e._l23_2a-r*e._l12_2a)/c}e._context.bezierCurveTo(n,i,a,o,e._x2,e._y2)}function KK(e,t){this._context=e,this._alpha=t}s(XK,"point"),s(KK,"CatmullRom"),KK.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:XK(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var ZK=s((function e(t){function r(e){return t?new KK(e,t):new jK(e,0)}return s(r,"catmullRom"),r.alpha=function(t){return e(+t)},r}),"custom")(.5);function QK(e,t){this._context=e,this._alpha=t}s(QK,"CatmullRomClosed"),QK.prototype={areaStart:DK,areaEnd:DK,lineStart:s((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}}),"lineEnd"),point:s((function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:XK(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var JK=s((function e(t){function r(e){return t?new QK(e,t):new WK(e,0)}return s(r,"catmullRom"),r.alpha=function(t){return e(+t)},r}),"custom")(.5);function eZ(e,t){this._context=e,this._alpha=t}s(eZ,"CatmullRomOpen"),eZ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:s((function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:XK(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var tZ=s((function e(t){function r(e){return t?new eZ(e,t):new HK(e,0)}return s(r,"catmullRom"),r.alpha=function(t){return e(+t)},r}),"custom")(.5);function rZ(e){this._context=e}function nZ(e){return new rZ(e)}function iZ(e){return e<0?-1:1}function aZ(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),o=(r-e._y1)/(i||n<0&&-0),s=(a*i+o*n)/(n+i);return(iZ(a)+iZ(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function oZ(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function sZ(e,t,r){var n=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-n)/3;e._context.bezierCurveTo(n+s,i+s*t,a-s,o-s*r,a,o)}function lZ(e){this._context=e}function uZ(e){this._context=new cZ(e)}function cZ(e){this._context=e}function hZ(e){return new lZ(e)}function dZ(e){return new uZ(e)}function fZ(e){this._context=e}function pZ(e){var t,r,n=e.length-1,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function gZ(e){return new fZ(e)}function mZ(e,t){this._context=e,this._t=t}function yZ(e){return new mZ(e,.5)}function vZ(e){return new mZ(e,0)}function xZ(e){return new mZ(e,1)}s(rZ,"LinearClosed"),rZ.prototype={areaStart:DK,areaEnd:DK,lineStart:s((function(){this._point=0}),"lineStart"),lineEnd:s((function(){this._point&&this._context.closePath()}),"lineEnd"),point:s((function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}),"point")},s(nZ,"default"),s(iZ,"sign"),s(aZ,"slope3"),s(oZ,"slope2"),s(sZ,"point"),s(lZ,"MonotoneX"),lZ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sZ(this,this._t0,oZ(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,sZ(this,oZ(this,r=aZ(this,e,t)),r);break;default:sZ(this,this._t0,r=aZ(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}),"point")},s(uZ,"MonotoneY"),(uZ.prototype=Object.create(lZ.prototype)).point=function(e,t){lZ.prototype.point.call(this,t,e)},s(cZ,"ReflectContext"),cZ.prototype={moveTo:s((function(e,t){this._context.moveTo(t,e)}),"moveTo"),closePath:s((function(){this._context.closePath()}),"closePath"),lineTo:s((function(e,t){this._context.lineTo(t,e)}),"lineTo"),bezierCurveTo:s((function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}),"bezierCurveTo")},s(hZ,"monotoneX"),s(dZ,"monotoneY"),s(fZ,"Natural"),fZ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x=[],this._y=[]}),"lineStart"),lineEnd:s((function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=pZ(e),i=pZ(t),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null}),"lineEnd"),point:s((function(e,t){this._x.push(+e),this._y.push(+t)}),"point")},s(pZ,"controlPoints"),s(gZ,"default"),s(mZ,"Step"),mZ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x=this._y=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}),"point")},s(yZ,"default"),s(vZ,"stepBefore"),s(xZ,"stepAfter");var bZ={value:s((()=>{}),"value")};function CZ(){for(var e,t=0,r=arguments.length,n={};t<r;++t){if(!(e=arguments[t]+"")||e in n||/[\s.]/.test(e))throw new Error("illegal type: "+e);n[e]=[]}return new TZ(n)}function TZ(e){this._=e}function wZ(e,t){return e.trim().split(/^|\s+/).map((function(e){var r="",n=e.indexOf(".");if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}}))}function kZ(e,t){for(var r,n=0,i=e.length;n<i;++n)if((r=e[n]).name===t)return r.value}function _Z(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=bZ,e=e.slice(0,n).concat(e.slice(n+1));break}return null!=r&&e.push({name:t,value:r}),e}s(CZ,"dispatch"),s(TZ,"Dispatch"),s(wZ,"parseTypenames"),TZ.prototype=CZ.prototype={constructor:TZ,on:s((function(e,t){var r,n=this._,i=wZ(e+"",n),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(r=(e=i[a]).type)n[r]=_Z(n[r],e.name,t);else if(null==t)for(r in n)n[r]=_Z(n[r],e.name,null);return this}for(;++a<o;)if((r=(e=i[a]).type)&&(r=kZ(n[r],e.name)))return r}),"on"),copy:s((function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new TZ(e)}),"copy"),call:s((function(e,t){if((r=arguments.length-2)>0)for(var r,n,i=new Array(r),a=0;a<r;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,r=(n=this._[e]).length;a<r;++a)n[a].value.apply(t,i)}),"call"),apply:s((function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,a=n.length;i<a;++i)n[i].value.apply(t,r)}),"apply")},s(kZ,"get"),s(_Z,"set");var EZ,SZ,AZ=CZ,NZ=0,RZ=0,LZ=0,IZ=1e3,MZ=0,OZ=0,DZ=0,PZ="object"==typeof performance&&performance.now?performance:Date,FZ="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function BZ(){return OZ||(FZ($Z),OZ=PZ.now()+DZ)}function $Z(){OZ=0}function zZ(){this._call=this._time=this._next=null}function UZ(e,t,r){var n=new zZ;return n.restart(e,t,r),n}function GZ(){BZ(),++NZ;for(var e,t=EZ;t;)(e=OZ-t._time)>=0&&t._call.call(void 0,e),t=t._next;--NZ}function jZ(){OZ=(MZ=PZ.now())+DZ,NZ=RZ=0;try{GZ()}finally{NZ=0,WZ(),OZ=0}}function VZ(){var e=PZ.now(),t=e-MZ;t>IZ&&(DZ-=t,MZ=e)}function WZ(){for(var e,t,r=EZ,n=1/0;r;)r._call?(n>r._time&&(n=r._time),e=r,r=r._next):(t=r._next,r._next=null,r=e?e._next=t:EZ=t);SZ=e,qZ(n)}function qZ(e){NZ||(RZ&&(RZ=clearTimeout(RZ)),e-OZ>24?(e<1/0&&(RZ=setTimeout(jZ,e-PZ.now()-DZ)),LZ&&(LZ=clearInterval(LZ))):(LZ||(MZ=PZ.now(),LZ=setInterval(VZ,IZ)),NZ=1,FZ(jZ)))}function HZ(e,t,r){var n=new zZ;return t=null==t?0:+t,n.restart((r=>{n.stop(),e(r+t)}),t,r),n}s(BZ,"now"),s($Z,"clearNow"),s(zZ,"Timer"),zZ.prototype=UZ.prototype={constructor:zZ,restart:s((function(e,t,r){if("function"!=typeof e)throw new TypeError("callback is not a function");r=(null==r?BZ():+r)+(null==t?0:+t),!this._next&&SZ!==this&&(SZ?SZ._next=this:EZ=this,SZ=this),this._call=e,this._time=r,qZ()}),"restart"),stop:s((function(){this._call&&(this._call=null,this._time=1/0,qZ())}),"stop")},s(UZ,"timer"),s(GZ,"timerFlush"),s(jZ,"wake"),s(VZ,"poke"),s(WZ,"nap"),s(qZ,"sleep"),s(HZ,"default");var YZ=AZ("start","end","cancel","interrupt"),XZ=[],KZ=0,ZZ=1,QZ=2,JZ=3,eQ=4,tQ=5,rQ=6;function nQ(e,t,r,n,i,a){var o=e.__transition;if(o){if(r in o)return}else e.__transition={};sQ(e,r,{name:t,index:n,group:i,on:YZ,tween:XZ,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:KZ})}function iQ(e,t){var r=oQ(e,t);if(r.state>KZ)throw new Error("too late; already scheduled");return r}function aQ(e,t){var r=oQ(e,t);if(r.state>JZ)throw new Error("too late; already running");return r}function oQ(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function sQ(e,t,r){var n,i=e.__transition;function a(e){r.state=ZZ,r.timer.restart(o,r.delay,r.time),r.delay<=e&&o(e-r.delay)}function o(a){var s,c,h,d;if(r.state!==ZZ)return u();for(s in i)if((d=i[s]).name===r.name){if(d.state===JZ)return HZ(o);d.state===eQ?(d.state=rQ,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[s]):+s<t&&(d.state=rQ,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[s])}if(HZ((function(){r.state===JZ&&(r.state=eQ,r.timer.restart(l,r.delay,r.time),l(a))})),r.state=QZ,r.on.call("start",e,e.__data__,r.index,r.group),r.state===QZ){for(r.state=JZ,n=new Array(h=r.tween.length),s=0,c=-1;s<h;++s)(d=r.tween[s].value.call(e,e.__data__,r.index,r.group))&&(n[++c]=d);n.length=c+1}}function l(t){for(var i=t<r.duration?r.ease.call(null,t/r.duration):(r.timer.restart(u),r.state=tQ,1),a=-1,o=n.length;++a<o;)n[a].call(e,i);r.state===tQ&&(r.on.call("end",e,e.__data__,r.index,r.group),u())}function u(){for(var n in r.state=rQ,r.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=r,r.timer=UZ(a,0,r.time),s(a,"schedule"),s(o,"start"),s(l,"tick"),s(u,"stop")}function lQ(e,t){var r,n,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(r=a[i]).name===t?(n=r.state>QZ&&r.state<tQ,r.state=rQ,r.timer.stop(),r.on.call(n?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete a[i]):o=!1;o&&delete e.__transition}}function uQ(e){return this.each((function(){lQ(this,e)}))}function cQ(e,t){var r,n;return function(){var i=aQ(this,e),a=i.tween;if(a!==r)for(var o=0,s=(n=r=a).length;o<s;++o)if(n[o].name===t){(n=n.slice()).splice(o,1);break}i.tween=n}}function hQ(e,t,r){var n,i;if("function"!=typeof r)throw new Error;return function(){var a=aQ(this,e),o=a.tween;if(o!==n){i=(n=o).slice();for(var s={name:t,value:r},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function dQ(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n,i=oQ(this.node(),r).tween,a=0,o=i.length;a<o;++a)if((n=i[a]).name===e)return n.value;return null}return this.each((null==t?cQ:hQ)(r,e,t))}function fQ(e,t,r){var n=e._id;return e.each((function(){var e=aQ(this,n);(e.value||(e.value={}))[t]=r.apply(this,arguments)})),function(e){return oQ(e,n).value[t]}}function pQ(e,t){var r;return("number"==typeof t?Iq:t instanceof PW?Sq:(r=PW(t))?(t=r,Sq):Bq)(e,t)}function gQ(e){return function(){this.removeAttribute(e)}}function mQ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yQ(e,t,r){var n,i,a=r+"";return function(){var o=this.getAttribute(e);return o===a?null:o===n?i:i=t(n=o,r)}}function vQ(e,t,r){var n,i,a=r+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===n?i:i=t(n=o,r)}}function xQ(e,t,r){var n,i,a;return function(){var o,s,l=r(this);return null==l?void this.removeAttribute(e):(o=this.getAttribute(e))===(s=l+"")?null:o===n&&s===i?a:(i=s,a=t(n=o,l))}}function bQ(e,t,r){var n,i,a;return function(){var o,s,l=r(this);return null==l?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:o===n&&s===i?a:(i=s,a=t(n=o,l))}}function CQ(e,t){var r=nV(e),n="transform"===r?Xq:pQ;return this.attrTween(e,"function"==typeof t?(r.local?bQ:xQ)(r,n,fQ(this,"attr."+e,t)):null==t?(r.local?mQ:gQ)(r):(r.local?vQ:yQ)(r,n,t))}function TQ(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function wQ(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function kQ(e,t){var r,n;function i(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&wQ(e,i)),r}return s(i,"tween"),i._value=t,i}function _Q(e,t){var r,n;function i(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&TQ(e,i)),r}return s(i,"tween"),i._value=t,i}function EQ(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;var n=nV(e);return this.tween(r,(n.local?kQ:_Q)(n,t))}function SQ(e,t){return function(){iQ(this,e).delay=+t.apply(this,arguments)}}function AQ(e,t){return t=+t,function(){iQ(this,e).delay=t}}function NQ(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?SQ:AQ)(t,e)):oQ(this.node(),t).delay}function RQ(e,t){return function(){aQ(this,e).duration=+t.apply(this,arguments)}}function LQ(e,t){return t=+t,function(){aQ(this,e).duration=t}}function IQ(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?RQ:LQ)(t,e)):oQ(this.node(),t).duration}function MQ(e,t){if("function"!=typeof t)throw new Error;return function(){aQ(this,e).ease=t}}function OQ(e){var t=this._id;return arguments.length?this.each(MQ(t,e)):oQ(this.node(),t).ease}function DQ(e,t){return function(){var r=t.apply(this,arguments);if("function"!=typeof r)throw new Error;aQ(this,e).ease=r}}function PQ(e){if("function"!=typeof e)throw new Error;return this.each(DQ(this._id,e))}function FQ(e){"function"!=typeof e&&(e=wj(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a,o=t[i],s=o.length,l=n[i]=[],u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new dJ(n,this._parents,this._name,this._id)}function BQ(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,a=Math.min(n,i),o=new Array(n),s=0;s<a;++s)for(var l,u=t[s],c=r[s],h=u.length,d=o[s]=new Array(h),f=0;f<h;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<n;++s)o[s]=t[s];return new dJ(o,this._parents,this._name,this._id)}function $Q(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}function zQ(e,t,r){var n,i,a=$Q(t)?iQ:aQ;return function(){var o=a(this,e),s=o.on;s!==n&&(i=(n=s).copy()).on(t,r),o.on=i}}function UQ(e,t){var r=this._id;return arguments.length<2?oQ(this.node(),r).on.on(e):this.each(zQ(r,e,t))}function GQ(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function jQ(){return this.on("end.remove",GQ(this._id))}function VQ(e){var t=this._name,r=this._id;"function"!=typeof e&&(e=mj(e));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var s,l,u=n[o],c=u.length,h=a[o]=new Array(c),d=0;d<c;++d)(s=u[d])&&(l=e.call(s,s.__data__,d,u))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,nQ(h[d],t,r,d,h,oQ(s,r)));return new dJ(a,this._parents,t,r)}function WQ(e){var t=this._name,r=this._id;"function"!=typeof e&&(e=bj(e));for(var n=this._groups,i=n.length,a=[],o=[],s=0;s<i;++s)for(var l,u=n[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var d,f=e.call(l,l.__data__,h,u),p=oQ(l,r),g=0,m=f.length;g<m;++g)(d=f[g])&&nQ(d,t,r,g,f,p);a.push(f),o.push(l)}return new dJ(a,o,t,r)}s(nQ,"default"),s(iQ,"init"),s(aQ,"set"),s(oQ,"get"),s(sQ,"create"),s(lQ,"default"),s(uQ,"default"),s(cQ,"tweenRemove"),s(hQ,"tweenFunction"),s(dQ,"default"),s(fQ,"tweenValue"),s(pQ,"default"),s(gQ,"attrRemove"),s(mQ,"attrRemoveNS"),s(yQ,"attrConstant"),s(vQ,"attrConstantNS"),s(xQ,"attrFunction"),s(bQ,"attrFunctionNS"),s(CQ,"default"),s(TQ,"attrInterpolate"),s(wQ,"attrInterpolateNS"),s(kQ,"attrTweenNS"),s(_Q,"attrTween"),s(EQ,"default"),s(SQ,"delayFunction"),s(AQ,"delayConstant"),s(NQ,"default"),s(RQ,"durationFunction"),s(LQ,"durationConstant"),s(IQ,"default"),s(MQ,"easeConstant"),s(OQ,"default"),s(DQ,"easeVarying"),s(PQ,"default"),s(FQ,"default"),s(BQ,"default"),s($Q,"start"),s(zQ,"onFunction"),s(UQ,"default"),s(GQ,"removeFunction"),s(jQ,"default"),s(VQ,"default"),s(WQ,"default");var qQ=pW.prototype.constructor;function HQ(){return new qQ(this._groups,this._parents)}function YQ(e,t){var r,n,i;return function(){var a=mV(this,e),o=(this.style.removeProperty(e),mV(this,e));return a===o?null:a===r&&o===n?i:i=t(r=a,n=o)}}function XQ(e){return function(){this.style.removeProperty(e)}}function KQ(e,t,r){var n,i,a=r+"";return function(){var o=mV(this,e);return o===a?null:o===n?i:i=t(n=o,r)}}function ZQ(e,t,r){var n,i,a;return function(){var o=mV(this,e),s=r(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=mV(this,e)),o===l?null:o===n&&l===i?a:(i=l,a=t(n=o,s))}}function QQ(e,t){var r,n,i,a,o="style."+t,s="end."+o;return function(){var l=aQ(this,e),u=l.on,c=null==l.value[o]?a||(a=XQ(t)):void 0;(u!==r||i!==c)&&(n=(r=u).copy()).on(s,i=c),l.on=n}}function JQ(e,t,r){var n="transform"==(e+="")?Yq:pQ;return null==t?this.styleTween(e,YQ(e,n)).on("end.style."+e,XQ(e)):"function"==typeof t?this.styleTween(e,ZQ(e,n,fQ(this,"style."+e,t))).each(QQ(this._id,e)):this.styleTween(e,KQ(e,n,t),r).on("end.style."+e,null)}function eJ(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function tJ(e,t,r){var n,i;function a(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&eJ(e,a,r)),n}return s(a,"tween"),a._value=t,a}function rJ(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,tJ(e,t,r??""))}function nJ(e){return function(){this.textContent=e}}function iJ(e){return function(){var t=e(this);this.textContent=t??""}}function aJ(e){return this.tween("text","function"==typeof e?iJ(fQ(this,"text",e)):nJ(null==e?"":e+""))}function oJ(e){return function(t){this.textContent=e.call(this,t)}}function sJ(e){var t,r;function n(){var n=e.apply(this,arguments);return n!==r&&(t=(r=n)&&oJ(n)),t}return s(n,"tween"),n._value=e,n}function lJ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,sJ(e))}function uJ(){for(var e=this._name,t=this._id,r=pJ(),n=this._groups,i=n.length,a=0;a<i;++a)for(var o,s=n[a],l=s.length,u=0;u<l;++u)if(o=s[u]){var c=oQ(o,t);nQ(o,e,r,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new dJ(n,this._parents,e,r)}function cJ(){var e,t,r=this,n=r._id,i=r.size();return new Promise((function(a,o){var l={value:o},u={value:s((function(){0==--i&&a()}),"value")};r.each((function(){var r=aQ(this,n),i=r.on;i!==e&&((t=(e=i).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),r.on=t})),0===i&&a()}))}s(HQ,"default"),s(YQ,"styleNull"),s(XQ,"styleRemove"),s(KQ,"styleConstant"),s(ZQ,"styleFunction"),s(QQ,"styleMaybeRemove"),s(JQ,"default"),s(eJ,"styleInterpolate"),s(tJ,"styleTween"),s(rJ,"default"),s(nJ,"textConstant"),s(iJ,"textFunction"),s(aJ,"default"),s(oJ,"textInterpolate"),s(sJ,"textTween"),s(lJ,"default"),s(uJ,"default"),s(cJ,"default");var hJ=0;function dJ(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function fJ(e){return pW().transition(e)}function pJ(){return++hJ}s(dJ,"Transition"),s(fJ,"transition"),s(pJ,"newId");var gJ=pW.prototype;function mJ(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}dJ.prototype=fJ.prototype={constructor:dJ,select:VQ,selectAll:WQ,selectChild:gJ.selectChild,selectChildren:gJ.selectChildren,filter:FQ,merge:BQ,selection:HQ,transition:uJ,call:gJ.call,nodes:gJ.nodes,node:gJ.node,size:gJ.size,empty:gJ.empty,each:gJ.each,on:UQ,attr:CQ,attrTween:EQ,style:JQ,styleTween:rJ,text:aJ,textTween:lJ,remove:jQ,tween:dQ,delay:NQ,duration:IQ,ease:OQ,easeVarying:PQ,end:cJ,[Symbol.iterator]:gJ[Symbol.iterator]},s(mJ,"cubicInOut");var yJ={time:null,delay:0,duration:250,ease:mJ};function vJ(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function xJ(e){var t,r;e instanceof dJ?(t=e._id,e=e._name):(t=pJ(),(r=yJ).time=BZ(),e=null==e?null:e+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var o,s=n[a],l=s.length,u=0;u<l;++u)(o=s[u])&&nQ(o,e,t,u,s,r||vJ(o,t));return new dJ(n,this._parents,e,t)}function bJ(e){return[+e[0],+e[1]]}function CJ(e){return[bJ(e[0]),bJ(e[1])]}function TJ(e){return{type:e}}function wJ(e,t,r){this.k=e,this.x=t,this.y=r}s(vJ,"inherit"),s(xJ,"default"),pW.prototype.interrupt=uQ,pW.prototype.transition=xJ,s(bJ,"number1"),s(CJ,"number2"),["w","e"].map(TJ),s((function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]}),"input"),s((function(e){return e&&[e[0][0],e[1][0]]}),"output"),["n","s"].map(TJ),s((function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]}),"input"),s((function(e){return e&&[e[0][1],e[1][1]]}),"output"),["n","w","e","s","nw","ne","sw","se"].map(TJ),s((function(e){return null==e?null:CJ(e)}),"input"),s((function(e){return e}),"output"),s(TJ,"type"),s(wJ,"Transform"),wJ.prototype={constructor:wJ,scale:s((function(e){return 1===e?this:new wJ(this.k*e,this.x,this.y)}),"scale"),translate:s((function(e,t){return 0===e&0===t?this:new wJ(this.k,this.x+this.k*e,this.y+this.k*t)}),"translate"),apply:s((function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]}),"apply"),applyX:s((function(e){return e*this.k+this.x}),"applyX"),applyY:s((function(e){return e*this.k+this.y}),"applyY"),invert:s((function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]}),"invert"),invertX:s((function(e){return(e-this.x)/this.k}),"invertX"),invertY:s((function(e){return(e-this.y)/this.k}),"invertY"),rescaleX:s((function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))}),"rescaleX"),rescaleY:s((function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))}),"rescaleY"),toString:s((function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}),"toString")};var kJ=new wJ(1,0,0);function _J(e){for(;!e.__zoom;)if(!(e=e.parentNode))return kJ;return e.__zoom}_J.prototype=wJ.prototype,s(_J,"transform");
/*! Bundled license information:

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE *)
*/
var EJ=s((e=>{let{securityLevel:t}=RG(),r=gW("body");if("sandbox"===t){let t=gW(`#i${e}`).node()?.contentDocument??document;r=gW(t.body)}return r.select(`#${e}`)}),"selectSvgElement"),SJ=l(((e,t)=>{var r=1e3,n=60*r,i=60*n,a=24*i;function o(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*a;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function l(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=i?Math.round(e/i)+"h":t>=n?Math.round(e/n)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}function u(e){var t=Math.abs(e);return t>=a?c(e,t,a,"day"):t>=i?c(e,t,i,"hour"):t>=n?c(e,t,n,"minute"):t>=r?c(e,t,r,"second"):e+" ms"}function c(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return o(e);if("number"===r&&isFinite(e))return t.long?u(e):l(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},s(o,"parse"),s(l,"fmtShort"),s(u,"fmtLong"),s(c,"plural")})),AJ=l(((e,t)=>{function r(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let t,i,a,o=null;function l(...e){if(!l.enabled)return;let n=l,i=Number(new Date),a=i-(t||i);n.diff=a,n.prev=t,n.curr=i,t=i,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,i)=>{if("%%"===t)return"%";o++;let a=r.formatters[i];if("function"==typeof a){let r=e[o];t=a.call(n,r),e.splice(o,1),o--}return t})),r.formatArgs.call(n,e),(n.log||r.log).apply(n,e)}return s(l,"debug"),l.namespace=e,l.useColors=r.useColors(),l.color=r.selectColor(e),l.extend=n,l.destroy=r.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:s((()=>null!==o?o:(i!==r.namespaces&&(i=r.namespaces,a=r.enabled(e)),a)),"get"),set:s((e=>{o=e}),"set")}),"function"==typeof r.init&&r.init(l),l}function n(e,t){let n=r(this.namespace+(typeof t>"u"?":":t)+e);return n.log=this.log,n}function i(e){r.save(e),r.namespaces=e,r.names=[],r.skips=[];let t,n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.slice(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function a(){let e=[...r.names.map(l),...r.skips.map(l).map((e=>"-"+e))].join(",");return r.enable(""),e}function o(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1}function l(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function u(e){return e instanceof Error?e.stack||e.message:e}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=i,r.enabled=o,r.humanize=SJ(),r.destroy=c,Object.keys(e).forEach((t=>{r[t]=e[t]})),r.names=[],r.skips=[],r.formatters={},s(t,"selectColor"),r.selectColor=t,s(r,"createDebug"),s(n,"extend"),s(i,"enable"),s(a,"disable"),s(o,"enabled"),s(l,"toNamespace"),s(u,"coerce"),s(c,"destroy"),r.enable(r.load()),r}s(r,"setup"),t.exports=r})),NJ=l(((e,t)=>{function r(){if(typeof window<"u"&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),e.splice(i,0,r)}function i(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch{}}function a(){let t;try{t=e.storage.getItem("debug")}catch{}return!t&&typeof qf<"u"&&"env"in qf&&(t=qf.env.DEBUG),t}function o(){try{return localStorage}catch{}}e.formatArgs=n,e.save=i,e.load=a,e.useColors=r,e.storage=o(),e.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],s(r,"useColors"),s(n,"formatArgs"),e.log=console.debug||console.log||(()=>{}),s(i,"save"),s(a,"load"),s(o,"localstorage"),t.exports=AJ()(e);var{formatters:l}=t.exports;l.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),RJ=Object.freeze({left:0,top:0,width:16,height:16}),LJ=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),IJ=Object.freeze({...RJ,...LJ}),MJ=Object.freeze({...IJ,body:"",hidden:!1}),OJ=Object.freeze({width:null,height:null}),DJ=Object.freeze({...OJ,...LJ}),PJ=/^[a-z0-9]+(-[a-z0-9]+)*$/,FJ=s(((e,t,r,n="")=>{let i=e.split(":");if("@"===e.slice(0,1)){if(i.length<2||i.length>3)return null;n=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){let e=i.pop(),r=i.pop(),a={provider:i.length>0?i[0]:n,prefix:r,name:e};return t&&!BJ(a)?null:a}let a=i[0],o=a.split("-");if(o.length>1){let e={provider:n,prefix:o.shift(),name:o.join("-")};return t&&!BJ(e)?null:e}if(r&&""===n){let e={provider:n,prefix:"",name:a};return t&&!BJ(e,r)?null:e}return null}),"stringToIcon"),BJ=s(((e,t)=>!!e&&!(""!==e.provider&&!e.provider.match(PJ)||!(t&&""===e.prefix||e.prefix.match(PJ))||!e.name.match(PJ))),"validateIconName");function $J(e,t){let r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);let n=((e.rotate||0)+(t.rotate||0))%4;return n&&(r.rotate=n),r}function zJ(e,t){let r=$J(e,t);for(let n in MJ)n in LJ?n in e&&!(n in r)&&(r[n]=LJ[n]):n in t?r[n]=t[n]:n in e&&(r[n]=e[n]);return r}function UJ(e,t){let r=e.icons,n=e.aliases||Object.create(null),i=Object.create(null);function a(e){if(r[e])return i[e]=[];if(!(e in i)){i[e]=null;let t=n[e]&&n[e].parent,r=t&&a(t);r&&(i[e]=[t].concat(r))}return i[e]}return s(a,"resolve"),(t||Object.keys(r).concat(Object.keys(n))).forEach(a),i}function GJ(e,t,r){let n=e.icons,i=e.aliases||Object.create(null),a={};function o(e){a=zJ(n[e]||i[e],a)}return s(o,"parse"),o(t),r.forEach(o),zJ(e,a)}function jJ(e,t){if(e.icons[t])return GJ(e,t,[]);let r=UJ(e,[t])[t];return r?GJ(e,t,r):null}s($J,"mergeIconTransformations"),s(zJ,"mergeIconData"),s(UJ,"getIconsTree"),s(GJ,"internalGetIconData"),s(jJ,"getIconData");var VJ=/(-?[0-9.]*[0-9]+[0-9.]*)/g,WJ=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function qJ(e,t,r){if(1===t)return e;if(r=r||100,"number"==typeof e)return Math.ceil(e*t*r)/r;if("string"!=typeof e)return e;let n=e.split(VJ);if(null===n||!n.length)return e;let i=[],a=n.shift(),o=WJ.test(a);for(;;){if(o){let e=parseFloat(a);isNaN(e)?i.push(a):i.push(Math.ceil(e*t*r)/r)}else i.push(a);if(a=n.shift(),void 0===a)return i.join("");o=!o}}function HJ(e,t="defs"){let r="",n=e.indexOf("<"+t);for(;n>=0;){let i=e.indexOf(">",n),a=e.indexOf("</"+t);if(-1===i||-1===a)break;let o=e.indexOf(">",a);if(-1===o)break;r+=e.slice(i+1,a).trim(),e=e.slice(0,n).trim()+e.slice(o+1)}return{defs:r,content:e}}function YJ(e,t){return e?"<defs>"+e+"</defs>"+t:t}function XJ(e,t,r){let n=HJ(e);return YJ(n.defs,t+n.content+r)}s(qJ,"calculateSize"),s(HJ,"splitSVGDefs"),s(YJ,"mergeDefsAndContent"),s(XJ,"wrapSVGContent");var KJ=s((e=>"unset"===e||"undefined"===e||"none"===e),"isUnsetKeyword");function ZJ(e,t){let r={...IJ,...e},n={...DJ,...t},i={left:r.left,top:r.top,width:r.width,height:r.height},a=r.body;[r,n].forEach((e=>{let t,r=[],n=e.hFlip,o=e.vFlip,s=e.rotate;switch(n?o?s+=2:(r.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),r.push("scale(-1 1)"),i.top=i.left=0):o&&(r.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),r.push("scale(1 -1)"),i.top=i.left=0),s<0&&(s-=4*Math.floor(s/4)),s%=4,s){case 1:t=i.height/2+i.top,r.unshift("rotate(90 "+t.toString()+" "+t.toString()+")");break;case 2:r.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:t=i.width/2+i.left,r.unshift("rotate(-90 "+t.toString()+" "+t.toString()+")")}s%2==1&&(i.left!==i.top&&(t=i.left,i.left=i.top,i.top=t),i.width!==i.height&&(t=i.width,i.width=i.height,i.height=t)),r.length&&(a=XJ(a,'<g transform="'+r.join(" ")+'">',"</g>"))}));let o,l,u=n.width,c=n.height,h=i.width,d=i.height;null===u?(l=null===c?"1em":"auto"===c?d:c,o=qJ(l,h/d)):(o="auto"===u?h:u,l=null===c?qJ(o,d/h):"auto"===c?d:c);let f={},p=s(((e,t)=>{KJ(t)||(f[e]=t.toString())}),"setAttr");p("width",o),p("height",l);let g=[i.left,i.top,h,d];return f.viewBox=g.join(" "),{attributes:f,viewBox:g,body:a}}s(ZJ,"iconToSVG");var QJ=/\sid="(\S+)"/g,JJ="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16),e0=0;function t0(e,t=JJ){let r,n=[];for(;r=QJ.exec(e);)n.push(r[1]);if(!n.length)return e;let i="suffix"+(16777216*Math.random()|Date.now()).toString(16);return n.forEach((r=>{let n="function"==typeof t?t(r):t+(e0++).toString(),a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+n+i+"$3")})),e=e.replace(new RegExp(i,"g"),"")}function r0(e,t){let r=-1===e.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(let e in t)r+=" "+e+'="'+t[e]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}s(t0,"replaceIDs"),s(r0,"iconToHTML"),d(NJ(),1);var n0={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},i0=new Map,a0=new Map,o0=s((e=>{for(let t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(rz.debug("Registering icon pack:",t.name),"loader"in t)a0.set(t.name,t.loader);else{if(!("icons"in t))throw rz.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.');i0.set(t.name,t.icons)}}}),"registerIconPacks"),s0=s((async(e,t)=>{let r=FJ(e,!0,void 0!==t);if(!r)throw new Error(`Invalid icon name: ${e}`);let n=r.prefix||t;if(!n)throw new Error(`Icon name must contain a prefix: ${e}`);let i=i0.get(n);if(!i){let e=a0.get(n);if(!e)throw new Error(`Icon set not found: ${r.prefix}`);try{i={...await e(),prefix:n},i0.set(n,i)}catch(e){throw rz.error(e),new Error(`Failed to load icon set: ${r.prefix}`)}}let a=jJ(i,r.name);if(!a)throw new Error(`Icon not found: ${e}`);return a}),"getRegisteredIconData"),l0=s((async(e,t)=>{let r;try{r=await s0(e,t?.fallbackPrefix)}catch(e){rz.error(e),r=n0}let n=ZJ(r,t);return r0(t0(n.body),n.attributes)}),"getIconSVG"),u0=l((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BLANK_URL=e.relativeFirstCharacters=e.whitespaceEscapeCharsRegex=e.urlSchemeRegex=e.ctrlCharactersRegex=e.htmlCtrlEntityRegex=e.htmlEntitiesRegex=e.invalidProtocolRegex=void 0,e.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,e.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,e.htmlCtrlEntityRegex=/&(newline|tab);/gi,e.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,e.urlSchemeRegex=/^.+(:|&colon;)/gim,e.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,e.relativeFirstCharacters=[".","/"],e.BLANK_URL="about:blank"})),c0=l((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sanitizeUrl=void 0;var t=u0();function r(e){return t.relativeFirstCharacters.indexOf(e[0])>-1}function n(e){return e.replace(t.ctrlCharactersRegex,"").replace(t.htmlEntitiesRegex,(function(e,t){return String.fromCharCode(t)}))}function i(e){return URL.canParse(e)}function a(e){try{return decodeURIComponent(e)}catch{return e}}function o(e){if(!e)return t.BLANK_URL;var o,s=a(e.trim());do{o=(s=a(s=n(s).replace(t.htmlCtrlEntityRegex,"").replace(t.ctrlCharactersRegex,"").replace(t.whitespaceEscapeCharsRegex,"").trim())).match(t.ctrlCharactersRegex)||s.match(t.htmlEntitiesRegex)||s.match(t.htmlCtrlEntityRegex)||s.match(t.whitespaceEscapeCharsRegex)}while(o&&o.length>0);var l=s;if(!l)return t.BLANK_URL;if(r(l))return l;var u=l.trimStart(),c=u.match(t.urlSchemeRegex);if(!c)return l;var h=c[0].toLowerCase().trim();if(t.invalidProtocolRegex.test(h))return t.BLANK_URL;var d=u.replace(/\\/g,"/");if("mailto:"===h||h.includes("://"))return d;if("http:"===h||"https:"===h){if(!i(d))return t.BLANK_URL;var f=new URL(d);return f.protocol=f.protocol.toLowerCase(),f.hostname=f.hostname.toLowerCase(),f.toString()}return d}s(r,"isRelativeUrlWithoutProtocol"),s(n,"decodeHtmlCharacters"),s(i,"isValidUrl"),s(a,"decodeURI"),s(o,"sanitizeUrl"),e.sanitizeUrl=o})),h0=d(c0(),1),d0={curveBasis:OK,curveBasisClosed:FK,curveBasisOpen:$K,curveBumpX:RK,curveBumpY:LK,curveBundle:UK,curveCardinalClosed:qK,curveCardinalOpen:YK,curveCardinal:VK,curveCatmullRomClosed:JK,curveCatmullRomOpen:tZ,curveCatmullRom:ZK,curveLinear:wK,curveLinearClosed:nZ,curveMonotoneX:hZ,curveMonotoneY:dZ,curveNatural:gZ,curveStep:yZ,curveStepAfter:xZ,curveStepBefore:vZ},f0=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi;s((function(e,t){let r=p0(e,/(?:init\b)|(?:initialize\b)/),n={};if(Array.isArray(r)){let e=r.map((e=>e.args));EU(e),n=fz(n,[...e])}else n=r.args;if(!n)return;let i=cz(e,t),a="config";return void 0!==n[a]&&("flowchart-v2"===i&&(i="flowchart"),n[i]=n[a],delete n[a]),n}),"detectInit");var p0=s((function(e,t=null){try{let r=new RegExp(`[%]{2}(?![{]${f0.source})(?=[}][%]{2}).*\n`,"ig");e=e.trim().replace(r,"").replace(/'/gm,'"'),rz.debug(`Detecting diagram directive${null!==t?" type:"+t:""} based on the text:${e}`);let n,i=[];for(;null!==(n=oz.exec(e));)if(n.index===oz.lastIndex&&oz.lastIndex++,n&&!t||t&&n[1]?.match(t)||t&&n[2]?.match(t)){let e=n[1]?n[1]:n[2],t=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;i.push({type:e,args:t})}return 0===i.length?{type:e,args:null}:1===i.length?i[0]:i}catch(r){return rz.error(`ERROR: ${r.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}}),"detectDirective");function g0(e,t){return e&&t?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0}function m0(e){let t,r=0;return e.forEach((e=>{r+=g0(e,t),t=e})),v0(e,r/2)}s((function(e){return e.replace(oz,"")}),"removeDirectives"),s((function(e,t){for(let[r,n]of t.entries())if(n.match(e))return r;return-1}),"isSubstringInArray"),s((function(e,t){if(!e)return t;let r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return d0[r]??t}),"interpolateToCurve"),s((function(e,t){let r=e.trim();if(r)return"loose"!==t.securityLevel?(0,h0.sanitizeUrl)(r):r}),"formatUrl"),s(((e,...t)=>{let r=e.split("."),n=r.length-1,i=r[n],a=window;for(let t=0;t<n;t++)if(a=a[r[t]],!a)return void rz.error(`Function name: ${e} not found in window`);a[i](...t)}),"runFunc"),s(g0,"distance"),s(m0,"traverseEdge"),s((function(e){return 1===e.length?e[0]:m0(e)}),"calcLabelPosition");var y0=s(((e,t=2)=>{let r=Math.pow(10,t);return Math.round(e*r)/r}),"roundNumber"),v0=s(((e,t)=>{let r,n=t;for(let t of e){if(r){let e=g0(t,r);if(e<n)n-=e;else{let i=n/e;if(i<=0)return r;if(i>=1)return{x:t.x,y:t.y};if(i>0&&i<1)return{x:y0((1-i)*r.x+i*t.x,5),y:y0((1-i)*r.y+i*t.y,5)}}}r=t}throw new Error("Could not find a suitable point for the given distance")}),"calculatePoint");s(((e,t,r)=>{rz.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());let n=v0(t,25),i=e?10:5,a=Math.atan2(t[0].y-n.y,t[0].x-n.x),o={x:0,y:0};return o.x=Math.sin(a)*i+(t[0].x+n.x)/2,o.y=-Math.cos(a)*i+(t[0].y+n.y)/2,o}),"calcCardinalityPosition"),s((function(e,t,r){let n=structuredClone(r);rz.info("our points",n),"start_left"!==t&&"start_right"!==t&&n.reverse();let i=v0(n,25+e),a=10+.5*e,o=Math.atan2(n[0].y-i.y,n[0].x-i.x),s={x:0,y:0};return"start_left"===t?(s.x=Math.sin(o+Math.PI)*a+(n[0].x+i.x)/2,s.y=-Math.cos(o+Math.PI)*a+(n[0].y+i.y)/2):"end_right"===t?(s.x=Math.sin(o-Math.PI)*a+(n[0].x+i.x)/2-5,s.y=-Math.cos(o-Math.PI)*a+(n[0].y+i.y)/2-5):"end_left"===t?(s.x=Math.sin(o)*a+(n[0].x+i.x)/2-5,s.y=-Math.cos(o)*a+(n[0].y+i.y)/2-5):(s.x=Math.sin(o)*a+(n[0].x+i.x)/2,s.y=-Math.cos(o)*a+(n[0].y+i.y)/2),s}),"calcTerminalLabelPosition"),s((function(e){let t="",r="";for(let n of e)void 0!==n&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":t=t+n+";");return{style:t,labelStyle:r}}),"getStylesFromArray");var x0=0;function b0(e){let t="",r="0123456789abcdef";for(let n=0;n<e;n++)t+=r.charAt(Math.floor(16*Math.random()));return t}s((()=>(x0++,"id-"+Math.random().toString(36).substr(2,12)+"-"+x0)),"generateId"),s(b0,"makeRandomHex"),s((e=>b0(e.length)),"random");var C0=s((function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}}),"getTextObj"),T0=s((function(e,t){let r=t.text.replace(uG.lineBreakRegex," "),[,n]=S0(t.fontSize),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.style("text-anchor",t.anchor),i.style("font-family",t.fontFamily),i.style("font-size",n),i.style("font-weight",t.fontWeight),i.attr("fill",t.fill),void 0!==t.class&&i.attr("class",t.class);let a=i.append("tspan");return a.attr("x",t.x+2*t.textMargin),a.attr("fill",t.fill),a.text(r),i}),"drawSimpleText");Ng(((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),uG.lineBreakRegex.test(e)))return e;let n=e.split(" ").filter(Boolean),i=[],a="";return n.forEach(((e,o)=>{let s=k0(`${e} `,r),l=k0(a,r);if(s>t){let{hyphenatedStrings:n,remainingWord:o}=w0(e,t,"-",r);i.push(a,...n),a=o}else l+s>=t?(i.push(a),a=e):a=[a,e].filter(Boolean).join(" ");o+1===n.length&&i.push(a)})),i.filter((e=>""!==e)).join(r.joinWith)}),((e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`));var w0=Ng(((e,t,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);let i=[...e],a=[],o="";return i.forEach(((e,s)=>{let l=`${o}${e}`;if(k0(l,n)>=t){let e=s+1,t=i.length===e,n=`${l}${r}`;a.push(t?l:n),o=""}else o=l})),{hyphenatedStrings:a,remainingWord:o}}),((e,t,r="-",n)=>`${e}${t}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`));function k0(e,t){return E0(e,t).width}s((function(e,t){return E0(e,t).height}),"calculateTextHeight"),s(k0,"calculateTextWidth");var _0,E0=Ng(((e,t)=>{let{fontSize:r=12,fontFamily:n="Arial",fontWeight:i=400}=t;if(!e)return{width:0,height:0};let[,a]=S0(r),o=["sans-serif",n],s=e.split(uG.lineBreakRegex),l=[],u=gW("body");if(!u.remove)return{width:0,height:0,lineHeight:0};let c=u.append("svg");for(let e of o){let t=0,r={width:0,height:0,lineHeight:0};for(let n of s){let o=C0();o.text=n||"​";let s=T0(c,o).style("font-size",a).style("font-weight",i).style("font-family",e),l=(s._groups||s)[0][0].getBBox();if(0===l.width&&0===l.height)throw new Error("svg element not in render tree");r.width=Math.round(Math.max(r.width,l.width)),t=Math.round(l.height),r.height+=t,r.lineHeight=Math.round(Math.max(r.lineHeight,t))}l.push(r)}return c.remove(),l[isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1]}),((e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`));(class{constructor(e=!1,t){this.count=0,this.count=t?t.length:0,this.next=e?()=>this.count++:()=>Date.now()}static{s(this,"InitIDGenerator")}}),s((function(e){return _0=_0||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),_0.innerHTML=e,unescape(_0.textContent)}),"entityDecode"),s((function(e){return"str"in e}),"isDetailedError"),s(((e,t,r,n)=>{if(!n)return;let i=e.node()?.getBBox();i&&e.append("text").text(n).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-r).attr("class",t)}),"insertTitle");var S0=s((e=>{if("number"==typeof e)return[e,e+"px"];let t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]}),"parseFontSize");s((function(e,t){return tv({},e,t)}),"cleanAndMerge"),s((function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,(function(e){return e.substring(0,e.length-1)})),t=t.replace(/classDef.*:\S*#.*;/g,(function(e){return e.substring(0,e.length-1)})),t=t.replace(/#\w+;/g,(function(e){let t=e.substring(1,e.length-1);return/^\+?\d+$/.test(t)?"ﬂ°°"+t+"¶ß":"ﬂ°"+t+"¶ß"})),t}),"encodeEntities");var A0=s((function(e){return e.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")}),"decodeEntities");function N0(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from("string"==typeof e?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce((function(e,t){var r=t.match(/\n([\t ]+|(?!\s).)/g);return r?e.concat(r.map((function(e){var t,r;return null!==(r=null===(t=e.match(/[\t ]/g))||void 0===t?void 0:t.length)&&void 0!==r?r:0}))):e}),[]);if(i.length){var a=new RegExp("\n[\t ]{"+Math.min.apply(Math,i)+"}","g");n=n.map((function(e){return e.replace(a,"\n")}))}n[0]=n[0].replace(/^\r?\n/,"");var o=n[0];return t.forEach((function(e,t){var r=o.match(/(?:^|\n)( *)$/),i=r?r[1]:"",a=e;"string"==typeof e&&e.includes("\n")&&(a=String(e).split("\n").map((function(e,t){return 0===t?e:""+i+e})).join("\n")),o+=a+n[t+1]})),o}function R0(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}s(((e,t,{counter:r=0,prefix:n,suffix:i})=>`${n?`${n}_`:""}${e}_${t}_${r}${i?`_${i}`:""}`),"getEdgeId"),s((function(e){return e??null}),"handleUndefinedAttr"),s(N0,"dedent"),s(R0,"_getDefaults");var L0={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function I0(e){L0=e}s(I0,"changeDefaults");var M0=/[&<>"']/,O0=new RegExp(M0.source,"g"),D0=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,P0=new RegExp(D0.source,"g"),F0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},B0=s((e=>F0[e]),"getEscapeReplacement");function $0(e,t){if(t){if(M0.test(e))return e.replace(O0,B0)}else if(D0.test(e))return e.replace(P0,B0);return e}s($0,"escape$1");var z0=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function U0(e){return e.replace(z0,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}s(U0,"unescape");var G0=/(^|[^\[])\^/g;function j0(e,t){let r="string"==typeof e?e:e.source;t=t||"";let n={replace:s(((e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(G0,"$1"),r=r.replace(e,i),n}),"replace"),getRegex:s((()=>new RegExp(r,t)),"getRegex")};return n}function V0(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}s(j0,"edit"),s(V0,"cleanUrl");var W0={exec:s((()=>null),"exec")};function q0(e,t){let r=e.replace(/\|/g,((e,t,r)=>{let n=!1,i=t;for(;--i>=0&&"\\"===r[i];)n=!n;return n?"|":" |"})),n=r.split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function H0(e,t,r){let n=e.length;if(0===n)return"";let i=0;for(;i<n;){let a=e.charAt(n-i-1);if(a!==t||r){if(a===t||!r)break;i++}else i++}return e.slice(0,n-i)}function Y0(e,t){if(-1===e.indexOf(t[1]))return-1;let r=0;for(let n=0;n<e.length;n++)if("\\"===e[n])n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return-1}function X0(e,t,r,n){let i=t.href,a=t.title?$0(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;let e={type:"link",raw:r,href:i,title:a,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,e}return{type:"image",raw:r,href:i,title:a,text:$0(o)}}function K0(e,t){let r=e.match(/^(\s+)(?:```)/);if(null===r)return t;let n=r[1];return t.split("\n").map((e=>{let t=e.match(/^\s+/);if(null===t)return e;let[r]=t;return r.length>=n.length?e.slice(n.length):e})).join("\n")}s(q0,"splitCells"),s(H0,"rtrim"),s(Y0,"findClosingBracket"),s(X0,"outputLink"),s(K0,"indentCodeCompensation");var Z0=class{static{s(this,"_Tokenizer")}options;rules;lexer;constructor(e){this.options=e||L0}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:H0(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],r=K0(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){let t=H0(e,"#");(this.options.pedantic||!t||/ $/.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:H0(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=H0(t[0],"\n").split("\n"),r="",n="",i=[];for(;e.length>0;){let t,a=!1,o=[];for(t=0;t<e.length;t++)if(/^ {0,3}>/.test(e[t]))o.push(e[t]),a=!0;else{if(a)break;o.push(e[t])}e=e.slice(t);let s=o.join("\n"),l=s.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}\n${s}`:s,n=n?`${n}\n${l}`:l;let u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=u,0===e.length)break;let c=i[i.length-1];if("code"===c?.type)break;if("blockquote"===c?.type){let t=c,a=t.raw+"\n"+e.join("\n"),o=this.blockquote(a);i[i.length-1]=o,r=r.substring(0,r.length-t.raw.length)+o.raw,n=n.substring(0,n.length-t.text.length)+o.text;break}if("list"!==c?.type);else{let t=c,a=t.raw+"\n"+e.join("\n"),o=this.list(a);i[i.length-1]=o,r=r.substring(0,r.length-c.raw.length)+o.raw,n=n.substring(0,n.length-t.raw.length)+o.raw,e=a.substring(i[i.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:r,tokens:i,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),n=r.length>1,i={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");let a=new RegExp(`^( {0,3}${r})((?:[\t ][^\\n]*)?(?:\\n|$))`),o=!1;for(;e;){let r=!1,n="",s="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;n=t[0],e=e.substring(n.length);let l=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),u=e.split("\n",1)[0],c=!l.trim(),h=0;if(this.options.pedantic?(h=2,s=l.trimStart()):c?h=t[1].length+1:(h=t[2].search(/[^ ]/),h=h>4?1:h,s=l.slice(h),h+=t[1].length),c&&/^ *$/.test(u)&&(n+=u+"\n",e=e.substring(u.length+1),r=!0),!r){let t=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),r=new RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),a=new RegExp(`^ {0,${Math.min(3,h-1)}}#`);for(;e;){let o=e.split("\n",1)[0];if(u=o,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),i.test(u)||a.test(u)||t.test(u)||r.test(e))break;if(u.search(/[^ ]/)>=h||!u.trim())s+="\n"+u.slice(h);else{if(c||l.search(/[^ ]/)>=4||i.test(l)||a.test(l)||r.test(l))break;s+="\n"+u}!c&&!u.trim()&&(c=!0),n+=o+"\n",e=e.substring(o.length+1),l=u.slice(h)}}i.loose||(o?i.loose=!0:/\n *\n *$/.test(n)&&(o=!0));let d,f=null;this.options.gfm&&(f=/^\[[ xX]\] /.exec(s),f&&(d="[ ] "!==f[0],s=s.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:n,task:!!f,checked:d,loose:!1,text:s,tokens:[]}),i.raw+=n}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){let t=i.items[e].tokens.filter((e=>"space"===e.type)),r=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));i.loose=r}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:r,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let r=q0(t[1]),n=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===n.length){for(let e of n)/^ *-+: *$/.test(e)?a.align.push("right"):/^ *:-+: *$/.test(e)?a.align.push("center"):/^ *:-+ *$/.test(e)?a.align.push("left"):a.align.push(null);for(let e=0;e<r.length;e++)a.header.push({text:r[e],tokens:this.lexer.inline(r[e]),header:!0,align:a.align[e]});for(let e of i)a.rows.push(q0(e,a.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:a.align[t]}))));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:$0(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;let t=H0(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=Y0(t[2],"()");if(e>-1){let r=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,r).trim(),t[3]=""}}let r=t[2],n="";if(this.options.pedantic){let e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);e&&(r=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(e)?r.slice(1):r.slice(1,-1)),X0(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let e=t[(r[2]||r[1]).replace(/\s+/g," ").toLowerCase()];if(!e){let e=r[0].charAt(0);return{type:"text",raw:e,text:e}}return X0(r,e,r[0],this.lexer)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&r.match(/[\p{L}\p{N}]/u))&&(!n[1]&&!n[2]||!r||this.rules.inline.punctuation.exec(r))){let r,i,a=[...n[0]].length-1,o=a,s=0,l="*"===n[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+a);null!=(n=l.exec(t));){if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!r)continue;if(i=[...r].length,n[3]||n[4]){o+=i;continue}if((n[5]||n[6])&&a%3&&!((a+i)%3)){s+=i;continue}if(o-=i,o>0)continue;i=Math.min(i,i+o+s);let t=[...n[0]][0].length,l=e.slice(0,a+n.index+t+i);if(Math.min(a,i)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let u=l.slice(2,-2);return{type:"strong",raw:l,text:u,tokens:this.lexer.inlineTokens(u)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," "),r=/[^ ]/.test(e),n=/^ /.test(e)&&/ $/.test(e);return r&&n&&(e=e.substring(1,e.length-1)),e=$0(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,r;return"@"===t[2]?(e=$0(t[1]),r="mailto:"+e):(e=$0(t[1]),r=e),{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,r;if("@"===t[2])e=$0(t[0]),r="mailto:"+e;else{let n;do{n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(n!==t[0]);e=$0(t[0]),r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:$0(t[0]),{type:"text",raw:t[0],text:e}}}},Q0=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,J0=/(?:[*+-]|\d{1,9}[.)])/,e1=j0(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,J0).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),t1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,r1=/(?!\s*\])(?:\\.|[^\[\]\\])+/,n1=j0(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",r1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),i1=j0(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,J0).getRegex(),a1="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",o1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,s1=j0("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",o1).replace("tag",a1).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),l1=j0(t1).replace("hr",Q0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",a1).getRegex(),u1={blockquote:j0(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",l1).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:n1,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Q0,html:s1,lheading:e1,list:i1,newline:/^(?: *(?:\n|$))+/,paragraph:l1,table:W0,text:/^[^\n]+/},c1=j0("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Q0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",a1).getRegex(),h1={...u1,table:c1,paragraph:j0(t1).replace("hr",Q0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",c1).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",a1).getRegex()},d1={...u1,html:j0("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",o1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:W0,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:j0(t1).replace("hr",Q0).replace("heading"," *#{1,6} *[^\n]").replace("lheading",e1).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},f1=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,p1=/^( {2,}|\\)\n(?!\s*$)/,g1="\\p{P}\\p{S}",m1=j0(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,g1).getRegex(),y1=j0(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,g1).getRegex(),v1=j0("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,g1).getRegex(),x1=j0("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,g1).getRegex(),b1=j0(/\\([punct])/,"gu").replace(/punct/g,g1).getRegex(),C1=j0(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),T1=j0(o1).replace("(?:--\x3e|$)","--\x3e").getRegex(),w1=j0("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",T1).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),k1=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_1=j0(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",k1).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),E1=j0(/^!?\[(label)\]\[(ref)\]/).replace("label",k1).replace("ref",r1).getRegex(),S1=j0(/^!?\[(ref)\](?:\[\])?/).replace("ref",r1).getRegex(),A1={_backpedal:W0,anyPunctuation:b1,autolink:C1,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:p1,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:W0,emStrongLDelim:y1,emStrongRDelimAst:v1,emStrongRDelimUnd:x1,escape:f1,link:_1,nolink:S1,punctuation:m1,reflink:E1,reflinkSearch:j0("reflink|nolink(?!\\()","g").replace("reflink",E1).replace("nolink",S1).getRegex(),tag:w1,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:W0},N1={...A1,link:j0(/^!?\[(label)\]\((.*?)\)/).replace("label",k1).getRegex(),reflink:j0(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",k1).getRegex()},R1={...A1,escape:j0(f1).replace("])","~|])").getRegex(),url:j0(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},L1={...R1,br:j0(p1).replace("{2,}","*").getRegex(),text:j0(R1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},I1={normal:u1,gfm:h1,pedantic:d1},M1={normal:A1,gfm:R1,breaks:L1,pedantic:N1},O1=class e{static{s(this,"_Lexer")}tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||L0,this.options.tokenizer=this.options.tokenizer||new Z0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:I1.normal,inline:M1.normal};this.options.pedantic?(t.block=I1.pedantic,t.inline=M1.pedantic):this.options.gfm&&(t.block=I1.gfm,this.options.breaks?t.inline=M1.breaks:t.inline=M1.gfm),this.tokenizer.rules=t}static get rules(){return{block:I1,inline:M1}}static lex(t,r){return new e(r).lex(t)}static lexInline(t,r){return new e(r).inlineTokens(t)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){let n,i,a;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,r)=>t+"    ".repeat(r.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?t.push(n):(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(i.raw+="\n"+n.raw,i.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let t,r=1/0,n=e.slice(1);this.options.extensions.startBlock.forEach((e=>{t=e.call({lexer:this},n),"number"==typeof t&&t>=0&&(r=Math.min(r,t))})),r<1/0&&r>=0&&(a=e.substring(0,r+1))}if(this.state.top&&(n=this.tokenizer.paragraph(a))){i=t[t.length-1],r&&"paragraph"===i?.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),r=a.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&"text"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,n,i,a,o,s,l=e;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,a.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(o||(s=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0))))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),n=t[t.length-1],n&&"text"===r.type&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),n=t[t.length-1],n&&"text"===r.type&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,l,s)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let t,r=1/0,n=e.slice(1);this.options.extensions.startInline.forEach((e=>{t=e.call({lexer:this},n),"number"==typeof t&&t>=0&&(r=Math.min(r,t))})),r<1/0&&r>=0&&(i=e.substring(0,r+1))}if(r=this.tokenizer.inlineText(i)){e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(s=r.raw.slice(-1)),o=!0,n=t[t.length-1],n&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}},D1=class{static{s(this,"_Renderer")}options;parser;constructor(e){this.options=e||L0}space(e){return""}code({text:e,lang:t,escaped:r}){let n=(t||"").match(/^\S*/)?.[0],i=e.replace(/\n$/,"")+"\n";return n?'<pre><code class="language-'+$0(n)+'">'+(r?i:$0(i,!0))+"</code></pre>\n":"<pre><code>"+(r?i:$0(i,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,r=e.start,n="";for(let t=0;t<e.items.length;t++){let r=e.items[t];n+=this.listitem(r)}let i=t?"ol":"ul";return"<"+i+(t&&1!==r?' start="'+r+'"':"")+">\n"+n+"</"+i+">\n"}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&"paragraph"===e.tokens[0].type?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",r="";for(let t=0;t<e.header.length;t++)r+=this.tablecell(e.header[t]);t+=this.tablerow({text:r});let n="";for(let t=0;t<e.rows.length;t++){let i=e.rows[t];r="";for(let e=0;e<i.length;e++)r+=this.tablecell(i[e]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+n+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let n=this.parser.parseInline(r),i=V0(e);if(null===i)return n;let a='<a href="'+(e=i)+'"';return t&&(a+=' title="'+t+'"'),a+=">"+n+"</a>",a}image({href:e,title:t,text:r}){let n=V0(e);if(null===n)return r;let i=`<img src="${e=n}" alt="${r}"`;return t&&(i+=` title="${t}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},P1=class{static{s(this,"_TextRenderer")}strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},F1=class e{static{s(this,"_Parser")}options;renderer;textRenderer;constructor(e){this.options=e||L0,this.options.renderer=this.options.renderer||new D1,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new P1}static parse(t,r){return new e(r).parse(t)}static parseInline(t,r){return new e(r).parseInline(t)}parse(e,t=!0){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){r+=t||"";continue}}let a=i;switch(a.type){case"space":r+=this.renderer.space(a);continue;case"hr":r+=this.renderer.hr(a);continue;case"heading":r+=this.renderer.heading(a);continue;case"code":r+=this.renderer.code(a);continue;case"table":r+=this.renderer.table(a);continue;case"blockquote":r+=this.renderer.blockquote(a);continue;case"list":r+=this.renderer.list(a);continue;case"html":r+=this.renderer.html(a);continue;case"paragraph":r+=this.renderer.paragraph(a);continue;case"text":{let i=a,o=this.renderer.text(i);for(;n+1<e.length&&"text"===e[n+1].type;)i=e[++n],o+="\n"+this.renderer.text(i);r+=t?this.renderer.paragraph({type:"paragraph",raw:o,text:o,tokens:[{type:"text",raw:o,text:o}]}):o;continue}default:{let e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=e||"";continue}}let a=i;switch(a.type){case"escape":case"text":r+=t.text(a);break;case"html":r+=t.html(a);break;case"link":r+=t.link(a);break;case"image":r+=t.image(a);break;case"strong":r+=t.strong(a);break;case"em":r+=t.em(a);break;case"codespan":r+=t.codespan(a);break;case"br":r+=t.br(a);break;case"del":r+=t.del(a);break;default:{let e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}},B1=class{static{s(this,"_Hooks")}options;constructor(e){this.options=e||L0}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},$1=class{static{s(this,"Marked")}defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(O1.lex,F1.parse);parseInline=this.#e(O1.lexInline,F1.parseInline);Parser=F1;Renderer=D1;TextRenderer=P1;Lexer=O1;Tokenizer=Z0;Hooks=B1;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let n of e)switch(r=r.concat(t.call(this,n)),n.type){case"table":{let e=n;for(let n of e.header)r=r.concat(this.walkTokens(n.tokens,t));for(let n of e.rows)for(let e of n)r=r.concat(this.walkTokens(e.tokens,t));break}case"list":{let e=n;r=r.concat(this.walkTokens(e.items,t));break}default:{let e=n;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((n=>{let i=e[n].flat(1/0);r=r.concat(this.walkTokens(i,t))})):e.tokens&&(r=r.concat(this.walkTokens(e.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{let r={...e};if(r.async=this.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){let r=t.renderers[e.name];t.renderers[e.name]=r?function(...t){let n=e.renderer.apply(this,t);return!1===n&&(n=r.apply(this,t)),n}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");let r=t[e.level];r?r.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),r.extensions=t),e.renderer){let t=this.defaults.renderer||new D1(this.defaults);for(let r in e.renderer){if(!(r in t))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let n=r,i=e.renderer[n];e.useNewRenderer||(i=this.#t(i,n,t));let a=t[n];t[n]=(...e)=>{let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r||""}}r.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new Z0(this.defaults);for(let r in e.tokenizer){if(!(r in t))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let n=r,i=e.tokenizer[n],a=t[n];t[n]=(...e)=>{let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r}}r.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new B1;for(let r in e.hooks){if(!(r in t))throw new Error(`hook '${r}' does not exist`);if("options"===r)continue;let n=r,i=e.hooks[n],a=t[n];B1.passThroughHooks.has(r)?t[n]=e=>{if(this.defaults.async)return Promise.resolve(i.call(t,e)).then((e=>a.call(t,e)));let r=i.call(t,e);return a.call(t,r)}:t[n]=(...e)=>{let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r}}r.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,n=e.walkTokens;r.walkTokens=function(e){let r=[];return r.push(n.call(this,e)),t&&(r=r.concat(t.call(this,e))),r}}this.defaults={...this.defaults,...r}})),this}#t(e,t,r){switch(t){case"heading":return function(n){return n.type&&n.type===t?e.call(this,r.parser.parseInline(n.tokens),n.depth,U0(r.parser.parseInline(n.tokens,r.parser.textRenderer))):e.apply(this,arguments)};case"code":return function(r){return r.type&&r.type===t?e.call(this,r.text,r.lang,!!r.escaped):e.apply(this,arguments)};case"table":return function(r){if(!r.type||r.type!==t)return e.apply(this,arguments);let n="",i="";for(let e=0;e<r.header.length;e++)i+=this.tablecell({text:r.header[e].text,tokens:r.header[e].tokens,header:!0,align:r.align[e]});n+=this.tablerow({text:i});let a="";for(let e=0;e<r.rows.length;e++){let t=r.rows[e];i="";for(let e=0;e<t.length;e++)i+=this.tablecell({text:t[e].text,tokens:t[e].tokens,header:!1,align:r.align[e]});a+=this.tablerow({text:i})}return e.call(this,n,a)};case"blockquote":return function(r){if(!r.type||r.type!==t)return e.apply(this,arguments);let n=this.parser.parse(r.tokens);return e.call(this,n)};case"list":return function(r){if(!r.type||r.type!==t)return e.apply(this,arguments);let n=r.ordered,i=r.start,a=r.loose,o="";for(let e=0;e<r.items.length;e++){let t=r.items[e],n=t.checked,i=t.task,s="";if(t.task){let e=this.checkbox({checked:!!n});a?t.tokens.length>0&&"paragraph"===t.tokens[0].type?(t.tokens[0].text=e+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&"text"===t.tokens[0].tokens[0].type&&(t.tokens[0].tokens[0].text=e+" "+t.tokens[0].tokens[0].text)):t.tokens.unshift({type:"text",text:e+" "}):s+=e+" "}s+=this.parser.parse(t.tokens,a),o+=this.listitem({type:"list_item",raw:s,text:s,task:i,checked:!!n,loose:a,tokens:t.tokens})}return e.call(this,o,n,i)};case"html":return function(r){return r.type&&r.type===t?e.call(this,r.text,r.block):e.apply(this,arguments)};case"paragraph":case"strong":case"em":case"del":return function(r){return r.type&&r.type===t?e.call(this,this.parser.parseInline(r.tokens)):e.apply(this,arguments)};case"escape":case"codespan":case"text":return function(r){return r.type&&r.type===t?e.call(this,r.text):e.apply(this,arguments)};case"link":return function(r){return r.type&&r.type===t?e.call(this,r.href,r.title,this.parser.parseInline(r.tokens)):e.apply(this,arguments)};case"image":return function(r){return r.type&&r.type===t?e.call(this,r.href,r.title,r.text):e.apply(this,arguments)}}return e}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return O1.lex(e,t??this.defaults)}parser(e,t){return F1.parse(e,t??this.defaults)}#e(e,t){return(r,n)=>{let i={...n},a={...this.defaults,...i};!0===this.defaults.async&&!1===i.async&&(a.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),a.async=!0);let o=this.#r(!!a.silent,!!a.async);if(typeof r>"u"||null===r)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof r)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(r):r).then((t=>e(t,a))).then((e=>a.hooks?a.hooks.processAllTokens(e):e)).then((e=>a.walkTokens?Promise.all(this.walkTokens(e,a.walkTokens)).then((()=>e)):e)).then((e=>t(e,a))).then((e=>a.hooks?a.hooks.postprocess(e):e)).catch(o);try{a.hooks&&(r=a.hooks.preprocess(r));let n=e(r,a);a.hooks&&(n=a.hooks.processAllTokens(n)),a.walkTokens&&this.walkTokens(n,a.walkTokens);let i=t(n,a);return a.hooks&&(i=a.hooks.postprocess(i)),i}catch(e){return o(e)}}}#r(e,t){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+$0(r.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(r);throw r}}},z1=new $1;function U1(e,t){return z1.parse(e,t)}function G1(e,{markdownAutoWrap:t}){let r=N0(e.replace(/<br\/>/g,"\n").replace(/\n{2,}/g,"\n"));return!1===t?r.replace(/ /g,"&nbsp;"):r}function j1(e,t={}){let r=G1(e,t),n=U1.lexer(r),i=[[]],a=0;function o(e,t="normal"){"text"===e.type?e.text.split("\n").forEach(((e,r)=>{0!==r&&(a++,i.push([])),e.split(" ").forEach((e=>{(e=e.replace(/&#39;/g,"'"))&&i[a].push({content:e,type:t})}))})):"strong"===e.type||"em"===e.type?e.tokens.forEach((t=>{o(t,e.type)})):"html"===e.type&&i[a].push({content:e.text,type:"normal"})}return s(o,"processNode"),n.forEach((e=>{"paragraph"===e.type?e.tokens?.forEach((e=>{o(e)})):"html"===e.type&&i[a].push({content:e.text,type:"normal"})})),i}function V1(e,{markdownAutoWrap:t}={}){let r=U1.lexer(e);function n(e){return"text"===e.type?!1===t?e.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):e.text.replace(/\n */g,"<br/>"):"strong"===e.type?`<strong>${e.tokens?.map(n).join("")}</strong>`:"em"===e.type?`<em>${e.tokens?.map(n).join("")}</em>`:"paragraph"===e.type?`<p>${e.tokens?.map(n).join("")}</p>`:"space"===e.type?"":"html"===e.type?`${e.text}`:"escape"===e.type?e.text:`Unsupported markdown: ${e.type}`}return s(n,"output"),r.map(n).join("")}function W1(e){return Intl.Segmenter?[...(new Intl.Segmenter).segment(e)].map((e=>e.segment)):[...e]}function q1(e,t){return H1(e,[],W1(t.content),t.type)}function H1(e,t,r,n){if(0===r.length)return[{content:t.join(""),type:n},{content:"",type:n}];let[i,...a]=r,o=[...t,i];return e([{content:o.join(""),type:n}])?H1(e,o,a,n):(0===t.length&&i&&(t.push(i),r.shift()),[{content:t.join(""),type:n},{content:r.join(""),type:n}])}function Y1(e,t){if(e.some((({content:e})=>e.includes("\n"))))throw new Error("splitLineToFitWidth does not support newlines in the line");return X1(e,t)}function X1(e,t,r=[],n=[]){if(0===e.length)return n.length>0&&r.push(n),r.length>0?r:[];let i="";" "===e[0].content&&(i=" ",e.shift());let a=e.shift()??{content:" ",type:"normal"},o=[...n];if(""!==i&&o.push({content:i,type:"normal"}),o.push(a),t(o))return X1(e,t,r,o);if(n.length>0)r.push(n),e.unshift(a);else if(a.content){let[n,i]=q1(t,a);r.push([n]),i.content&&e.unshift(i)}return X1(e,t,r)}function K1(e,t){t&&e.attr("style",t)}async function Z1(e,t,r,n,i=!1){let a=e.append("foreignObject");a.attr("width",10*r+"px"),a.attr("height",10*r+"px");let o=a.append("xhtml:div"),s=t.label;t.label&&sG(t.label)&&(s=await lG(t.label.replace(uG.lineBreakRegex,"\n"),RG()));let l=t.isNode?"nodeLabel":"edgeLabel",u=o.append("span");u.html(s),K1(u,t.labelStyle),u.attr("class",`${l} ${n}`),K1(o,t.labelStyle),o.style("display","table-cell"),o.style("white-space","nowrap"),o.style("line-height","1.5"),o.style("max-width",r+"px"),o.style("text-align","center"),o.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&o.attr("class","labelBkg");let c=o.node().getBoundingClientRect();return c.width===r&&(o.style("display","table"),o.style("white-space","break-spaces"),o.style("width",r+"px"),c=o.node().getBoundingClientRect()),a.node()}function Q1(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}function J1(e,t,r){let n=e.append("text"),i=Q1(n,1,t);t2(i,r);let a=i.node().getComputedTextLength();return n.remove(),a}function e2(e,t,r,n=!1){let i=t.append("g"),a=i.insert("rect").attr("class","background").attr("style","stroke: none"),o=i.append("text").attr("y","-10.1"),l=0;for(let t of r){let r=s((t=>J1(i,1.1,t)<=e),"checkWidth"),n=r(t)?[t]:Y1(t,r);for(let e of n){t2(Q1(o,l,1.1),e),l++}}if(n){let e=o.node().getBBox(),t=2;return a.attr("x",e.x-t).attr("y",e.y-t).attr("width",e.width+2*t).attr("height",e.height+2*t),i.node()}return o.node()}function t2(e,t){e.text(""),t.forEach(((t,r)=>{let n=e.append("tspan").attr("font-style","em"===t.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===t.type?"bold":"normal");0===r?n.text(t.content):n.text(" "+t.content)}))}function r2(e){return e.replace(/fa[bklrs]?:fa-[\w-]+/g,(e=>`<i class='${e.replace(":"," ")}'></i>`))}s(U1,"marked"),U1.options=U1.setOptions=function(e){return z1.setOptions(e),U1.defaults=z1.defaults,I0(U1.defaults),U1},U1.getDefaults=R0,U1.defaults=L0,U1.use=function(...e){return z1.use(...e),U1.defaults=z1.defaults,I0(U1.defaults),U1},U1.walkTokens=function(e,t){return z1.walkTokens(e,t)},U1.parseInline=z1.parseInline,U1.Parser=F1,U1.parser=F1.parse,U1.Renderer=D1,U1.TextRenderer=P1,U1.Lexer=O1,U1.lexer=O1.lex,U1.Tokenizer=Z0,U1.Hooks=B1,U1.parse=U1,U1.options,U1.setOptions,U1.use,U1.walkTokens,U1.parseInline,F1.parse,O1.lex,s(G1,"preprocessMarkdown"),s(j1,"markdownToLines"),s(V1,"markdownToHTML"),s(W1,"splitTextToChars"),s(q1,"splitWordToFitWidth"),s(H1,"splitWordToFitWidthRecursion"),s(Y1,"splitLineToFitWidth"),s(X1,"splitLineToFitWidthRecursion"),s(K1,"applyStyle"),s(Z1,"addHtmlSpan"),s(Q1,"createTspan"),s(J1,"computeWidthOfText"),s((function(e,t,r){let n=e.append("text"),i=Q1(n,1,t);t2(i,[{content:r,type:"normal"}]);let a=i.node()?.getBoundingClientRect();return a&&n.remove(),a}),"computeDimensionOfText"),s(e2,"createFormattedText"),s(t2,"updateTextContentAndStyles"),s(r2,"replaceIconSubstring");var n2=s((async(e,t="",{style:r="",isTitle:n=!1,classes:i="",useHtmlLabels:a=!0,isNode:o=!0,width:s=200,addSvgBackground:l=!1}={},u)=>{if(rz.debug("XYZ createText",t,r,n,i,a,o,"addSvgBackground: ",l),a){let n=V1(t,u),a=r2(A0(n)),c=t.replace(/\\\\/g,"\\"),h={isNode:o,label:sG(t)?c:a,labelStyle:r.replace("fill:","color:")};return await Z1(e,h,s,i,l)}{let n=e2(s,e,j1(t.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),u),!!t&&l);if(o){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));let e=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");gW(n).attr("style",e)}else{let e=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");gW(n).select("rect").attr("style",e.replace(/background:/g,"fill:"));let t=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");gW(n).select("text").attr("style",t)}return n}}),"createText"),i2=class extends P${static{s(this,"InfoTokenBuilder")}static{YB(this,"InfoTokenBuilder")}constructor(){super(["info","showInfo"])}},a2={parser:{TokenBuilder:YB((()=>new i2),"TokenBuilder"),ValueConverter:YB((()=>new D$),"ValueConverter")}};function o2(e=GB){let t=MB(IB(e),S$),r=MB(LB({shared:t}),A$,a2);return t.ServiceRegistry.register(r),{shared:t,Info:r}}s(o2,"createInfoServices"),YB(o2,"createInfoServices");var s2=class extends P${static{s(this,"PacketTokenBuilder")}static{YB(this,"PacketTokenBuilder")}constructor(){super(["packet-beta"])}},l2={parser:{TokenBuilder:YB((()=>new s2),"TokenBuilder"),ValueConverter:YB((()=>new D$),"ValueConverter")}};function u2(e=GB){let t=MB(IB(e),S$),r=MB(LB({shared:t}),N$,l2);return t.ServiceRegistry.register(r),{shared:t,Packet:r}}s(u2,"createPacketServices"),YB(u2,"createPacketServices");var c2=l(((e,t)=>{s((function(r,n){"object"==typeof e&&"object"==typeof t?t.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof e?e.layoutBase=n():r.layoutBase=n()}),"webpackUniversalModuleDefinition")(e,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return s(r,"__webpack_require__"),r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?s((function(){return e.default}),"getDefault"):s((function(){return e}),"getModuleExports");return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=28)}([function(e,t,r){function n(){}s(n,"LayoutConstants"),n.QUALITY=1,n.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,n.DEFAULT_INCREMENTAL=!1,n.DEFAULT_ANIMATION_ON_LAYOUT=!0,n.DEFAULT_ANIMATION_DURING_LAYOUT=!1,n.DEFAULT_ANIMATION_PERIOD=50,n.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,n.DEFAULT_GRAPH_MARGIN=15,n.NODE_DIMENSIONS_INCLUDE_LABELS=!1,n.SIMPLE_NODE_SIZE=40,n.SIMPLE_NODE_HALF_SIZE=n.SIMPLE_NODE_SIZE/2,n.EMPTY_COMPOUND_NODE_SIZE=40,n.MIN_EDGE_LENGTH=1,n.WORLD_BOUNDARY=1e6,n.INITIAL_WORLD_BOUNDARY=n.WORLD_BOUNDARY/1e3,n.WORLD_CENTER_X=1200,n.WORLD_CENTER_Y=900,e.exports=n},function(e,t,r){var n=r(2),i=r(8),a=r(9);function o(e,t,r){n.call(this,r),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=r,this.bendpoints=[],this.source=e,this.target=t}for(var l in s(o,"LEdge"),o.prototype=Object.create(n.prototype),n)o[l]=n[l];o.prototype.getSource=function(){return this.source},o.prototype.getTarget=function(){return this.target},o.prototype.isInterGraph=function(){return this.isInterGraph},o.prototype.getLength=function(){return this.length},o.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},o.prototype.getBendpoints=function(){return this.bendpoints},o.prototype.getLca=function(){return this.lca},o.prototype.getSourceInLca=function(){return this.sourceInLca},o.prototype.getTargetInLca=function(){return this.targetInLca},o.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},o.prototype.getOtherEndInGraph=function(e,t){for(var r=this.getOtherEnd(e),n=t.getGraphManager().getRoot();;){if(r.getOwner()==t)return r;if(r.getOwner()==n)break;r=r.getOwner().getParent()}return null},o.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},o.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=o},function(e,t,r){function n(e){this.vGraphObject=e}s(n,"LGraphObject"),e.exports=n},function(e,t,r){var n=r(2),i=r(10),a=r(13),o=r(0),l=r(16),u=r(5);function c(e,t,r,o){null==r&&null==o&&(o=t),n.call(this,o),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=o,this.edges=[],this.graphManager=e,this.rect=null!=r&&null!=t?new a(t.x,t.y,r.width,r.height):new a}for(var h in s(c,"LNode"),c.prototype=Object.create(n.prototype),n)c[h]=n[h];c.prototype.getEdges=function(){return this.edges},c.prototype.getChild=function(){return this.child},c.prototype.getOwner=function(){return this.owner},c.prototype.getWidth=function(){return this.rect.width},c.prototype.setWidth=function(e){this.rect.width=e},c.prototype.getHeight=function(){return this.rect.height},c.prototype.setHeight=function(e){this.rect.height=e},c.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},c.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},c.prototype.getCenter=function(){return new u(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},c.prototype.getLocation=function(){return new u(this.rect.x,this.rect.y)},c.prototype.getRect=function(){return this.rect},c.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},c.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},c.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},c.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},c.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},c.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},c.prototype.getEdgeListToNode=function(e){var t=[],r=this;return r.edges.forEach((function(n){if(n.target==e){if(n.source!=r)throw"Incorrect edge source!";t.push(n)}})),t},c.prototype.getEdgesBetween=function(e){var t=[],r=this;return r.edges.forEach((function(n){if(n.source!=r&&n.target!=r)throw"Incorrect edge source and/or target";(n.target==e||n.source==e)&&t.push(n)})),t},c.prototype.getNeighborsList=function(){var e=new Set,t=this;return t.edges.forEach((function(r){if(r.source==t)e.add(r.target);else{if(r.target!=t)throw"Incorrect incidency!";e.add(r.source)}})),e},c.prototype.withChildren=function(){var e=new Set;if(e.add(this),null!=this.child)for(var t=this.child.getNodes(),r=0;r<t.length;r++)t[r].withChildren().forEach((function(t){e.add(t)}));return e},c.prototype.getNoOfChildren=function(){var e=0;if(null==this.child)e=1;else for(var t=this.child.getNodes(),r=0;r<t.length;r++)e+=t[r].getNoOfChildren();return 0==e&&(e=1),e},c.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},c.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},c.prototype.scatter=function(){var e,t,r=-o.INITIAL_WORLD_BOUNDARY,n=o.INITIAL_WORLD_BOUNDARY;e=o.WORLD_CENTER_X+l.nextDouble()*(n-r)+r;var i=-o.INITIAL_WORLD_BOUNDARY,a=o.INITIAL_WORLD_BOUNDARY;t=o.WORLD_CENTER_Y+l.nextDouble()*(a-i)+i,this.rect.x=e,this.rect.y=t},c.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var e=this.getChild();if(e.updateBounds(!0),this.rect.x=e.getLeft(),this.rect.y=e.getTop(),this.setWidth(e.getRight()-e.getLeft()),this.setHeight(e.getBottom()-e.getTop()),o.NODE_DIMENSIONS_INCLUDE_LABELS){var t=e.getRight()-e.getLeft(),r=e.getBottom()-e.getTop();this.labelWidth&&("left"==this.labelPosHorizontal?(this.rect.x-=this.labelWidth,this.setWidth(t+this.labelWidth)):"center"==this.labelPosHorizontal&&this.labelWidth>t?(this.rect.x-=(this.labelWidth-t)/2,this.setWidth(this.labelWidth)):"right"==this.labelPosHorizontal&&this.setWidth(t+this.labelWidth)),this.labelHeight&&("top"==this.labelPosVertical?(this.rect.y-=this.labelHeight,this.setHeight(r+this.labelHeight)):"center"==this.labelPosVertical&&this.labelHeight>r?(this.rect.y-=(this.labelHeight-r)/2,this.setHeight(this.labelHeight)):"bottom"==this.labelPosVertical&&this.setHeight(r+this.labelHeight))}}},c.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},c.prototype.transform=function(e){var t=this.rect.x;t>o.WORLD_BOUNDARY?t=o.WORLD_BOUNDARY:t<-o.WORLD_BOUNDARY&&(t=-o.WORLD_BOUNDARY);var r=this.rect.y;r>o.WORLD_BOUNDARY?r=o.WORLD_BOUNDARY:r<-o.WORLD_BOUNDARY&&(r=-o.WORLD_BOUNDARY);var n=new u(t,r),i=e.inverseTransformPoint(n);this.setLocation(i.x,i.y)},c.prototype.getLeft=function(){return this.rect.x},c.prototype.getRight=function(){return this.rect.x+this.rect.width},c.prototype.getTop=function(){return this.rect.y},c.prototype.getBottom=function(){return this.rect.y+this.rect.height},c.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=c},function(e,t,r){var n=r(0);function i(){}for(var a in s(i,"FDLayoutConstants"),n)i[a]=n[a];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=3*i.MAX_NODE_DISPLACEMENT_INCREMENTAL,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=i},function(e,t,r){function n(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}s(n,"PointD"),n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.setX=function(e){this.x=e},n.prototype.setY=function(e){this.y=e},n.prototype.getDifference=function(e){return new DimensionD(this.x-e.x,this.y-e.y)},n.prototype.getCopy=function(){return new n(this.x,this.y)},n.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},e.exports=n},function(e,t,r){var n=r(2),i=r(10),a=r(0),o=r(7),l=r(3),u=r(1),c=r(13),h=r(12),d=r(11);function f(e,t,r){n.call(this,r),this.estimatedSize=i.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof o?this.graphManager=t:null!=t&&t instanceof Layout&&(this.graphManager=t.graphManager)}for(var p in s(f,"LGraph"),f.prototype=Object.create(n.prototype),n)f[p]=n[p];f.prototype.getNodes=function(){return this.nodes},f.prototype.getEdges=function(){return this.edges},f.prototype.getGraphManager=function(){return this.graphManager},f.prototype.getParent=function(){return this.parent},f.prototype.getLeft=function(){return this.left},f.prototype.getRight=function(){return this.right},f.prototype.getTop=function(){return this.top},f.prototype.getBottom=function(){return this.bottom},f.prototype.isConnected=function(){return this.isConnected},f.prototype.add=function(e,t,r){if(null==t&&null==r){var n=e;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(n)>-1)throw"Node already in graph!";return n.owner=this,this.getNodes().push(n),n}var i=e;if(!(this.getNodes().indexOf(t)>-1&&this.getNodes().indexOf(r)>-1))throw"Source or target not in graph!";if(t.owner!=r.owner||t.owner!=this)throw"Both owners must be this graph!";return t.owner!=r.owner?null:(i.source=t,i.target=r,i.isInterGraph=!1,this.getEdges().push(i),t.edges.push(i),r!=t&&r.edges.push(i),i)},f.prototype.remove=function(e){var t=e;if(e instanceof l){if(null==t)throw"Node is null!";if(null==t.owner||t.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var r=t.edges.slice(),n=r.length,i=0;i<n;i++)(a=r[i]).isInterGraph?this.graphManager.remove(a):a.source.owner.remove(a);if(-1==(o=this.nodes.indexOf(t)))throw"Node not in owner node list!";this.nodes.splice(o,1)}else if(e instanceof u){var a;if(null==(a=e))throw"Edge is null!";if(null==a.source||null==a.target)throw"Source and/or target is null!";if(null==a.source.owner||null==a.target.owner||a.source.owner!=this||a.target.owner!=this)throw"Source and/or target owner is invalid!";var o,s=a.source.edges.indexOf(a),c=a.target.edges.indexOf(a);if(!(s>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(a.source.edges.splice(s,1),a.target!=a.source&&a.target.edges.splice(c,1),-1==(o=a.source.owner.getEdges().indexOf(a)))throw"Not in owner's edge list!";a.source.owner.getEdges().splice(o,1)}},f.prototype.updateLeftTop=function(){for(var e,t,r,n=i.MAX_VALUE,a=i.MAX_VALUE,o=this.getNodes(),s=o.length,l=0;l<s;l++){var u=o[l];n>(e=u.getTop())&&(n=e),a>(t=u.getLeft())&&(a=t)}return n==i.MAX_VALUE?null:(r=null!=o[0].getParent().paddingLeft?o[0].getParent().paddingLeft:this.margin,this.left=a-r,this.top=n-r,new h(this.left,this.top))},f.prototype.updateBounds=function(e){for(var t,r,n,a,o,s=i.MAX_VALUE,l=-i.MAX_VALUE,u=i.MAX_VALUE,h=-i.MAX_VALUE,d=this.nodes,f=d.length,p=0;p<f;p++){var g=d[p];e&&null!=g.child&&g.updateBounds(),s>(t=g.getLeft())&&(s=t),l<(r=g.getRight())&&(l=r),u>(n=g.getTop())&&(u=n),h<(a=g.getBottom())&&(h=a)}var m=new c(s,u,l-s,h-u);s==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),o=null!=d[0].getParent().paddingLeft?d[0].getParent().paddingLeft:this.margin,this.left=m.x-o,this.right=m.x+m.width+o,this.top=m.y-o,this.bottom=m.y+m.height+o},f.calculateBounds=function(e){for(var t,r,n,a,o=i.MAX_VALUE,s=-i.MAX_VALUE,l=i.MAX_VALUE,u=-i.MAX_VALUE,h=e.length,d=0;d<h;d++){var f=e[d];o>(t=f.getLeft())&&(o=t),s<(r=f.getRight())&&(s=r),l>(n=f.getTop())&&(l=n),u<(a=f.getBottom())&&(u=a)}return new c(o,l,s-o,u-l)},f.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,r=t.length,n=0;n<r;n++){e+=t[n].calcEstimatedSize()}return this.estimatedSize=0==e?a.EMPTY_COMPOUND_NODE_SIZE:e/Math.sqrt(this.nodes.length),this.estimatedSize},f.prototype.updateConnected=function(){var e=this;if(0!=this.nodes.length){var t,r,n=new d,i=new Set,a=this.nodes[0];for(a.withChildren().forEach((function(e){n.push(e),i.add(e)}));0!==n.length;)for(var o=(t=(a=n.shift()).getEdges()).length,s=0;s<o;s++){if(null!=(r=t[s].getOtherEndInGraph(a,this))&&!i.has(r))r.withChildren().forEach((function(e){n.push(e),i.add(e)}))}if(this.isConnected=!1,i.size>=this.nodes.length){var l=0;i.forEach((function(t){t.owner==e&&l++})),l==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},e.exports=f},function(e,t,r){var n,i=r(1);function a(e){n=r(6),this.layout=e,this.graphs=[],this.edges=[]}s(a,"LGraphManager"),a.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),r=this.add(e,t);return this.setRootGraph(r),this.rootGraph},a.prototype.add=function(e,t,r,n,i){if(null==r&&null==n&&null==i){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return e.parent=t,t.child=e,e}i=r,r=e;var a=(n=t).getOwner(),o=i.getOwner();if(null==a||a.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==o||o.getGraphManager()!=this)throw"Target not in this graph mgr!";if(a==o)return r.isInterGraph=!1,a.add(r,n,i);if(r.isInterGraph=!0,r.source=n,r.target=i,this.edges.indexOf(r)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(r),null==r.source||null==r.target)throw"Edge source and/or target is null!";if(-1!=r.source.edges.indexOf(r)||-1!=r.target.edges.indexOf(r))throw"Edge already in source and/or target incidency list!";return r.source.edges.push(r),r.target.edges.push(r),r},a.prototype.remove=function(e){if(e instanceof n){var t=e;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(null==t.parent||t.parent.graphManager!=this))throw"Invalid parent node!";for(var r,a=[],o=(a=a.concat(t.getEdges())).length,s=0;s<o;s++)r=a[s],t.remove(r);var l,u=[];o=(u=u.concat(t.getNodes())).length;for(s=0;s<o;s++)l=u[s],t.remove(l);t==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(t);this.graphs.splice(c,1),t.parent=null}else if(e instanceof i){if(null==(r=e))throw"Edge is null!";if(!r.isInterGraph)throw"Not an inter-graph edge!";if(null==r.source||null==r.target)throw"Source and/or target is null!";if(-1==r.source.edges.indexOf(r)||-1==r.target.edges.indexOf(r))throw"Source and/or target doesn't know this edge!";c=r.source.edges.indexOf(r);if(r.source.edges.splice(c,1),c=r.target.edges.indexOf(r),r.target.edges.splice(c,1),null==r.source.owner||null==r.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==r.source.owner.getGraphManager().edges.indexOf(r))throw"Not in owner graph manager's edge list!";c=r.source.owner.getGraphManager().edges.indexOf(r);r.source.owner.getGraphManager().edges.splice(c,1)}},a.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},a.prototype.getGraphs=function(){return this.graphs},a.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),r=t.length,n=0;n<r;n++)e=e.concat(t[n].getNodes());this.allNodes=e}return this.allNodes},a.prototype.resetAllNodes=function(){this.allNodes=null},a.prototype.resetAllEdges=function(){this.allEdges=null},a.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},a.prototype.getAllEdges=function(){if(null==this.allEdges){for(var e=[],t=this.getGraphs(),r=(t.length,0);r<t.length;r++)e=e.concat(t[r].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},a.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},a.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},a.prototype.getRoot=function(){return this.rootGraph},a.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,null==e.parent&&(e.parent=this.layout.newNode("Root node"))},a.prototype.getLayout=function(){return this.layout},a.prototype.isOneAncestorOfOther=function(e,t){if(null==e||null==t)throw"assert failed";if(e==t)return!0;for(var r,n=e.getOwner();;){if(null==(r=n.getParent()))break;if(r==t)return!0;if(null==(n=r.getOwner()))break}for(n=t.getOwner();;){if(null==(r=n.getParent()))break;if(r==e)return!0;if(null==(n=r.getOwner()))break}return!1},a.prototype.calcLowestCommonAncestors=function(){for(var e,t,r,n,i,a=this.getAllEdges(),o=a.length,s=0;s<o;s++)if(t=(e=a[s]).source,r=e.target,e.lca=null,e.sourceInLca=t,e.targetInLca=r,t!=r){for(n=t.getOwner();null==e.lca;){for(e.targetInLca=r,i=r.getOwner();null==e.lca;){if(i==n){e.lca=i;break}if(i==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=i.getParent(),i=e.targetInLca.getOwner()}if(n==this.rootGraph)break;null==e.lca&&(e.sourceInLca=n.getParent(),n=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}else e.lca=t.getOwner()},a.prototype.calcLowestCommonAncestor=function(e,t){if(e==t)return e.getOwner();for(var r=e.getOwner();;){if(null==r)break;for(var n=t.getOwner();;){if(null==n)break;if(n==r)return n;n=n.getParent().getOwner()}r=r.getParent().getOwner()}return r},a.prototype.calcInclusionTreeDepths=function(e,t){null==e&&null==t&&(e=this.rootGraph,t=1);for(var r,n=e.getNodes(),i=n.length,a=0;a<i;a++)(r=n[a]).inclusionTreeDepth=t,null!=r.child&&this.calcInclusionTreeDepths(r.child,t+1)},a.prototype.includesInvalidEdge=function(){for(var e,t=[],r=this.edges.length,n=0;n<r;n++)e=this.edges[n],this.isOneAncestorOfOther(e.source,e.target)&&t.push(e);for(n=0;n<t.length;n++)this.remove(t[n]);return!1},e.exports=a},function(e,t,r){var n=r(12);function i(){}s(i,"IGeometry"),i.calcSeparationAmount=function(e,t,r,n){if(!e.intersects(t))throw"assert failed";var i=new Array(2);this.decideDirectionsForOverlappingNodes(e,t,i),r[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),r[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?r[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(r[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?r[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(r[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()));var a=Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()));t.getCenterY()===e.getCenterY()&&t.getCenterX()===e.getCenterX()&&(a=1);var o=a*r[0],s=r[1]/a;r[0]<s?s=r[0]:o=r[1],r[0]=-1*i[0]*(s/2+n),r[1]=-1*i[1]*(o/2+n)},i.decideDirectionsForOverlappingNodes=function(e,t,r){e.getCenterX()<t.getCenterX()?r[0]=-1:r[0]=1,e.getCenterY()<t.getCenterY()?r[1]=-1:r[1]=1},i.getIntersection2=function(e,t,r){var n=e.getCenterX(),i=e.getCenterY(),a=t.getCenterX(),o=t.getCenterY();if(e.intersects(t))return r[0]=n,r[1]=i,r[2]=a,r[3]=o,!0;var s=e.getX(),l=e.getY(),u=e.getRight(),c=e.getX(),h=e.getBottom(),d=e.getRight(),f=e.getWidthHalf(),p=e.getHeightHalf(),g=t.getX(),m=t.getY(),y=t.getRight(),v=t.getX(),x=t.getBottom(),b=t.getRight(),C=t.getWidthHalf(),T=t.getHeightHalf(),w=!1,k=!1;if(n===a){if(i>o)return r[0]=n,r[1]=l,r[2]=a,r[3]=x,!1;if(i<o)return r[0]=n,r[1]=h,r[2]=a,r[3]=m,!1}else if(i===o){if(n>a)return r[0]=s,r[1]=i,r[2]=y,r[3]=o,!1;if(n<a)return r[0]=u,r[1]=i,r[2]=g,r[3]=o,!1}else{var _=e.height/e.width,E=t.height/t.width,S=(o-i)/(a-n),A=void 0,N=void 0,R=void 0,L=void 0,I=void 0,M=void 0;if(-_===S?n>a?(r[0]=c,r[1]=h,w=!0):(r[0]=u,r[1]=l,w=!0):_===S&&(n>a?(r[0]=s,r[1]=l,w=!0):(r[0]=d,r[1]=h,w=!0)),-E===S?a>n?(r[2]=v,r[3]=x,k=!0):(r[2]=y,r[3]=m,k=!0):E===S&&(a>n?(r[2]=g,r[3]=m,k=!0):(r[2]=b,r[3]=x,k=!0)),w&&k)return!1;if(n>a?i>o?(A=this.getCardinalDirection(_,S,4),N=this.getCardinalDirection(E,S,2)):(A=this.getCardinalDirection(-_,S,3),N=this.getCardinalDirection(-E,S,1)):i>o?(A=this.getCardinalDirection(-_,S,1),N=this.getCardinalDirection(-E,S,3)):(A=this.getCardinalDirection(_,S,2),N=this.getCardinalDirection(E,S,4)),!w)switch(A){case 1:L=l,R=n+-p/S,r[0]=R,r[1]=L;break;case 2:R=d,L=i+f*S,r[0]=R,r[1]=L;break;case 3:L=h,R=n+p/S,r[0]=R,r[1]=L;break;case 4:R=c,L=i+-f*S,r[0]=R,r[1]=L}if(!k)switch(N){case 1:M=m,I=a+-T/S,r[2]=I,r[3]=M;break;case 2:I=b,M=o+C*S,r[2]=I,r[3]=M;break;case 3:M=x,I=a+T/S,r[2]=I,r[3]=M;break;case 4:I=v,M=o+-C*S,r[2]=I,r[3]=M}}return!1},i.getCardinalDirection=function(e,t,r){return e>t?r:1+r%4},i.getIntersection=function(e,t,r,i){if(null==i)return this.getIntersection2(e,t,r);var a,o,s,l,u,c,h,d=e.x,f=e.y,p=t.x,g=t.y,m=r.x,y=r.y,v=i.x,x=i.y;return u=p*f-d*g,c=v*y-m*x,0===(h=(a=g-f)*(l=m-v)-(o=x-y)*(s=d-p))?null:new n((s*c-l*u)/h,(o*u-a*c)/h)},i.angleOfVector=function(e,t,r,n){var i=void 0;return e!==r?(i=Math.atan((n-t)/(r-e)),r<e?i+=Math.PI:n<t&&(i+=this.TWO_PI)):i=n<t?this.ONE_AND_HALF_PI:this.HALF_PI,i},i.doIntersect=function(e,t,r,n){var i=e.x,a=e.y,o=t.x,s=t.y,l=r.x,u=r.y,c=n.x,h=n.y,d=(o-i)*(h-u)-(c-l)*(s-a);if(0===d)return!1;var f=((h-u)*(c-i)+(l-c)*(h-a))/d,p=((a-s)*(c-i)+(o-i)*(h-a))/d;return 0<f&&f<1&&0<p&&p<1},i.findCircleLineIntersections=function(e,t,r,n,i,a,o){var s=(r-e)*(r-e)+(n-t)*(n-t),l=2*((e-i)*(r-e)+(t-a)*(n-t)),u=(e-i)*(e-i)+(t-a)*(t-a)-o*o;if(l*l-4*s*u>=0){var c=(-l+Math.sqrt(l*l-4*s*u))/(2*s),h=(-l-Math.sqrt(l*l-4*s*u))/(2*s);return c>=0&&c<=1?[c]:h>=0&&h<=1?[h]:null}return null},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,e.exports=i},function(e,t,r){function n(){}s(n,"IMath"),n.sign=function(e){return e>0?1:e<0?-1:0},n.floor=function(e){return e<0?Math.ceil(e):Math.floor(e)},n.ceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.exports=n},function(e,t,r){function n(){}s(n,"Integer"),n.MAX_VALUE=2147483647,n.MIN_VALUE=-2147483648,e.exports=n},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return s(e,"defineProperties"),function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}s(i,"_classCallCheck");var a=s((function(e){return{value:e,next:null,prev:null}}),"nodeFrom"),o=s((function(e,t,r,n){return null!==e?e.next=t:n.head=t,null!==r?r.prev=t:n.tail=t,t.prev=e,t.next=r,n.length++,t}),"add"),l=s((function(e,t){var r=e.prev,n=e.next;return null!==r?r.next=n:t.head=n,null!==n?n.prev=r:t.tail=r,e.prev=e.next=null,t.length--,e}),"_remove"),u=function(){function e(t){var r=this;i(this,e),this.length=0,this.head=null,this.tail=null,t?.forEach((function(e){return r.push(e)}))}return s(e,"LinkedList"),n(e,[{key:"size",value:s((function(){return this.length}),"size")},{key:"insertBefore",value:s((function(e,t){return o(t.prev,a(e),t,this)}),"insertBefore")},{key:"insertAfter",value:s((function(e,t){return o(t,a(e),t.next,this)}),"insertAfter")},{key:"insertNodeBefore",value:s((function(e,t){return o(t.prev,e,t,this)}),"insertNodeBefore")},{key:"insertNodeAfter",value:s((function(e,t){return o(t,e,t.next,this)}),"insertNodeAfter")},{key:"push",value:s((function(e){return o(this.tail,a(e),null,this)}),"push")},{key:"unshift",value:s((function(e){return o(null,a(e),this.head,this)}),"unshift")},{key:"remove",value:s((function(e){return l(e,this)}),"remove")},{key:"pop",value:s((function(){return l(this.tail,this).value}),"pop")},{key:"popNode",value:s((function(){return l(this.tail,this)}),"popNode")},{key:"shift",value:s((function(){return l(this.head,this).value}),"shift")},{key:"shiftNode",value:s((function(){return l(this.head,this)}),"shiftNode")},{key:"get_object_at",value:s((function(e){if(e<=this.length()){for(var t=1,r=this.head;t<e;)r=r.next,t++;return r.value}}),"get_object_at")},{key:"set_object_at",value:s((function(e,t){if(e<=this.length()){for(var r=1,n=this.head;r<e;)n=n.next,r++;n.value=t}}),"set_object_at")}]),e}();e.exports=u},function(e,t,r){function n(e,t,r){this.x=null,this.y=null,null==e&&null==t&&null==r?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==r?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==r&&(r=e,this.x=r.x,this.y=r.y)}s(n,"Point"),n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.getLocation=function(){return new n(this.x,this.y)},n.prototype.setLocation=function(e,t,r){"Point"==e.constructor.name&&null==t&&null==r?(r=e,this.setLocation(r.x,r.y)):"number"==typeof e&&"number"==typeof t&&null==r&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},n.prototype.move=function(e,t){this.x=e,this.y=t},n.prototype.translate=function(e,t){this.x+=e,this.y+=t},n.prototype.equals=function(e){if("Point"==e.constructor.name){var t=e;return this.x==t.x&&this.y==t.y}return this==e},n.prototype.toString=function(){return(new n).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=n},function(e,t,r){function n(e,t,r,n){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=r&&null!=n&&(this.x=e,this.y=t,this.width=r,this.height=n)}s(n,"RectangleD"),n.prototype.getX=function(){return this.x},n.prototype.setX=function(e){this.x=e},n.prototype.getY=function(){return this.y},n.prototype.setY=function(e){this.y=e},n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(e){this.width=e},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(e){this.height=e},n.prototype.getRight=function(){return this.x+this.width},n.prototype.getBottom=function(){return this.y+this.height},n.prototype.intersects=function(e){return!(this.getRight()<e.x||this.getBottom()<e.y||e.getRight()<this.x||e.getBottom()<this.y)},n.prototype.getCenterX=function(){return this.x+this.width/2},n.prototype.getMinX=function(){return this.getX()},n.prototype.getMaxX=function(){return this.getX()+this.width},n.prototype.getCenterY=function(){return this.y+this.height/2},n.prototype.getMinY=function(){return this.getY()},n.prototype.getMaxY=function(){return this.getY()+this.height},n.prototype.getWidthHalf=function(){return this.width/2},n.prototype.getHeightHalf=function(){return this.height/2},e.exports=n},function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}s(i,"UniqueIDGeneretor"),i.lastID=0,i.createID=function(e){return i.isPrimitive(e)?e:(null!=e.uniqueID||(e.uniqueID=i.getString(),i.lastID++),e.uniqueID)},i.getString=function(e){return null==e&&(e=i.lastID),"Object#"+e},i.isPrimitive=function(e){var t=typeof e>"u"?"undefined":n(e);return null==e||"object"!=t&&"function"!=t},e.exports=i},function(e,t,r){function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}s(n,"_toConsumableArray");var i=r(0),a=r(7),o=r(3),l=r(1),u=r(6),c=r(5),h=r(17),d=r(29);function f(e){d.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}s(f,"Layout"),f.RANDOM_SEED=1,f.prototype=Object.create(d.prototype),f.prototype.getGraphManager=function(){return this.graphManager},f.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},f.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},f.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},f.prototype.newGraphManager=function(){var e=new a(this);return this.graphManager=e,e},f.prototype.newGraph=function(e){return new u(null,this.graphManager,e)},f.prototype.newNode=function(e){return new o(this.graphManager,e)},f.prototype.newEdge=function(e){return new l(null,null,e)},f.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},f.prototype.runLayout=function(){var e;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),e=!this.checkLayoutSuccess()&&this.layout(),"during"!==i.ANIMATE&&(e&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,e)},f.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},f.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e=this.graphManager.getAllEdges(),t=0;t<e.length;t++)e[t];var r=this.graphManager.getRoot().getNodes();for(t=0;t<r.length;t++)r[t];this.update(this.graphManager.getRoot())}},f.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof o){var t=e;if(null!=t.getChild())for(var r=t.getChild().getNodes(),n=0;n<r.length;n++)update(r[n]);if(null!=t.vGraphObject)t.vGraphObject.update(t)}else if(e instanceof l){var i=e;if(null!=i.vGraphObject)i.vGraphObject.update(i)}else if(e instanceof u){var a=e;if(null!=a.vGraphObject)a.vGraphObject.update(a)}},f.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},f.prototype.transform=function(e){if(null==e)this.transform(new c(0,0));else{var t=new h,r=this.graphManager.getRoot().updateLeftTop();if(null!=r){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(r.x),t.setDeviceOrgY(r.y);for(var n=this.getAllNodes(),i=0;i<n.length;i++)n[i].transform(t)}}},f.prototype.positionNodesRandomly=function(e){if(null==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,r,n=e.getNodes(),i=0;i<n.length;i++)null==(r=(t=n[i]).getChild())||0==r.getNodes().length?t.scatter():(this.positionNodesRandomly(r),t.updateBounds())},f.prototype.getFlatForest=function(){for(var e=[],t=!0,r=this.graphManager.getRoot().getNodes(),i=!0,a=0;a<r.length;a++)null!=r[a].getChild()&&(i=!1);if(!i)return e;var o=new Set,s=[],l=new Map,u=[];for(u=u.concat(r);u.length>0&&t;){for(s.push(u[0]);s.length>0&&t;){var c=s[0];s.splice(0,1),o.add(c);var h=c.getEdges();for(a=0;a<h.length;a++){var d=h[a].getOtherEnd(c);if(l.get(c)!=d){if(o.has(d)){t=!1;break}s.push(d),l.set(d,c)}}}if(t){var f=[].concat(n(o));e.push(f);for(a=0;a<f.length;a++){var p=f[a],g=u.indexOf(p);g>-1&&u.splice(g,1)}o=new Set,l=new Map}else e=[]}return e},f.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],r=e.source,n=this.graphManager.calcLowestCommonAncestor(e.source,e.target),i=0;i<e.bendpoints.length;i++){var a=this.newNode(null);a.setRect(new Point(0,0),new Dimension(1,1)),n.add(a);var o=this.newEdge(null);this.graphManager.add(o,r,a),t.add(a),r=a}o=this.newEdge(null);return this.graphManager.add(o,r,e.target),this.edgeToDummyNodes.set(e,t),e.isInterGraph()?this.graphManager.remove(e):n.remove(e),t},f.prototype.createBendpointsFromDummyNodes=function(){var e=[];e=e.concat(this.graphManager.getAllEdges()),e=[].concat(n(this.edgeToDummyNodes.keys())).concat(e);for(var t=0;t<e.length;t++){var r=e[t];if(r.bendpoints.length>0){for(var i=this.edgeToDummyNodes.get(r),a=0;a<i.length;a++){var o=i[a],s=new c(o.getCenterX(),o.getCenterY()),l=r.bendpoints.get(a);l.x=s.x,l.y=s.y,o.getOwner().remove(o)}this.graphManager.add(r,r.source,r.target)}}},f.transform=function(e,t,r,n){if(null!=r&&null!=n){var i=t;if(e<=50)i-=(t-t/r)/50*(50-e);else i+=(t*n-t)/50*(e-50);return i}var a,o;return e<=50?(a=9*t/500,o=t/10):(a=9*t/50,o=-8*t),a*e+o},f.findCenterOfTree=function(e){var t=[];t=t.concat(e);var r=[],n=new Map,i=!1,a=null;(1==t.length||2==t.length)&&(i=!0,a=t[0]);for(var o=0;o<t.length;o++){var s=(c=t[o]).getNeighborsList().size;n.set(c,c.getNeighborsList().size),1==s&&r.push(c)}var l=[];for(l=l.concat(r);!i;){var u=[];u=u.concat(l),l=[];for(o=0;o<t.length;o++){var c=t[o],h=t.indexOf(c);h>=0&&t.splice(h,1),c.getNeighborsList().forEach((function(e){if(r.indexOf(e)<0){var t=n.get(e)-1;1==t&&l.push(e),n.set(e,t)}}))}r=r.concat(l),(1==t.length||2==t.length)&&(i=!0,a=t[0])}return a},f.prototype.setGraphManager=function(e){this.graphManager=e},e.exports=f},function(e,t,r){function n(){}s(n,"RandomSeed"),n.seed=1,n.x=0,n.nextDouble=function(){return n.x=1e4*Math.sin(n.seed++),n.x-Math.floor(n.x)},e.exports=n},function(e,t,r){var n=r(5);function i(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}s(i,"Transform"),i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(e){this.lworldExtX=e},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(e){this.lworldExtY=e},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},i.prototype.transformX=function(e){var t=0,r=this.lworldExtX;return 0!=r&&(t=this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/r),t},i.prototype.transformY=function(e){var t=0,r=this.lworldExtY;return 0!=r&&(t=this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/r),t},i.prototype.inverseTransformX=function(e){var t=0,r=this.ldeviceExtX;return 0!=r&&(t=this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/r),t},i.prototype.inverseTransformY=function(e){var t=0,r=this.ldeviceExtY;return 0!=r&&(t=this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/r),t},i.prototype.inverseTransformPoint=function(e){return new n(this.inverseTransformX(e.x),this.inverseTransformY(e.y))},e.exports=i},function(e,t,r){function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}s(n,"_toConsumableArray");var i=r(15),a=r(4),o=r(0),l=r(8),u=r(9);function c(){i.call(this),this.useSmartIdealEdgeLengthCalculation=a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=a.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=a.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=a.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*a.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=a.MAX_ITERATIONS}for(var h in s(c,"FDLayout"),c.prototype=Object.create(i.prototype),i)c[h]=i[h];c.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},c.prototype.calcIdealEdgeLengths=function(){for(var e,t,r,n,i,s,l,u=this.getGraphManager().getAllEdges(),c=0;c<u.length;c++)t=(e=u[c]).idealLength,e.isInterGraph&&(n=e.getSource(),i=e.getTarget(),s=e.getSourceInLca().getEstimatedSize(),l=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=s+l-2*o.SIMPLE_NODE_SIZE),r=e.getLca().getInclusionTreeDepth(),e.idealLength+=t*a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+i.getInclusionTreeDepth()-2*r))},c.prototype.initSpringEmbedder=function(){var e=this.getAllNodes().length;this.incremental?(e>a.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*a.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(e-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-a.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT_INCREMENTAL):(e>a.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(a.COOLING_ADAPTATION_FACTOR,1-(e-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*(1-a.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.displacementThresholdPerNode=3*a.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},c.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),r=0;r<t.length;r++)e=t[r],this.calcSpringForce(e,e.idealLength)},c.prototype.calcRepulsionForces=function(){var e,t,r,n,i,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&o&&this.updateGrid(),i=new Set,e=0;e<l.length;e++)r=l[e],this.calculateRepulsionForceOfANode(r,i,o,s),i.add(r);else for(e=0;e<l.length;e++)for(r=l[e],t=e+1;t<l.length;t++)n=l[t],r.getOwner()==n.getOwner()&&this.calcRepulsionForce(r,n)},c.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),r=0;r<t.length;r++)e=t[r],this.calcGravitationalForce(e)},c.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].move()},c.prototype.calcSpringForce=function(e,t){var r,n,i,a,o=e.getSource(),s=e.getTarget();if(this.uniformLeafNodeSizes&&null==o.getChild()&&null==s.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;0!=(r=e.getLength())&&(i=(n=e.edgeElasticity*(r-t))*(e.lengthX/r),a=n*(e.lengthY/r),o.springForceX+=i,o.springForceY+=a,s.springForceX-=i,s.springForceY-=a)},c.prototype.calcRepulsionForce=function(e,t){var r,n,i,o,s,c,h,d=e.getRect(),f=t.getRect(),p=new Array(2),g=new Array(4);if(d.intersects(f)){l.calcSeparationAmount(d,f,p,a.DEFAULT_EDGE_LENGTH/2),c=2*p[0],h=2*p[1];var m=e.noOfChildren*t.noOfChildren/(e.noOfChildren+t.noOfChildren);e.repulsionForceX-=m*c,e.repulsionForceY-=m*h,t.repulsionForceX+=m*c,t.repulsionForceY+=m*h}else this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(r=f.getCenterX()-d.getCenterX(),n=f.getCenterY()-d.getCenterY()):(l.getIntersection(d,f,g),r=g[2]-g[0],n=g[3]-g[1]),Math.abs(r)<a.MIN_REPULSION_DIST&&(r=u.sign(r)*a.MIN_REPULSION_DIST),Math.abs(n)<a.MIN_REPULSION_DIST&&(n=u.sign(n)*a.MIN_REPULSION_DIST),i=r*r+n*n,o=Math.sqrt(i),c=(s=(e.nodeRepulsion/2+t.nodeRepulsion/2)*e.noOfChildren*t.noOfChildren/i)*r/o,h=s*n/o,e.repulsionForceX-=c,e.repulsionForceY-=h,t.repulsionForceX+=c,t.repulsionForceY+=h},c.prototype.calcGravitationalForce=function(e){var t,r,n,i,a,o,s,l;r=((t=e.getOwner()).getRight()+t.getLeft())/2,n=(t.getTop()+t.getBottom())/2,i=e.getCenterX()-r,a=e.getCenterY()-n,o=Math.abs(i)+e.getWidth()/2,s=Math.abs(a)+e.getHeight()/2,e.getOwner()==this.graphManager.getRoot()?(o>(l=t.getEstimatedSize()*this.gravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i,e.gravitationForceY=-this.gravityConstant*a):(o>(l=t.getEstimatedSize()*this.compoundGravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*a*this.compoundGravityConstant)},c.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},c.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},c.prototype.calcNoOfChildrenForAllNodes=function(){for(var e,t=this.graphManager.getAllNodes(),r=0;r<t.length;r++)(e=t[r]).noOfChildren=e.getNoOfChildren()},c.prototype.calcGrid=function(e){var t,r;t=parseInt(Math.ceil((e.getRight()-e.getLeft())/this.repulsionRange)),r=parseInt(Math.ceil((e.getBottom()-e.getTop())/this.repulsionRange));for(var n=new Array(t),i=0;i<t;i++)n[i]=new Array(r);for(i=0;i<t;i++)for(var a=0;a<r;a++)n[i][a]=new Array;return n},c.prototype.addNodeToGrid=function(e,t,r){var n,i,a,o;n=parseInt(Math.floor((e.getRect().x-t)/this.repulsionRange)),i=parseInt(Math.floor((e.getRect().width+e.getRect().x-t)/this.repulsionRange)),a=parseInt(Math.floor((e.getRect().y-r)/this.repulsionRange)),o=parseInt(Math.floor((e.getRect().height+e.getRect().y-r)/this.repulsionRange));for(var s=n;s<=i;s++)for(var l=a;l<=o;l++)this.grid[s][l].push(e),e.setGridCoordinates(n,i,a,o)},c.prototype.updateGrid=function(){var e,t,r=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),e=0;e<r.length;e++)t=r[e],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},c.prototype.calculateRepulsionForceOfANode=function(e,t,r,i){if(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&r||i){var o=new Set;e.surrounding=new Array;for(var s,l=this.grid,u=e.startX-1;u<e.finishX+2;u++)for(var c=e.startY-1;c<e.finishY+2;c++)if(!(u<0||c<0||u>=l.length||c>=l[0].length))for(var h=0;h<l[u][c].length;h++)if(s=l[u][c][h],e.getOwner()==s.getOwner()&&e!=s&&!t.has(s)&&!o.has(s)){var d=Math.abs(e.getCenterX()-s.getCenterX())-(e.getWidth()/2+s.getWidth()/2),f=Math.abs(e.getCenterY()-s.getCenterY())-(e.getHeight()/2+s.getHeight()/2);d<=this.repulsionRange&&f<=this.repulsionRange&&o.add(s)}e.surrounding=[].concat(n(o))}for(u=0;u<e.surrounding.length;u++)this.calcRepulsionForce(e,e.surrounding[u])},c.prototype.calcRepulsionRange=function(){return 0},e.exports=c},function(e,t,r){var n=r(1),i=r(4);function a(e,t,r){n.call(this,e,t,r),this.idealLength=i.DEFAULT_EDGE_LENGTH,this.edgeElasticity=i.DEFAULT_SPRING_STRENGTH}for(var o in s(a,"FDLayoutEdge"),a.prototype=Object.create(n.prototype),n)a[o]=n[o];e.exports=a},function(e,t,r){var n=r(3),i=r(4);function a(e,t,r,a){n.call(this,e,t,r,a),this.nodeRepulsion=i.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var o in s(a,"FDLayoutNode"),a.prototype=Object.create(n.prototype),n)a[o]=n[o];a.prototype.setGridCoordinates=function(e,t,r,n){this.startX=e,this.finishX=t,this.startY=r,this.finishY=n},e.exports=a},function(e,t,r){function n(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}s(n,"DimensionD"),n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(e){this.width=e},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(e){this.height=e},e.exports=n},function(e,t,r){var n=r(14);function i(){this.map={},this.keys=[]}s(i,"HashMap"),i.prototype.put=function(e,t){var r=n.createID(e);this.contains(r)||(this.map[r]=t,this.keys.push(e))},i.prototype.contains=function(e){return n.createID(e),null!=this.map[e]},i.prototype.get=function(e){var t=n.createID(e);return this.map[t]},i.prototype.keySet=function(){return this.keys},e.exports=i},function(e,t,r){var n=r(14);function i(){this.set={}}s(i,"HashSet"),i.prototype.add=function(e){var t=n.createID(e);this.contains(t)||(this.set[t]=e)},i.prototype.remove=function(e){delete this.set[n.createID(e)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(e){return this.set[n.createID(e)]==e},i.prototype.isEmpty=function(){return 0===this.size()},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),r=t.length,n=0;n<r;n++)e.push(this.set[t[n]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(e){for(var t=e.length,r=0;r<t;r++){var n=e[r];this.add(n)}},e.exports=i},function(e,t,r){function n(){}s(n,"Matrix"),n.multMat=function(e,t){for(var r=[],n=0;n<e.length;n++){r[n]=[];for(var i=0;i<t[0].length;i++){r[n][i]=0;for(var a=0;a<e[0].length;a++)r[n][i]+=e[n][a]*t[a][i]}}return r},n.transpose=function(e){for(var t=[],r=0;r<e[0].length;r++){t[r]=[];for(var n=0;n<e.length;n++)t[r][n]=e[n][r]}return t},n.multCons=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]*t;return r},n.minusOp=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]-t[n];return r},n.dotProduct=function(e,t){for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r},n.mag=function(e){return Math.sqrt(this.dotProduct(e,e))},n.normalize=function(e){for(var t=[],r=this.mag(e),n=0;n<e.length;n++)t[n]=e[n]/r;return t},n.multGamma=function(e){for(var t=[],r=0,n=0;n<e.length;n++)r+=e[n];r*=-1/e.length;for(var i=0;i<e.length;i++)t[i]=r+e[i];return t},n.multL=function(e,t,r){for(var n=[],i=[],a=[],o=0;o<t[0].length;o++){for(var s=0,l=0;l<t.length;l++)s+=-.5*t[l][o]*e[l];i[o]=s}for(var u=0;u<r.length;u++){for(var c=0,h=0;h<r.length;h++)c+=r[u][h]*i[h];a[u]=c}for(var d=0;d<t.length;d++){for(var f=0,p=0;p<t[0].length;p++)f+=t[d][p]*a[p];n[d]=f}return n},e.exports=n},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return s(e,"defineProperties"),function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}s(i,"_classCallCheck");var a=r(11),o=function(){function e(t,r){i(this,e),(null!==r||void 0!==r)&&(this.compareFunction=this._defaultCompareFunction);var n=void 0;n=t instanceof a?t.size():t.length,this._quicksort(t,0,n-1)}return s(e,"Quicksort"),n(e,[{key:"_quicksort",value:s((function(e,t,r){if(t<r){var n=this._partition(e,t,r);this._quicksort(e,t,n),this._quicksort(e,n+1,r)}}),"_quicksort")},{key:"_partition",value:s((function(e,t,r){for(var n=this._get(e,t),i=t,a=r;;){for(;this.compareFunction(n,this._get(e,a));)a--;for(;this.compareFunction(this._get(e,i),n);)i++;if(!(i<a))return a;this._swap(e,i,a),i++,a--}}),"_partition")},{key:"_get",value:s((function(e,t){return e instanceof a?e.get_object_at(t):e[t]}),"_get")},{key:"_set",value:s((function(e,t,r){e instanceof a?e.set_object_at(t,r):e[t]=r}),"_set")},{key:"_swap",value:s((function(e,t,r){var n=this._get(e,t);this._set(e,t,this._get(e,r)),this._set(e,r,n)}),"_swap")},{key:"_defaultCompareFunction",value:s((function(e,t){return t>e}),"_defaultCompareFunction")}]),e}();e.exports=o},function(e,t,r){function n(){}s(n,"SVD"),n.svd=function(e){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=e.length,this.n=e[0].length;var t=Math.min(this.m,this.n);this.s=function(e){for(var t=[];e-- >0;)t.push(0);return t}(Math.min(this.m+1,this.n)),this.U=function(e){var t=s((function e(t){if(0==t.length)return 0;for(var r=[],n=0;n<t[0];n++)r.push(e(t.slice(1)));return r}),"allocate");return t(e)}([this.m,t]),this.V=function(e){var t=s((function e(t){if(0==t.length)return 0;for(var r=[],n=0;n<t[0];n++)r.push(e(t.slice(1)));return r}),"allocate");return t(e)}([this.n,this.n]);for(var r=function(e){for(var t=[];e-- >0;)t.push(0);return t}(this.n),i=function(e){for(var t=[];e-- >0;)t.push(0);return t}(this.m),a=!0,o=Math.min(this.m-1,this.n),l=Math.max(0,Math.min(this.n-2,this.m)),u=0;u<Math.max(o,l);u++){if(u<o){this.s[u]=0;for(var c=u;c<this.m;c++)this.s[u]=n.hypot(this.s[u],e[c][u]);if(0!==this.s[u]){e[u][u]<0&&(this.s[u]=-this.s[u]);for(var h=u;h<this.m;h++)e[h][u]/=this.s[u];e[u][u]+=1}this.s[u]=-this.s[u]}for(var d=u+1;d<this.n;d++){if(function(e,t){return e&&t}(u<o,0!==this.s[u])){for(var f=0,p=u;p<this.m;p++)f+=e[p][u]*e[p][d];f=-f/e[u][u];for(var g=u;g<this.m;g++)e[g][d]+=f*e[g][u]}r[d]=e[u][d]}if(function(e,t){return t}(0,u<o))for(var m=u;m<this.m;m++)this.U[m][u]=e[m][u];if(u<l){r[u]=0;for(var y=u+1;y<this.n;y++)r[u]=n.hypot(r[u],r[y]);if(0!==r[u]){r[u+1]<0&&(r[u]=-r[u]);for(var v=u+1;v<this.n;v++)r[v]/=r[u];r[u+1]+=1}if(r[u]=-r[u],function(e,t){return e&&t}(u+1<this.m,0!==r[u])){for(var x=u+1;x<this.m;x++)i[x]=0;for(var b=u+1;b<this.n;b++)for(var C=u+1;C<this.m;C++)i[C]+=r[b]*e[C][b];for(var T=u+1;T<this.n;T++)for(var w=-r[T]/r[u+1],k=u+1;k<this.m;k++)e[k][T]+=w*i[k]}for(var _=u+1;_<this.n;_++)this.V[_][u]=r[_]}}var E=Math.min(this.n,this.m+1);o<this.n&&(this.s[o]=e[o][o]),this.m<E&&(this.s[E-1]=0),l+1<E&&(r[l]=e[l][E-1]),r[E-1]=0;for(var S=o;S<t;S++){for(var A=0;A<this.m;A++)this.U[A][S]=0;this.U[S][S]=1}for(var N=o-1;N>=0;N--)if(0!==this.s[N]){for(var R=N+1;R<t;R++){for(var L=0,I=N;I<this.m;I++)L+=this.U[I][N]*this.U[I][R];L=-L/this.U[N][N];for(var M=N;M<this.m;M++)this.U[M][R]+=L*this.U[M][N]}for(var O=N;O<this.m;O++)this.U[O][N]=-this.U[O][N];this.U[N][N]=1+this.U[N][N];for(var D=0;D<N-1;D++)this.U[D][N]=0}else{for(var P=0;P<this.m;P++)this.U[P][N]=0;this.U[N][N]=1}for(var F=this.n-1;F>=0;F--){if(function(e,t){return e&&t}(F<l,0!==r[F]))for(var B=F+1;B<t;B++){for(var $=0,z=F+1;z<this.n;z++)$+=this.V[z][F]*this.V[z][B];$=-$/this.V[F+1][F];for(var U=F+1;U<this.n;U++)this.V[U][B]+=$*this.V[U][F]}for(var G=0;G<this.n;G++)this.V[G][F]=0;this.V[F][F]=1}for(var j=E-1,V=Math.pow(2,-52),W=Math.pow(2,-966);E>0;){var q=void 0,H=void 0;for(q=E-2;q>=-1&&-1!==q;q--)if(Math.abs(r[q])<=W+V*(Math.abs(this.s[q])+Math.abs(this.s[q+1]))){r[q]=0;break}if(q===E-2)H=4;else{var Y=void 0;for(Y=E-1;Y>=q&&Y!==q;Y--){var X=(Y!==E?Math.abs(r[Y]):0)+(Y!==q+1?Math.abs(r[Y-1]):0);if(Math.abs(this.s[Y])<=W+V*X){this.s[Y]=0;break}}Y===q?H=3:Y===E-1?H=1:(H=2,q=Y)}switch(q++,H){case 1:var K=r[E-2];r[E-2]=0;for(var Z=E-2;Z>=q;Z--){var Q=n.hypot(this.s[Z],K),J=this.s[Z]/Q,ee=K/Q;this.s[Z]=Q,Z!==q&&(K=-ee*r[Z-1],r[Z-1]=J*r[Z-1]);for(var te=0;te<this.n;te++)Q=J*this.V[te][Z]+ee*this.V[te][E-1],this.V[te][E-1]=-ee*this.V[te][Z]+J*this.V[te][E-1],this.V[te][Z]=Q}break;case 2:var re=r[q-1];r[q-1]=0;for(var ne=q;ne<E;ne++){var ie=n.hypot(this.s[ne],re),ae=this.s[ne]/ie,oe=re/ie;this.s[ne]=ie,re=-oe*r[ne],r[ne]=ae*r[ne];for(var se=0;se<this.m;se++)ie=ae*this.U[se][ne]+oe*this.U[se][q-1],this.U[se][q-1]=-oe*this.U[se][ne]+ae*this.U[se][q-1],this.U[se][ne]=ie}break;case 3:var le=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[E-1]),Math.abs(this.s[E-2])),Math.abs(r[E-2])),Math.abs(this.s[q])),Math.abs(r[q])),ue=this.s[E-1]/le,ce=this.s[E-2]/le,he=r[E-2]/le,de=this.s[q]/le,fe=r[q]/le,pe=((ce+ue)*(ce-ue)+he*he)/2,ge=ue*he*(ue*he),me=0;(function(e,t){return e||t})(0!==pe,0!==ge)&&(me=Math.sqrt(pe*pe+ge),pe<0&&(me=-me),me=ge/(pe+me));for(var ye=(de+ue)*(de-ue)+me,ve=de*fe,xe=q;xe<E-1;xe++){var be=n.hypot(ye,ve),Ce=ye/be,Te=ve/be;xe!==q&&(r[xe-1]=be),ye=Ce*this.s[xe]+Te*r[xe],r[xe]=Ce*r[xe]-Te*this.s[xe],ve=Te*this.s[xe+1],this.s[xe+1]=Ce*this.s[xe+1];for(var we=0;we<this.n;we++)be=Ce*this.V[we][xe]+Te*this.V[we][xe+1],this.V[we][xe+1]=-Te*this.V[we][xe]+Ce*this.V[we][xe+1],this.V[we][xe]=be;if(Ce=ye/(be=n.hypot(ye,ve)),Te=ve/be,this.s[xe]=be,ye=Ce*r[xe]+Te*this.s[xe+1],this.s[xe+1]=-Te*r[xe]+Ce*this.s[xe+1],ve=Te*r[xe+1],r[xe+1]=Ce*r[xe+1],xe<this.m-1)for(var ke=0;ke<this.m;ke++)be=Ce*this.U[ke][xe]+Te*this.U[ke][xe+1],this.U[ke][xe+1]=-Te*this.U[ke][xe]+Ce*this.U[ke][xe+1],this.U[ke][xe]=be}r[E-2]=ye,1;break;case 4:if(this.s[q]<=0&&(this.s[q]=this.s[q]<0?-this.s[q]:0,a))for(var _e=0;_e<=j;_e++)this.V[_e][q]=-this.V[_e][q];for(;q<j&&!(this.s[q]>=this.s[q+1]);){var Ee=this.s[q];if(this.s[q]=this.s[q+1],this.s[q+1]=Ee,q<this.n-1)for(var Se=0;Se<this.n;Se++)Ee=this.V[Se][q+1],this.V[Se][q+1]=this.V[Se][q],this.V[Se][q]=Ee;if(q<this.m-1)for(var Ae=0;Ae<this.m;Ae++)Ee=this.U[Ae][q+1],this.U[Ae][q+1]=this.U[Ae][q],this.U[Ae][q]=Ee;q++}0,E--}}return{U:this.U,V:this.V,S:this.s}},n.hypot=function(e,t){var r=void 0;return Math.abs(e)>Math.abs(t)?(r=t/e,r=Math.abs(e)*Math.sqrt(1+r*r)):0!=t?(r=e/t,r=Math.abs(t)*Math.sqrt(1+r*r)):r=0,r},e.exports=n},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return s(e,"defineProperties"),function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}s(i,"_classCallCheck");var a=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;i(this,e),this.sequence1=t,this.sequence2=r,this.match_score=n,this.mismatch_penalty=a,this.gap_penalty=o,this.iMax=t.length+1,this.jMax=r.length+1,this.grid=new Array(this.iMax);for(var s=0;s<this.iMax;s++){this.grid[s]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.grid[s][l]=0}this.tracebackGrid=new Array(this.iMax);for(var u=0;u<this.iMax;u++){this.tracebackGrid[u]=new Array(this.jMax);for(var c=0;c<this.jMax;c++)this.tracebackGrid[u][c]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return s(e,"NeedlemanWunsch"),n(e,[{key:"getScore",value:s((function(){return this.score}),"getScore")},{key:"getAlignments",value:s((function(){return this.alignments}),"getAlignments")},{key:"computeGrids",value:s((function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var r=1;r<this.iMax;r++)for(var n=1;n<this.jMax;n++){var i=[this.sequence1[r-1]===this.sequence2[n-1]?this.grid[r-1][n-1]+this.match_score:this.grid[r-1][n-1]+this.mismatch_penalty,this.grid[r-1][n]+this.gap_penalty,this.grid[r][n-1]+this.gap_penalty],a=this.arrayAllMaxIndexes(i);this.grid[r][n]=i[a[0]],this.tracebackGrid[r][n]=[a.includes(0),a.includes(1),a.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}),"computeGrids")},{key:"alignmentTraceback",value:s((function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var t=e[0],r=this.tracebackGrid[t.pos[0]][t.pos[1]];r[0]&&e.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),r[1]&&e.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),r[2]&&e.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),0===t.pos[0]&&0===t.pos[1]&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),e.shift()}return this.alignments}),"alignmentTraceback")},{key:"getAllIndexes",value:s((function(e,t){for(var r=[],n=-1;-1!==(n=e.indexOf(t,n+1));)r.push(n);return r}),"getAllIndexes")},{key:"arrayAllMaxIndexes",value:s((function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}),"arrayAllMaxIndexes")}]),e}();e.exports=a},function(e,t,r){var n=s((function(){}),"layoutBase");n.FDLayout=r(18),n.FDLayoutConstants=r(4),n.FDLayoutEdge=r(19),n.FDLayoutNode=r(20),n.DimensionD=r(21),n.HashMap=r(22),n.HashSet=r(23),n.IGeometry=r(8),n.IMath=r(9),n.Integer=r(10),n.Point=r(12),n.PointD=r(5),n.RandomSeed=r(16),n.RectangleD=r(13),n.Transform=r(17),n.UniqueIDGeneretor=r(14),n.Quicksort=r(25),n.LinkedList=r(11),n.LGraphObject=r(2),n.LGraph=r(6),n.LEdge=r(1),n.LGraphManager=r(7),n.LNode=r(3),n.Layout=r(15),n.LayoutConstants=r(0),n.NeedlemanWunsch=r(27),n.Matrix=r(24),n.SVD=r(26),e.exports=n},function(e,t,r){function n(){this.listeners=[]}s(n,"Emitter");var i=n.prototype;i.addListener=function(e,t){this.listeners.push({event:e,callback:t})},i.removeListener=function(e,t){for(var r=this.listeners.length;r>=0;r--){var n=this.listeners[r];n.event===e&&n.callback===t&&this.listeners.splice(r,1)}},i.emit=function(e,t){for(var r=0;r<this.listeners.length;r++){var n=this.listeners[r];e===n.event&&n.callback(t)}},e.exports=n}])}))})),h2=l(((e,t)=>{s((function(r,n){"object"==typeof e&&"object"==typeof t?t.exports=n(c2()):"function"==typeof define&&define.amd?define(["layout-base"],n):"object"==typeof e?e.coseBase=n(c2()):r.coseBase=n(r.layoutBase)}),"webpackUniversalModuleDefinition")(e,(function(e){return(()=>{var t={45:(e,t,r)=>{var n={};n.layoutBase=r(551),n.CoSEConstants=r(806),n.CoSEEdge=r(767),n.CoSEGraph=r(880),n.CoSEGraphManager=r(578),n.CoSELayout=r(765),n.CoSENode=r(991),n.ConstraintHandler=r(902),e.exports=n},806:(e,t,r)=>{var n=r(551).FDLayoutConstants;function i(){}for(var a in s(i,"CoSEConstants"),n)i[a]=n[a];i.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,i.DEFAULT_RADIAL_SEPARATION=n.DEFAULT_EDGE_LENGTH,i.DEFAULT_COMPONENT_SEPERATION=60,i.TILE=!0,i.TILING_PADDING_VERTICAL=10,i.TILING_PADDING_HORIZONTAL=10,i.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,i.ENFORCE_CONSTRAINTS=!0,i.APPLY_LAYOUT=!0,i.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,i.TREE_REDUCTION_ON_INCREMENTAL=!0,i.PURE_INCREMENTAL=i.DEFAULT_INCREMENTAL,e.exports=i},767:(e,t,r)=>{var n=r(551).FDLayoutEdge;function i(e,t,r){n.call(this,e,t,r)}for(var a in s(i,"CoSEEdge"),i.prototype=Object.create(n.prototype),n)i[a]=n[a];e.exports=i},880:(e,t,r)=>{var n=r(551).LGraph;function i(e,t,r){n.call(this,e,t,r)}for(var a in s(i,"CoSEGraph"),i.prototype=Object.create(n.prototype),n)i[a]=n[a];e.exports=i},578:(e,t,r)=>{var n=r(551).LGraphManager;function i(e){n.call(this,e)}for(var a in s(i,"CoSEGraphManager"),i.prototype=Object.create(n.prototype),n)i[a]=n[a];e.exports=i},765:(e,t,r)=>{var n=r(551).FDLayout,i=r(578),a=r(880),o=r(991),l=r(767),u=r(806),c=r(902),h=r(551).FDLayoutConstants,d=r(551).LayoutConstants,f=r(551).Point,p=r(551).PointD,g=r(551).DimensionD,m=r(551).Layout,y=r(551).Integer,v=r(551).IGeometry,x=r(551).LGraph,b=r(551).Transform,C=r(551).LinkedList;function T(){n.call(this),this.toBeTiled={},this.constraints={}}for(var w in s(T,"CoSELayout"),T.prototype=Object.create(n.prototype),n)T[w]=n[w];T.prototype.newGraphManager=function(){var e=new i(this);return this.graphManager=e,e},T.prototype.newGraph=function(e){return new a(null,this.graphManager,e)},T.prototype.newNode=function(e){return new o(this.graphManager,e)},T.prototype.newEdge=function(e){return new l(null,null,e)},T.prototype.initParameters=function(){n.prototype.initParameters.call(this,arguments),this.isSubLayout||(u.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=u.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=u.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},T.prototype.initSpringEmbedder=function(){n.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},T.prototype.layout=function(){return d.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},T.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(u.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter((function(t){return e.has(t)}));this.graphManager.setAllNodesToApplyGravitation(t)}}else{var r=this.getFlatForest();if(r.length>0)this.positionNodesRadially(r);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter((function(t){return e.has(t)}));this.graphManager.setAllNodesToApplyGravitation(t),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(c.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),u.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},T.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter((function(t){return e.has(t)}));this.graphManager.setAllNodesToApplyGravitation(t),this.graphManager.updateBounds(),this.updateGrid(),u.PURE_INCREMENTAL?this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),u.PURE_INCREMENTAL?this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var r=!this.isTreeGrowing&&!this.isGrowthFinished,n=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(r,n),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},T.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},r=0;r<e.length;r++){var n=e[r].rect,i=e[r].id;t[i]={id:i,x:n.getCenterX(),y:n.getCenterY(),w:n.width,h:n.height}}return t},T.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if("during"===h.ANIMATE)this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},T.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(t=0;t<e.length;t++)e[t].move()},T.prototype.initConstraintVariables=function(){var e=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var t=this.graphManager.getAllNodes(),r=0;r<t.length;r++){var n=t[r];this.idToNodeMap.set(n.id,n)}var i=s((function t(r){for(var n,i=r.getChild().getNodes(),a=0,o=0;o<i.length;o++)null==(n=i[o]).getChild()?e.fixedNodeSet.has(n.id)&&(a+=100):a+=t(n);return a}),"calculateCompoundWeight");if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach((function(t){e.fixedNodeSet.add(t.nodeId)}));for(t=this.graphManager.getAllNodes(),r=0;r<t.length;r++)if(null!=(n=t[r]).getChild()){var a=i(n);a>0&&(n.fixedNodeWeight=a)}}if(this.constraints.relativePlacementConstraint){var o=new Map,l=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach((function(t){e.fixedNodesOnHorizontal.add(t),e.fixedNodesOnVertical.add(t)})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical){var c=this.constraints.alignmentConstraint.vertical;for(r=0;r<c.length;r++)this.dummyToNodeForVerticalAlignment.set("dummy"+r,[]),c[r].forEach((function(t){o.set(t,"dummy"+r),e.dummyToNodeForVerticalAlignment.get("dummy"+r).push(t),e.fixedNodeSet.has(t)&&e.fixedNodesOnHorizontal.add("dummy"+r)}))}if(this.constraints.alignmentConstraint.horizontal){var h=this.constraints.alignmentConstraint.horizontal;for(r=0;r<h.length;r++)this.dummyToNodeForHorizontalAlignment.set("dummy"+r,[]),h[r].forEach((function(t){l.set(t,"dummy"+r),e.dummyToNodeForHorizontalAlignment.get("dummy"+r).push(t),e.fixedNodeSet.has(t)&&e.fixedNodesOnVertical.add("dummy"+r)}))}}if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(e){var t,r,n;for(n=e.length-1;n>=2*e.length/3;n--)t=Math.floor(Math.random()*(n+1)),r=e[n],e[n]=e[t],e[t]=r;return e},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach((function(t){if(t.left){var r=o.has(t.left)?o.get(t.left):t.left,n=o.has(t.right)?o.get(t.right):t.right;e.nodesInRelativeHorizontal.includes(r)||(e.nodesInRelativeHorizontal.push(r),e.nodeToRelativeConstraintMapHorizontal.set(r,[]),e.dummyToNodeForVerticalAlignment.has(r)?e.nodeToTempPositionMapHorizontal.set(r,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(r)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(r,e.idToNodeMap.get(r).getCenterX())),e.nodesInRelativeHorizontal.includes(n)||(e.nodesInRelativeHorizontal.push(n),e.nodeToRelativeConstraintMapHorizontal.set(n,[]),e.dummyToNodeForVerticalAlignment.has(n)?e.nodeToTempPositionMapHorizontal.set(n,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(n)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(n,e.idToNodeMap.get(n).getCenterX())),e.nodeToRelativeConstraintMapHorizontal.get(r).push({right:n,gap:t.gap}),e.nodeToRelativeConstraintMapHorizontal.get(n).push({left:r,gap:t.gap})}else{var i=l.has(t.top)?l.get(t.top):t.top,a=l.has(t.bottom)?l.get(t.bottom):t.bottom;e.nodesInRelativeVertical.includes(i)||(e.nodesInRelativeVertical.push(i),e.nodeToRelativeConstraintMapVertical.set(i,[]),e.dummyToNodeForHorizontalAlignment.has(i)?e.nodeToTempPositionMapVertical.set(i,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(i)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(i,e.idToNodeMap.get(i).getCenterY())),e.nodesInRelativeVertical.includes(a)||(e.nodesInRelativeVertical.push(a),e.nodeToRelativeConstraintMapVertical.set(a,[]),e.dummyToNodeForHorizontalAlignment.has(a)?e.nodeToTempPositionMapVertical.set(a,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(a)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(a,e.idToNodeMap.get(a).getCenterY())),e.nodeToRelativeConstraintMapVertical.get(i).push({bottom:a,gap:t.gap}),e.nodeToRelativeConstraintMapVertical.get(a).push({top:i,gap:t.gap})}}));else{var d=new Map,f=new Map;this.constraints.relativePlacementConstraint.forEach((function(e){if(e.left){var t=o.has(e.left)?o.get(e.left):e.left,r=o.has(e.right)?o.get(e.right):e.right;d.has(t)?d.get(t).push(r):d.set(t,[r]),d.has(r)?d.get(r).push(t):d.set(r,[t])}else{var n=l.has(e.top)?l.get(e.top):e.top,i=l.has(e.bottom)?l.get(e.bottom):e.bottom;f.has(n)?f.get(n).push(i):f.set(n,[i]),f.has(i)?f.get(i).push(n):f.set(i,[n])}}));var p=s((function(e,t){var r=[],n=[],i=new C,a=new Set,o=0;return e.forEach((function(s,l){if(!a.has(l)){r[o]=[],n[o]=!1;var u=l;for(i.push(u),a.add(u),r[o].push(u);0!=i.length;){u=i.shift(),t.has(u)&&(n[o]=!0),e.get(u).forEach((function(e){a.has(e)||(i.push(e),a.add(e),r[o].push(e))}))}o++}})),{components:r,isFixed:n}}),"constructComponents"),g=p(d,e.fixedNodesOnHorizontal);this.componentsOnHorizontal=g.components,this.fixedComponentsOnHorizontal=g.isFixed;var m=p(f,e.fixedNodesOnVertical);this.componentsOnVertical=m.components,this.fixedComponentsOnVertical=m.isFixed}}},T.prototype.updateDisplacements=function(){var e=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach((function(t){var r=e.idToNodeMap.get(t.nodeId);r.displacementX=0,r.displacementY=0})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var t=this.constraints.alignmentConstraint.vertical,r=0;r<t.length;r++){for(var n=0,i=0;i<t[r].length;i++){if(this.fixedNodeSet.has(t[r][i])){n=0;break}n+=this.idToNodeMap.get(t[r][i]).displacementX}var a=n/t[r].length;for(i=0;i<t[r].length;i++)this.idToNodeMap.get(t[r][i]).displacementX=a}if(this.constraints.alignmentConstraint.horizontal){var o=this.constraints.alignmentConstraint.horizontal;for(r=0;r<o.length;r++){var s=0;for(i=0;i<o[r].length;i++){if(this.fixedNodeSet.has(o[r][i])){s=0;break}s+=this.idToNodeMap.get(o[r][i]).displacementY}var l=s/o[r].length;for(i=0;i<o[r].length;i++)this.idToNodeMap.get(o[r][i]).displacementY=l}}}if(this.constraints.relativePlacementConstraint)if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach((function(t){if(!e.fixedNodesOnHorizontal.has(t)){var r=0;r=e.dummyToNodeForVerticalAlignment.has(t)?e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(t)[0]).displacementX:e.idToNodeMap.get(t).displacementX,e.nodeToRelativeConstraintMapHorizontal.get(t).forEach((function(n){var i;n.right?(i=e.nodeToTempPositionMapHorizontal.get(n.right)-e.nodeToTempPositionMapHorizontal.get(t)-r)<n.gap&&(r-=n.gap-i):(i=e.nodeToTempPositionMapHorizontal.get(t)-e.nodeToTempPositionMapHorizontal.get(n.left)+r)<n.gap&&(r+=n.gap-i)})),e.nodeToTempPositionMapHorizontal.set(t,e.nodeToTempPositionMapHorizontal.get(t)+r),e.dummyToNodeForVerticalAlignment.has(t)?e.dummyToNodeForVerticalAlignment.get(t).forEach((function(t){e.idToNodeMap.get(t).displacementX=r})):e.idToNodeMap.get(t).displacementX=r}})),this.nodesInRelativeVertical.forEach((function(t){if(!e.fixedNodesOnHorizontal.has(t)){var r=0;r=e.dummyToNodeForHorizontalAlignment.has(t)?e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(t)[0]).displacementY:e.idToNodeMap.get(t).displacementY,e.nodeToRelativeConstraintMapVertical.get(t).forEach((function(n){var i;n.bottom?(i=e.nodeToTempPositionMapVertical.get(n.bottom)-e.nodeToTempPositionMapVertical.get(t)-r)<n.gap&&(r-=n.gap-i):(i=e.nodeToTempPositionMapVertical.get(t)-e.nodeToTempPositionMapVertical.get(n.top)+r)<n.gap&&(r+=n.gap-i)})),e.nodeToTempPositionMapVertical.set(t,e.nodeToTempPositionMapVertical.get(t)+r),e.dummyToNodeForHorizontalAlignment.has(t)?e.dummyToNodeForHorizontalAlignment.get(t).forEach((function(t){e.idToNodeMap.get(t).displacementY=r})):e.idToNodeMap.get(t).displacementY=r}}));else{for(r=0;r<this.componentsOnHorizontal.length;r++){var c=this.componentsOnHorizontal[r];if(this.fixedComponentsOnHorizontal[r])for(i=0;i<c.length;i++)this.dummyToNodeForVerticalAlignment.has(c[i])?this.dummyToNodeForVerticalAlignment.get(c[i]).forEach((function(t){e.idToNodeMap.get(t).displacementX=0})):this.idToNodeMap.get(c[i]).displacementX=0;else{var h=0,d=0;for(i=0;i<c.length;i++)if(this.dummyToNodeForVerticalAlignment.has(c[i])){h+=(p=this.dummyToNodeForVerticalAlignment.get(c[i])).length*this.idToNodeMap.get(p[0]).displacementX,d+=p.length}else h+=this.idToNodeMap.get(c[i]).displacementX,d++;var f=h/d;for(i=0;i<c.length;i++)this.dummyToNodeForVerticalAlignment.has(c[i])?this.dummyToNodeForVerticalAlignment.get(c[i]).forEach((function(t){e.idToNodeMap.get(t).displacementX=f})):this.idToNodeMap.get(c[i]).displacementX=f}}for(r=0;r<this.componentsOnVertical.length;r++){c=this.componentsOnVertical[r];if(this.fixedComponentsOnVertical[r])for(i=0;i<c.length;i++)this.dummyToNodeForHorizontalAlignment.has(c[i])?this.dummyToNodeForHorizontalAlignment.get(c[i]).forEach((function(t){e.idToNodeMap.get(t).displacementY=0})):this.idToNodeMap.get(c[i]).displacementY=0;else{for(h=0,d=0,i=0;i<c.length;i++)if(this.dummyToNodeForHorizontalAlignment.has(c[i])){var p;h+=(p=this.dummyToNodeForHorizontalAlignment.get(c[i])).length*this.idToNodeMap.get(p[0]).displacementY,d+=p.length}else h+=this.idToNodeMap.get(c[i]).displacementY,d++;for(f=h/d,i=0;i<c.length;i++)this.dummyToNodeForHorizontalAlignment.has(c[i])?this.dummyToNodeForHorizontalAlignment.get(c[i]).forEach((function(t){e.idToNodeMap.get(t).displacementY=f})):this.idToNodeMap.get(c[i]).displacementY=f}}}},T.prototype.calculateNodesToApplyGravitationTo=function(){var e,t,r=[],n=this.graphManager.getGraphs(),i=n.length;for(t=0;t<i;t++)(e=n[t]).updateConnected(),e.isConnected||(r=r.concat(e.getNodes()));return r},T.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var t,r=new Set;for(t=0;t<e.length;t++){var n=e[t];if(!r.has(n)){var i=n.getSource(),a=n.getTarget();if(i==a)n.getBendpoints().push(new p),n.getBendpoints().push(new p),this.createDummyNodesForBendpoints(n),r.add(n);else{var o=[];if(o=(o=o.concat(i.getEdgeListToNode(a))).concat(a.getEdgeListToNode(i)),!r.has(o[0])){var s;if(o.length>1)for(s=0;s<o.length;s++){var l=o[s];l.getBendpoints().push(new p),this.createDummyNodesForBendpoints(l)}o.forEach((function(e){r.add(e)}))}}}if(r.size==e.length)break}},T.prototype.positionNodesRadially=function(e){for(var t=new f(0,0),r=Math.ceil(Math.sqrt(e.length)),n=0,i=0,a=0,o=new p(0,0),s=0;s<e.length;s++){s%r==0&&(a=0,i=n,0!=s&&(i+=u.DEFAULT_COMPONENT_SEPERATION),n=0);var l=e[s],c=m.findCenterOfTree(l);t.x=a,t.y=i,(o=T.radialLayout(l,c,t)).y>n&&(n=Math.floor(o.y)),a=Math.floor(o.x+u.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(d.WORLD_CENTER_X-o.x/2,d.WORLD_CENTER_Y-o.y/2))},T.radialLayout=function(e,t,r){var n=Math.max(this.maxDiagonalInTree(e),u.DEFAULT_RADIAL_SEPARATION);T.branchRadialLayout(t,null,0,359,0,n);var i=x.calculateBounds(e),a=new b;a.setDeviceOrgX(i.getMinX()),a.setDeviceOrgY(i.getMinY()),a.setWorldOrgX(r.x),a.setWorldOrgY(r.y);for(var o=0;o<e.length;o++){e[o].transform(a)}var s=new p(i.getMaxX(),i.getMaxY());return a.inverseTransformPoint(s)},T.branchRadialLayout=function(e,t,r,n,i,a){var o=(n-r+1)/2;o<0&&(o+=180);var s=(o+r)%360*v.TWO_PI/360,l=i*Math.cos(s),u=i*Math.sin(s);e.setCenter(l,u);var c=[],h=(c=c.concat(e.getEdges())).length;null!=t&&h--;for(var d,f=0,p=c.length,g=e.getEdgesBetween(t);g.length>1;){var m=g[0];g.splice(0,1);var y=c.indexOf(m);y>=0&&c.splice(y,1),p--,h--}d=null!=t?(c.indexOf(g[0])+1)%p:0;for(var x=Math.abs(n-r)/h,b=d;f!=h;b=++b%p){var C=c[b].getOtherEnd(e);if(C!=t){var w=(r+f*x)%360,k=(w+x)%360;T.branchRadialLayout(C,e,w,k,i+a,a),f++}}},T.maxDiagonalInTree=function(e){for(var t=y.MIN_VALUE,r=0;r<e.length;r++){var n=e[r].getDiagonal();n>t&&(t=n)}return t},T.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},T.prototype.groupZeroDegreeMembers=function(){var e=this,t={};this.memberGroups={},this.idToDummyNode={};for(var r=[],n=this.graphManager.getAllNodes(),i=0;i<n.length;i++){var a=(s=n[i]).getParent();0===this.getNodeDegreeWithChildren(s)&&(null==a.id||!this.getToBeTiled(a))&&r.push(s)}for(i=0;i<r.length;i++){var s,l=(s=r[i]).getParent().id;typeof t[l]>"u"&&(t[l]=[]),t[l]=t[l].concat(s)}Object.keys(t).forEach((function(r){if(t[r].length>1){var n="DummyCompound_"+r;e.memberGroups[n]=t[r];var i=t[r][0].getParent(),a=new o(e.graphManager);a.id=n,a.paddingLeft=i.paddingLeft||0,a.paddingRight=i.paddingRight||0,a.paddingBottom=i.paddingBottom||0,a.paddingTop=i.paddingTop||0,e.idToDummyNode[n]=a;var s=e.getGraphManager().add(e.newGraph(),a),l=i.getChild();l.add(a);for(var u=0;u<t[r].length;u++){var c=t[r][u];l.remove(c),s.add(c)}}}))},T.prototype.clearCompounds=function(){var e={},t={};this.performDFSOnCompounds();for(var r=0;r<this.compoundOrder.length;r++)t[this.compoundOrder[r].id]=this.compoundOrder[r],e[this.compoundOrder[r].id]=[].concat(this.compoundOrder[r].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[r].getChild()),this.compoundOrder[r].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,t)},T.prototype.clearZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach((function(r){var n=e.idToDummyNode[r];if(t[r]=e.tileNodes(e.memberGroups[r],n.paddingLeft+n.paddingRight),n.rect.width=t[r].width,n.rect.height=t[r].height,n.setCenter(t[r].centerX,t[r].centerY),n.labelMarginLeft=0,n.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var i=n.rect.width,a=n.rect.height;n.labelWidth&&("left"==n.labelPosHorizontal?(n.rect.x-=n.labelWidth,n.setWidth(i+n.labelWidth),n.labelMarginLeft=n.labelWidth):"center"==n.labelPosHorizontal&&n.labelWidth>i?(n.rect.x-=(n.labelWidth-i)/2,n.setWidth(n.labelWidth),n.labelMarginLeft=(n.labelWidth-i)/2):"right"==n.labelPosHorizontal&&n.setWidth(i+n.labelWidth)),n.labelHeight&&("top"==n.labelPosVertical?(n.rect.y-=n.labelHeight,n.setHeight(a+n.labelHeight),n.labelMarginTop=n.labelHeight):"center"==n.labelPosVertical&&n.labelHeight>a?(n.rect.y-=(n.labelHeight-a)/2,n.setHeight(n.labelHeight),n.labelMarginTop=(n.labelHeight-a)/2):"bottom"==n.labelPosVertical&&n.setHeight(a+n.labelHeight))}}))},T.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;e>=0;e--){var t=this.compoundOrder[e],r=t.id,n=t.paddingLeft,i=t.paddingTop,a=t.labelMarginLeft,o=t.labelMarginTop;this.adjustLocations(this.tiledMemberPack[r],t.rect.x,t.rect.y,n,i,a,o)}},T.prototype.repopulateZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack;Object.keys(t).forEach((function(r){var n=e.idToDummyNode[r],i=n.paddingLeft,a=n.paddingTop,o=n.labelMarginLeft,s=n.labelMarginTop;e.adjustLocations(t[r],n.rect.x,n.rect.y,i,a,o,s)}))},T.prototype.getToBeTiled=function(e){var t=e.id;if(null!=this.toBeTiled[t])return this.toBeTiled[t];var r=e.getChild();if(null==r)return this.toBeTiled[t]=!1,!1;for(var n=r.getNodes(),i=0;i<n.length;i++){var a=n[i];if(this.getNodeDegree(a)>0)return this.toBeTiled[t]=!1,!1;if(null!=a.getChild()){if(!this.getToBeTiled(a))return this.toBeTiled[t]=!1,!1}else this.toBeTiled[a.id]=!1}return this.toBeTiled[t]=!0,!0},T.prototype.getNodeDegree=function(e){e.id;for(var t=e.getEdges(),r=0,n=0;n<t.length;n++){var i=t[n];i.getSource().id!==i.getTarget().id&&(r+=1)}return r},T.prototype.getNodeDegreeWithChildren=function(e){var t=this.getNodeDegree(e);if(null==e.getChild())return t;for(var r=e.getChild().getNodes(),n=0;n<r.length;n++){var i=r[n];t+=this.getNodeDegreeWithChildren(i)}return t},T.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},T.prototype.fillCompexOrderByDFS=function(e){for(var t=0;t<e.length;t++){var r=e[t];null!=r.getChild()&&this.fillCompexOrderByDFS(r.getChild().getNodes()),this.getToBeTiled(r)&&this.compoundOrder.push(r)}},T.prototype.adjustLocations=function(e,t,r,n,i,a,o){r+=i+o;for(var s=t+=n+a,l=0;l<e.rows.length;l++){var u=e.rows[l];t=s;for(var c=0,h=0;h<u.length;h++){var d=u[h];d.rect.x=t,d.rect.y=r,t+=d.rect.width+e.horizontalPadding,d.rect.height>c&&(c=d.rect.height)}r+=c+e.verticalPadding}},T.prototype.tileCompoundMembers=function(e,t){var r=this;this.tiledMemberPack=[],Object.keys(e).forEach((function(n){var i=t[n];if(r.tiledMemberPack[n]=r.tileNodes(e[n],i.paddingLeft+i.paddingRight),i.rect.width=r.tiledMemberPack[n].width,i.rect.height=r.tiledMemberPack[n].height,i.setCenter(r.tiledMemberPack[n].centerX,r.tiledMemberPack[n].centerY),i.labelMarginLeft=0,i.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var a=i.rect.width,o=i.rect.height;i.labelWidth&&("left"==i.labelPosHorizontal?(i.rect.x-=i.labelWidth,i.setWidth(a+i.labelWidth),i.labelMarginLeft=i.labelWidth):"center"==i.labelPosHorizontal&&i.labelWidth>a?(i.rect.x-=(i.labelWidth-a)/2,i.setWidth(i.labelWidth),i.labelMarginLeft=(i.labelWidth-a)/2):"right"==i.labelPosHorizontal&&i.setWidth(a+i.labelWidth)),i.labelHeight&&("top"==i.labelPosVertical?(i.rect.y-=i.labelHeight,i.setHeight(o+i.labelHeight),i.labelMarginTop=i.labelHeight):"center"==i.labelPosVertical&&i.labelHeight>o?(i.rect.y-=(i.labelHeight-o)/2,i.setHeight(i.labelHeight),i.labelMarginTop=(i.labelHeight-o)/2):"bottom"==i.labelPosVertical&&i.setHeight(o+i.labelHeight))}}))},T.prototype.tileNodes=function(e,t){var r=this.tileNodesByFavoringDim(e,t,!0),n=this.tileNodesByFavoringDim(e,t,!1),i=this.getOrgRatio(r);return this.getOrgRatio(n)<i?n:r},T.prototype.getOrgRatio=function(e){var t=e.width/e.height;return t<1&&(t=1/t),t},T.prototype.calcIdealRowWidth=function(e,t){var r=u.TILING_PADDING_VERTICAL,n=u.TILING_PADDING_HORIZONTAL,i=e.length,a=0,o=0,s=0;e.forEach((function(e){a+=e.getWidth(),o+=e.getHeight(),e.getWidth()>s&&(s=e.getWidth())}));var l,c=a/i,h=o/i,d=Math.pow(r-n,2)+4*(c+n)*(h+r)*i,f=(n-r+Math.sqrt(d))/(2*(c+n));t?(l=Math.ceil(f))==f&&l++:l=Math.floor(f);var p=l*(c+n)-n;return s>p&&(p=s),p+=2*n},T.prototype.tileNodesByFavoringDim=function(e,t,r){var n=u.TILING_PADDING_VERTICAL,i=u.TILING_PADDING_HORIZONTAL,a=u.TILING_COMPARE_BY,o={rows:[],rowWidth:[],rowHeight:[],width:0,height:t,verticalPadding:n,horizontalPadding:i,centerX:0,centerY:0};a&&(o.idealRowWidth=this.calcIdealRowWidth(e,r));var l=s((function(e){return e.rect.width*e.rect.height}),"getNodeArea"),c=s((function(e,t){return l(t)-l(e)}),"areaCompareFcn");e.sort((function(e,t){var r=c;return o.idealRowWidth?(r=a)(e.id,t.id):r(e,t)}));for(var h=0,d=0,f=0;f<e.length;f++){h+=(p=e[f]).getCenterX(),d+=p.getCenterY()}o.centerX=h/e.length,o.centerY=d/e.length;for(f=0;f<e.length;f++){var p=e[f];if(0==o.rows.length)this.insertNodeToRow(o,p,0,t);else if(this.canAddHorizontal(o,p.rect.width,p.rect.height)){var g=o.rows.length-1;o.idealRowWidth||(g=this.getShortestRowIndex(o)),this.insertNodeToRow(o,p,g,t)}else this.insertNodeToRow(o,p,o.rows.length,t);this.shiftToLastRow(o)}return o},T.prototype.insertNodeToRow=function(e,t,r,n){var i=n;if(r==e.rows.length){e.rows.push([]),e.rowWidth.push(i),e.rowHeight.push(0)}var a=e.rowWidth[r]+t.rect.width;e.rows[r].length>0&&(a+=e.horizontalPadding),e.rowWidth[r]=a,e.width<a&&(e.width=a);var o=t.rect.height;r>0&&(o+=e.verticalPadding);var s=0;o>e.rowHeight[r]&&(s=e.rowHeight[r],e.rowHeight[r]=o,s=e.rowHeight[r]-s),e.height+=s,e.rows[r].push(t)},T.prototype.getShortestRowIndex=function(e){for(var t=-1,r=Number.MAX_VALUE,n=0;n<e.rows.length;n++)e.rowWidth[n]<r&&(t=n,r=e.rowWidth[n]);return t},T.prototype.getLongestRowIndex=function(e){for(var t=-1,r=Number.MIN_VALUE,n=0;n<e.rows.length;n++)e.rowWidth[n]>r&&(t=n,r=e.rowWidth[n]);return t},T.prototype.canAddHorizontal=function(e,t,r){if(e.idealRowWidth){var n=e.rows.length-1;return e.rowWidth[n]+t+e.horizontalPadding<=e.idealRowWidth}var i=this.getShortestRowIndex(e);if(i<0)return!0;var a=e.rowWidth[i];if(a+e.horizontalPadding+t<=e.width)return!0;var o,s,l=0;return e.rowHeight[i]<r&&i>0&&(l=r+e.verticalPadding-e.rowHeight[i]),o=e.width-a>=t+e.horizontalPadding?(e.height+l)/(a+t+e.horizontalPadding):(e.height+l)/e.width,l=r+e.verticalPadding,(s=e.width<t?(e.height+l)/t:(e.height+l)/e.width)<1&&(s=1/s),o<1&&(o=1/o),o<s},T.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),r=e.rowWidth.length-1,n=e.rows[t],i=n[n.length-1],a=i.width+e.horizontalPadding;if(e.width-e.rowWidth[r]>a&&t!=r){n.splice(-1,1),e.rows[r].push(i),e.rowWidth[t]=e.rowWidth[t]-a,e.rowWidth[r]=e.rowWidth[r]+a,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var o=Number.MIN_VALUE,s=0;s<n.length;s++)n[s].height>o&&(o=n[s].height);t>0&&(o+=e.verticalPadding);var l=e.rowHeight[t]+e.rowHeight[r];e.rowHeight[t]=o,e.rowHeight[r]<i.height+e.verticalPadding&&(e.rowHeight[r]=i.height+e.verticalPadding);var u=e.rowHeight[t]+e.rowHeight[r];e.height+=u-l,this.shiftToLastRow(e)}},T.prototype.tilingPreLayout=function(){u.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},T.prototype.tilingPostLayout=function(){u.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},T.prototype.reduceTrees=function(){for(var e,t=[],r=!0;r;){var n=this.graphManager.getAllNodes(),i=[];r=!1;for(var a=0;a<n.length;a++)if(1==(e=n[a]).getEdges().length&&!e.getEdges()[0].isInterGraph&&null==e.getChild()){if(u.PURE_INCREMENTAL){var o=e.getEdges()[0].getOtherEnd(e),s=new g(e.getCenterX()-o.getCenterX(),e.getCenterY()-o.getCenterY());i.push([e,e.getEdges()[0],e.getOwner(),s])}else i.push([e,e.getEdges()[0],e.getOwner()]);r=!0}if(1==r){for(var l=[],c=0;c<i.length;c++)1==i[c][0].getEdges().length&&(l.push(i[c]),i[c][0].getOwner().remove(i[c][0]));t.push(l),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=t},T.prototype.growTree=function(e){for(var t,r=e[e.length-1],n=0;n<r.length;n++)t=r[n],this.findPlaceforPrunedNode(t),t[2].add(t[0]),t[2].add(t[1],t[1].source,t[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},T.prototype.findPlaceforPrunedNode=function(e){var t,r,n=e[0];if(r=n==e[1].source?e[1].target:e[1].source,u.PURE_INCREMENTAL)n.setCenter(r.getCenterX()+e[3].getWidth(),r.getCenterY()+e[3].getHeight());else{var i=r.startX,a=r.finishX,o=r.startY,s=r.finishY,l=[0,0,0,0];if(o>0)for(var c=i;c<=a;c++)l[0]+=this.grid[c][o-1].length+this.grid[c][o].length-1;if(a<this.grid.length-1)for(c=o;c<=s;c++)l[1]+=this.grid[a+1][c].length+this.grid[a][c].length-1;if(s<this.grid[0].length-1)for(c=i;c<=a;c++)l[2]+=this.grid[c][s+1].length+this.grid[c][s].length-1;if(i>0)for(c=o;c<=s;c++)l[3]+=this.grid[i-1][c].length+this.grid[i][c].length-1;for(var d,f,p=y.MAX_VALUE,g=0;g<l.length;g++)l[g]<p?(p=l[g],d=1,f=g):l[g]==p&&d++;if(3==d&&0==p)0==l[0]&&0==l[1]&&0==l[2]?t=1:0==l[0]&&0==l[1]&&0==l[3]?t=0:0==l[0]&&0==l[2]&&0==l[3]?t=3:0==l[1]&&0==l[2]&&0==l[3]&&(t=2);else if(2==d&&0==p){var m=Math.floor(2*Math.random());t=0==l[0]&&0==l[1]?0==m?0:1:0==l[0]&&0==l[2]?0==m?0:2:0==l[0]&&0==l[3]?0==m?0:3:0==l[1]&&0==l[2]?0==m?1:2:0==l[1]&&0==l[3]?0==m?1:3:0==m?2:3}else if(4==d&&0==p){t=m=Math.floor(4*Math.random())}else t=f;0==t?n.setCenter(r.getCenterX(),r.getCenterY()-r.getHeight()/2-h.DEFAULT_EDGE_LENGTH-n.getHeight()/2):1==t?n.setCenter(r.getCenterX()+r.getWidth()/2+h.DEFAULT_EDGE_LENGTH+n.getWidth()/2,r.getCenterY()):2==t?n.setCenter(r.getCenterX(),r.getCenterY()+r.getHeight()/2+h.DEFAULT_EDGE_LENGTH+n.getHeight()/2):n.setCenter(r.getCenterX()-r.getWidth()/2-h.DEFAULT_EDGE_LENGTH-n.getWidth()/2,r.getCenterY())}},e.exports=T},991:(e,t,r)=>{var n=r(551).FDLayoutNode,i=r(551).IMath;function a(e,t,r,i){n.call(this,e,t,r,i)}for(var o in s(a,"CoSENode"),a.prototype=Object.create(n.prototype),n)a[o]=n[o];a.prototype.calculateDisplacement=function(){var e=this.graphManager.getLayout();null!=this.getChild()&&this.fixedNodeWeight?(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},a.prototype.propogateDisplacementToChildren=function(e,t){for(var r,n=this.getChild().getNodes(),i=0;i<n.length;i++)null==(r=n[i]).getChild()?(r.displacementX+=e,r.displacementY+=t):r.propogateDisplacementToChildren(e,t)},a.prototype.move=function(){var e=this.graphManager.getLayout();(null==this.child||0==this.child.getNodes().length)&&(this.moveBy(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},a.prototype.setPred1=function(e){this.pred1=e},a.prototype.getPred1=function(){return pred1},a.prototype.getPred2=function(){return pred2},a.prototype.setNext=function(e){this.next=e},a.prototype.getNext=function(){return next},a.prototype.setProcessed=function(e){this.processed=e},a.prototype.isProcessed=function(){return processed},e.exports=a},902:(e,t,r)=>{function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}s(n,"_toConsumableArray");var i=r(806),a=r(551).LinkedList,o=r(551).Matrix,l=r(551).SVD;function u(){}s(u,"ConstraintHandler"),u.handleConstraints=function(e){var t={};t.fixedNodeConstraint=e.constraints.fixedNodeConstraint,t.alignmentConstraint=e.constraints.alignmentConstraint,t.relativePlacementConstraint=e.constraints.relativePlacementConstraint;for(var r=new Map,u=new Map,c=[],h=[],d=e.getAllNodes(),f=0,p=0;p<d.length;p++){var g=d[p];null==g.getChild()&&(u.set(g.id,f++),c.push(g.getCenterX()),h.push(g.getCenterY()),r.set(g.id,g))}t.relativePlacementConstraint&&t.relativePlacementConstraint.forEach((function(e){!e.gap&&0!=e.gap&&(e.left?e.gap=i.DEFAULT_EDGE_LENGTH+r.get(e.left).getWidth()/2+r.get(e.right).getWidth()/2:e.gap=i.DEFAULT_EDGE_LENGTH+r.get(e.top).getHeight()/2+r.get(e.bottom).getHeight()/2)}));var m=s((function(e,t){return{x:e.x-t.x,y:e.y-t.y}}),"calculatePositionDiff"),y=s((function(e){var t=0,r=0;return e.forEach((function(e){t+=c[u.get(e)],r+=h[u.get(e)]})),{x:t/e.size,y:r/e.size}}),"calculateAvgPosition"),v=s((function(e,t,r,i,o){function l(e,t){var r=new Set(e),n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;r.add(l)}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}s(l,"setUnion");var d=new Map;e.forEach((function(e,t){d.set(t,0)})),e.forEach((function(e,t){e.forEach((function(e){d.set(e.id,d.get(e.id)+1)}))}));var f=new Map,p=new Map,g=new a;d.forEach((function(e,n){0==e?(g.push(n),r||("horizontal"==t?f.set(n,u.has(n)?c[u.get(n)]:i.get(n)):f.set(n,u.has(n)?h[u.get(n)]:i.get(n)))):f.set(n,Number.NEGATIVE_INFINITY),r&&p.set(n,new Set([n]))})),r&&o.forEach((function(e){var n=[];if(e.forEach((function(e){r.has(e)&&n.push(e)})),n.length>0){var a=0;n.forEach((function(e){"horizontal"==t?(f.set(e,u.has(e)?c[u.get(e)]:i.get(e)),a+=f.get(e)):(f.set(e,u.has(e)?h[u.get(e)]:i.get(e)),a+=f.get(e))})),a/=n.length,e.forEach((function(e){r.has(e)||f.set(e,a)}))}else{var o=0;e.forEach((function(e){o+="horizontal"==t?u.has(e)?c[u.get(e)]:i.get(e):u.has(e)?h[u.get(e)]:i.get(e)})),o/=e.length,e.forEach((function(e){f.set(e,o)}))}}));for(var m=s((function(){var n=g.shift();e.get(n).forEach((function(e){if(f.get(e.id)<f.get(n)+e.gap)if(r&&r.has(e.id)){var a=void 0;if(a="horizontal"==t?u.has(e.id)?c[u.get(e.id)]:i.get(e.id):u.has(e.id)?h[u.get(e.id)]:i.get(e.id),f.set(e.id,a),a<f.get(n)+e.gap){var o=f.get(n)+e.gap-a;p.get(n).forEach((function(e){f.set(e,f.get(e)-o)}))}}else f.set(e.id,f.get(n)+e.gap);d.set(e.id,d.get(e.id)-1),0==d.get(e.id)&&g.push(e.id),r&&p.set(e.id,l(p.get(n),p.get(e.id)))}))}),"_loop");0!=g.length;)m();if(r){var y=new Set;e.forEach((function(e,t){0==e.length&&y.add(t)}));var v=[];p.forEach((function(e,t){if(y.has(t)){var i=!1,a=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;r.has(c)&&(i=!0)}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}if(!i){var h=!1,d=void 0;v.forEach((function(t,r){t.has([].concat(n(e))[0])&&(h=!0,d=r)})),h?e.forEach((function(e){v[d].add(e)})):v.push(new Set(e))}}})),v.forEach((function(e,r){var n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=!0,d=!1,p=void 0;try{for(var g,m=e[Symbol.iterator]();!(l=(g=m.next()).done);l=!0){var y=g.value,v=void 0;v="horizontal"==t?u.has(y)?c[u.get(y)]:i.get(y):u.has(y)?h[u.get(y)]:i.get(y);var x=f.get(y);v<n&&(n=v),v>o&&(o=v),x<a&&(a=x),x>s&&(s=x)}}catch(e){d=!0,p=e}finally{try{!l&&m.return&&m.return()}finally{if(d)throw p}}var b=(n+o)/2-(a+s)/2,C=!0,T=!1,w=void 0;try{for(var k,_=e[Symbol.iterator]();!(C=(k=_.next()).done);C=!0){var E=k.value;f.set(E,f.get(E)+b)}}catch(e){T=!0,w=e}finally{try{!C&&_.return&&_.return()}finally{if(T)throw w}}}))}return f}),"findAppropriatePositionForRelativePlacement"),x=s((function(e){var t=0,r=0,n=0,i=0;if(e.forEach((function(e){e.left?c[u.get(e.left)]-c[u.get(e.right)]>=0?t++:r++:h[u.get(e.top)]-h[u.get(e.bottom)]>=0?n++:i++})),t>r&&n>i)for(var a=0;a<u.size;a++)c[a]=-1*c[a],h[a]=-1*h[a];else if(t>r)for(var o=0;o<u.size;o++)c[o]=-1*c[o];else if(n>i)for(var s=0;s<u.size;s++)h[s]=-1*h[s]}),"applyReflectionForRelativePlacement"),b=s((function(e){var t=[],r=new a,n=new Set,i=0;return e.forEach((function(a,o){if(!n.has(o)){t[i]=[];var s=o;for(r.push(s),n.add(s),t[i].push(s);0!=r.length;){s=r.shift(),e.get(s).forEach((function(e){n.has(e.id)||(r.push(e.id),n.add(e.id),t[i].push(e.id))}))}i++}})),t}),"findComponents"),C=s((function(e){var t=new Map;return e.forEach((function(e,r){t.set(r,[])})),e.forEach((function(e,r){e.forEach((function(e){t.get(r).push(e),t.get(e.id).push({id:r,gap:e.gap,direction:e.direction})}))})),t}),"dagToUndirected"),T=s((function(e){var t=new Map;return e.forEach((function(e,r){t.set(r,[])})),e.forEach((function(e,r){e.forEach((function(e){t.get(e.id).push({id:r,gap:e.gap,direction:e.direction})}))})),t}),"dagToReversed"),w=[],k=[],_=!1,E=!1,S=new Set,A=new Map,N=new Map,R=[];if(t.fixedNodeConstraint&&t.fixedNodeConstraint.forEach((function(e){S.add(e.nodeId)})),t.relativePlacementConstraint&&(t.relativePlacementConstraint.forEach((function(e){e.left?(A.has(e.left)?A.get(e.left).push({id:e.right,gap:e.gap,direction:"horizontal"}):A.set(e.left,[{id:e.right,gap:e.gap,direction:"horizontal"}]),A.has(e.right)||A.set(e.right,[])):(A.has(e.top)?A.get(e.top).push({id:e.bottom,gap:e.gap,direction:"vertical"}):A.set(e.top,[{id:e.bottom,gap:e.gap,direction:"vertical"}]),A.has(e.bottom)||A.set(e.bottom,[]))})),N=C(A),R=b(N)),i.TRANSFORM_ON_CONSTRAINT_HANDLING){if(t.fixedNodeConstraint&&t.fixedNodeConstraint.length>1)t.fixedNodeConstraint.forEach((function(e,t){w[t]=[e.position.x,e.position.y],k[t]=[c[u.get(e.nodeId)],h[u.get(e.nodeId)]]})),_=!0;else if(t.alignmentConstraint)!function(){var e=0;if(t.alignmentConstraint.vertical){for(var r=t.alignmentConstraint.vertical,i=s((function(t){var i=new Set;r[t].forEach((function(e){i.add(e)}));var a=new Set([].concat(n(i)).filter((function(e){return S.has(e)}))),o=void 0;o=a.size>0?c[u.get(a.values().next().value)]:y(i).x,r[t].forEach((function(t){w[e]=[o,h[u.get(t)]],k[e]=[c[u.get(t)],h[u.get(t)]],e++}))}),"_loop2"),a=0;a<r.length;a++)i(a);_=!0}if(t.alignmentConstraint.horizontal){for(var o=t.alignmentConstraint.horizontal,l=s((function(t){var r=new Set;o[t].forEach((function(e){r.add(e)}));var i=new Set([].concat(n(r)).filter((function(e){return S.has(e)}))),a=void 0;a=i.size>0?c[u.get(i.values().next().value)]:y(r).y,o[t].forEach((function(t){w[e]=[c[u.get(t)],a],k[e]=[c[u.get(t)],h[u.get(t)]],e++}))}),"_loop3"),d=0;d<o.length;d++)l(d);_=!0}t.relativePlacementConstraint&&(E=!0)}();else if(t.relativePlacementConstraint){for(var L=0,I=0,M=0;M<R.length;M++)R[M].length>L&&(L=R[M].length,I=M);if(L<N.size/2)x(t.relativePlacementConstraint),_=!1,E=!1;else{var O=new Map,D=new Map,P=[];R[I].forEach((function(e){A.get(e).forEach((function(t){"horizontal"==t.direction?(O.has(e)?O.get(e).push(t):O.set(e,[t]),O.has(t.id)||O.set(t.id,[]),P.push({left:e,right:t.id})):(D.has(e)?D.get(e).push(t):D.set(e,[t]),D.has(t.id)||D.set(t.id,[]),P.push({top:e,bottom:t.id}))}))})),x(P),E=!1;var F=v(O,"horizontal"),B=v(D,"vertical");R[I].forEach((function(e,t){k[t]=[c[u.get(e)],h[u.get(e)]],w[t]=[],F.has(e)?w[t][0]=F.get(e):w[t][0]=c[u.get(e)],B.has(e)?w[t][1]=B.get(e):w[t][1]=h[u.get(e)]})),_=!0}}if(_){for(var $,z=o.transpose(w),U=o.transpose(k),G=0;G<z.length;G++)z[G]=o.multGamma(z[G]),U[G]=o.multGamma(U[G]);var j=o.multMat(z,o.transpose(U)),V=l.svd(j);$=o.multMat(V.V,o.transpose(V.U));for(var W=0;W<u.size;W++){var q=[c[W],h[W]],H=[$[0][0],$[1][0]],Y=[$[0][1],$[1][1]];c[W]=o.dotProduct(q,H),h[W]=o.dotProduct(q,Y)}E&&x(t.relativePlacementConstraint)}}if(i.ENFORCE_CONSTRAINTS){if(t.fixedNodeConstraint&&t.fixedNodeConstraint.length>0){var X={x:0,y:0};t.fixedNodeConstraint.forEach((function(e,t){var r={x:c[u.get(e.nodeId)],y:h[u.get(e.nodeId)]},n=e.position,i=m(n,r);X.x+=i.x,X.y+=i.y})),X.x/=t.fixedNodeConstraint.length,X.y/=t.fixedNodeConstraint.length,c.forEach((function(e,t){c[t]+=X.x})),h.forEach((function(e,t){h[t]+=X.y})),t.fixedNodeConstraint.forEach((function(e){c[u.get(e.nodeId)]=e.position.x,h[u.get(e.nodeId)]=e.position.y}))}if(t.alignmentConstraint){if(t.alignmentConstraint.vertical)for(var K=t.alignmentConstraint.vertical,Z=s((function(e){var t=new Set;K[e].forEach((function(e){t.add(e)}));var r=new Set([].concat(n(t)).filter((function(e){return S.has(e)}))),i=void 0;i=r.size>0?c[u.get(r.values().next().value)]:y(t).x,t.forEach((function(e){S.has(e)||(c[u.get(e)]=i)}))}),"_loop4"),Q=0;Q<K.length;Q++)Z(Q);if(t.alignmentConstraint.horizontal)for(var J=t.alignmentConstraint.horizontal,ee=s((function(e){var t=new Set;J[e].forEach((function(e){t.add(e)}));var r=new Set([].concat(n(t)).filter((function(e){return S.has(e)}))),i=void 0;i=r.size>0?h[u.get(r.values().next().value)]:y(t).y,t.forEach((function(e){S.has(e)||(h[u.get(e)]=i)}))}),"_loop5"),te=0;te<J.length;te++)ee(te)}t.relativePlacementConstraint&&function(){var e=new Map,r=new Map,n=new Map,i=new Map,a=new Map,o=new Map,l=new Set,d=new Set;if(S.forEach((function(e){l.add(e),d.add(e)})),t.alignmentConstraint){if(t.alignmentConstraint.vertical)for(var f=t.alignmentConstraint.vertical,p=s((function(t){n.set("dummy"+t,[]),f[t].forEach((function(r){e.set(r,"dummy"+t),n.get("dummy"+t).push(r),S.has(r)&&l.add("dummy"+t)})),a.set("dummy"+t,c[u.get(f[t][0])])}),"_loop6"),g=0;g<f.length;g++)p(g);if(t.alignmentConstraint.horizontal)for(var m=t.alignmentConstraint.horizontal,y=s((function(e){i.set("dummy"+e,[]),m[e].forEach((function(t){r.set(t,"dummy"+e),i.get("dummy"+e).push(t),S.has(t)&&d.add("dummy"+e)})),o.set("dummy"+e,h[u.get(m[e][0])])}),"_loop7"),x=0;x<m.length;x++)y(x)}var w=new Map,k=new Map,_=s((function(t){A.get(t).forEach((function(n){var i=void 0,a=void 0;"horizontal"==n.direction?(i=e.get(t)?e.get(t):t,a=e.get(n.id)?{id:e.get(n.id),gap:n.gap,direction:n.direction}:n,w.has(i)?w.get(i).push(a):w.set(i,[a]),w.has(a.id)||w.set(a.id,[])):(i=r.get(t)?r.get(t):t,a=r.get(n.id)?{id:r.get(n.id),gap:n.gap,direction:n.direction}:n,k.has(i)?k.get(i).push(a):k.set(i,[a]),k.has(a.id)||k.set(a.id,[]))}))}),"_loop8"),E=!0,N=!1,R=void 0;try{for(var L,I=A.keys()[Symbol.iterator]();!(E=(L=I.next()).done);E=!0){_(L.value)}}catch(e){N=!0,R=e}finally{try{!E&&I.return&&I.return()}finally{if(N)throw R}}var M=C(w),O=C(k),D=b(M),P=b(O),F=T(w),B=T(k),$=[],z=[];D.forEach((function(e,t){$[t]=[],e.forEach((function(e){0==F.get(e).length&&$[t].push(e)}))})),P.forEach((function(e,t){z[t]=[],e.forEach((function(e){0==B.get(e).length&&z[t].push(e)}))}));var U=v(w,"horizontal",l,a,$),G=v(k,"vertical",d,o,z),j=s((function(e){n.get(e)?n.get(e).forEach((function(t){c[u.get(t)]=U.get(e)})):c[u.get(e)]=U.get(e)}),"_loop9"),V=!0,W=!1,q=void 0;try{for(var H,Y=U.keys()[Symbol.iterator]();!(V=(H=Y.next()).done);V=!0){j(H.value)}}catch(e){W=!0,q=e}finally{try{!V&&Y.return&&Y.return()}finally{if(W)throw q}}var X=s((function(e){i.get(e)?i.get(e).forEach((function(t){h[u.get(t)]=G.get(e)})):h[u.get(e)]=G.get(e)}),"_loop10"),K=!0,Z=!1,Q=void 0;try{for(var J,ee=G.keys()[Symbol.iterator]();!(K=(J=ee.next()).done);K=!0){X(J.value)}}catch(e){Z=!0,Q=e}finally{try{!K&&ee.return&&ee.return()}finally{if(Z)throw Q}}}()}for(var re=0;re<d.length;re++){var ne=d[re];null==ne.getChild()&&ne.setCenter(c[u.get(ne.id)],h[u.get(ne.id)])}},e.exports=u},551:t=>{t.exports=e}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}return s(n,"__webpack_require__"),n(45)})()}))})),d2=l(((e,t)=>{s((function(r,n){"object"==typeof e&&"object"==typeof t?t.exports=n(h2()):"function"==typeof define&&define.amd?define(["cose-base"],n):"object"==typeof e?e.cytoscapeFcose=n(h2()):r.cytoscapeFcose=n(r.coseBase)}),"webpackUniversalModuleDefinition")(e,(function(e){return(()=>{var t={658:e=>{e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach((function(t){Object.keys(t).forEach((function(r){return e[r]=t[r]}))})),e}},548:(e,t,r)=>{var n=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return s(e,"sliceIterator"),function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(140).layoutBase.LinkedList,a={getTopMostNodes:function(e){for(var t={},r=0;r<e.length;r++)t[e[r].id()]=!0;var n=e.filter((function(e,r){"number"==typeof e&&(e=r);for(var n=e.parent()[0];null!=n;){if(t[n.id()])return!1;n=n.parent()[0]}return!0}));return n},connectComponents:function(e,t,r,n){var a=new i,o=new Set,l=[],u=void 0,c=void 0,h=void 0,d=!1,f=1,p=[],g=[],m=s((function(){var n=e.collection();g.push(n);var i=r[0],m=e.collection();m.merge(i).merge(i.descendants().intersection(t)),l.push(i),m.forEach((function(e){a.push(e),o.add(e),n.merge(e)}));for(var y=s((function(){i=a.shift();var s=e.collection();i.neighborhood().nodes().forEach((function(e){t.intersection(i.edgesWith(e)).length>0&&s.merge(e)}));for(var c=0;c<s.length;c++){var h=s[c];if(null!=(u=r.intersection(h.union(h.ancestors())))&&!o.has(u[0]))u.union(u.descendants()).forEach((function(e){a.push(e),o.add(e),n.merge(e),r.has(e)&&l.push(e)}))}}),"_loop2");0!=a.length;)y();if(n.forEach((function(e){t.intersection(e.connectedEdges()).forEach((function(e){n.has(e.source())&&n.has(e.target())&&n.merge(e)}))})),l.length==r.length&&(d=!0),!d||d&&f>1){c=l[0],h=c.connectedEdges().length,l.forEach((function(e){e.connectedEdges().length<h&&(h=e.connectedEdges().length,c=e)})),p.push(c.id());var v=e.collection();v.merge(l[0]),l.forEach((function(e){v.merge(e)})),l=[],r=r.difference(v),f++}}),"_loop");do{m()}while(!d);return n&&p.length>0&&n.set("dummy"+(n.size+1),p),g},relocateComponent:function(e,t,r){if(!r.fixedNodeConstraint){var i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;if("draft"==r.quality){var l=!0,u=!1,c=void 0;try{for(var h,d=t.nodeIndexes[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value,p=n(f,2),g=p[0],m=p[1],y=r.cy.getElementById(g);if(y){var v=y.boundingBox(),x=t.xCoords[m]-v.w/2,b=t.xCoords[m]+v.w/2,C=t.yCoords[m]-v.h/2,T=t.yCoords[m]+v.h/2;x<i&&(i=x),b>a&&(a=b),C<o&&(o=C),T>s&&(s=T)}}}catch(e){u=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}var w=e.x-(a+i)/2,k=e.y-(s+o)/2;t.xCoords=t.xCoords.map((function(e){return e+w})),t.yCoords=t.yCoords.map((function(e){return e+k}))}else{Object.keys(t).forEach((function(e){var r=t[e],n=r.getRect().x,l=r.getRect().x+r.getRect().width,u=r.getRect().y,c=r.getRect().y+r.getRect().height;n<i&&(i=n),l>a&&(a=l),u<o&&(o=u),c>s&&(s=c)}));var _=e.x-(a+i)/2,E=e.y-(s+o)/2;Object.keys(t).forEach((function(e){var r=t[e];r.setCenter(r.getCenterX()+_,r.getCenterY()+E)}))}}},calcBoundingBox:function(e,t,r,n){for(var i=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=void 0,u=void 0,c=void 0,h=void 0,d=e.descendants().not(":parent"),f=d.length,p=0;p<f;p++){var g=d[p];i>(l=t[n.get(g.id())]-g.width()/2)&&(i=l),a<(u=t[n.get(g.id())]+g.width()/2)&&(a=u),o>(c=r[n.get(g.id())]-g.height()/2)&&(o=c),s<(h=r[n.get(g.id())]+g.height()/2)&&(s=h)}var m={};return m.topLeftX=i,m.topLeftY=o,m.width=a-i,m.height=s-o,m},calcParentsWithoutChildren:function(e,t){var r=e.collection();return t.nodes(":parent").forEach((function(e){var t=!1;e.children().forEach((function(e){"none"!=e.css("display")&&(t=!0)})),t||r.merge(e)})),r}};e.exports=a},816:(e,t,r)=>{var n=r(548),i=r(140).CoSELayout,a=r(140).CoSENode,o=r(140).layoutBase.PointD,l=r(140).layoutBase.DimensionD,u=r(140).layoutBase.LayoutConstants,c=r(140).layoutBase.FDLayoutConstants,h=r(140).CoSEConstants,d=s((function(e,t){var r=e.cy,d=e.eles,f=d.nodes(),p=d.edges(),g=void 0,m=void 0,y=void 0,v={};e.randomize&&(g=t.nodeIndexes,m=t.xCoords,y=t.yCoords);var x=s((function(e){return"function"==typeof e}),"isFn"),b=s((function(e,t){return x(e)?e(t):e}),"optFn"),C=n.calcParentsWithoutChildren(r,d),T=s((function e(t,r,i,s){for(var u=r.length,c=0;c<u;c++){var h=r[c],d=null;0==h.intersection(C).length&&(d=h.children());var f=void 0,p=h.layoutDimensions({nodeDimensionsIncludeLabels:s.nodeDimensionsIncludeLabels});if(null!=h.outerWidth()&&null!=h.outerHeight())if(s.randomize)if(h.isParent()){var x=n.calcBoundingBox(h,m,y,g);f=0==h.intersection(C).length?t.add(new a(i.graphManager,new o(x.topLeftX,x.topLeftY),new l(x.width,x.height))):t.add(new a(i.graphManager,new o(x.topLeftX,x.topLeftY),new l(parseFloat(p.w),parseFloat(p.h))))}else f=t.add(new a(i.graphManager,new o(m[g.get(h.id())]-p.w/2,y[g.get(h.id())]-p.h/2),new l(parseFloat(p.w),parseFloat(p.h))));else f=t.add(new a(i.graphManager,new o(h.position("x")-p.w/2,h.position("y")-p.h/2),new l(parseFloat(p.w),parseFloat(p.h))));else f=t.add(new a(this.graphManager));if(f.id=h.data("id"),f.nodeRepulsion=b(s.nodeRepulsion,h),f.paddingLeft=parseInt(h.css("padding")),f.paddingTop=parseInt(h.css("padding")),f.paddingRight=parseInt(h.css("padding")),f.paddingBottom=parseInt(h.css("padding")),s.nodeDimensionsIncludeLabels&&(f.labelWidth=h.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,f.labelHeight=h.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,f.labelPosVertical=h.css("text-valign"),f.labelPosHorizontal=h.css("text-halign")),v[h.data("id")]=f,isNaN(f.rect.x)&&(f.rect.x=0),isNaN(f.rect.y)&&(f.rect.y=0),null!=d&&d.length>0){e(i.getGraphManager().add(i.newGraph(),f),d,i,s)}}}),"processChildrenList"),w=s((function(t,r,n){for(var i=0,a=0,o=0;o<n.length;o++){var s=n[o],l=v[s.data("source")],u=v[s.data("target")];if(l&&u&&l!==u&&0==l.getEdgesBetween(u).length){var d=r.add(t.newEdge(),l,u);d.id=s.id(),d.idealLength=b(e.idealEdgeLength,s),d.edgeElasticity=b(e.edgeElasticity,s),i+=d.idealLength,a++}}null!=e.idealEdgeLength&&(a>0?h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=i/a:x(e.idealEdgeLength)?h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=50:h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=e.idealEdgeLength,h.MIN_REPULSION_DIST=c.MIN_REPULSION_DIST=c.DEFAULT_EDGE_LENGTH/10,h.DEFAULT_RADIAL_SEPARATION=c.DEFAULT_EDGE_LENGTH)}),"processEdges"),k=s((function(e,t){t.fixedNodeConstraint&&(e.constraints.fixedNodeConstraint=t.fixedNodeConstraint),t.alignmentConstraint&&(e.constraints.alignmentConstraint=t.alignmentConstraint),t.relativePlacementConstraint&&(e.constraints.relativePlacementConstraint=t.relativePlacementConstraint)}),"processConstraints");null!=e.nestingFactor&&(h.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(h.DEFAULT_GRAVITY_STRENGTH=c.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(h.MAX_ITERATIONS=c.MAX_ITERATIONS=e.numIter),null!=e.gravityRange&&(h.DEFAULT_GRAVITY_RANGE_FACTOR=c.DEFAULT_GRAVITY_RANGE_FACTOR=e.gravityRange),null!=e.gravityCompound&&(h.DEFAULT_COMPOUND_GRAVITY_STRENGTH=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.gravityCompound),null!=e.gravityRangeCompound&&(h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.gravityRangeCompound),null!=e.initialEnergyOnIncremental&&(h.DEFAULT_COOLING_FACTOR_INCREMENTAL=c.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.initialEnergyOnIncremental),null!=e.tilingCompareBy&&(h.TILING_COMPARE_BY=e.tilingCompareBy),"proof"==e.quality?u.QUALITY=2:u.QUALITY=0,h.NODE_DIMENSIONS_INCLUDE_LABELS=c.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=e.nodeDimensionsIncludeLabels,h.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!e.randomize,h.ANIMATE=c.ANIMATE=u.ANIMATE=e.animate,h.TILE=e.tile,h.TILING_PADDING_VERTICAL="function"==typeof e.tilingPaddingVertical?e.tilingPaddingVertical.call():e.tilingPaddingVertical,h.TILING_PADDING_HORIZONTAL="function"==typeof e.tilingPaddingHorizontal?e.tilingPaddingHorizontal.call():e.tilingPaddingHorizontal,h.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!0,h.PURE_INCREMENTAL=!e.randomize,u.DEFAULT_UNIFORM_LEAF_NODE_SIZES=e.uniformNodeDimensions,"transformed"==e.step&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,h.ENFORCE_CONSTRAINTS=!1,h.APPLY_LAYOUT=!1),"enforced"==e.step&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!1),"cose"==e.step&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!1,h.APPLY_LAYOUT=!0),"all"==e.step&&(e.randomize?h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!0),e.fixedNodeConstraint||e.alignmentConstraint||e.relativePlacementConstraint?h.TREE_REDUCTION_ON_INCREMENTAL=!1:h.TREE_REDUCTION_ON_INCREMENTAL=!0;var _=new i,E=_.newGraphManager();return T(E.addRoot(),n.getTopMostNodes(f),_,e),w(_,E,p),k(_,e),_.runLayout(),v}),"coseLayout");e.exports={coseLayout:d}},212:(e,t,r)=>{var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return s(e,"defineProperties"),function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}s(i,"_classCallCheck");var a=r(658),o=r(548),l=r(657).spectralLayout,u=r(816).coseLayout,c=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:s((function(e){return 4500}),"nodeRepulsion"),idealEdgeLength:s((function(e){return 50}),"idealEdgeLength"),edgeElasticity:s((function(e){return.45}),"edgeElasticity"),nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:s((function(){}),"ready"),stop:s((function(){}),"stop")}),h=function(){function e(t){i(this,e),this.options=a({},c,t)}return s(e,"Layout"),n(e,[{key:"run",value:s((function(){var e=this.options,t=e.cy,r=e.eles,n=[],i=[],a=void 0,c=[];e.fixedNodeConstraint&&(!Array.isArray(e.fixedNodeConstraint)||0==e.fixedNodeConstraint.length)&&(e.fixedNodeConstraint=void 0),e.alignmentConstraint&&(e.alignmentConstraint.vertical&&(!Array.isArray(e.alignmentConstraint.vertical)||0==e.alignmentConstraint.vertical.length)&&(e.alignmentConstraint.vertical=void 0),e.alignmentConstraint.horizontal&&(!Array.isArray(e.alignmentConstraint.horizontal)||0==e.alignmentConstraint.horizontal.length)&&(e.alignmentConstraint.horizontal=void 0)),e.relativePlacementConstraint&&(!Array.isArray(e.relativePlacementConstraint)||0==e.relativePlacementConstraint.length)&&(e.relativePlacementConstraint=void 0),(e.fixedNodeConstraint||e.alignmentConstraint||e.relativePlacementConstraint)&&(e.tile=!1,e.packComponents=!1);var h=void 0,d=!1;if(t.layoutUtilities&&e.packComponents&&((h=t.layoutUtilities("get"))||(h=t.layoutUtilities()),d=!0),r.nodes().length>0)if(d){var f=o.getTopMostNodes(e.eles.nodes());if((a=o.connectComponents(t,e.eles,f)).forEach((function(e){var t=e.boundingBox();c.push({x:t.x1+t.w/2,y:t.y1+t.h/2})})),e.randomize&&a.forEach((function(t){e.eles=t,n.push(l(e))})),"default"==e.quality||"proof"==e.quality){var p=t.collection();if(e.tile){var g=new Map,m=0,y={nodeIndexes:g,xCoords:[],yCoords:[]},v=[];if(a.forEach((function(e,t){0==e.edges().length&&(e.nodes().forEach((function(t,r){p.merge(e.nodes()[r]),t.isParent()||(y.nodeIndexes.set(e.nodes()[r].id(),m++),y.xCoords.push(e.nodes()[0].position().x),y.yCoords.push(e.nodes()[0].position().y))})),v.push(t))})),p.length>1){var x=p.boundingBox();c.push({x:x.x1+x.w/2,y:x.y1+x.h/2}),a.push(p),n.push(y);for(var b=v.length-1;b>=0;b--)a.splice(v[b],1),n.splice(v[b],1),c.splice(v[b],1)}}a.forEach((function(t,r){e.eles=t,i.push(u(e,n[r])),o.relocateComponent(c[r],i[r],e)}))}else a.forEach((function(t,r){o.relocateComponent(c[r],n[r],e)}));var C=new Set;if(a.length>1){var T=[],w=r.filter((function(e){return"none"==e.css("display")}));a.forEach((function(t,r){var a=void 0;if("draft"==e.quality&&(a=n[r].nodeIndexes),t.nodes().not(w).length>0){var s={edges:[],nodes:[]},l=void 0;t.nodes().not(w).forEach((function(t){if("draft"==e.quality)if(t.isParent()){var u=o.calcBoundingBox(t,n[r].xCoords,n[r].yCoords,a);s.nodes.push({x:u.topLeftX,y:u.topLeftY,width:u.width,height:u.height})}else l=a.get(t.id()),s.nodes.push({x:n[r].xCoords[l]-t.boundingbox().w/2,y:n[r].yCoords[l]-t.boundingbox().h/2,width:t.boundingbox().w,height:t.boundingbox().h});else i[r][t.id()]&&s.nodes.push({x:i[r][t.id()].getLeft(),y:i[r][t.id()].getTop(),width:i[r][t.id()].getWidth(),height:i[r][t.id()].getHeight()})})),t.edges().forEach((function(t){var l=t.source(),u=t.target();if("none"!=l.css("display")&&"none"!=u.css("display"))if("draft"==e.quality){var c=a.get(l.id()),h=a.get(u.id()),d=[],f=[];if(l.isParent()){var p=o.calcBoundingBox(l,n[r].xCoords,n[r].yCoords,a);d.push(p.topLeftX+p.width/2),d.push(p.topLeftY+p.height/2)}else d.push(n[r].xCoords[c]),d.push(n[r].yCoords[c]);if(u.isParent()){var g=o.calcBoundingBox(u,n[r].xCoords,n[r].yCoords,a);f.push(g.topLeftX+g.width/2),f.push(g.topLeftY+g.height/2)}else f.push(n[r].xCoords[h]),f.push(n[r].yCoords[h]);s.edges.push({startX:d[0],startY:d[1],endX:f[0],endY:f[1]})}else i[r][l.id()]&&i[r][u.id()]&&s.edges.push({startX:i[r][l.id()].getCenterX(),startY:i[r][l.id()].getCenterY(),endX:i[r][u.id()].getCenterX(),endY:i[r][u.id()].getCenterY()})})),s.nodes.length>0&&(T.push(s),C.add(r))}}));var k=h.packComponents(T,e.randomize).shifts;if("draft"==e.quality)n.forEach((function(e,t){var r=e.xCoords.map((function(e){return e+k[t].dx})),n=e.yCoords.map((function(e){return e+k[t].dy}));e.xCoords=r,e.yCoords=n}));else{var _=0;C.forEach((function(e){Object.keys(i[e]).forEach((function(t){var r=i[e][t];r.setCenter(r.getCenterX()+k[_].dx,r.getCenterY()+k[_].dy)})),_++}))}}}else{var E=e.eles.boundingBox();if(c.push({x:E.x1+E.w/2,y:E.y1+E.h/2}),e.randomize){var S=l(e);n.push(S)}"default"==e.quality||"proof"==e.quality?(i.push(u(e,n[0])),o.relocateComponent(c[0],i[0],e)):o.relocateComponent(c[0],n[0],e)}var A=s((function(t,r){if("default"==e.quality||"proof"==e.quality){"number"==typeof t&&(t=r);var a=void 0,o=void 0,s=t.data("id");return i.forEach((function(e){s in e&&(a={x:e[s].getRect().getCenterX(),y:e[s].getRect().getCenterY()},o=e[s])})),e.nodeDimensionsIncludeLabels&&(o.labelWidth&&("left"==o.labelPosHorizontal?a.x+=o.labelWidth/2:"right"==o.labelPosHorizontal&&(a.x-=o.labelWidth/2)),o.labelHeight&&("top"==o.labelPosVertical?a.y+=o.labelHeight/2:"bottom"==o.labelPosVertical&&(a.y-=o.labelHeight/2))),null==a&&(a={x:t.position("x"),y:t.position("y")}),{x:a.x,y:a.y}}var l=void 0;return n.forEach((function(e){var r=e.nodeIndexes.get(t.id());null!=r&&(l={x:e.xCoords[r],y:e.yCoords[r]})})),null==l&&(l={x:t.position("x"),y:t.position("y")}),{x:l.x,y:l.y}}),"getPositions");if("default"==e.quality||"proof"==e.quality||e.randomize){var N=o.calcParentsWithoutChildren(t,r),R=r.filter((function(e){return"none"==e.css("display")}));e.eles=r.not(R),r.nodes().not(":parent").not(R).layoutPositions(this,e,A),N.length>0&&N.forEach((function(e){e.position(A(e))}))}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}),"run")}]),e}();e.exports=h},657:(e,t,r)=>{var n=r(548),i=r(140).layoutBase.Matrix,a=r(140).layoutBase.SVD,o=s((function(e){var t=e.cy,r=e.eles,o=r.nodes(),l=r.nodes(":parent"),u=new Map,c=new Map,h=new Map,d=[],f=[],p=[],g=[],m=[],y=[],v=[],x=[],b=void 0,C=1e8,T=1e-9,w=e.piTol,k=e.samplingType,_=e.nodeSeparation,E=void 0,S=s((function(){for(var e=0,t=0,r=!1;t<E;){e=Math.floor(Math.random()*b),r=!1;for(var n=0;n<t;n++)if(g[n]==e){r=!0;break}r||(g[t]=e,t++)}}),"randomSampleCR"),A=s((function(e,t,r){for(var n=[],i=0,a=0,o=0,s=void 0,l=[],u=0,h=1,f=0;f<b;f++)l[f]=C;for(n[a]=e,l[e]=0;a>=i;){o=n[i++];for(var p=d[o],g=0;g<p.length;g++)l[s=c.get(p[g])]==C&&(l[s]=l[o]+1,n[++a]=s);y[o][t]=l[o]*_}if(r){for(var v=0;v<b;v++)y[v][t]<m[v]&&(m[v]=y[v][t]);for(var x=0;x<b;x++)m[x]>u&&(u=m[x],h=x)}return h}),"BFS"),N=s((function(e){var t=void 0;if(e){t=Math.floor(Math.random()*b);for(var r=0;r<b;r++)m[r]=C;for(var n=0;n<E;n++)g[n]=t,t=A(t,n,e)}else{S();for(var i=0;i<E;i++)A(g[i],i,e,!1)}for(var a=0;a<b;a++)for(var o=0;o<E;o++)y[a][o]*=y[a][o];for(var s=0;s<E;s++)v[s]=[];for(var l=0;l<E;l++)for(var u=0;u<E;u++)v[l][u]=y[g[u]][l]}),"allBFS"),R=s((function(){for(var e=a.svd(v),t=e.S,r=e.U,n=e.V,o=t[0]*t[0]*t[0],s=[],l=0;l<E;l++){s[l]=[];for(var u=0;u<E;u++)s[l][u]=0,l==u&&(s[l][u]=t[l]/(t[l]*t[l]+o/(t[l]*t[l])))}x=i.multMat(i.multMat(n,s),i.transpose(r))}),"sample"),L=s((function(){for(var e=void 0,t=void 0,r=[],n=[],a=[],o=[],s=0;s<b;s++)r[s]=Math.random(),n[s]=Math.random();r=i.normalize(r),n=i.normalize(n);for(var l=T,u=T,c=void 0;;){0;for(var h=0;h<b;h++)a[h]=r[h];if(r=i.multGamma(i.multL(i.multGamma(a),y,x)),e=i.dotProduct(a,r),r=i.normalize(r),l=i.dotProduct(a,r),(c=Math.abs(l/u))<=1+w&&c>=1)break;u=l}for(var d=0;d<b;d++)a[d]=r[d];for(0,u=T;;){0;for(var g=0;g<b;g++)o[g]=n[g];if(o=i.minusOp(o,i.multCons(a,i.dotProduct(a,o))),n=i.multGamma(i.multL(i.multGamma(o),y,x)),t=i.dotProduct(o,n),n=i.normalize(n),l=i.dotProduct(o,n),(c=Math.abs(l/u))<=1+w&&c>=1)break;u=l}for(var m=0;m<b;m++)o[m]=n[m];f=i.multCons(a,Math.sqrt(Math.abs(e))),p=i.multCons(o,Math.sqrt(Math.abs(t)))}),"powerIteration");n.connectComponents(t,r,n.getTopMostNodes(o),u),l.forEach((function(e){n.connectComponents(t,r,n.getTopMostNodes(e.descendants().intersection(r)),u)}));for(var I=0,M=0;M<o.length;M++)o[M].isParent()||c.set(o[M].id(),I++);var O=!0,D=!1,P=void 0;try{for(var F,B=u.keys()[Symbol.iterator]();!(O=(F=B.next()).done);O=!0){var $=F.value;c.set($,I++)}}catch(e){D=!0,P=e}finally{try{!O&&B.return&&B.return()}finally{if(D)throw P}}for(var z=0;z<c.size;z++)d[z]=[];l.forEach((function(e){for(var t=e.children().intersection(r);0==t.nodes(":childless").length;)t=t.nodes()[0].children().intersection(r);var n=0,i=t.nodes(":childless")[0].connectedEdges().length;t.nodes(":childless").forEach((function(e,t){e.connectedEdges().length<i&&(i=e.connectedEdges().length,n=t)})),h.set(e.id(),t.nodes(":childless")[n].id())})),o.forEach((function(e){var t=void 0;t=e.isParent()?c.get(h.get(e.id())):c.get(e.id()),e.neighborhood().nodes().forEach((function(n){r.intersection(e.edgesWith(n)).length>0&&(n.isParent()?d[t].push(h.get(n.id())):d[t].push(n.id()))}))}));var U=s((function(e){var r=c.get(e),n=void 0;u.get(e).forEach((function(i){n=t.getElementById(i).isParent()?h.get(i):i,d[r].push(n),d[c.get(n)].push(e)}))}),"_loop"),G=!0,j=!1,V=void 0;try{for(var W,q=u.keys()[Symbol.iterator]();!(G=(W=q.next()).done);G=!0){U(W.value)}}catch(e){j=!0,V=e}finally{try{!G&&q.return&&q.return()}finally{if(j)throw V}}var H=void 0;if((b=c.size)>2){E=b<e.sampleSize?b:e.sampleSize;for(var Y=0;Y<b;Y++)y[Y]=[];for(var X=0;X<E;X++)x[X]=[];return"draft"==e.quality||"all"==e.step?(N(k),R(),L(),H={nodeIndexes:c,xCoords:f,yCoords:p}):(c.forEach((function(e,r){f.push(t.getElementById(r).position("x")),p.push(t.getElementById(r).position("y"))})),H={nodeIndexes:c,xCoords:f,yCoords:p}),H}var K=c.keys(),Z=t.getElementById(K.next().value),Q=Z.position(),J=Z.outerWidth();if(f.push(Q.x),p.push(Q.y),2==b){var ee=t.getElementById(K.next().value).outerWidth();f.push(Q.x+J/2+ee/2+e.idealEdgeLength),p.push(Q.y)}return H={nodeIndexes:c,xCoords:f,yCoords:p}}),"spectralLayout");e.exports={spectralLayout:o}},579:(e,t,r)=>{var n=r(212),i=s((function(e){e&&e("layout","fcose",n)}),"register");typeof cytoscape<"u"&&i(cytoscape),e.exports=i},140:t=>{t.exports=e}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}return s(n,"__webpack_require__"),n(579)})()}))})),f2={L:"left",R:"right",T:"top",B:"bottom"},p2={L:s((e=>`${e},${e/2} 0,${e} 0,0`),"L"),R:s((e=>`0,${e/2} ${e},0 ${e},${e}`),"R"),T:s((e=>`0,0 ${e},0 ${e/2},${e}`),"T"),B:s((e=>`${e/2},0 ${e},${e} 0,${e}`),"B")},g2={L:s(((e,t)=>e-t+2),"L"),R:s(((e,t)=>e-2),"R"),T:s(((e,t)=>e-t+2),"T"),B:s(((e,t)=>e-2),"B")},m2=s((function(e){return v2(e)?"L"===e?"R":"L":"T"===e?"B":"T"}),"getOppositeArchitectureDirection"),y2=s((function(e){return"L"===e||"R"===e||"T"===e||"B"===e}),"isArchitectureDirection"),v2=s((function(e){return"L"===e||"R"===e}),"isArchitectureDirectionX"),x2=s((function(e){return"T"===e||"B"===e}),"isArchitectureDirectionY"),b2=s((function(e,t){let r=v2(e)&&x2(t),n=x2(e)&&v2(t);return r||n}),"isArchitectureDirectionXY"),C2=s((function(e){let t=e[0],r=e[1],n=v2(t)&&x2(r),i=x2(t)&&v2(r);return n||i}),"isArchitecturePairXY"),T2=s((function(e){return"LL"!==e&&"RR"!==e&&"TT"!==e&&"BB"!==e}),"isValidArchitectureDirectionPair"),w2=s((function(e,t){let r=`${e}${t}`;return T2(r)?r:void 0}),"getArchitectureDirectionPair"),k2=s((function([e,t],r){let n=r[0],i=r[1];return v2(n)?x2(i)?[e+("L"===n?-1:1),t+("T"===i?1:-1)]:[e+("L"===n?-1:1),t]:v2(i)?[e+("L"===i?1:-1),t+("T"===n?1:-1)]:[e,t+("T"===n?1:-1)]}),"shiftPositionByArchitectureDirectionPair"),_2=s((function(e){return"LT"===e||"TL"===e?[1,1]:"BL"===e||"LB"===e?[1,-1]:"BR"===e||"RB"===e?[-1,-1]:[-1,1]}),"getArchitectureDirectionXYFactors"),E2=s((function(e){return"service"===e.type}),"isArchitectureService"),S2=s((function(e){return"junction"===e.type}),"isArchitectureJunction"),A2=s((e=>e.data()),"edgeData"),N2=s((e=>e.data()),"nodeData"),R2=_U.architecture,L2=new Cf((()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:R2,dataStructures:void 0,elements:{}}))),I2=s((()=>{L2.reset(),CG()}),"clear"),M2=s((function({id:e,icon:t,in:r,title:n,iconText:i}){if(void 0!==L2.records.registeredIds[e])throw new Error(`The service id [${e}] is already in use by another ${L2.records.registeredIds[e]}`);if(void 0!==r){if(e===r)throw new Error(`The service [${e}] cannot be placed within itself`);if(void 0===L2.records.registeredIds[r])throw new Error(`The service [${e}]'s parent does not exist. Please make sure the parent is created before this service`);if("node"===L2.records.registeredIds[r])throw new Error(`The service [${e}]'s parent is not a group`)}L2.records.registeredIds[e]="node",L2.records.nodes[e]={id:e,type:"service",icon:t,iconText:i,title:n,edges:[],in:r}}),"addService"),O2=s((()=>Object.values(L2.records.nodes).filter(E2)),"getServices"),D2=s((function({id:e,in:t}){L2.records.registeredIds[e]="node",L2.records.nodes[e]={id:e,type:"junction",edges:[],in:t}}),"addJunction"),P2=s((()=>Object.values(L2.records.nodes).filter(S2)),"getJunctions"),F2=s((()=>Object.values(L2.records.nodes)),"getNodes"),B2=s((e=>L2.records.nodes[e]),"getNode"),$2=s((function({id:e,icon:t,in:r,title:n}){if(void 0!==L2.records.registeredIds[e])throw new Error(`The group id [${e}] is already in use by another ${L2.records.registeredIds[e]}`);if(void 0!==r){if(e===r)throw new Error(`The group [${e}] cannot be placed within itself`);if(void 0===L2.records.registeredIds[r])throw new Error(`The group [${e}]'s parent does not exist. Please make sure the parent is created before this group`);if("node"===L2.records.registeredIds[r])throw new Error(`The group [${e}]'s parent is not a group`)}L2.records.registeredIds[e]="group",L2.records.groups[e]={id:e,icon:t,title:n,in:r}}),"addGroup"),z2=s((()=>Object.values(L2.records.groups)),"getGroups"),U2=s((function({lhsId:e,rhsId:t,lhsDir:r,rhsDir:n,lhsInto:i,rhsInto:a,lhsGroup:o,rhsGroup:s,title:l}){if(!y2(r))throw new Error(`Invalid direction given for left hand side of edge ${e}--${t}. Expected (L,R,T,B) got ${r}`);if(!y2(n))throw new Error(`Invalid direction given for right hand side of edge ${e}--${t}. Expected (L,R,T,B) got ${n}`);if(void 0===L2.records.nodes[e]&&void 0===L2.records.groups[e])throw new Error(`The left-hand id [${e}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(void 0===L2.records.nodes[t]&&void 0===L2.records.groups[e])throw new Error(`The right-hand id [${t}] does not yet exist. Please create the service/group before declaring an edge to it.`);let u=L2.records.nodes[e].in,c=L2.records.nodes[t].in;if(o&&u&&c&&u==c)throw new Error(`The left-hand id [${e}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(s&&u&&c&&u==c)throw new Error(`The right-hand id [${t}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);let h={lhsId:e,lhsDir:r,lhsInto:i,lhsGroup:o,rhsId:t,rhsDir:n,rhsInto:a,rhsGroup:s,title:l};L2.records.edges.push(h),L2.records.nodes[e]&&L2.records.nodes[t]&&(L2.records.nodes[e].edges.push(L2.records.edges[L2.records.edges.length-1]),L2.records.nodes[t].edges.push(L2.records.edges[L2.records.edges.length-1]))}),"addEdge"),G2=s((()=>L2.records.edges),"getEdges"),j2=s((()=>{if(void 0===L2.records.dataStructures){let e=Object.entries(L2.records.nodes).reduce(((e,[t,r])=>(e[t]=r.edges.reduce(((e,r)=>{if(r.lhsId===t){let t=w2(r.lhsDir,r.rhsDir);t&&(e[t]=r.rhsId)}else{let t=w2(r.rhsDir,r.lhsDir);t&&(e[t]=r.lhsId)}return e}),{}),e)),{}),t=Object.keys(e)[0],r={[t]:1},n=Object.keys(e).reduce(((e,r)=>r===t?e:{...e,[r]:1}),{}),i=s((t=>{let i={[t]:[0,0]},a=[t];for(;a.length>0;){let t=a.shift();if(t){r[t]=1,delete n[t];let o=e[t],[s,l]=i[t];Object.entries(o).forEach((([e,t])=>{r[t]||(i[t]=k2([s,l],e),a.push(t))}))}}return i}),"BFS"),a=[i(t)];for(;Object.keys(n).length>0;)a.push(i(Object.keys(n)[0]));L2.records.dataStructures={adjList:e,spatialMaps:a}}return L2.records.dataStructures}),"getDataStructures"),V2=s(((e,t)=>{L2.records.elements[e]=t}),"setElementForId"),W2=s((e=>L2.records.elements[e]),"getElementById"),q2={clear:I2,setDiagramTitle:EG,getDiagramTitle:SG,setAccTitle:TG,getAccTitle:wG,setAccDescription:kG,getAccDescription:_G,addService:M2,getServices:O2,addJunction:D2,getJunctions:P2,getNodes:F2,getNode:B2,addGroup:$2,getGroups:z2,addEdge:U2,getEdges:G2,setElementForId:V2,getElementById:W2,getDataStructures:j2};function H2(e){let t=RG().architecture;return t?.[e]?t[e]:R2[e]}s(H2,"getConfigField");var Y2=s(((e,t)=>{Tf(e,t),e.groups.map(t.addGroup),e.services.map((e=>t.addService({...e,type:"service"}))),e.junctions.map((e=>t.addJunction({...e,type:"junction"}))),e.edges.map(t.addEdge)}),"populateDb"),X2={parse:s((async e=>{let t=await $$("architecture",e);rz.debug(t),Y2(t,q2)}),"parse")},K2=s((e=>`\n  .edge {\n    stroke-width: ${e.archEdgeWidth};\n    stroke: ${e.archEdgeColor};\n    fill: none;\n  }\n\n  .arrow {\n    fill: ${e.archEdgeArrowColor};\n  }\n\n  .node-bkg {\n    fill: none;\n    stroke: ${e.archGroupBorderColor};\n    stroke-width: ${e.archGroupBorderWidth};\n    stroke-dasharray: 8;\n  }\n  .node-icon-text {\n    display: flex; \n    align-items: center;\n  }\n  \n  .node-icon-text > div {\n    color: #fff;\n    margin: 1px;\n    height: fit-content;\n    text-align: center;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n`),"getStyles"),Z2=K2,Q2=d(d2(),1),J2=s((e=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${e}</g>`),"wrapIcon"),e5={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:J2('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:J2('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:J2('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:J2('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:J2('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:n0,blank:{body:J2("")}}},t5=s((async function(e,t){let r=H2("padding"),n=H2("iconSize"),i=n/2,a=n/6,o=a/2;await Promise.all(t.edges().map((async t=>{let{source:n,sourceDir:s,sourceArrow:l,sourceGroup:u,target:c,targetDir:h,targetArrow:d,targetGroup:f,label:p}=A2(t),{x:g,y:m}=t[0].sourceEndpoint(),{x:y,y:v}=t[0].midpoint(),{x:x,y:b}=t[0].targetEndpoint(),C=r+4;if(u&&(v2(s)?g+="L"===s?-C:C:m+="T"===s?-C:C+18),f&&(v2(h)?x+="L"===h?-C:C:b+="T"===h?-C:C+18),!u&&"junction"===q2.getNode(n)?.type&&(v2(s)?g+="L"===s?i:-i:m+="T"===s?i:-i),!f&&"junction"===q2.getNode(c)?.type&&(v2(h)?x+="L"===h?i:-i:b+="T"===h?i:-i),t[0]._private.rscratch){let t=e.insert("g");if(t.insert("path").attr("d",`M ${g},${m} L ${y},${v} L${x},${b} `).attr("class","edge"),l){let e=v2(s)?g2[s](g,a):g-o,r=x2(s)?g2[s](m,a):m-o;t.insert("polygon").attr("points",p2[s](a)).attr("transform",`translate(${e},${r})`).attr("class","arrow")}if(d){let e=v2(h)?g2[h](x,a):x-o,r=x2(h)?g2[h](b,a):b-o;t.insert("polygon").attr("points",p2[h](a)).attr("transform",`translate(${e},${r})`).attr("class","arrow")}if(p){let e=b2(s,h)?"XY":v2(s)?"X":"Y",r=0;r="X"===e?Math.abs(g-x):"Y"===e?Math.abs(m-b)/1.5:Math.abs(g-x)/2;let n=t.append("g");if(await n2(n,p,{useHtmlLabels:!1,width:r,classes:"architecture-service-label"},RG()),n.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),"X"===e)n.attr("transform","translate("+y+", "+v+")");else if("Y"===e)n.attr("transform","translate("+y+", "+v+") rotate(-90)");else if("XY"===e){let e=w2(s,h);if(e&&C2(e)){let t=n.node().getBoundingClientRect(),[r,i]=_2(e);n.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*r*i*45})`);let a=n.node().getBoundingClientRect();n.attr("transform",`\n                translate(${y}, ${v-t.height/2})\n                translate(${r*a.width/2}, ${i*a.height/2})\n                rotate(${-1*r*i*45}, 0, ${t.height/2})\n              `)}}}}})))}),"drawEdges"),r5=s((async function(e,t){let r=.75*H2("padding"),n=H2("fontSize"),i=H2("iconSize")/2;await Promise.all(t.nodes().map((async t=>{let a=N2(t);if("group"===a.type){let{h:o,w:s,x1:l,y1:u}=t.boundingBox();e.append("rect").attr("x",l+i).attr("y",u+i).attr("width",s).attr("height",o).attr("class","node-bkg");let c=e.append("g"),h=l,d=u;if(a.icon){let e=c.append("g");e.html(`<g>${await l0(a.icon,{height:r,width:r,fallbackPrefix:e5.prefix})}</g>`),e.attr("transform","translate("+(h+i+1)+", "+(d+i+1)+")"),h+=r,d+=n/2-1-2}if(a.label){let e=c.append("g");await n2(e,a.label,{useHtmlLabels:!1,width:s,classes:"architecture-service-label"},RG()),e.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),e.attr("transform","translate("+(h+i+4)+", "+(d+i+2)+")")}}})))}),"drawGroups"),n5=s((async function(e,t,r){for(let n of r){let r=t.append("g"),i=H2("iconSize");if(n.title){let e=r.append("g");await n2(e,n.title,{useHtmlLabels:!1,width:1.5*i,classes:"architecture-service-label"},RG()),e.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),e.attr("transform","translate("+i/2+", "+i+")")}let a=r.append("g");if(n.icon)a.html(`<g>${await l0(n.icon,{height:i,width:i,fallbackPrefix:e5.prefix})}</g>`);else if(n.iconText){a.html(`<g>${await l0("blank",{height:i,width:i,fallbackPrefix:e5.prefix})}</g>`);let e=a.append("g").append("foreignObject").attr("width",i).attr("height",i).append("div").attr("class","node-icon-text").attr("style",`height: ${i}px;`).append("div").html(n.iconText),t=parseInt(window.getComputedStyle(e.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;e.attr("style",`-webkit-line-clamp: ${Math.floor((i-2)/t)};`)}else a.append("path").attr("class","node-bkg").attr("id","node-"+n.id).attr("d",`M0 ${i} v${-i} q0,-5 5,-5 h${i} q5,0 5,5 v${i} H0 Z`);r.attr("class","architecture-service");let{width:o,height:s}=r._groups[0][0].getBBox();n.width=o,n.height=s,e.setElementForId(n.id,r)}return 0}),"drawServices"),i5=s((function(e,t,r){r.forEach((r=>{let n=t.append("g"),i=H2("iconSize");n.append("g").append("rect").attr("id","node-"+r.id).attr("fill-opacity","0").attr("width",i).attr("height",i),n.attr("class","architecture-junction");let{width:a,height:o}=n._groups[0][0].getBBox();n.width=a,n.height=o,e.setElementForId(r.id,n)}))}),"drawJunctions");function a5(e,t){e.forEach((e=>{t.add({group:"nodes",data:{type:"service",id:e.id,icon:e.icon,label:e.title,parent:e.in,width:H2("iconSize"),height:H2("iconSize")},classes:"node-service"})}))}function o5(e,t){e.forEach((e=>{t.add({group:"nodes",data:{type:"junction",id:e.id,parent:e.in,width:H2("iconSize"),height:H2("iconSize")},classes:"node-junction"})}))}function s5(e,t){t.nodes().map((t=>{let r=N2(t);"group"!==r.type&&(r.x=t.position().x,r.y=t.position().y,e.getElementById(r.id).attr("transform","translate("+(r.x||0)+","+(r.y||0)+")"))}))}function l5(e,t){e.forEach((e=>{t.add({group:"nodes",data:{type:"group",id:e.id,icon:e.icon,label:e.title,parent:e.in},classes:"node-group"})}))}function u5(e,t){e.forEach((e=>{let{lhsId:r,rhsId:n,lhsInto:i,lhsGroup:a,rhsInto:o,lhsDir:s,rhsDir:l,rhsGroup:u,title:c}=e,h=b2(e.lhsDir,e.rhsDir)?"segments":"straight",d={id:`${r}-${n}`,label:c,source:r,sourceDir:s,sourceArrow:i,sourceGroup:a,sourceEndpoint:"L"===s?"0 50%":"R"===s?"100% 50%":"T"===s?"50% 0":"50% 100%",target:n,targetDir:l,targetArrow:o,targetGroup:u,targetEndpoint:"L"===l?"0 50%":"R"===l?"100% 50%":"T"===l?"50% 0":"50% 100%"};t.add({group:"edges",data:d,classes:h})}))}function c5(e){let t=e.map((e=>{let t={},r={};return Object.entries(e).forEach((([e,[n,i]])=>{t[i]||(t[i]=[]),r[n]||(r[n]=[]),t[i].push(e),r[n].push(e)})),{horiz:Object.values(t).filter((e=>e.length>1)),vert:Object.values(r).filter((e=>e.length>1))}})),[r,n]=t.reduce((([e,t],{horiz:r,vert:n})=>[[...e,...r],[...t,...n]]),[[],[]]);return{horizontal:r,vertical:n}}function h5(e){let t=[],r=s((e=>`${e[0]},${e[1]}`),"posToStr"),n=s((e=>e.split(",").map((e=>parseInt(e)))),"strToPos");return e.forEach((e=>{let i=Object.fromEntries(Object.entries(e).map((([e,t])=>[r(t),e]))),a=[r([0,0])],o={},s={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;a.length>0;){let e=a.shift();if(e){o[e]=1;let l=i[e];if(l){let u=n(e);Object.entries(s).forEach((([e,n])=>{let s=r([u[0]+n[0],u[1]+n[1]]),c=i[s];c&&!o[s]&&(a.push(s),t.push({[f2[e]]:c,[f2[m2(e)]]:l,gap:1.5*H2("iconSize")}))}))}}}})),t}function d5(e,t,r,n,{spatialMaps:i}){return new Promise((a=>{let o=gW("body").append("div").attr("id","cy").attr("style","display:none"),l=bf({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${H2("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${H2("padding")}px`}}]});o.remove(),l5(r,l),a5(e,l),o5(t,l),u5(n,l);let u=c5(i),c=h5(i),h=l.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(e){let[t,r]=e.connectedNodes(),{parent:n}=N2(t),{parent:i}=N2(r);return n===i?1.5*H2("iconSize"):.5*H2("iconSize")},edgeElasticity(e){let[t,r]=e.connectedNodes(),{parent:n}=N2(t),{parent:i}=N2(r);return n===i?.45:.001},alignmentConstraint:u,relativePlacementConstraint:c});h.one("layoutstop",(()=>{function e(e,t,r,n){let i,a,{x:o,y:s}=e,{x:l,y:u}=t;a=(n-s+(o-r)*(s-u)/(o-l))/Math.sqrt(1+Math.pow((s-u)/(o-l),2)),i=Math.sqrt(Math.pow(n-s,2)+Math.pow(r-o,2)-Math.pow(a,2)),i/=Math.sqrt(Math.pow(l-o,2)+Math.pow(u-s,2));let c=(l-o)*(n-s)-(u-s)*(r-o);switch(!0){case c>=0:c=1;break;case c<0:c=-1}let h=(l-o)*(r-o)+(u-s)*(n-s);switch(!0){case h>=0:h=1;break;case h<0:h=-1}return a=Math.abs(a)*c,i*=h,{distances:a,weights:i}}s(e,"getSegmentWeights"),l.startBatch();for(let t of Object.values(l.edges()))if(t.data?.()){let{x:r,y:n}=t.source().position(),{x:i,y:a}=t.target().position();if(r!==i&&n!==a){let r=t.sourceEndpoint(),n=t.targetEndpoint(),{sourceDir:i}=A2(t),[a,o]=x2(i)?[r.x,n.y]:[n.x,r.y],{weights:s,distances:l}=e(r,n,a,o);t.style("segment-distances",l),t.style("segment-weights",s)}}l.endBatch(),h.run()})),h.run(),l.ready((e=>{rz.info("Ready",e),a(l)}))}))}o0([{name:e5.prefix,icons:e5}]),bf.use(Q2.default),s(a5,"addServices"),s(o5,"addJunctions"),s(s5,"positionNodes"),s(l5,"addGroups"),s(u5,"addEdges"),s(c5,"getAlignments"),s(h5,"getRelativeConstraints"),s(d5,"layoutArchitecture");var f5=s((async(e,t,r,n)=>{let i=n.db,a=i.getServices(),o=i.getJunctions(),s=i.getGroups(),l=i.getEdges(),u=i.getDataStructures(),c=EJ(t),h=c.append("g");h.attr("class","architecture-edges");let d=c.append("g");d.attr("class","architecture-services");let f=c.append("g");f.attr("class","architecture-groups"),await n5(i,d,a),i5(i,d,o);let p=await d5(a,o,s,l,u);await t5(h,p),await r5(f,p),s5(i,p),fG(void 0,c,H2("padding"),H2("useMaxWidth"))}),"draw"),p5={parser:X2,db:q2,renderer:{draw:f5},styles:Z2};export{p5 as diagram};export default null;
